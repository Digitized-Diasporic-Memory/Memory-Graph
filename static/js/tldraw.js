(function(){
shadow$provide[584]=function(xa,V,Ta,E){function p(r,B,C){var a,G={},v=null,k=null;void 0!==C&&(v=""+C);void 0!==B.key&&(v=""+B.key);void 0!==B.ref&&(k=B.ref);for(a in B)q.call(B,a)&&!d.hasOwnProperty(a)&&(G[a]=B[a]);if(r&&r.defaultProps)for(a in B=r.defaultProps,B)void 0===G[a]&&(G[a]=B[a]);return{$$typeof:S,type:r,key:v,ref:k,props:G,_owner:A.current}}V(19);xa=V(22);var S=60103;E.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(V=Symbol.for,S=V("react.element"),E.Fragment=V("react.fragment"));
var A=xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q=Object.prototype.hasOwnProperty,d={key:!0,ref:!0,__self:!0,__source:!0};E.jsx=p;E.jsxs=p};
shadow$provide[586]=function(xa,V,Ta,E){Ta.exports=V(584)};
shadow$provide[587]=function(xa,V,Ta,E){function p(mc){for(var Dd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+mc,vd=1;vd<arguments.length;vd++)Dd+="\x26args[]\x3d"+encodeURIComponent(arguments[vd]);return"Minified React error #"+mc+"; visit "+Dd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(mc){if(null==mc)return null;if("function"===typeof mc)return mc.displayName||mc.name||null;if("string"===typeof mc)return mc;
switch(mc){case M:return"Fragment";case aa:return"Portal";case D:return"Profiler";case Q:return"StrictMode";case W:return"Suspense";case F:return"SuspenseList"}if("object"===typeof mc)switch(mc.$$typeof){case P:return(mc.displayName||"Context")+".Consumer";case O:return(mc._context.displayName||"Context")+".Provider";case ba:var Dd=mc.render;Dd=Dd.displayName||Dd.name||"";return mc.displayName||(""!==Dd?"ForwardRef("+Dd+")":"ForwardRef");case ha:return S(mc.type);case Z:return S(mc._render);case K:Dd=
mc._payload;mc=mc._init;try{return S(mc(Dd))}catch(vd){}}return null}function A(mc,Dd){for(var vd=mc._threadCount|0;vd<=Dd;vd++)mc[vd]=mc._currentValue2,mc._threadCount=vd+1}function q(mc,Dd,vd,Zd){if(Zd&&(Zd=mc.contextType,"object"===typeof Zd&&null!==Zd))return A(Zd,vd),Zd[vd];if(mc=mc.contextTypes){vd={};for(var ud in mc)vd[ud]=Dd[ud];Dd=vd}else Dd=za;return Dd}function d(mc){if(Fa.call(Ya,mc))return!0;if(Fa.call(Oa,mc))return!1;if(Ua.test(mc))return Ya[mc]=!0;Oa[mc]=!0;return!1}function r(mc,
Dd,vd,Zd){if(null!==vd&&0===vd.type)return!1;switch(typeof Dd){case "function":case "symbol":return!0;case "boolean":if(Zd)return!1;if(null!==vd)return!vd.acceptsBooleans;mc=mc.toLowerCase().slice(0,5);return"data-"!==mc&&"aria-"!==mc;default:return!1}}function B(mc,Dd,vd,Zd){if(null===Dd||"undefined"===typeof Dd||r(mc,Dd,vd,Zd))return!0;if(Zd)return!1;if(null!==vd)switch(vd.type){case 3:return!Dd;case 4:return!1===Dd;case 5:return isNaN(Dd);case 6:return isNaN(Dd)||1>Dd}return!1}function C(mc,Dd,
vd,Zd,ud,Qd,md){this.acceptsBooleans=2===Dd||3===Dd||4===Dd;this.attributeName=Zd;this.attributeNamespace=ud;this.mustUseProperty=vd;this.propertyName=mc;this.type=Dd;this.sanitizeURL=Qd;this.removeEmptyString=md}function a(mc){return mc[1].toUpperCase()}function G(mc){if("boolean"===typeof mc||"number"===typeof mc)return""+mc;mc=""+mc;var Dd=db.exec(mc);if(Dd){var vd="",Zd,ud=0;for(Zd=Dd.index;Zd<mc.length;Zd++){switch(mc.charCodeAt(Zd)){case 34:Dd="\x26quot;";break;case 38:Dd="\x26amp;";break;case 39:Dd=
"\x26#x27;";break;case 60:Dd="\x26lt;";break;case 62:Dd="\x26gt;";break;default:continue}ud!==Zd&&(vd+=mc.substring(ud,Zd));ud=Zd+1;vd+=Dd}mc=ud!==Zd?vd+mc.substring(ud,Zd):vd}return mc}function v(mc,Dd){var vd=Ma.hasOwnProperty(mc)?Ma[mc]:null,Zd;if(Zd="style"!==mc)Zd=null!==vd?0===vd.type:!(2<mc.length)||"o"!==mc[0]&&"O"!==mc[0]||"n"!==mc[1]&&"N"!==mc[1]?!1:!0;if(Zd||B(mc,Dd,vd,!1))return"";if(null!==vd){mc=vd.attributeName;Zd=vd.type;if(3===Zd||4===Zd&&!0===Dd)return mc+'\x3d""';vd.sanitizeURL&&
(Dd=""+Dd);return mc+'\x3d"'+(G(Dd)+'"')}return d(mc)?mc+'\x3d"'+(G(Dd)+'"'):""}function k(mc,Dd){return mc===Dd&&(0!==mc||1/mc===1/Dd)||mc!==mc&&Dd!==Dd}function h(){if(null===pa)throw Error(p(321));return pa}function f(){if(0<yb)throw Error(p(312));return{memoizedState:null,queue:null,next:null}}function w(){null===sa?null===Da?(Ba=!1,Da=sa=f()):(Ba=!0,sa=Da):null===sa.next?(Ba=!1,sa=sa.next=f()):(Ba=!0,sa=sa.next);return sa}function x(mc,Dd,vd,Zd){for(;Ka;)Ka=!1,yb+=1,sa=null,vd=mc(Dd,Zd);I();
return vd}function I(){pa=null;Ka=!1;Da=null;yb=0;sa=Sa=null}function z(mc,Dd){return"function"===typeof Dd?Dd(mc):Dd}function u(mc,Dd,vd){pa=h();sa=w();if(Ba){var Zd=sa.queue;Dd=Zd.dispatch;if(null!==Sa&&(vd=Sa.get(Zd),void 0!==vd)){Sa.delete(Zd);Zd=sa.memoizedState;do Zd=mc(Zd,vd.action),vd=vd.next;while(null!==vd);sa.memoizedState=Zd;return[Zd,Dd]}return[sa.memoizedState,Dd]}mc=mc===z?"function"===typeof Dd?Dd():Dd:void 0!==vd?vd(Dd):Dd;sa.memoizedState=mc;mc=sa.queue={last:null,dispatch:null};
mc=mc.dispatch=m.bind(null,pa,mc);return[sa.memoizedState,mc]}function t(mc,Dd){pa=h();sa=w();Dd=void 0===Dd?null:Dd;if(null!==sa){var vd=sa.memoizedState;if(null!==vd&&null!==Dd){var Zd=vd[1];a:if(null===Zd)Zd=!1;else{for(var ud=0;ud<Zd.length&&ud<Dd.length;ud++)if(!Na(Dd[ud],Zd[ud])){Zd=!1;break a}Zd=!0}if(Zd)return vd[0]}}mc=mc();sa.memoizedState=[mc,Dd];return mc}function m(mc,Dd,vd){if(!(25>yb))throw Error(p(301));if(mc===pa)if(Ka=!0,mc={action:vd,next:null},null===Sa&&(Sa=new Map),vd=Sa.get(Dd),
void 0===vd)Sa.set(Dd,mc);else{for(Dd=vd;null!==Dd.next;)Dd=Dd.next;Dd.next=mc}}function R(){}function ka(mc){switch(mc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L(mc){if(void 0===mc||null===mc)return mc;var Dd="";H.Children.forEach(mc,function(vd){null!=vd&&(Dd+=vd)});return Dd}function na(mc,Dd){if(void 0===mc)throw Error(p(152,S(Dd)||"Component"));}function Y(mc,Dd,vd){function Zd(md,
Td){var Lb=Td.prototype&&Td.prototype.isReactComponent,dc=q(Td,Dd,vd,Lb),Vb=[],ob=!1,kb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Vb)return null},enqueueReplaceState:function(qe,td){ob=!0;Vb=[td]},enqueueSetState:function(qe,td){if(null===Vb)return null;Vb.push(td)}};if(Lb){if(Lb=new Td(md.props,dc,kb),"function"===typeof Td.getDerivedStateFromProps){var $b=Td.getDerivedStateFromProps.call(null,md.props,Lb.state);null!=$b&&(Lb.state=fa({},Lb.state,$b))}}else if(pa={},
Lb=Td(md.props,dc,kb),Lb=x(Td,md.props,Lb,dc),null==Lb||null==Lb.render){mc=Lb;na(mc,Td);return}Lb.props=md.props;Lb.context=dc;Lb.updater=kb;kb=Lb.state;void 0===kb&&(Lb.state=kb=null);if("function"===typeof Lb.UNSAFE_componentWillMount||"function"===typeof Lb.componentWillMount)if("function"===typeof Lb.componentWillMount&&"function"!==typeof Td.getDerivedStateFromProps&&Lb.componentWillMount(),"function"===typeof Lb.UNSAFE_componentWillMount&&"function"!==typeof Td.getDerivedStateFromProps&&Lb.UNSAFE_componentWillMount(),
Vb.length){kb=Vb;var rc=ob;Vb=null;ob=!1;if(rc&&1===kb.length)Lb.state=kb[0];else{$b=rc?kb[0]:Lb.state;var Sc=!0;for(rc=rc?1:0;rc<kb.length;rc++){var dd=kb[rc];dd="function"===typeof dd?dd.call(Lb,$b,md.props,dc):dd;null!=dd&&(Sc?(Sc=!1,$b=fa({},$b,dd)):fa($b,dd))}Lb.state=$b}}else Vb=null;mc=Lb.render();na(mc,Td);if("function"===typeof Lb.getChildContext&&(md=Td.childContextTypes,"object"===typeof md)){var Md=Lb.getChildContext(),be;for(be in Md)if(!(be in md))throw Error(p(108,S(Td)||"Unknown",
be));}Md&&(Dd=fa({},Dd,Md))}for(;H.isValidElement(mc);){var ud=mc,Qd=ud.type;if("function"!==typeof Qd)break;Zd(ud,Qd)}return{child:mc,context:Dd}}var fa=V(19),H=V(22),aa=60106,M=60107,Q=60108,D=60114,O=60109,P=60110,ba=60112,W=60113,F=60120,ha=60115,K=60116,Z=60121,ea=60117,da=60119,qa=60129,Aa=60131;"function"===typeof Symbol&&Symbol.for&&(xa=Symbol.for,aa=xa("react.portal"),M=xa("react.fragment"),Q=xa("react.strict_mode"),D=xa("react.profiler"),O=xa("react.provider"),P=xa("react.context"),ba=xa("react.forward_ref"),
W=xa("react.suspense"),F=xa("react.suspense_list"),ha=xa("react.memo"),K=xa("react.lazy"),Z=xa("react.block"),ea=xa("react.fundamental"),da=xa("react.scope"),qa=xa("react.debug_trace_mode"),Aa=xa("react.legacy_hidden"));xa=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var za={},Ha=new Uint16Array(16);for(V=0;15>V;V++)Ha[V]=V+1;Ha[15]=0;var Ua=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Fa=Object.prototype.hasOwnProperty,Oa={},Ya={},Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(mc){Ma[mc]=new C(mc,0,!1,mc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(mc){var Dd=mc[0];Ma[Dd]=new C(Dd,1,!1,mc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(mc){Ma[mc]=
new C(mc,2,!1,mc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(mc){Ma[mc]=new C(mc,2,!1,mc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(mc){Ma[mc]=new C(mc,3,!1,mc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(mc){Ma[mc]=new C(mc,3,!0,mc,null,!1,!1)});["capture","download"].forEach(function(mc){Ma[mc]=new C(mc,4,!1,mc,null,!1,!1)});["cols","rows","size","span"].forEach(function(mc){Ma[mc]=new C(mc,6,!1,mc,null,!1,!1)});["rowSpan","start"].forEach(function(mc){Ma[mc]=new C(mc,5,!1,mc.toLowerCase(),null,!1,!1)});var fb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(mc){var Dd=
mc.replace(fb,a);Ma[Dd]=new C(Dd,1,!1,mc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(mc){var Dd=mc.replace(fb,a);Ma[Dd]=new C(Dd,1,!1,mc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(mc){var Dd=mc.replace(fb,a);Ma[Dd]=new C(Dd,1,!1,mc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(mc){Ma[mc]=new C(mc,1,!1,mc.toLowerCase(),null,!1,!1)});
Ma.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(mc){Ma[mc]=new C(mc,1,!1,mc.toLowerCase(),null,!0,!0)});var db=/["'&<>]/,Na="function"===typeof Object.is?Object.is:k,pa=null,Da=null,sa=null,Ba=!1,Ka=!1,Sa=null,yb=0,hb=null,Mb={readContext:function(mc){var Dd=hb.threadID;A(mc,Dd);return mc[Dd]},useContext:function(mc){h();var Dd=hb.threadID;A(mc,Dd);return mc[Dd]},useMemo:t,useReducer:u,useRef:function(mc){pa=
h();sa=w();var Dd=sa.memoizedState;return null===Dd?(mc={current:mc},sa.memoizedState=mc):Dd},useState:function(mc){return u(z,mc)},useLayoutEffect:function(){},useCallback:function(mc,Dd){return t(function(){return mc},Dd)},useImperativeHandle:R,useEffect:R,useDebugValue:R,useDeferredValue:function(mc){h();return mc},useTransition:function(){h();return[function(mc){mc()},!1]},useOpaqueIdentifier:function(){return(hb.identifierPrefix||"")+"R:"+(hb.uniqueID++).toString(36)},useMutableSource:function(mc,
Dd){h();return Dd(mc._source)}},Ub={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},fc=fa({menuitem:!0},Ub),Pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lb=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(mc){lb.forEach(function(Dd){Dd=Dd+mc.charAt(0).toUpperCase()+mc.substring(1);Pa[Dd]=Pa[mc]})});var mb=/([A-Z])/g,Xb=/^ms-/,Hc=H.Children.toArray,
bd=xa.ReactCurrentDispatcher,Mc={listing:!0,pre:!0,textarea:!0},Eb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,vc={},Tc={},id=Object.prototype.hasOwnProperty,Ld={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Jd=function(){function mc(vd,Zd,ud){H.isValidElement(vd)?vd.type!==M?vd=[vd]:(vd=vd.props.children,vd=H.isValidElement(vd)?[vd]:Hc(vd)):vd=Hc(vd);vd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:vd,childIndex:0,context:za,footer:""};
var Qd=Ha[0];if(0===Qd){var md=Ha;Qd=md.length;var Td=2*Qd;if(!(65536>=Td))throw Error(p(304));var Lb=new Uint16Array(Td);Lb.set(md);Ha=Lb;Ha[0]=Qd+1;for(md=Qd;md<Td-1;md++)Ha[md]=md+1;Ha[Td-1]=0}else Ha[0]=Ha[Qd];this.threadID=Qd;this.stack=[vd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Zd;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=ud&&ud.identifierPrefix||""}
var Dd=mc.prototype;Dd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var vd=this.threadID;Ha[vd]=Ha[0];Ha[0]=vd}};Dd.pushProvider=function(vd){var Zd=++this.contextIndex,ud=vd.type._context,Qd=this.threadID;A(ud,Qd);var md=ud[Qd];this.contextStack[Zd]=ud;this.contextValueStack[Zd]=md;ud[Qd]=vd.props.value};Dd.popProvider=function(){var vd=this.contextIndex,Zd=this.contextStack[vd],ud=this.contextValueStack[vd];this.contextStack[vd]=null;this.contextValueStack[vd]=
null;this.contextIndex--;Zd[this.threadID]=ud};Dd.clearProviders=function(){for(var vd=this.contextIndex;0<=vd;vd--)this.contextStack[vd][this.threadID]=this.contextValueStack[vd]};Dd.read=function(vd){if(this.exhausted)return null;var Zd=hb;hb=this;var ud=bd.current;bd.current=Mb;try{for(var Qd=[""],md=!1;Qd[0].length<vd;){if(0===this.stack.length){this.exhausted=!0;var Td=this.threadID;Ha[Td]=Ha[0];Ha[0]=Td;break}var Lb=this.stack[this.stack.length-1];if(md||Lb.childIndex>=Lb.children.length){var dc=
Lb.footer;""!==dc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Lb.type)this.currentSelectValue=null;else if(null!=Lb.type&&null!=Lb.type.type&&Lb.type.type.$$typeof===O)this.popProvider(Lb.type);else if(Lb.type===W){this.suspenseDepth--;var Vb=Qd.pop();if(md){md=!1;var ob=Lb.fallbackFrame;if(!ob)throw Error(p(303));this.stack.push(ob);Qd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Qd[this.suspenseDepth]+=Vb}Qd[this.suspenseDepth]+=dc}else{var kb=Lb.children[Lb.childIndex++],
$b="";try{$b+=this.render(kb,Lb.context,Lb.domNamespace)}catch(rc){if(null!=rc&&"function"===typeof rc.then)throw Error(p(294));throw rc;}finally{}Qd.length<=this.suspenseDepth&&Qd.push("");Qd[this.suspenseDepth]+=$b}}return Qd[0]}finally{bd.current=ud,hb=Zd,I()}};Dd.render=function(vd,Zd,ud){if("string"===typeof vd||"number"===typeof vd){ud=""+vd;if(""===ud)return"";if(this.makeStaticMarkup)return G(ud);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+G(ud);this.previousWasTextNode=!0;return G(ud)}Zd=
Y(vd,Zd,this.threadID);vd=Zd.child;Zd=Zd.context;if(null===vd||!1===vd)return"";if(!H.isValidElement(vd)){if(null!=vd&&null!=vd.$$typeof){ud=vd.$$typeof;if(ud===aa)throw Error(p(257));throw Error(p(258,ud.toString()));}vd=Hc(vd);this.stack.push({type:null,domNamespace:ud,children:vd,childIndex:0,context:Zd,footer:""});return""}var Qd=vd.type;if("string"===typeof Qd)return this.renderDOM(vd,Zd,ud);switch(Qd){case Aa:case qa:case Q:case D:case F:case M:return vd=Hc(vd.props.children),this.stack.push({type:null,
domNamespace:ud,children:vd,childIndex:0,context:Zd,footer:""}),"";case W:throw Error(p(294));case da:throw Error(p(343));}if("object"===typeof Qd&&null!==Qd)switch(Qd.$$typeof){case ba:pa={};var md=Qd.render(vd.props,vd.ref);md=x(Qd.render,vd.props,md,vd.ref);md=Hc(md);this.stack.push({type:null,domNamespace:ud,children:md,childIndex:0,context:Zd,footer:""});return"";case ha:return vd=[H.createElement(Qd.type,fa({ref:vd.ref},vd.props))],this.stack.push({type:null,domNamespace:ud,children:vd,childIndex:0,
context:Zd,footer:""}),"";case O:return Qd=Hc(vd.props.children),ud={type:vd,domNamespace:ud,children:Qd,childIndex:0,context:Zd,footer:""},this.pushProvider(vd),this.stack.push(ud),"";case P:Qd=vd.type;md=vd.props;var Td=this.threadID;A(Qd,Td);Qd=Hc(md.children(Qd[Td]));this.stack.push({type:vd,domNamespace:ud,children:Qd,childIndex:0,context:Zd,footer:""});return"";case ea:throw Error(p(338));case K:return Qd=vd.type,md=Qd._init,Qd=md(Qd._payload),vd=[H.createElement(Qd,fa({ref:vd.ref},vd.props))],
this.stack.push({type:null,domNamespace:ud,children:vd,childIndex:0,context:Zd,footer:""}),""}throw Error(p(130,null==Qd?Qd:typeof Qd,""));};Dd.renderDOM=function(vd,Zd,ud){var Qd=vd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===ud&&ka(Qd);if(!vc.hasOwnProperty(Qd)){if(!Eb.test(Qd))throw Error(p(65,Qd));vc[Qd]=!0}var md=vd.props;if("input"===Qd)md=fa({type:void 0},md,{defaultChecked:void 0,defaultValue:void 0,value:null!=md.value?md.value:md.defaultValue,checked:null!=md.checked?md.checked:
md.defaultChecked});else if("textarea"===Qd){var Td=md.value;if(null==Td){Td=md.defaultValue;var Lb=md.children;if(null!=Lb){if(null!=Td)throw Error(p(92));if(Array.isArray(Lb)){if(!(1>=Lb.length))throw Error(p(93));Lb=Lb[0]}Td=""+Lb}null==Td&&(Td="")}md=fa({},md,{value:void 0,children:""+Td})}else if("select"===Qd)this.currentSelectValue=null!=md.value?md.value:md.defaultValue,md=fa({},md,{value:void 0});else if("option"===Qd){Lb=this.currentSelectValue;var dc=L(md.children);if(null!=Lb){var Vb=
null!=md.value?md.value+"":dc;Td=!1;if(Array.isArray(Lb))for(var ob=0;ob<Lb.length;ob++){if(""+Lb[ob]===Vb){Td=!0;break}}else Td=""+Lb===Vb;md=fa({selected:void 0,children:void 0},md,{selected:Td,children:dc})}}if(Td=md){if(fc[Qd]&&(null!=Td.children||null!=Td.dangerouslySetInnerHTML))throw Error(p(137,Qd));if(null!=Td.dangerouslySetInnerHTML){if(null!=Td.children)throw Error(p(60));if(!("object"===typeof Td.dangerouslySetInnerHTML&&"__html"in Td.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=
Td.style&&"object"!==typeof Td.style)throw Error(p(62));}Td=md;Lb=this.makeStaticMarkup;dc=1===this.stack.length;Vb="\x3c"+vd.type;a:if(-1===Qd.indexOf("-"))ob="string"===typeof Td.is;else switch(Qd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":ob=!1;break a;default:ob=!0}for(td in Td)if(id.call(Td,td)){var kb=Td[td];if(null!=kb){if("style"===td){var $b=void 0,rc="",Sc="";for($b in kb)if(kb.hasOwnProperty($b)){var dd=
0===$b.indexOf("--"),Md=kb[$b];if(null!=Md){if(dd)var be=$b;else if(be=$b,Tc.hasOwnProperty(be))be=Tc[be];else{var qe=be.replace(mb,"-$1").toLowerCase().replace(Xb,"-ms-");be=Tc[be]=qe}rc+=Sc+be+":";Sc=$b;dd=null==Md||"boolean"===typeof Md||""===Md?"":dd||"number"!==typeof Md||0===Md||Pa.hasOwnProperty(Sc)&&Pa[Sc]?(""+Md).trim():Md+"px";rc+=dd;Sc=";"}}kb=rc||null}$b=null;ob?Ld.hasOwnProperty(td)||($b=td,$b=d($b)&&null!=kb?$b+'\x3d"'+(G(kb)+'"'):""):$b=v(td,kb);$b&&(Vb+=" "+$b)}}Lb||dc&&(Vb+=' data-reactroot\x3d""');
var td=Vb;Td="";Ub.hasOwnProperty(Qd)?td+="/\x3e":(td+="\x3e",Td="\x3c/"+vd.type+"\x3e");a:{Lb=md.dangerouslySetInnerHTML;if(null!=Lb){if(null!=Lb.__html){Lb=Lb.__html;break a}}else if(Lb=md.children,"string"===typeof Lb||"number"===typeof Lb){Lb=G(Lb);break a}Lb=null}null!=Lb?(md=[],Mc.hasOwnProperty(Qd)&&"\n"===Lb.charAt(0)&&(td+="\n"),td+=Lb):md=Hc(md.children);vd=vd.type;ud=null==ud||"http://www.w3.org/1999/xhtml"===ud?ka(vd):"http://www.w3.org/2000/svg"===ud&&"foreignObject"===vd?"http://www.w3.org/1999/xhtml":
ud;this.stack.push({domNamespace:ud,type:Qd,children:md,childIndex:0,context:Zd,footer:Td});this.previousWasTextNode=!1;return td};return mc}();E.renderToNodeStream=function(){throw Error(p(207));};E.renderToStaticMarkup=function(mc,Dd){mc=new Jd(mc,!0,Dd);try{return mc.read(Infinity)}finally{mc.destroy()}};E.renderToStaticNodeStream=function(){throw Error(p(208));};E.renderToString=function(mc,Dd){mc=new Jd(mc,!1,Dd);try{return mc.read(Infinity)}finally{mc.destroy()}};E.version="17.0.2"};
shadow$provide[589]=function(xa,V,Ta,E){Ta.exports=V(587)};
shadow$provide[590]=function(xa,V,Ta,E){function p(){if(!wa&&(wa="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!wa))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wa(Xa)}function S(b,g=0){return(Wb[b[g+0]]+Wb[b[g+1]]+Wb[b[g+2]]+Wb[b[g+3]]+"-"+Wb[b[g+4]]+Wb[b[g+5]]+"-"+Wb[b[g+6]]+Wb[b[g+7]]+"-"+Wb[b[g+8]]+Wb[b[g+9]]+"-"+Wb[b[g+10]]+Wb[b[g+11]]+Wb[b[g+12]]+Wb[b[g+13]]+Wb[b[g+14]]+
Wb[b[g+15]]).toLowerCase()}function A(b){let g=0;var n=0;for(var J of b)g+=J.w*J.h,n=Math.max(n,J.w);b.sort((va,La)=>La.h-va.h);n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),n),h:Infinity}];let X=J=0;for(const va of b)for(b=n.length-1;0<=b;b--){var la=n[b];if(!(va.w>la.w||va.h>la.h)){va.x=la.x;va.y=la.y;X=Math.max(X,va.y+va.h);J=Math.max(J,va.x+va.w);va.w===la.w&&va.h===la.h?(la=n.pop(),b<n.length&&(n[b]=la)):va.h===la.h?(la.x+=va.w,la.w-=va.w):(va.w!==la.w&&n.push({x:la.x+va.w,y:la.y,w:la.w-
va.w,h:va.h}),la.y+=va.h,la.h-=va.h);break}}return{w:J,h:X,fill:g/(J*X)||0}}function q(b,...g){return{didIntersect:0<g.length,message:b,points:g}}function d(b,g,n=0){const J=[b[0]+g[0]/2,b[1]+g[1]/2],X=Lc.rotWith(b,J,n),la=Lc.rotWith(Lc.add(b,[g[0],0]),J,n),va=Lc.rotWith(Lc.add(b,g),J,n);b=Lc.rotWith(Lc.add(b,[0,g[1]]),J,n);return[["top",[X,la]],["right",[la,va]],["bottom",[va,b]],["left",[b,X]]]}function r(b,g,n,J){const [X,la]=b,[va,La]=g,[Wa,bb]=n,[pb,Db]=J;return La/va!==(Db-bb)/(pb-Wa)&&(g=va*
(Db-bb)-La*(pb-Wa),0!==g&&(b=((la-bb)*(pb-Wa)-(X-Wa)*(Db-bb))/g,g=((la-bb)*va-(X-Wa)*La)/g,0<=b&&0<=g&&1>=g))?q("intersection",[X+b*va,la+b*La]):q("no intersection")}function B(b,g,n,J,X=0){return h(n,J,X,b,g)}function C(b,g,n,J=0){const {minX:X,minY:la,width:va,height:La}=n;return B(b,g,[X,la],[va,La],J)}function a(b,g,n,J){var X=Lc.sub(b,n);n=Lc.sub(J,n);g=Lc.sub(g,b);J=n[0]*X[1]-n[1]*X[0];X=g[0]*X[1]-g[1]*X[0];n=n[1]*g[0]-n[0]*g[1];return 0===J||0===X?q("coincident"):0===n?q("parallel"):0!==n&&
(J/=n,X/=n,0<=J&&1>=J&&0<=X&&1>=X)?q("intersection",Lc.add(b,Lc.mul(g,J))):q("no intersection")}function G(b,g,n,J){var X=(g[0]-b[0])*(g[0]-b[0])+(g[1]-b[1])*(g[1]-b[1]),la=2*((g[0]-b[0])*(b[0]-n[0])+(g[1]-b[1])*(b[1]-n[1]));n=la*la-4*X*(n[0]*n[0]+n[1]*n[1]+b[0]*b[0]+b[1]*b[1]-2*(n[0]*b[0]+n[1]*b[1])-J*J);if(0>n)return q("outside");if(0===n)return q("tangent");J=Math.sqrt(n);n=(-la+J)/(2*X);X=(-la-J)/(2*X);if((0>n||1<n)&&(0>X||1<X))return 0>n&&0>X||1<n&&1<X?q("outside"):q("inside");la=[];0<=n&&1>=
n&&la.push(Lc.lrp(b,g,n));0<=X&&1>=X&&la.push(Lc.lrp(b,g,X));return q("intersection",...la)}function v(b,g,n,J,X,la=0){if(0===J||0===X||Lc.isEqual(b,g))return q("no intersection");J=0>J?J:-J;X=0>X?X:-X;b=Lc.sub(Lc.rotWith(b,n,-la),n);g=Lc.sub(Lc.rotWith(g,n,-la),n);var va=Lc.sub(g,b),La=va[0]*va[0]/J/J+va[1]*va[1]/X/X;va=2*b[0]*va[0]/J/J+2*b[1]*va[1]/X/X;const Wa=[];J=va*va-4*La*(b[0]*b[0]/J/J+b[1]*b[1]/X/X-1);0===J?Wa.push(-va/2/La):0<J&&(J=Math.sqrt(J),Wa.push((-va+J)/2/La),Wa.push((-va-J)/2/La));
La=Wa.filter(bb=>0<=bb&&1>=bb).map(bb=>Lc.add(n,Lc.add(b,Lc.mul(Lc.sub(g,b),bb)))).map(bb=>Lc.rotWith(bb,n,la));return q("intersection",...La)}function k(b,g,n){const J=[];for(let X=1;X<n.length;X++){const la=a(b,g,n[X-1],n[X]);la&&J.push(...la.points)}return 0===J.length?q("no intersection"):q("intersection",...n)}function h(b,g,n,J,X){return d(b,g,n).reduce((la,[va,[La,Wa]])=>{(La=r(J,X,La,Wa))&&la.push(q(va,...La.points));return la},[]).filter(la=>la.didIntersect)}function f(b,g,n,J){return d(b,
g).reduce((X,[la,[va,La]])=>{(va=a(n,J,va,La))&&X.push(q(la,...va.points));return X},[]).filter(X=>X.didIntersect)}function w(b,g,n,J){return d(b,g).reduce((X,[la,[va,La]])=>{(va=G(va,La,n,J))&&X.push(of(xe({},va),{message:la}));return X},[]).filter(X=>X.didIntersect)}function x(b,g,n,J,X,la=0){return d(b,g).reduce((va,[La,[Wa,bb]])=>{(Wa=v(Wa,bb,n,J,X,la))&&va.push(of(xe({},Wa),{message:La}));return va},[]).filter(va=>va.didIntersect)}function I(b,g,n){return d(b,g).reduce((J,[X,[la,va]])=>{la=k(la,
va,n);la.didIntersect&&J.push(q(X,...la.points));return J},[]).filter(J=>J.didIntersect)}function z(b,g,n){return d(b,g).reduce((J,[X,[la,va]])=>{{const La=[];for(let Wa=1;Wa<n.length+1;Wa++){const bb=a(la,va,n[Wa-1],n[Wa%n.length]);bb&&La.push(...bb.points)}la=0===La.length?q("no intersection"):q("intersection",...n)}la.didIntersect&&J.push(q(X,...la.points));return J},[]).filter(J=>J.didIntersect)}function u(b,g,n,J=0,X,la){return g===n?w(X,la,b,g):x(X,la,b,g,n,J)}function t(b,g,n){const {minX:J,
minY:X,width:la,height:va}=b;return f([J,X],[la,va],g,n)}function m(b){for(var g=arguments.length,n=Array(1<g?g-1:0),J=1;J<g;J++)n[J-1]=arguments[J];throw Error("number"===typeof b?"[MobX] minified error nr: "+b+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+b);}function R(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof xa?xa:"undefined"!==
typeof self?self:Kl}function ka(){nq||m("Proxy not available")}function L(b){var g=!1;return function(){if(!g)return g=!0,b.apply(this,arguments)}}function na(b){return"function"===typeof b}function Y(b){switch(typeof b){case "string":case "symbol":case "number":return!0}return!1}function fa(b){return null!==b&&"object"===typeof b}function H(b){if(!fa(b))return!1;b=Object.getPrototypeOf(b);if(null==b)return!0;b=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;return"function"===typeof b&&
b.toString()===tp}function aa(b){return(b=null==b?void 0:b.constructor)?"GeneratorFunction"===b.name||"GeneratorFunction"===b.displayName?!0:!1:!1}function M(b,g,n){zn(b,g,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Q(b,g,n){zn(b,g,{enumerable:!1,writable:!1,configurable:!0,value:n})}function D(b,g){var n="isMobX"+b;g.prototype[n]=!0;return function(J){return fa(J)&&!0===J[n]}}function O(b){return b instanceof Map}function P(b){return b instanceof Set}function ba(b){var g=Object.keys(b);
if(!$q)return g;var n=Object.getOwnPropertySymbols(b);return n.length?[].concat(g,n.filter(function(J){return gl.propertyIsEnumerable.call(b,J)})):g}function W(b){return null===b?null:"object"===typeof b?""+b:b}function F(b,g){return gl.hasOwnProperty.call(b,g)}function ha(b,g){for(var n=0;n<g.length;n++){var J=g[n];J.enumerable=J.enumerable||!1;J.configurable=!0;"value"in J&&(J.writable=!0);Object.defineProperty(b,J.key,J)}}function K(b,g,n){g&&ha(b.prototype,g);n&&ha(b,n);Object.defineProperty(b,
"prototype",{writable:!1});return b}function Z(){Z=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var n=arguments[g],J;for(J in n)Object.prototype.hasOwnProperty.call(n,J)&&(b[J]=n[J])}return b};return Z.apply(this,arguments)}function ea(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;da(b,g)}function da(b,g){da=Object.setPrototypeOf||function(n,J){n.__proto__=J;return n};return da(b,g)}function qa(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return b}function Aa(b,g){if(b){if("string"===typeof b)return za(b,g);var n=Object.prototype.toString.call(b).slice(8,-1);"Object"===n&&b.constructor&&(n=b.constructor.name);if("Map"===n||"Set"===n)return Array.from(b);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return za(b,g)}}function za(b,g){if(null==g||g>b.length)g=b.length;for(var n=0,J=Array(g);n<g;n++)J[n]=b[n];return J}function Ha(b,g){var n="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(n)return(n=
n.call(b)).next.bind(n);if(Array.isArray(b)||(n=Aa(b))||g&&b&&"number"===typeof b.length){n&&(b=n);var J=0;return function(){return J>=b.length?{done:!0}:{done:!1,value:b[J++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ua(b){return Object.assign(function(g,n){Fa(g,n,b)},b)}function Fa(b,g,n){F(b,Uf)||M(b,Uf,Z({},b[Uf]));n.annotationType_!==qq&&(b[Uf][g]=n)}function Oa(b){F(b,
Uf)||M(b,Uf,Z({},b[Uf]));return b[Uf]}function Ya(b,g,n){void 0===g&&(g=No);void 0===n&&(n=No);b=new Zo(b);g!==No&&Kc(Bh,b,g,void 0);n!==No&&sc(b,n);return b}function Ma(b,g,n){return Sb(b)?b:Array.isArray(b)?sg.array(b,{name:n}):H(b)?sg.object(b,void 0,{name:n}):O(b)?sg.map(b,{name:n}):P(b)?sg.set(b,{name:n}):"function"!==typeof b||dd(b)||Jc(b)?b:aa(b)?js(b):vh(n,b)}function fb(b){return b}function db(b,g){return{annotationType_:b,options_:g,make_:Na,extend_:pa}}function Na(b,g,n,J){var X;if(null!=
(X=this.options_)&&X.bound)return null===this.extend_(b,g,n,!1)?0:1;if(J===b.target_)return null===this.extend_(b,g,n,!1)?0:2;if(dd(n.value))return 1;b=Da(b,this,g,n,!1);zn(J,g,b);return 2}function pa(b,g,n,J){n=Da(b,this,g,n);return b.defineProperty_(g,n,J)}function Da(b,g,n,J,X){var la,va,La,Wa,bb,pb,Db;void 0===X&&(X=oe.safeDescriptors);J=J.value;if(null!=(la=g.options_)&&la.bound){var Qb;J=J.bind(null!=(Qb=b.proxy_)?Qb:b.target_)}return{value:Mc(null!=(va=null==(La=g.options_)?void 0:La.name)?
va:n.toString(),J,null!=(Wa=null==(bb=g.options_)?void 0:bb.autoAction)?Wa:!1,null!=(pb=g.options_)&&pb.bound?null!=(Db=b.proxy_)?Db:b.target_:void 0),configurable:X?b.isPlainObject_:!0,enumerable:!1,writable:X?!1:!0}}function sa(b,g){return{annotationType_:b,options_:g,make_:Ba,extend_:Ka}}function Ba(b,g,n,J){var X;if(J===b.target_)return null===this.extend_(b,g,n,!1)?0:2;if(null!=(X=this.options_)&&X.bound&&(!F(b.target_,g)||!Jc(b.target_[g]))&&null===this.extend_(b,g,n,!1))return 0;if(Jc(n.value))return 1;
b=Sa(b,this,g,n,!1,!1);zn(J,g,b);return 2}function Ka(b,g,n,J){var X;n=Sa(b,this,g,n,null==(X=this.options_)?void 0:X.bound);return b.defineProperty_(g,n,J)}function Sa(b,g,n,J,X,la){void 0===la&&(la=oe.safeDescriptors);g=J.value;Jc(g)||(g=js(g));if(X){var va;g=g.bind(null!=(va=b.proxy_)?va:b.target_);g.isMobXFlow=!0}return{value:g,configurable:la?b.isPlainObject_:!0,enumerable:!1,writable:la?!1:!0}}function yb(b,g){return{annotationType_:b,options_:g,make_:hb,extend_:Mb}}function hb(b,g,n){return null===
this.extend_(b,g,n,!1)?0:1}function Mb(b,g,n,J){return b.defineComputedProperty_(g,Z({},this.options_,{get:n.get,set:n.set}),J)}function Ub(b,g){return{annotationType_:b,options_:g,make_:fc,extend_:Pa}}function fc(b,g,n){return null===this.extend_(b,g,n,!1)?0:1}function Pa(b,g,n,J){var X,la;return b.defineObservableProperty_(g,n.value,null!=(X=null==(la=this.options_)?void 0:la.enhancer)?X:Ma,J)}function lb(b){return{annotationType_:"true",options_:b,make_:mb,extend_:Xb}}function mb(b,g,n,J){var X,
la;if(n.get)return mh.make_(b,g,n,J);if(n.set){n=Mc(g.toString(),n.set);if(J===b.target_)return null===b.defineProperty_(g,{configurable:oe.safeDescriptors?b.isPlainObject_:!0,set:n})?0:2;zn(J,g,{configurable:!0,set:n});return 2}if(J!==b.target_&&"function"===typeof n.value){var va;if(aa(n.value)){var La;return(null!=(La=this.options_)&&La.autoBind?js.bound:js).make_(b,g,n,J)}return(null!=(va=this.options_)&&va.autoBind?vh.bound:vh).make_(b,g,n,J)}va=!1===(null==(X=this.options_)?void 0:X.deep)?sg.ref:
sg;if("function"===typeof n.value&&null!=(la=this.options_)&&la.autoBind){var Wa;n.value=n.value.bind(null!=(Wa=b.proxy_)?Wa:b.target_)}return va.make_(b,g,n,J)}function Xb(b,g,n,J){var X,la;if(n.get)return mh.extend_(b,g,n,J);if(n.set)return b.defineProperty_(g,{configurable:oe.safeDescriptors?b.isPlainObject_:!0,set:Mc(g.toString(),n.set)},J);if("function"===typeof n.value&&null!=(X=this.options_)&&X.autoBind){var va;n.value=n.value.bind(null!=(va=b.proxy_)?va:b.target_)}return(!1===(null==(la=
this.options_)?void 0:la.deep)?sg.ref:sg).extend_(b,g,n,J)}function Hc(b){if(!0===b.deep)var g=Ma;else{if(!1===b.deep)b=fb;else{b=b.defaultDecorator;var n;b=b?null!=(g=null==(n=b.options_)?void 0:n.enhancer)?g:Ma:Ma}g=b}return g}function bd(b,g,n){if(Y(g))Fa(b,g,br);else return Sb(b)?b:H(b)?sg.object(b,g,n):Array.isArray(b)?sg.array(b,g):O(b)?sg.map(b,g):P(b)?sg.set(b,g):"object"===typeof b&&null!==b?b:sg.box(b,g)}function Mc(b,g,n,J){function X(){a:{var la=J||this,va=arguments,La=oe.trackingDerivation,
Wa=!n||!La;md();var bb=oe.allowStateChanges;Wa&&(mc(),bb=vc(!0));var pb=Dd(!0),Db=Tu++,Qb=Zq;Zq=Db;try{var oc=g.apply(la,va);break a}catch(xc){var ac=xc;throw xc;}finally{Zq!==Db&&m(30),Zq=Qb,void 0!==ac&&(oe.suppressReactionErrors=!0),oe.allowStateChanges=bb,oe.allowStateReads=pb,Td(),Wa&&(oe.trackingDerivation=La),oe.suppressReactionErrors=!1}oc=void 0}return oc}void 0===n&&(n=!1);X.isMobxAction=!0;Vu&&(xp.value=b,Object.defineProperty(X,"name",xp));return X}function Eb(b,g){b=vc(b);try{return g()}finally{oe.allowStateChanges=
b}}function vc(b){var g=oe.allowStateChanges;oe.allowStateChanges=b;return g}function Tc(b){switch(b.dependenciesState_){case Ab.UP_TO_DATE_:return!1;case Ab.NOT_TRACKING_:case Ab.STALE_:return!0;case Ab.POSSIBLY_STALE_:for(var g=Dd(!0),n=mc(),J=b.observing_,X=J.length,la=0;la<X;la++){var va=J[la];if(gb(va)){if(oe.disableErrorBoundaries)va.get();else try{va.get()}catch(La){return oe.trackingDerivation=n,oe.allowStateReads=g,!0}if(b.dependenciesState_===Ab.STALE_)return oe.trackingDerivation=n,oe.allowStateReads=
g,!0}}vd(b);oe.trackingDerivation=n;oe.allowStateReads=g;return!1}}function id(b,g,n){var J=Dd(!0);vd(b);b.newObserving_=Array(b.observing_.length+100);b.unboundDepsCount_=0;b.runId_=++oe.runId;var X=oe.trackingDerivation;oe.trackingDerivation=b;oe.inBatch++;if(!0===oe.disableErrorBoundaries)var la=g.call(n);else try{la=g.call(n)}catch(pb){la=new Gc(pb)}oe.inBatch--;oe.trackingDerivation=X;var va=b.observing_;g=b.observing_=b.newObserving_;n=Ab.UP_TO_DATE_;X=0;for(var La=b.unboundDepsCount_,Wa=0;Wa<
La;Wa++){var bb=g[Wa];0===bb.diffValue_&&(bb.diffValue_=1,X!==Wa&&(g[X]=bb),X++);bb.dependenciesState_>n&&(n=bb.dependenciesState_)}g.length=X;b.newObserving_=null;for(La=va.length;La--;)Wa=va[La],0===Wa.diffValue_&&ud(Wa,b),Wa.diffValue_=0;for(;X--;)va=g[X],1===va.diffValue_&&(va.diffValue_=0,La=b,va.observers_.add(La),va.lowestObserverState_>La.dependenciesState_&&(va.lowestObserverState_=La.dependenciesState_));n!==Ab.UP_TO_DATE_&&(b.dependenciesState_=n,b.onBecomeStale_());oe.allowStateReads=
J;return la}function Ld(b){var g=b.observing_;b.observing_=[];for(var n=g.length;n--;)ud(g[n],b);b.dependenciesState_=Ab.NOT_TRACKING_}function Jd(b){var g=mc();try{return b()}finally{oe.trackingDerivation=g}}function mc(){var b=oe.trackingDerivation;oe.trackingDerivation=null;return b}function Dd(b){var g=oe.allowStateReads;oe.allowStateReads=b;return g}function vd(b){if(b.dependenciesState_!==Ab.UP_TO_DATE_){b.dependenciesState_=Ab.UP_TO_DATE_;b=b.observing_;for(var g=b.length;g--;)b[g].lowestObserverState_=
Ab.UP_TO_DATE_}}function Zd(){(oe.pendingReactions.length||oe.inBatch||oe.isRunningReactions)&&m(36);Ee=!0;if(Rd){var b=R();0===--b.__mobxInstanceCount&&(b.__mobxGlobals=void 0);oe=new fd}}function ud(b,g){b.observers_["delete"](g);0===b.observers_.size&&Qd(b)}function Qd(b){!1===b.isPendingUnobservation_&&(b.isPendingUnobservation_=!0,oe.pendingUnobservations.push(b))}function md(){oe.inBatch++}function Td(){if(0===--oe.inBatch){0<oe.inBatch||oe.isRunningReactions||Ag(kb);for(var b=oe.pendingUnobservations,
g=0;g<b.length;g++){var n=b[g];n.isPendingUnobservation_=!1;0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Ea&&n.suspend_())}oe.pendingUnobservations=[]}}function Lb(b){var g=oe.trackingDerivation;if(null!==g)return g.runId_!==b.lastAccessedBy_&&(b.lastAccessedBy_=g.runId_,g.newObserving_[g.unboundDepsCount_++]=b,!b.isBeingObserved_&&oe.trackingContext&&(b.isBeingObserved_=!0,b.onBO())),b.isBeingObserved_;0===b.observers_.size&&0<oe.inBatch&&Qd(b);return!1}
function dc(b){b.lowestObserverState_!==Ab.STALE_&&(b.lowestObserverState_=Ab.STALE_,b.observers_.forEach(function(g){if(g.dependenciesState_===Ab.UP_TO_DATE_)g.onBecomeStale_();g.dependenciesState_=Ab.STALE_}))}function Vb(b){b.lowestObserverState_!==Ab.STALE_&&(b.lowestObserverState_=Ab.STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Ab.POSSIBLY_STALE_?g.dependenciesState_=Ab.STALE_:g.dependenciesState_===Ab.UP_TO_DATE_&&(b.lowestObserverState_=Ab.UP_TO_DATE_)}))}function ob(b){b.lowestObserverState_===
Ab.UP_TO_DATE_&&(b.lowestObserverState_=Ab.POSSIBLY_STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Ab.UP_TO_DATE_&&(g.dependenciesState_=Ab.POSSIBLY_STALE_,g.onBecomeStale_())}))}function kb(){oe.isRunningReactions=!0;for(var b=oe.pendingReactions,g=0;0<b.length;){++g===kf&&(console.error("[mobx] cycle in reaction: "+b[0]),b.splice(0));for(var n=b.splice(0),J=0,X=n.length;J<X;J++)n[J].runReaction_()}oe.isRunningReactions=!1}function $b(b){var g=Ag;Ag=function(n){return b(function(){return g(n)})}}
function rc(b){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Sc(b){return function(g,n){if(na(g))return Mc(g.name||"\x3cunnamed action\x3e",g,b);if(na(n))return Mc(g,n,b);if(Y(n))return Fa(g,n,b?me:ne);if(Y(g))return Ua(db(b?"autoAction":lh,{name:g,autoAction:b}))}}function dd(b){return na(b)&&!0===b.isMobxAction}function Md(b,g){function n(){b(Wa)}var J,X;void 0===g&&(g=Jo);var la=null!=(J=null==(X=g)?void 0:X.name)?J:"Autorun";if(g.scheduler||g.delay){var va=
be(g),La=!1;var Wa=new kh(la,function(){La||(La=!0,va(function(){La=!1;Wa.isDisposed_||Wa.track(n)}))},g.onError,g.requiresObservable)}else Wa=new kh(la,function(){this.track(n)},g.onError,g.requiresObservable);Wa.schedule_();return Wa.getDisposer_()}function be(b){return b.scheduler?b.scheduler:b.delay?function(g){return setTimeout(g,b.delay)}:xg}function qe(b,g,n){function J(){pb=!1;if(!ac.isDisposed_){var xc=!1;ac.track(function(){var pc=Eb(!1,function(){return b(ac)});xc=bb||!oc(Db,pc);Qb=Db;
Db=pc});bb&&n.fireImmediately?va(Db,Qb,ac):!bb&&xc&&va(Db,Qb,ac);bb=!1}}var X;void 0===n&&(n=Jo);var la=null!=(X=n.name)?X:"Reaction",va=he(la,n.onError?td(n.onError,g):g),La=!n.scheduler&&!n.delay,Wa=be(n),bb=!0,pb=!1,Db,Qb,oc=n.compareStructural?$m.structural:n.equals||$m["default"],ac=new kh(la,function(){bb||La?J():pb||(pb=!0,Wa(J))},n.onError,n.requiresObservable);ac.schedule_();return ac.getDisposer_()}function td(b,g){return function(){try{return g.apply(this,arguments)}catch(n){b.call(this,
n)}}}function sc(b,g,n){return Kc(ki,b,g,n)}function Kc(b,g,n,J){var X="function"===typeof J?vg(g,n):vg(g),la=na(J)?J:n,va=b+"L";X[va]?X[va].add(la):X[va]=new Set([la]);return function(){var La=X[va];La&&(La["delete"](la),0===La.size&&delete X[va])}}function Ne(b){!0===b.isolateGlobalState&&Zd();var g=b.useProxies,n=b.enforceActions;void 0!==g&&(oe.useProxies="always"===g?!0:"never"===g?!1:"undefined"!==typeof Proxy);"ifavailable"===g&&(oe.verifyProxies=!0);void 0!==n&&(g="always"===n?"always":"observed"===
n,oe.enforceActions=g,oe.allowStateChanges=!0===g||"always"===g?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(J){J in b&&(oe[J]=!!b[J])});oe.allowStateReads=!oe.observableRequiresReaction;b.reactionScheduler&&$b(b.reactionScheduler)}function nc(b,g,n,J){var X=es(g),la=Cd(b,J)[ah];md();try{up(X).forEach(function(va){la.extend_(va,X[va],n?va in n?n[va]:!0:!0)})}finally{Td()}return b}function Le(b){var g=
{name:b.name_};b.observing_&&0<b.observing_.length&&(g.dependencies=Array.from(new Set(b.observing_)).map(Le));return g}function Pb(){this.message="FLOW_CANCELLED"}function Jc(b){return!0===(null==b?void 0:b.isMobXFlow)}function Sb(b,g){return b?void 0!==g?Yd(b)?b[ah].values_.has(g):!1:Yd(b)||!!b[ah]||hn(b)||rh(b)||gb(b):!1}function ed(b){if(Yd(b))return b[ah].ownKeys_();m(38)}function re(b,g,n){b.set(g,n);return n}function le(b,g){if(null==b||"object"!==typeof b||b instanceof Date||!Sb(b))return b;
if(T(b)||gb(b))return le(b.get(),g);if(g.has(b))return g.get(b);if(ib(b)){var n=re(g,b,Array(b.length));b.forEach(function(va,La){n[La]=le(va,g)});return n}if(Gq(b)){var J=re(g,b,new Set);b.forEach(function(va){J.add(le(va,g))});return J}if(Ip(b)){var X=re(g,b,new Map);b.forEach(function(va,La){X.set(La,le(va,g))});return X}var la=re(g,b,{});ed(b).forEach(function(va){gl.propertyIsEnumerable.call(b,va)&&(la[va]=le(b[va],g))});return la}function Cc(b,g){return le(b,new Map)}function zb(){m("trace() is not available in production builds");
for(var b=!1,g=arguments.length,n=Array(g),J=0;J<g;J++)n[J]=arguments[J];"boolean"===typeof n[n.length-1]&&(b=n.pop());a:{switch(n.length){case 0:g=oe.trackingDerivation;break a;case 1:g=vg(n[0]);break a;case 2:g=vg(n[0],n[1]);break a}g=void 0}if(!g)return m("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");g.isTracing_===lc.NONE&&console.log("[mobx.trace] '"+g.name_+"' tracing enabled");g.isTracing_=b?
lc.BREAK:lc.LOG}function Id(b,g){void 0===g&&(g=void 0);md();try{return b.apply(g)}finally{Td()}}function ce(b){return void 0!==b.interceptors_&&0<b.interceptors_.length}function qd(b,g){var n=b.interceptors_||(b.interceptors_=[]);n.push(g);return L(function(){var J=n.indexOf(g);-1!==J&&n.splice(J,1)})}function jc(b,g){var n=mc();try{var J=[].concat(b.interceptors_||[]);b=0;for(var X=J.length;b<X&&((g=J[b](g))&&!g.type&&m(14),g);b++);return g}finally{oe.trackingDerivation=n}}function Oe(b){return void 0!==
b.changeListeners_&&0<b.changeListeners_.length}function Yf(b,g){var n=b.changeListeners_||(b.changeListeners_=[]);n.push(g);return L(function(){var J=n.indexOf(g);-1!==J&&n.splice(J,1)})}function cf(b,g){var n=mc();if(b=b.changeListeners_){b=b.slice();for(var J=0,X=b.length;J<X;J++)b[J](g);oe.trackingDerivation=n}}function og(b,g,n){var J=Cd(b,n)[ah];md();try{var X;null!=(X=g)?X:g=Oa(b);up(g).forEach(function(la){return J.make_(la,g[la])})}finally{Td()}return b}function $a(b,g,n,J){void 0===n&&(n=
"ObservableArray");void 0===J&&(J=!1);ka();g=new ev(n,g,J,!1);Q(g.values_,ah,g);n=new Proxy(g.values_,UB);g.proxy_=n;b&&b.length&&(J=vc(!0),g.spliceWithArray_(0,0,b),oe.allowStateChanges=J);return n}function Bb(b,g){"function"===typeof Array.prototype[b]&&(st[b]=g(b))}function cb(b){return function(){var g=this[ah];g.atom_.reportObserved();g=g.dehanceValues_(g.values_);return g[b].apply(g,arguments)}}function Cb(b){return function(g,n){var J=this,X=this[ah];X.atom_.reportObserved();return X.dehanceValues_(X.values_)[b](function(la,
va){return g.call(n,la,va,J)})}}function ec(b){return function(){var g=this,n=this[ah];n.atom_.reportObserved();n=n.dehanceValues_(n.values_);var J=arguments[0];arguments[0]=function(X,la,va){return J(X,la,va,g)};return n[b].apply(n,arguments)}}function ib(b){return fa(b)&&SB(b[ah])}function hd(b){if(O(b)||Ip(b))return b;if(Array.isArray(b))return new Map(b);if(H(b)){var g=new Map,n;for(n in b)g.set(n,b[n]);return g}return m(21,b)}function Cd(b,g){var n;if(F(b,ah))return b;var J=null!=(n=null==g?
void 0:g.name)?n:"ObservableObject";n=Tx;var X=new Map;J=String(J);var la;var va=g?null!=(la=g.defaultDecorator)?la:lb(g):void 0;g=new n(b,X,J,va);M(b,ah,g);return b}function je(b){return Sx[b]||(Sx[b]={get:function(){return this[ah].getObservablePropValue_(b)},set:function(g){return this[ah].setObservablePropValue_(b,g)}})}function Yd(b){return fa(b)?aC(b[ah]):!1}function Ye(b){return{enumerable:!1,configurable:!0,get:function(){return this[ah].get_(b)},set:function(g){this[ah].set_(b,g)}}}function te(b){if(b>
gv){for(var g=gv;g<b+100;g++)zn(hv.prototype,""+g,Ye(g));gv=b}}function ef(b,g,n){return new hv(b,g,n)}function vg(b,g){if("object"===typeof b&&null!==b){if(ib(b))return void 0!==g&&m(23),b[ah].atom_;if(Gq(b))return b[ah];if(Ip(b)){if(void 0===g)return b.keysAtom_;var n=b.data_.get(g)||b.hasMap_.get(g);n||m(25,g,wb(b));return n}if(Yd(b)){if(!g)return m(26);(n=b[ah].values_.get(g))||m(27,g,wb(b));return n}if(hn(b)||gb(b)||rh(b))return b}else if(na(b)&&rh(b[ah]))return b[ah];m(28)}function nf(b,g){b||
m(29);if(void 0!==g)return nf(vg(b,g));if(hn(b)||gb(b)||rh(b)||Ip(b)||Gq(b))return b;if(b[ah])return b[ah];m(24,b)}function wb(b,g){if(void 0!==g)b=vg(b,g);else{if(dd(b))return b.name;b=Yd(b)||Ip(b)||Gq(b)?nf(b):vg(b)}return b.name_}function ta(b,g,n){void 0===n&&(n=-1);return ra(b,g,n)}function ra(b,g,n,J,X){if(b===g)return 0!==b||1/b===1/g;if(null==b||null==g)return!1;if(b!==b)return g!==g;var la=typeof b;if("function"!==la&&"object"!==la&&"object"!=typeof g)return!1;la=Nx.call(b);if(la!==Nx.call(g))return!1;
switch(la){case "[object RegExp]":case "[object String]":return""+b===""+g;case "[object Number]":return+b!==+b?+g!==+g:0===+b?1/+b===1/g:+b===+g;case "[object Date]":case "[object Boolean]":return+b===+g;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(b)===Symbol.valueOf.call(g);case "[object Map]":case "[object Set]":0<=n&&n++}b=Ia(b);g=Ia(g);la="[object Array]"===la;if(!la){if("object"!=typeof b||"object"!=typeof g)return!1;var va=b.constructor,La=g.constructor;if(va!==
La&&!(na(va)&&va instanceof va&&na(La)&&La instanceof La)&&"constructor"in b&&"constructor"in g)return!1}if(0===n)return!1;0>n&&(n=-1);J=J||[];X=X||[];for(va=J.length;va--;)if(J[va]===b)return X[va]===g;J.push(b);X.push(g);if(la){va=b.length;if(va!==g.length)return!1;for(;va--;)if(!ra(b[va],g[va],n-1,J,X))return!1}else{la=Object.keys(b);va=la.length;if(Object.keys(g).length!==va)return!1;for(;va--;)if(La=la[va],!F(g,La)||!ra(b[La],g[La],n-1,J,X))return!1}J.pop();X.pop();return!0}function Ia(b){return ib(b)?
b.slice():O(b)||Ip(b)||P(b)||Gq(b)?Array.from(b.entries()):b}function ab(b){b[Symbol.iterator]=Hb;return b}function Hb(){return this}function ic(b,g){const n=new Set(g),J=Object.values(b),X=new Set(J.filter(la=>n.has(la.toId)||n.has(la.fromId)));b=X.size;for(g=-1;0!==g;)X.forEach(la=>{la=la.fromId;for(const va of J)va.fromId===la&&X.add(va),va.toId===la&&X.add(va)}),g=X.size-b,b=X.size;return Array.from(X.values())}function Pc(b,g,n,J,X,la,va,La){if(X=g.getBindingPoint(X,la,va,La))return{id:J,type:"line",
fromId:b.id,toId:g.id,handleId:n,point:sd.toFixed(X.point),distance:X.distance}}function ld(b,g){const n=b.getCenter(),J=g.getCenter();var X=Kd();X=of(xe({},is.defaultProps),{id:X,type:is.id,parentId:b.props.parentId,point:n});b=Pc(X,b,"start",Kd(),n,n,sd.uni(sd.sub(J,n)),!1);g=Pc(X,g,"end",Kd(),J,J,sd.uni(sd.sub(n,J)),!1);return b&&g?(X.handles.start.point=[0,0],X.handles.end.point=sd.sub(J,n),X.handles.start.bindingId=b.id,X.handles.end.bindingId=g.id,[X,[b,g]]):null}function ve(){return new HB}
function We(){return new WeakMap}function Hf(b){if(!b)return Yu(null);var g=b.constructor;if(g===Object)return b===Object.prototype?{}:Yu(b);if(~PB.call(g).indexOf("[native code]"))try{return new g}catch(n){}return Yu(b)}function cg(b){var g="";b.global&&(g+="g");b.ignoreCase&&(g+="i");b.multiline&&(g+="m");b.unicode&&(g+="u");b.sticky&&(g+="y");return g}function Df(b){return b.flags}function uf(b){b=GB.call(b);return b.substring(8,b.length-1)}function Pf(b){return b[Symbol.toStringTag]||uf(b)}function Qg(b){return cx(b).concat(Xu(b))}
function fi(b,g,n){for(var J=fC(b),X=0,la=J.length,va,La;X<la;++X)if(va=J[X],"callee"!==va&&"caller"!==va)if(La=MB(b,va)){La.get||La.set||(La.value=n.copier(La.value,n));try{LB(g,va,La)}catch(Wa){g[va]=La.value}}else g[va]=n.copier(b[va],n);return g}function wh(b,g){var n=new g.Constructor;g.cache.set(b,n);b.forEach(function(J,X){n.set(X,g.copier(J,g))});return n}function li(b,g){var n=Hf(g.prototype);g.cache.set(b,n);for(var J in b)Vx.call(b,J)&&(n[J]=g.copier(b[J],g));return n}function Yh(b,g){var n=
Hf(g.prototype);g.cache.set(b,n);for(var J in b)Vx.call(b,J)&&(n[J]=g.copier(b[J],g));J=Xu(b);for(var X=0,la=J.length,va;X<la;++X)va=J[X],dC.call(b,va)&&(n[va]=g.copier(b[va],g));return n}function mg(b,g){return new g.Constructor(b.valueOf())}function Nh(b,g){return b}function df(b,g){var n=new g.Constructor;g.cache.set(b,n);b.forEach(function(J){n.add(g.copier(J,g))});return n}function Oh(b){function g(la,va){va.prototype=va.Constructor=void 0;if(!la||"object"!==typeof la)return la;if(va.cache.has(la))return va.cache.get(la);
va.prototype=la.__proto__||hC(la);va.Constructor=va.prototype&&va.prototype.constructor;if(!va.Constructor||va.Constructor===Object)return X(la,va);if(gC(la))return J(la,va);var La=n[KB(la)];return La?La(la,va):"function"===typeof la.then?la:X(la,va)}b=iv({},Xx,b);var n={Arguments:b.object,Array:b.array,ArrayBuffer:b.arrayBuffer,Blob:b.blob,Boolean:mg,DataView:b.dataView,Date:b.date,Error:b.error,Float32Array:b.arrayBuffer,Float64Array:b.arrayBuffer,Int8Array:b.arrayBuffer,Int16Array:b.arrayBuffer,
Int32Array:b.arrayBuffer,Map:b.map,Number:mg,Object:b.object,Promise:Nh,RegExp:b.regExp,Set:b.set,String:mg,WeakMap:Nh,WeakSet:Nh,Uint8Array:b.arrayBuffer,Uint8ClampedArray:b.arrayBuffer,Uint16Array:b.arrayBuffer,Uint32Array:b.arrayBuffer,Uint64Array:b.arrayBuffer},J=n.Array,X=n.Object;return function(la){return g(la,{Constructor:void 0,cache:IB(),copier:g,prototype:void 0})}}function yi(b,g){return(0,cC.default)(b,g,{arrayMerge:(n,J,X)=>J})}function Gl(b,g,n,J=!1){const [X,la]=g,[va,La]=n;b=va+(b-
X)/(la-X)*(La-va);return J?va<La?Math.max(Math.min(b,La),va):Math.max(Math.min(b,va),La):b}function sj(b,g){return new Promise((n,J)=>{if(g){const X=document.createElement("video");X.addEventListener("loadedmetadata",function(){n([this.videoWidth,this.videoHeight])},!1);X.src=b}else{const X=new Image;X.onload=()=>n([X.width,X.height]);X.src=b;X.onerror=la=>J(la)}})}function Cf(b,g){return Object.values(ca).includes(b)||null==b?`var(--ls-wb-${g}-color-${b?b:"default"})`:b}function zj(){var b;null==
(b=document.getElementById("__textLabelMeasure"))?void 0:b.remove();b=document.createElement("pre");b.id="__textLabelMeasure";Object.assign(b.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});b.tabIndex=-1;document.body.appendChild(b);return b}
function Ij(b,g,n=0){var J,X,la;if(!b)return[16,32];let va;va="string"===typeof g?g:`${null!=(J=g.fontStyle)?J:"normal"} ${null!=(X=g.fontVariant)?X:"normal"} ${null!=(la=g.fontWeight)?la:"normal"} ${g.fontSize}px/${g.fontSize*g.lineHeight}px ${g.fontFamily}`;if(!jv.has(`${b}-${va}-${n}`)){if(!Lp)return[10,10];Lp.parentNode||document.body.appendChild(Lp);Lp.innerHTML=`${b}&#8203;`;Lp.style.font=va;Lp.style.padding=n+"px";g=Lp.getBoundingClientRect();jv.set(`${b}-${va}-${n}`,[Math.ceil(g.width||1),
Math.ceil(g.height||1)])}return jv.get(`${b}-${va}-${n}`)}function Uh(b){try{if("string"!==typeof b||!ub.test(b))throw TypeError("Invalid UUID");let g;const n=new Uint8Array(16);n[0]=(g=parseInt(b.slice(0,8),16))>>>24;n[1]=g>>>16&255;n[2]=g>>>8&255;n[3]=g&255;n[4]=(g=parseInt(b.slice(9,13),16))>>>8;n[5]=g&255;n[6]=(g=parseInt(b.slice(14,18),16))>>>8;n[7]=g&255;n[8]=(g=parseInt(b.slice(19,23),16))>>>8;n[9]=g&255;n[10]=(g=parseInt(b.slice(24,36),16))/1099511627776&255;n[11]=g/4294967296&255;n[12]=g>>>
24&255;n[13]=g>>>16&255;n[14]=g>>>8&255;n[15]=g&255;return!0}catch(g){return!1}}function Hl(b,g=0,n){let J;return function(...X){null==n?void 0:n(...X);clearTimeout(J);J=setTimeout(()=>b.apply(X),g)}}function wk(b,g){return Qf(b,["symbol"===typeof g?g:g+""])}function xk(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function ih(b){return!!b}function Jj(b=0){return new Promise(g=>setTimeout(g,b))}function Aj(b="noid"){nv[b]||(nv[b]=dy.createContext({}));return nv[b]}function Mi(b="noid"){return dy.useContext(Aj(b))}
function hk(b){const {callbacks:g}=Mi(),n=Ay.useRef(-1);return Ay.useMemo(()=>{const J=X=>{var la,va;const {order:La=0}=X;if(!La){var Wa=X.target;Wa.removeEventListener("pointerup",J);Wa.releasePointerCapture(X.pointerId);null==(la=g.onPointerUp)?void 0:la.call(g,{type:"selection",handle:b,order:La},X);la=Date.now();Wa=la-n.current;300<Wa?n.current=la:300>=Wa&&(null==(va=g.onDoubleClick)?void 0:va.call(g,{type:"selection",handle:b,order:La},X),n.current=-1);X.order=La+1}};return{onPointerDown:X=>
{var la;const {order:va=0}=X;if(!va){var La=Wj(X.currentTarget);La.setPointerCapture(X.pointerId);La.addEventListener("pointerup",J);null==(la=g.onPointerDown)?void 0:la.call(g,{type:"selection",handle:b,order:va},X);X.order=va+1}},onPointerMove:X=>{var la;const {order:va=0}=X;va||(null==(la=g.onPointerMove)?void 0:la.call(g,{type:"selection",handle:b,order:va},X),X.order=va+1)},onPointerEnter:X=>{var la;const {order:va=0}=X;va||(null==(la=g.onPointerEnter)?void 0:la.call(g,{type:"selection",handle:b,
order:va},X),X.order=va+1)},onPointerLeave:X=>{var la;const {order:va=0}=X;va||(null==(la=g.onPointerLeave)?void 0:la.call(g,{type:"selection",handle:b,order:va},X),X.order=va+1)},onKeyDown:X=>{var la;null==(la=g.onKeyDown)?void 0:la.call(g,{type:"selection",handle:b,order:-1},X)},onKeyUp:X=>{var la;null==(la=g.onKeyUp)?void 0:la.call(g,{type:"selection",handle:b,order:-1},X)}}},[g])}function Wj(b){var g;if(null==(g=b.namespaceURI)?0:g.endsWith("svg")){if(b.parentElement)return Wj(b.parentElement);
throw Error("Could not find a parent element of an HTML type!");}return b}function Lj(b,g,n){const J=us.useRef(!1),X=us.useCallback(()=>{var la;if(J.current){const va=null==(la=b.current)?void 0:la.getBoundingClientRect();va&&(la={minX:va.left,maxX:va.left+va.width,minY:va.top,maxY:va.top+va.height,width:va.width,height:va.height},g.updateBounds(la),null==n?void 0:n(la))}else J.current=!0},[b,n]);us.useEffect(()=>{const la=b.current?nC(b.current):document,va=Hl(X,100);la.addEventListener("scroll",
va);window.addEventListener("resize",va);return()=>{la.removeEventListener("scroll",va);window.removeEventListener("resize",va)}},[]);us.useLayoutEffect(()=>{const la=new ResizeObserver(va=>{va[0].contentRect&&X()});b.current&&la.observe(b.current);return()=>{la.disconnect()}},[b]);us.useEffect(()=>{X();setTimeout(()=>{var la,va;null==(va=null==(la=b.current)?void 0:la.querySelector(".tl-canvas"))?void 0:va.focus()})},[b])}function pl(b,g){return Object.keys(g).reduce((n,J)=>{const X=g[J];return X?
n+`${`--${b}-${J}`}: ${X};
`:n},"")}function dl(b,g,n=".logseq-tldraw"){mv.useLayoutEffect(()=>{const J=document.createElement("style"),X=pl(b,g);J.setAttribute("id",`${b}-theme`);J.setAttribute("data-selector",n);J.innerHTML=`
        ${n} {
          ${X}
        }
      `;document.head.appendChild(J);return()=>{J&&document.head.contains(J)&&document.head.removeChild(J)}},[b,g,n])}function Il(b,g){mv.useLayoutEffect(()=>{if(lv.get(b))return()=>{};const n=document.createElement("style");n.innerHTML=g;n.setAttribute("id",b);document.head.appendChild(n);lv.set(b,n);return()=>{n&&document.head.contains(n)&&(document.head.removeChild(n),lv.delete(b))}},[b,g])}function Xj(b,g){const n=mv.useMemo(()=>xe(xe({},lC),b),[b]);dl("tl",n,g);Il("tl-canvas",mC)}function Mj(b=
"noid"){kv[b]||(kv[b]=cy.createContext({}));return kv[b]}function Fg(b="noid"){return cy.useContext(Mj(b))}function gg(){const b=Fg(),{callbacks:g}=Mi(),n=ey.useRef(-1);return ey.useMemo(()=>({onPointerDown:J=>{var X,la,va;const {order:La=0}=J;La||(null==(X=J.currentTarget)?void 0:X.setPointerCapture(J.pointerId));J.isPrimary&&(null==(la=g.onPointerDown)?void 0:la.call(g,{type:"canvas",order:La},J),X=Date.now(),la=X-n.current,300<la?n.current=X:300>=la&&(null==(va=g.onDoubleClick)?void 0:va.call(g,
{type:"canvas",order:La},J),n.current=-1))},onPointerMove:J=>{var X;const {order:la=0}=J;null==(X=g.onPointerMove)?void 0:X.call(g,{type:"canvas",order:la},J)},onPointerUp:J=>{var X,la;const {order:va=0}=J;va||(null==(X=J.currentTarget)?void 0:X.releasePointerCapture(J.pointerId));null==(la=g.onPointerUp)?void 0:la.call(g,{type:"canvas",order:va},J)},onPointerEnter:J=>{var X;const {order:la=0}=J;null==(X=g.onPointerEnter)?void 0:X.call(g,{type:"canvas",order:la},J)},onPointerLeave:J=>{var X;const {order:la=
0}=J;null==(X=g.onPointerLeave)?void 0:X.call(g,{type:"canvas",order:la},J)},onDrop:J=>eb(this,null,function*(){J.preventDefault();b.drop(J.dataTransfer,[J.clientX,J.clientY])}),onDragOver:J=>{J.preventDefault()}}),[g])}function ig(b,g,n){return 0===g||Infinity===Math.abs(g)?Math.pow(b,5*n):b*g*n/(g+n*b)}function ej(b,g,n,J=.15){return 0===J?Math.max(g,Math.min(b,n)):b<g?-ig(g-b,n-g,J)+g:b>n?+ig(b-n,n-g,J)+n:b}function Ch(b,[g,n],[J,X]){const [[la,va],[La,Wa]]=b;return[ej(g,la,va,J),ej(n,La,Wa,X)]}
function Ug(b,g,n){g in b?Object.defineProperty(b,g,{value:n,enumerable:!0,configurable:!0,writable:!0}):b[g]=n;return b}function Yj(b,g){var n=Object.keys(b);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(b);g&&(J=J.filter(function(X){return Object.getOwnPropertyDescriptor(b,X).enumerable}));n.push.apply(n,J)}return n}function Dg(b){for(var g=1;g<arguments.length;g++){var n=null!=arguments[g]?arguments[g]:{};g%2?Yj(Object(n),!0).forEach(function(J){Ug(b,J,n[J])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(b,Object.getOwnPropertyDescriptors(n)):Yj(Object(n)).forEach(function(J){Object.defineProperty(b,J,Object.getOwnPropertyDescriptor(n,J))})}return b}function Qh(b){return b?b[0].toUpperCase()+b.slice(1):""}function ik(b=!1,g){return b&&!kC.includes(g)}function yk(b,g="",n=!1){const J=by[b];g=J?J[g]||g:g;return"on"+Qh(b)+Qh(g)+(ik(n,g)?"Capture":"")}function Hh(b){b=b.substring(2).toLowerCase();const g=!!~b.indexOf("passive");g&&(b=b.replace("passive",""));var n=ay.includes(b)?
"capturecapture":"capture";(n=!!~b.indexOf(n))&&(b=b.replace("capture",""));return{device:b,capture:n,passive:g}}function Fi(b,g=""){const n=by[b];return b+(n?n[g]||g:g)}function Ih(b){return"touches"in b?"touch":"pointerType"in b?b.pointerType:"mouse"}function el(b){return Array.from(b.touches).filter(g=>{var n,J;return g.target===b.currentTarget||(null===(n=b.currentTarget)||void 0===n?void 0:null===(J=n.contains)||void 0===J?void 0:J.call(n,g.target))})}function Zj(b){return"touches"in b?("touchend"===
b.type||"touchcancel"===b.type?b.changedTouches:b.targetTouches)[0]:b}function tj(b,g){const n=g.clientX-b.clientX,J=g.clientY-b.clientY;return{angle:-(180*Math.atan2(n,J))/Math.PI,distance:Math.hypot(n,J),origin:[(g.clientX+b.clientX)/2,(g.clientY+b.clientY)/2]}}function Jl(b){return el(b).map(g=>g.identifier)}function Am(b,g){const [n,J]=Array.from(b.touches).filter(X=>g.includes(X.identifier));return tj(n,J)}function Nj(b){const g=Zj(b);return"touches"in b?g.identifier:g.pointerId}function gi(b){b=
Zj(b);return[b.clientX,b.clientY]}function Oj(b){let {deltaX:g,deltaY:n,deltaMode:J}=b;1===J?(g*=40,n*=40):2===J&&(g*=800,n*=800);return[g,n]}function Jh(b,...g){return"function"===typeof b?b(...g):b}function fj(){}function Kh(...b){return 0===b.length?fj:1===b.length?b[0]:function(){let g;for(const n of b)g=n.apply(this,arguments)||g;return g}}function $i([b,g],n){b=Math.abs(b);g=Math.abs(g);if(b>g&&b>n)return"x";if(g>b&&g>n)return"y"}function mi(b){const [g,n]=b.overflow,[J,X]=b._delta,[la,va]=
b._direction;if(0>g&&0<J&&0>la||0<g&&0>J&&0<la)b._movement[0]=b._movementBound[0];if(0>n&&0<X&&0>va||0<n&&0>X&&0<va)b._movement[1]=b._movementBound[1]}function fl(b){pv.set(b.key,b.engine);qv.set(b.key,b.resolver)}function ak(b={},g){const n={};for(const [J,X]of Object.entries(g))switch(typeof X){case "function":n[J]=X.call(n,b[J],J,b);break;case "object":n[J]=ak(b[J],X);break;case "boolean":X&&(n[J]=b[J])}return n}function gj(b,g,n={}){const {target:J,eventOptions:X,window:la,enabled:va,transform:La}=
b;var Wa=qC;if(null==b)b={};else{if(null==b)var bb={};else{bb={};var pb=Object.keys(b),Db;for(Db=0;Db<pb.length;Db++){var Qb=pb[Db];0<=Wa.indexOf(Qb)||(bb[Qb]=b[Qb])}}if(Object.getOwnPropertySymbols)for(Db=Object.getOwnPropertySymbols(b),Qb=0;Qb<Db.length;Qb++)pb=Db[Qb],0<=Wa.indexOf(pb)||Object.prototype.propertyIsEnumerable.call(b,pb)&&(bb[pb]=b[pb]);b=bb}n.shared=ak({target:J,eventOptions:X,window:la,enabled:va,transform:La},sC);if(g){var oc=qv.get(g);n[g]=ak(Dg({shared:n.shared},b),oc)}else for(oc in b)(g=
qv.get(oc))&&(n[oc]=ak(Dg({shared:n.shared},b[oc]),g));return n}function Bg(b,g){b.gestures.add(g);b.gestureEventStores[g]=new To(b,g);b.gestureTimeoutStores[g]=new qo}function Gi(b,g,n,J,X,la){if(b.has(n)&&pv.has(J)){var va=n+"Start",La=n+"End";X[J]=Wa=>{let bb=void 0;if(Wa.first&&va in g)g[va](Wa);n in g&&(bb=g[n](Wa));if(Wa.last&&La in g)g[La](Wa);return bb};la[J]=la[J]||{}}}function ni(b,g={},n,J){const X=ov.default.useMemo(()=>new EC(b),[]);X.applyHandlers(b,J);X.applyConfig(g,n);ov.default.useEffect(X.effect.bind(X));
ov.default.useEffect(()=>X.clean.bind(X),[]);if(void 0===g.target)return X.bind.bind(X)}function Bj(b){b.forEach(fl);return function(g,n){n=n||{};const J={},X={},la=new Set;for(let Qb in g)pC.test(Qb)?(la.add(RegExp.lastMatch),X[Qb]=g[Qb]):J[Qb]=g[Qb];const [va,La,Wa]=[X,J,la];g={};Gi(Wa,va,"onDrag","drag",g,n);Gi(Wa,va,"onWheel","wheel",g,n);Gi(Wa,va,"onScroll","scroll",g,n);Gi(Wa,va,"onPinch","pinch",g,n);Gi(Wa,va,"onMove","move",g,n);Gi(Wa,va,"onHover","hover",g,n);const {handlers:bb,nativeHandlers:pb,
config:Db}={handlers:g,config:n,nativeHandlers:La};return ni(bb,Db,void 0,pb)}}function Dh(b,g){return Bj([uC,xC,tC,rC,wC,vC])(b,g||{})}function zi(b){const {viewport:g,inputs:n,callbacks:J}=Mi(),X=zt.useRef(void 0),la=zt.useRef([0,0]),va=zt.useRef(0),La=zt.useMemo(()=>({onWheel:Wa=>{var bb;({event:Wa}=Wa);Wa.preventDefault();const {deltaY:pb,deltaX:Db}=Wa;var Qb=0;if(Wa.ctrlKey||Wa.metaKey){Qb=Math.sign(Wa.deltaY);let pc=pb;10<Math.abs(Wa.deltaY)&&(pc=10*Qb);Qb=pc}const [oc,ac,xc]=[Db,pb,Qb];"pinching"===
n.state||va.current>=Wa.timeStamp||(va.current=Wa.timeStamp,(Wa.altKey||Wa.ctrlKey||Wa.metaKey)&&0===Wa.buttons?(Qb=g.bounds,Wa=null!=(bb=n.currentScreenPoint)?bb:[Qb.width/2,Qb.height/2],bb=g.camera.zoom,g.onZoom(Wa,bb-xc/100*bb)):(bb=sd.mul(Wa.shiftKey&&!xk()?[ac,0]:[oc,ac],.8),sd.isEqual(bb,[0,0])||g.panCamera(bb)))},onPinchStart:({event:Wa,delta:bb,offset:pb,origin:Db})=>{var Qb;const oc=b.current;Wa instanceof WheelEvent||!(Wa.target===oc||null!=oc&&oc.contains(Wa.target))||(null==(Qb=J.onPinchStart)?
void 0:Qb.call(J,{type:"canvas",order:0,delta:[...bb,pb[0]],offset:pb,point:sd.sub(Db,n.containerOffset)},Wa),X.current=Db,la.current=[0,0])},onPinchEnd:({event:Wa,offset:bb,origin:pb})=>{var Db;const Qb=b.current;Wa instanceof WheelEvent||!(Wa.target===Qb||null!=Qb&&Qb.contains(Wa.target))||"pinching"!==n.state||(null==(Db=J.onPinchEnd)?void 0:Db.call(J,{type:"canvas",order:0,delta:[0,0,bb[0]],offset:bb,point:sd.sub(pb,n.containerOffset)},Wa),la.current=[0,0])},onPinch:({event:Wa,offset:bb,origin:pb})=>
{var Db,Qb=b.current;if(!(Wa instanceof WheelEvent)&&(Wa.target===Qb||null!=Qb&&Qb.contains(Wa.target))){X.current||(X.current=pb);Qb=sd.sub(X.current,pb);var oc=sd.sub(Qb,la.current);null==(Db=J.onPinch)?void 0:Db.call(J,{type:"canvas",order:0,delta:[...oc,bb[0]],offset:bb,point:sd.sub(pb,n.containerOffset)},Wa);la.current=Qb}}}),[J]);Dh(La,{target:b,eventOptions:{passive:!1},pinch:{from:[g.camera.zoom,g.camera.zoom],scaleBounds:()=>({from:g.camera.zoom,max:Oo.maxZoom,min:Oo.minZoom})}})}function jk(b,
g,n,J){wv.useLayoutEffect(()=>{b.current.style.transform=`translate(
        calc(${g.minX}px - var(--tl-padding)),
        calc(${g.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[g.minX,g.minY,n,g.rotation]);wv.useLayoutEffect(()=>{const X=b.current;X.style.width=`calc(${Math.floor(g.width)}px + (var(--tl-padding) * 2))`;X.style.height=`calc(${Math.floor(g.height)}px + (var(--tl-padding) * 2))`},[g.width,g.height]);wv.useLayoutEffect(()=>{const X=b.current;void 0!==J&&(X.style.zIndex=J.toString())},[J])}function hj(b,g){const {onPersist:n,onSave:J,onSaveAs:X,onError:la,onMount:va,onCreateAssets:La,onCreateShapes:Wa,onDeleteAssets:bb,onDeleteShapes:pb,
onDrop:Db,onPaste:Qb,onCanvasDBClick:oc}=g;rv.useLayoutEffect(()=>{const ac=[];if(b)return b.history.reset(),window.tlapps=window.tlapps||{},window.tlapps[b.uuid]=b,va&&va(b,null),()=>{ac.forEach(xc=>xc());window.tlapps&&delete window.tlapps[b.uuid]}},[b]);rv.useLayoutEffect(()=>{const ac=[];n&&ac.push(b.subscribe("persist",n));J&&ac.push(b.subscribe("save",J));X&&ac.push(b.subscribe("saveAs",X));la&&ac.push(b.subscribe("error",la));Wa&&ac.push(b.subscribe("create-shapes",Wa));La&&ac.push(b.subscribe("create-assets",
La));pb&&ac.push(b.subscribe("delete-shapes",pb));bb&&ac.push(b.subscribe("delete-assets",bb));Db&&ac.push(b.subscribe("drop",Db));Qb&&ac.push(b.subscribe("paste",Qb));oc&&ac.push(b.subscribe("canvas-dbclick",oc));return()=>ac.forEach(xc=>xc())},[b,n,J,X,la])}function nj(b){if("app"in b)return b.app;const [g]=sv.useState(()=>new cD(b.model,b.Shapes,b.Tools));sv.useLayoutEffect(()=>{g.initKeyboardShortcuts();return()=>{g.dispose()}},[g]);return g}function Ym(b,g){AC.useEffect(()=>{"model"in g&&g.model&&
b.loadDocumentModel(g.model)},[g.model])}function zk(b){const g=Mi(),{viewport:{bounds:n}}=g;tv.useEffect(()=>{const J=va=>{va.preventDefault()},X=va=>{if(0!==va.touches.length){var La=va.touches[0].pageX,Wa=va.touches[0].radiusX||0;(10>La-Wa||La+Wa>n.width-10)&&va.preventDefault()}},la=b.current;if(!la)return()=>{};la.addEventListener("touchstart",J,{passive:!0});la.addEventListener("gestureend",J,{passive:!0});la.addEventListener("gesturechange",J,{passive:!0});la.addEventListener("gesturestart",
J,{passive:!0});la.addEventListener("touchstart",X,{passive:!0});return()=>{la&&(la.removeEventListener("touchstart",J),la.removeEventListener("gestureend",J),la.removeEventListener("gesturechange",J),la.removeEventListener("gesturestart",J),la.removeEventListener("touchstart",X))}},[b,n.width])}function ql(b,g){const {inputs:n,callbacks:J}=Mi();return wt.useMemo(()=>({onPointerDown:X=>{var la,va;const {order:La=0}=X;La||(null==(la=X.currentTarget)?void 0:la.setPointerCapture(X.pointerId));la=b.props.handles[g];
null==(va=J.onPointerDown)?void 0:va.call(J,{type:"handle",shape:b,handle:la,id:g,order:La},X);X.order=La+1},onPointerMove:X=>{var la;const {order:va=0}=X,La=b.props.handles[g];null==(la=J.onPointerMove)?void 0:la.call(J,{type:"handle",shape:b,handle:La,id:g,order:va},X);X.order=va+1},onPointerUp:X=>{var la,va;const {order:La=0}=X;La||(null==(la=X.currentTarget)?void 0:la.releasePointerCapture(X.pointerId));la=b.props.handles[g];null==(va=J.onPointerUp)?void 0:va.call(J,{type:"handle",shape:b,handle:la,
id:g,order:La},X);X.order=La+1},onPointerEnter:X=>{var la;const {order:va=0}=X,La=b.props.handles[g];null==(la=J.onPointerEnter)?void 0:la.call(J,{type:"handle",shape:b,handle:La,id:g,order:va},X);X.order=va+1},onPointerLeave:X=>{var la;const {order:va=0}=X,La=b.props.handles[g];null==(la=J.onPointerLeave)?void 0:la.call(J,{type:"handle",shape:b,handle:La,id:g,order:va},X);X.order=va+1},onKeyUp:X=>{var la;const va=b.props.handles[g];null==(la=J.onKeyUp)?void 0:la.call(J,{type:"handle",shape:b,handle:va,
id:g,order:-1},X)},onKeyDown:X=>{var la;const va=b.props.handles[g];null==(la=J.onKeyDown)?void 0:la.call(J,{type:"handle",shape:b,handle:va,id:g,order:-1},X)}}),[b.id,n,J])}function oj(b,g,n=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${g})${n?" scale(-1,-1) translate(0, -32)":""}'>`+b.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Tl(b,
g,n=0){QC.useEffect(()=>{const J=b.current;J&&J.style.setProperty("--tl-cursor",eD[g](Uk.radiansToDegrees(n)))},[g,n])}function qm(b){const {viewport:g}=Mi(),n=Fg();XC.useLayoutEffect(()=>Md(()=>{var J;const X=g.camera.zoom;"pinching"!==n.inputs.state&&null!=X&&(null==(J=b.current)?void 0:J.style.setProperty("--tl-zoom",X.toString()))}),[])}function Ul(b,g=0){const [n,J]=(0,By.useState)(b);(0,By.useEffect)(()=>{let X=!1;const la=setTimeout(()=>{X||J(b)},g);return()=>{X=!0;clearTimeout(la)}},[b,g]);
return n}function kk(){const b=Fg();Cy.useEffect(()=>{qe(()=>xe({},b.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+b.currentPageId,JSON.stringify(b.viewport.camera))})},[b.viewport.camera]);Cy.useEffect(()=>{var g;const n=JSON.parse(null!=(g=window.sessionStorage.getItem("logseq.tldraw.camera:"+b.currentPageId))?g:"null");n?b.viewport.update(n):b.selectedIds.size?b.api.zoomToSelection():b.api.zoomToFit()},[b])}function Qj(b){b()}function Vl(b){return Le(vg(b,void 0))}
function bk(b){return{reaction:b,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+gD}}function ng(b){var g=new Map,n=1,J=new b(function(X){var la=g.get(X);la&&(la.reaction.dispose(),g.delete(X))});return{addReactionToTrack:function(X,la,va){var La=n++;J.register(va,La,X);X.current=bk(la);X.current.finalizationRegistryCleanupToken=La;g.set(La,X.current);return X.current},recordReactionAsCommitted:function(X){J.unregister(X);X.current&&X.current.finalizationRegistryCleanupToken&&g.delete(X.current.finalizationRegistryCleanupToken)},
forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function dm(){function b(){void 0===J&&(J=setTimeout(g,1E4))}function g(){J=void 0;var X=Date.now();n.forEach(function(la){var va=la.current;va&&X>=va.cleanAt&&(va.reaction.dispose(),la.current=null,n.delete(la))});0<n.size&&b()}var n=new Set,J;return{addReactionToTrack:function(X,la,va){X.current=bk(la);n.add(X);b();return X.current},recordReactionAsCommitted:function(X){n.delete(X)},forceCleanupTimerToRunNowForTests:function(){J&&
(clearTimeout(J),g())},resetCleanupScheduleForTests:function(){var X;if(0<n.size){try{for(var la=hD(n),va=la.next();!va.done;va=la.next()){var La=va.value,Wa=La.current;Wa&&(Wa.reaction.dispose(),La.current=null)}}catch(pb){var bb={error:pb}}finally{try{va&&!va.done&&(X=la.return)&&X.call(la)}finally{if(bb)throw bb.error;}}n.clear()}J&&(clearTimeout(J),J=void 0)}}}function uh(){return new kD}function Ni(b,g){void 0===g&&(g="observed");var n=Fy(ys.default.useState(uh),1)[0],J=Fy(ys.default.useState(),
2)[1],X=ys.default.useRef(null);if(!X.current)var la=new kh("observer".concat(g),function(){va.mounted?J([]):va.changedBeforeMount=!0}),va=iD(X,la,n);n=X.current.reaction;ys.default.useDebugValue(n,Vl);ys.default.useEffect(function(){jD(X);X.current?(X.current.mounted=!0,X.current.changedBeforeMount&&(X.current.changedBeforeMount=!1,J([]))):(X.current={reaction:new kh("observer".concat(g),function(){J([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},J([]));return function(){X.current.reaction.dispose();
X.current=null}},[]);var La,Wa;n.track(function(){try{La=b()}catch(bb){Wa=bb}});if(Wa)throw Wa;return La}function pf(b,g){var n;if(qy&&b.$$typeof===qy)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");g=null!==(n=null===g||void 0===g?void 0:g.forwardRef)&&void 0!==n?n:!1;var J=b,X=b.displayName||b.name;if(ry&&b.$$typeof===ry&&(g=!0,J=b.render,"function"!==
typeof J))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");n=function(la,va){return Ni(function(){return J(la,va)},X)};""!==X&&(n.displayName=X);b.contextTypes&&(n.contextTypes=b.contextTypes);g&&(n=(0,tr.forwardRef)(n));n=(0,tr.memo)(n);vj(b,n);return n}function vj(b,g){Object.keys(b).forEach(function(n){VC[n]||Object.defineProperty(g,n,Object.getOwnPropertyDescriptor(b,n))})}function Oi(b){var g=b.render;b=b.children||g;return"function"!==typeof b?null:Ni(b)}function Ck(b){const g=
Fg(),{callbacks:n}=Mi(),J=py.useRef(!1);py.useEffect(()=>{const X=Wa=>{var bb,pb;if(null==(bb=b.current)?0:bb.contains(document.activeElement))null==(pb=n.onKeyDown)?void 0:pb.call(n,{type:"canvas",order:-1},Wa),J.current=Wa.shiftKey},la=Wa=>{var bb,pb;if(null==(bb=b.current)?0:bb.contains(document.activeElement))null==(pb=n.onKeyUp)?void 0:pb.call(n,{type:"canvas",order:-1},Wa),J.current=Wa.shiftKey},va=Wa=>{var bb,pb,Db;!g.editingShape&&(null==(bb=b.current)?0:bb.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(Db=null==(pb=document.activeElement)?void 0:pb.tagName)?Db:"")&&(Wa.preventDefault(),g.paste(Wa,J.current))},La=Wa=>{var bb,pb,Db;!g.editingShape&&0<g.selectedShapes.size&&(null==(bb=b.current)?0:bb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(Db=null==(pb=document.activeElement)?void 0:pb.tagName)?Db:"")&&(Wa.preventDefault(),g.copy())};window.addEventListener("keydown",X);window.addEventListener("keyup",la);document.addEventListener("paste",
va);document.addEventListener("copy",La);return()=>{window.removeEventListener("keydown",X);window.removeEventListener("keyup",la);document.removeEventListener("paste",va);document.removeEventListener("copy",La)}},[])}function ck(b){const {inputs:g,callbacks:n}=Mi(),J=Hy.useRef(-1);return Hy.useMemo(()=>({onPointerDown:X=>{var la,va;const {order:La=0}=X;La||(null==(la=X.currentTarget)?void 0:la.setPointerCapture(X.pointerId));null==(va=n.onPointerDown)?void 0:va.call(n,{type:"shape",shape:b,order:La},
X);X.order=La+1},onPointerMove:X=>{var la;const {order:va=0}=X;null==(la=n.onPointerMove)?void 0:la.call(n,{type:"shape",shape:b,order:va},X);X.order=va+1},onPointerUp:X=>{var la,va,La;const {order:Wa=0}=X;Wa||(null==(la=X.currentTarget)?void 0:la.releasePointerCapture(X.pointerId));null==(va=n.onPointerUp)?void 0:va.call(n,{type:"shape",shape:b,order:Wa},X);la=Date.now();va=la-J.current;300<va?J.current=la:300>=va&&(null==(La=n.onDoubleClick)?void 0:La.call(n,{type:"shape",shape:b,order:Wa},X),J.current=
-1);X.order=Wa+1},onPointerEnter:X=>{var la;const {order:va=0}=X;null==(la=n.onPointerEnter)?void 0:la.call(n,{type:"shape",shape:b,order:va},X);X.order=va+1},onPointerLeave:X=>{var la;const {order:va=0}=X;null==(la=n.onPointerLeave)?void 0:la.call(n,{type:"shape",shape:b,order:va},X);X.order=va+1},onKeyUp:X=>{var la;null==(la=n.onKeyUp)?void 0:la.call(n,{type:"shape",shape:b,order:-1},X)},onKeyDown:X=>{var la;null==(la=n.onKeyDown)?void 0:la.call(n,{type:"shape",shape:b,order:-1},X)}}),[b.id,g,n])}
function em(b){var {viewport:g,inputs:n,callbacks:J,components:X}=b;b=Qf(b,["viewport","inputs","callbacks","components"]);return(0,xb.jsx)(aD,{id:b.id,viewport:g,inputs:n,callbacks:J,components:X,meta:b.meta,children:(0,xb.jsx)(YC,xe({},b))})}function Gf(b){var {className:g}=b;b=Qf(b,["className"]);return(0,xb.jsx)("button",xe({className:"tl-button "+(null!=g?g:"")},b))}function wf(){wf=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var n=arguments[g],J;for(J in n)Object.prototype.hasOwnProperty.call(n,
J)&&(b[J]=n[J])}return b};return wf.apply(this,arguments)}function Mf(b,g,{checkForDefaultPrevented:n=!0}={}){return function(J){null===b||void 0===b||b(J);if(!1===n||!J.defaultPrevented)return null===g||void 0===g?void 0:g(J)}}function mk(...b){return g=>b.forEach(n=>{"function"===typeof n?n(g):null!==n&&void 0!==n&&(n.current=g)})}function Kf(...b){return(0,uD.useCallback)(mk(...b),b)}function Rj(b,g=[]){let n=[];const J=()=>{const X=n.map(la=>(0,Kq.createContext)(la));return function(la){const va=
(null===la||void 0===la?void 0:la[b])||X;return(0,Kq.useMemo)(()=>({[`__scope${b}`]:of(xe({},la),{[b]:va})}),[la,va])}};J.scopeName=b;return[function(X,la){function va(bb){const {scope:pb,children:Db}=bb,Qb=Qf(bb,["scope","children"]);bb=(null===pb||void 0===pb?void 0:pb[b][Wa])||La;const oc=(0,Kq.useMemo)(()=>Qb,Object.values(Qb));return(0,Kq.createElement)(bb.Provider,{value:oc},Db)}const La=(0,Kq.createContext)(la),Wa=n.length;n=[...n,la];va.displayName=X+"Provider";return[va,function(bb,pb){if(pb=
(0,Kq.useContext)((null===pb||void 0===pb?void 0:pb[b][Wa])||La))return pb;if(void 0!==la)return la;throw Error(`\`${bb}\` must be used within \`${X}\``);}]},Qk(J,...g)]}function Qk(...b){const g=b[0];if(1===b.length)return g;const n=()=>{const J=b.map(X=>({useScope:X(),scopeName:X.scopeName}));return function(X){const la=J.reduce((va,{useScope:La,scopeName:Wa})=>{La=La(X)[`__scope${Wa}`];return xe(xe({},va),La)},{});return(0,Kq.useMemo)(()=>({[`__scope${g.scopeName}`]:la}),[la])}};n.scopeName=g.scopeName;
return n}function Tf(b){const g=(0,xv.useRef)(b);(0,xv.useEffect)(()=>{g.current=b});return(0,xv.useMemo)(()=>(...n)=>{var J;return null===(J=g.current)||void 0===J?void 0:J.call(g,...n)},[])}function hi({prop:b,defaultProp:g,onChange:n=()=>{}}){const [J,X]=sl({defaultProp:g,onChange:n}),la=void 0!==b;g=la?b:J;const va=Tf(n);n=(0,Dt.useCallback)(La=>{la?(La="function"===typeof La?La(b):La,La!==b&&va(La)):X(La)},[la,b,X,va]);return[g,n]}function sl({defaultProp:b,onChange:g}){b=(0,Dt.useState)(b);
const [n]=b,J=(0,Dt.useRef)(n),X=Tf(g);(0,Dt.useEffect)(()=>{J.current!==n&&(X(n),J.current=n)},[n,J,X]);return b}function Ef(b){return(0,Fm.isValidElement)(b)&&b.type===wD}function ok(b,g){const n=xe({},g);for(const J in g){const X=b[J],la=g[J];/^on[A-Z]/.test(J)?X&&la?n[J]=(...va)=>{la(...va);X(...va)}:X&&(n[J]=X):"style"===J?n[J]=xe(xe({},X),la):"className"===J&&(n[J]=[X,la].filter(Boolean).join(" "))}return xe(xe({},b),n)}function uj(b,g){b&&(0,vD.flushSync)(()=>b.dispatchEvent(g))}function Pk(b){var g=
b+"CollectionProvider";const [n,J]=Rj(g),[X,la]=n(g,{collectionRef:{current:null},itemMap:new Map}),va=pb=>{const {scope:Db,children:Qb}=pb;pb=Vo.default.useRef(null);const oc=Vo.default.useRef(new Map).current;return Vo.default.createElement(X,{scope:Db,itemMap:oc,collectionRef:pb},Qb)};Object.assign(va,{displayName:g});const La=b+"CollectionSlot";g=Vo.default.forwardRef((pb,Db)=>{const {scope:Qb,children:oc}=pb;pb=la(La,Qb);Db=Kf(Db,pb.collectionRef);return Vo.default.createElement(Lq,{ref:Db},
oc)});Object.assign(g,{displayName:La});const Wa=b+"CollectionItemSlot",bb=Vo.default.forwardRef((pb,Db)=>{const {scope:Qb,children:oc}=pb,ac=Qf(pb,["scope","children"]),xc=Vo.default.useRef(null);pb=Kf(Db,xc);const pc=la(Wa,Qb);Vo.default.useEffect(()=>{pc.itemMap.set(xc,xe({ref:xc},ac));return()=>void pc.itemMap.delete(xc)});return Vo.default.createElement(Lq,{["data-radix-collection-item"]:"",ref:pb},oc)});Object.assign(bb,{displayName:Wa});return[{Provider:va,Slot:g,ItemSlot:bb},function(pb){const Db=
la(b+"CollectionConsumer",pb);return Vo.default.useCallback(()=>{const Qb=Db.collectionRef.current;if(!Qb)return[];const oc=Array.from(Qb.querySelectorAll("[data-radix-collection-item]"));return Array.from(Db.itemMap.values()).sort((ac,xc)=>oc.indexOf(ac.ref.current)-oc.indexOf(xc.ref.current))},[Db.collectionRef,Db.itemMap])},J]}function Pj(b){const g=(0,Oy.useContext)(xD);return b||g||"ltr"}function Jm(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Tf(b);(0,yD.useEffect)(()=>
{const J=X=>{"Escape"===X.key&&n(X)};g.addEventListener("keydown",J);return()=>g.removeEventListener("keydown",J)},[n,g])}function aj(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Tf(b),J=(0,on.useRef)(!1),X=(0,on.useRef)(()=>{});(0,on.useEffect)(()=>{const la=La=>{if(La.target&&!J.current){let Wa=function(){pk("dismissableLayer.pointerDownOutside",n,bb,{discrete:!0})};const bb={originalEvent:La};"touch"===La.pointerType?(g.removeEventListener("click",X.current),X.current=
Wa,g.addEventListener("click",X.current,{once:!0})):Wa()}J.current=!1},va=window.setTimeout(()=>{g.addEventListener("pointerdown",la)},0);return()=>{window.clearTimeout(va);g.removeEventListener("pointerdown",la);g.removeEventListener("click",X.current)}},[g,n]);return{onPointerDownCapture:()=>J.current=!0}}function Cj(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Tf(b),J=(0,on.useRef)(!1);(0,on.useEffect)(()=>{const X=la=>{la.target&&!J.current&&pk("dismissableLayer.focusOutside",
n,{originalEvent:la},{discrete:!1})};g.addEventListener("focusin",X);return()=>g.removeEventListener("focusin",X)},[g,n]);return{onFocusCapture:()=>J.current=!0,onBlurCapture:()=>J.current=!1}}function rl(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}function pk(b,g,n,{discrete:J}){const X=n.originalEvent.target;n=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:n});g&&X.addEventListener(b,g,{once:!0});J?uj(X,n):X.dispatchEvent(n)}function Sk(){(0,AD.useEffect)(()=>
{var b,g;const n=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(b=n[0])&&void 0!==b?b:Km());document.body.insertAdjacentElement("beforeend",null!==(g=n[1])&&void 0!==g?g:Km());Bv++;return()=>{1===Bv&&document.querySelectorAll("[data-radix-focus-guard]").forEach(J=>J.remove());Bv--}},[])}function Km(){const b=document.createElement("span");b.setAttribute("data-radix-focus-guard","");b.tabIndex=0;b.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";
return b}function jn(b,{select:g=!1}={}){const n=document.activeElement;for(const J of b)if(Ui(J,{select:g}),document.activeElement!==n)break}function Sl(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const J="INPUT"===n.tagName&&"hidden"===n.type;return n.disabled||n.hidden||J?NodeFilter.FILTER_SKIP:0<=n.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function Bm(b,g){for(const n of b)if(!hl(n,{upTo:g}))return n}
function hl(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function Ui(b,{select:g=!1}={}){if(b&&b.focus){const n=document.activeElement;b.focus({preventScroll:!0});b!==n&&b instanceof HTMLInputElement&&"select"in b&&g&&b.select()}}function Fk(b,g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function qk(b){return b.filter(g=>"A"!==g.tagName)}function Gk(b){const [g,
n]=Sy.useState(CD());pn(()=>{b||n(J=>null!==J&&void 0!==J?J:String(DD++))},[b]);return b||(g?`radix-${g}`:"")}function rk(b){return b.split("-")[0]}function Sj(b){return["top","bottom"].includes(rk(b))?"x":"y"}function tl(b){return"y"===b?"height":"width"}function ul(b,g,n){let {reference:J,floating:X}=b;var la=J.x+J.width/2-X.width/2;const va=J.y+J.height/2-X.height/2;b=Sj(g);var La=tl(b);La=J[La]/2-X[La]/2;const Wa="x"===b;switch(rk(g)){case "top":la={x:la,y:J.y-X.height};break;case "bottom":la=
{x:la,y:J.y+J.height};break;case "right":la={x:J.x+J.width,y:va};break;case "left":la={x:J.x-X.width,y:va};break;default:la={x:J.x,y:J.y}}switch(g.split("-")[1]){case "start":la[b]-=La*(n&&Wa?-1:1);break;case "end":la[b]+=La*(n&&Wa?-1:1)}return la}function Ek(b){return"number"!=typeof b?xe({top:0,right:0,bottom:0,left:0},b):{top:b,right:b,bottom:b,left:b}}function wj(b){return of(xe({},b),{top:b.y,left:b.x,right:b.x+b.width,bottom:b.y+b.height})}function Wl(b,g){return eb(this,null,function*(){var n;
void 0===g&&(g={});const {x:J,y:X,platform:la,rects:va,elements:La,strategy:Wa}=b,{boundary:bb="clippingAncestors",rootBoundary:pb="viewport",elementContext:Db="floating",altBoundary:Qb=!1,padding:oc=0}=g,ac=Ek(oc),xc=La[Qb?"floating"===Db?"reference":"floating":Db],pc=wj(yield la.getClippingRect({element:null==(n=yield null==la.isElement?void 0:la.isElement(xc))||n?xc:xc.contextElement||(yield null==la.getDocumentElement?void 0:la.getDocumentElement(La.floating)),boundary:bb,rootBoundary:pb,strategy:Wa}));
n=wj(la.convertOffsetParentRelativeRectToViewportRelativeRect?yield la.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===Db?of(xe({},va.floating),{x:J,y:X}):va.reference,offsetParent:yield null==la.getOffsetParent?void 0:la.getOffsetParent(La.floating),strategy:Wa}):va[Db]);return{top:pc.top-n.top+ac.top,bottom:n.bottom-pc.bottom+ac.bottom,left:pc.left-n.left+ac.left,right:n.right-pc.right+ac.right}})}function vl(b){return b.replace(/left|right|bottom|top/g,g=>FD[g])}function il(b,
g,n){void 0===n&&(n=!1);const J=b.split("-")[1],X=Sj(b);b=tl(X);n="x"===X?J===(n?"end":"start")?"right":"left":"start"===J?"bottom":"top";return g.reference[b]>g.floating[b]&&(n=vl(n)),{main:n,cross:vl(n)}}function Dk(b){return b.replace(/start|end/g,g=>GD[g])}function Cm(b,g){return{top:b.top-g.height,right:b.right-g.width,bottom:b.bottom-g.height,left:b.left-g.width}}function nk(b){return Uy.some(g=>0<=b[g])}function Vi(b){return null==b?window:b&&b.document&&b.location&&b.alert&&b.setInterval?
b:(b=b.ownerDocument)&&b.defaultView||window}function zh(b){return Vi(b).getComputedStyle(b)}function ui(b){return b&&b.document&&b.location&&b.alert&&b.setInterval?"":b?(b.nodeName||"").toLowerCase():""}function sk(){const b=navigator.userAgentData;return null!=b&&b.brands?b.brands.map(g=>g.brand+"/"+g.version).join(" "):navigator.userAgent}function Ti(b){return b instanceof Vi(b).HTMLElement}function Zg(b){return b instanceof Vi(b).Element}function $g(b){return"undefined"==typeof ShadowRoot?!1:
b instanceof Vi(b).ShadowRoot||b instanceof ShadowRoot}function yg(b){const {overflow:g,overflowX:n,overflowY:J}=zh(b);return/auto|scroll|overlay|hidden/.test(g+J+n)}function Kj(b){const g=/firefox/i.test(sk());b=zh(b);return"none"!==b.transform||"none"!==b.perspective||"paint"===b.contain||["transform","perspective"].includes(b.willChange)||g&&"filter"===b.willChange||g&&!!b.filter&&"none"!==b.filter}function Gh(){return!/^((?!chrome|android).)*safari/i.test(sk())}function ii(b,g,n){var J,X,la,va;
void 0===g&&(g=!1);void 0===n&&(n=!1);var La=b.getBoundingClientRect();let Wa=1,bb=1;g&&Ti(b)&&(Wa=0<b.offsetWidth&&Et(La.width)/b.offsetWidth||1,bb=0<b.offsetHeight&&Et(La.height)/b.offsetHeight||1);b=Zg(b)?Vi(b):window;g=!Gh()&&n;n=(La.left+(g&&null!=(J=null==(X=b.visualViewport)?void 0:X.offsetLeft)?J:0))/Wa;J=(La.top+(g&&null!=(la=null==(va=b.visualViewport)?void 0:va.offsetTop)?la:0))/bb;la=La.width/Wa;La=La.height/bb;return{width:la,height:La,top:J,right:n+la,bottom:J+La,left:n,x:n,y:J}}function dg(b){return(g=
b,(g instanceof Vi(g).Node?b.ownerDocument:b.document)||window.document).documentElement;var g}function Ai(b){return Zg(b)?{scrollLeft:b.scrollLeft,scrollTop:b.scrollTop}:{scrollLeft:b.pageXOffset,scrollTop:b.pageYOffset}}function Sf(b){return ii(dg(b)).left+Ai(b).scrollLeft}function Gg(b){return"html"===ui(b)?b:b.assignedSlot||b.parentNode||($g(b)?b.host:null)||dg(b)}function ij(b){return Ti(b)&&"fixed"!==getComputedStyle(b).position?b.offsetParent:null}function Zh(b){for(var g=Vi(b),n=ij(b);n&&
["table","td","th"].includes(ui(n))&&"static"===getComputedStyle(n).position;)n=ij(n);if(!n||"html"!==ui(n)&&("body"!==ui(n)||"static"!==getComputedStyle(n).position||Kj(n))){if(!n)a:{b=Gg(b);for($g(b)&&(b=b.host);Ti(b)&&!["html","body"].includes(ui(b));){if(Kj(b)){n=b;break a}b=b.parentNode}n=null}g=n||g}return g}function nh(b){if(Ti(b))return{width:b.offsetWidth,height:b.offsetHeight};b=ii(b);return{width:b.width,height:b.height}}function jg(b){const g=Gg(b);return["html","body","#document"].includes(ui(g))?
b.ownerDocument.body:Ti(g)&&yg(g)?g:jg(g)}function oh(b,g){var n;void 0===g&&(g=[]);var J=jg(b);b=J===(null==(n=b.ownerDocument)?void 0:n.body);n=Vi(J);J=b?[n].concat(n.visualViewport||[],yg(J)?J:[]):J;g=g.concat(J);return b?g:g.concat(oh(J))}function wl(b,g,n){return"viewport"===g?wj(function(J,X){var la=Vi(J),va=dg(J);la=la.visualViewport;J=va.clientWidth;va=va.clientHeight;let La=0,Wa=0;if(la){J=la.width;va=la.height;const bb=Gh();(bb||!bb&&"fixed"===X)&&(La=la.offsetLeft,Wa=la.offsetTop)}return{width:J,
height:va,x:La,y:Wa}}(b,n)):Zg(g)?function(J,X){var la=ii(J,!1,"fixed"===X);X=la.top+J.clientTop;la=la.left+J.clientLeft;return{top:X,left:la,x:la,y:X,right:la+J.clientWidth,bottom:X+J.clientHeight,width:J.clientWidth,height:J.clientHeight}}(g,n):wj(function(J){var X;const la=dg(J);var va=Ai(J);const La=null==(X=J.ownerDocument)?void 0:X.body;X=zs(la.scrollWidth,la.clientWidth,La?La.scrollWidth:0,La?La.clientWidth:0);const Wa=zs(la.scrollHeight,la.clientHeight,La?La.scrollHeight:0,La?La.clientHeight:
0);J=-va.scrollLeft+Sf(J);va=-va.scrollTop;return"rtl"===zh(La||la).direction&&(J+=zs(la.clientWidth,La?La.clientWidth:0)-X),{width:X,height:Wa,x:J,y:va}}(dg(b)))}function Bi(b){const g=oh(b),n=["absolute","fixed"].includes(zh(b).position)&&Ti(b)?Zh(b):b;return Zg(n)?g.filter(J=>{var X;if(X=Zg(J))a:if(X=null==n.getRootNode?void 0:n.getRootNode(),J.contains(n))X=!0;else{if(X&&$g(X)){X=n;do{if(X&&J===X){X=!0;break a}X=X.parentNode||X.host}while(X)}X=!1}return X&&"body"!==ui(J)}):[]}function Ri(b,g,
n,J){void 0===J&&(J={});const {ancestorScroll:X=!0,ancestorResize:la=!0,elementResize:va=!0,animationFrame:La=!1}=J,Wa=X&&!La,bb=la&&!La,pb=Wa||bb?[...(Zg(b)?oh(b):[]),...oh(g)]:[];pb.forEach(ac=>{Wa&&ac.addEventListener("scroll",n,{passive:!0});bb&&ac.addEventListener("resize",n)});let Db,Qb=null;if(va){let ac=!0;Qb=new ResizeObserver(()=>{ac||n();ac=!1});Zg(b)&&!La&&Qb.observe(b);Qb.observe(g)}let oc=La?ii(b):null;return La&&function xc(){const pc=ii(b);!oc||pc.x===oc.x&&pc.y===oc.y&&pc.width===
oc.width&&pc.height===oc.height||n();oc=pc;Db=requestAnimationFrame(xc)}(),n(),()=>{var xc;pb.forEach(pc=>{Wa&&pc.removeEventListener("scroll",n);bb&&pc.removeEventListener("resize",n)});null==(xc=Qb)||xc.disconnect();Qb=null;La&&cancelAnimationFrame(Db)}}function Ob(b,g){if(b===g)return!0;if(typeof b!==typeof g)return!1;if("function"===typeof b&&b.toString()===g.toString())return!0;let n,J;if(b&&g&&"object"==typeof b){if(Array.isArray(b)){var X=b.length;if(X!=g.length)return!1;for(n=X;0!==n--;)if(!Ob(b[n],
g[n]))return!1;return!0}J=Object.keys(b);X=J.length;if(X!==Object.keys(g).length)return!1;for(n=X;0!==n--;)if(!Object.prototype.hasOwnProperty.call(g,J[n]))return!1;for(n=X;0!==n--;)if(X=J[n],!("_owner"===X&&b.$$typeof||Ob(b[X],g[X])))return!1;return!0}return b!==b&&g!==g}function cc(b){const g=Gn.useRef(b);Ft(()=>{g.current=b});return g}function bc(b){let {middleware:g,placement:n="bottom",strategy:J="absolute",whileElementsMounted:X}=void 0===b?{}:b;const la=Gn.useRef(null),va=Gn.useRef(null),La=
cc(X),Wa=Gn.useRef(null),[bb,pb]=Gn.useState({x:null,y:null,strategy:J,placement:n,middlewareData:{}}),[Db,Qb]=Gn.useState(g);Ob(null==Db?void 0:Db.map(Qc=>{({options:Qc}=Qc);return Qc}),null==g?void 0:g.map(Qc=>{({options:Qc}=Qc);return Qc}))||Qb(g);const oc=Gn.useCallback(()=>{la.current&&va.current&&ND(la.current,va.current,{middleware:Db,placement:n,strategy:J}).then(Qc=>{ac.current&&OD.flushSync(()=>{pb(Qc)})})},[Db,n,J]);Ft(()=>{ac.current&&oc()},[oc]);const ac=Gn.useRef(!1);Ft(()=>{ac.current=
!0;return()=>{ac.current=!1}},[]);const xc=Gn.useCallback(()=>{"function"===typeof Wa.current&&(Wa.current(),Wa.current=null);if(la.current&&va.current)if(La.current){const Qc=La.current(la.current,va.current,oc);Wa.current=Qc}else oc()},[oc,La]),pc=Gn.useCallback(Qc=>{la.current=Qc;xc()},[xc]),Tb=Gn.useCallback(Qc=>{va.current=Qc;xc()},[xc]),tc=Gn.useMemo(()=>({reference:la,floating:va}),[]);return Gn.useMemo(()=>of(xe({},bb),{update:oc,refs:tc,reference:pc,floating:Tb}),[bb,oc,tc,pc,Tb])}function ja(b){const [g,
n]=(0,QD.useState)(void 0);pn(()=>{if(b){n({width:b.offsetWidth,height:b.offsetHeight});const J=new ResizeObserver(X=>{if(Array.isArray(X)&&X.length){X=X[0];if("borderBoxSize"in X){X=X.borderBoxSize;var la=Array.isArray(X)?X[0]:X;X=la.inlineSize;la=la.blockSize}else X=b.offsetWidth,la=b.offsetHeight;n({width:X,height:la})}});J.observe(b,{box:"border-box"});return()=>J.unobserve(b)}n(void 0)},[b]);return g}function Fb(b){return void 0!==b}function Rb(b){return null!==b}function sb(b){const [g,n="center"]=
b.split("-");return[g,n]}function vb(b,g){return(0,ip.useReducer)((n,J)=>{J=g[n][J];return null!==J&&void 0!==J?J:n},b)}function Nb(b){const [g,n]=(0,ip.useState)(),J=(0,ip.useRef)({}),X=(0,ip.useRef)(b),la=(0,ip.useRef)("none"),[va,La]=vb(b?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,ip.useEffect)(()=>{const Wa=qb(J.current);la.current="mounted"===va?Wa:"none"},
[va]);pn(()=>{const Wa=J.current,bb=X.current;if(bb!==b){const pb=la.current,Db=qb(Wa);b?La("MOUNT"):"none"===Db||"none"===(null===Wa||void 0===Wa?void 0:Wa.display)?La("UNMOUNT"):bb&&pb!==Db?La("ANIMATION_OUT"):La("UNMOUNT");X.current=b}},[b,La]);pn(()=>{if(g){const Wa=pb=>{const Db=qb(J.current).includes(pb.animationName);pb.target===g&&Db&&(0,aE.flushSync)(()=>La("ANIMATION_END"))},bb=pb=>{pb.target===g&&(la.current=qb(J.current))};g.addEventListener("animationstart",bb);g.addEventListener("animationcancel",
Wa);g.addEventListener("animationend",Wa);return()=>{g.removeEventListener("animationstart",bb);g.removeEventListener("animationcancel",Wa);g.removeEventListener("animationend",Wa)}}La("ANIMATION_END")},[g,La]);return{isPresent:["mounted","unmountSuspended"].includes(va),ref:(0,ip.useCallback)(Wa=>{Wa&&(J.current=getComputedStyle(Wa));n(Wa)},[])}}function qb(b){return(null===b||void 0===b?void 0:b.animationName)||"none"}function Kb(b,g,n){b=b.key;n="rtl"!==n?b:"ArrowLeft"===b?"ArrowRight":"ArrowRight"===
b?"ArrowLeft":b;if("vertical"!==g||!["ArrowLeft","ArrowRight"].includes(n))if("horizontal"!==g||!["ArrowUp","ArrowDown"].includes(n))return hE[n]}function Zb(b){const g=document.activeElement;for(const n of b){if(n===g)break;n.focus();if(document.activeElement!==g)break}}function Ac(b,g){return b.map((n,J)=>b[(g+J)%b.length])}function Nc(b,g){var n=(0,lE.useState)(function(){return{value:b,callback:g,facade:{get current(){return n.value},set current(J){var X=n.value;X!==J&&(n.value=J,n.callback(J,
X))}}}})[0];n.callback=g;return n.facade}function Rc(b,g){return Nc(g||null,function(n){return b.forEach(function(J){"function"===typeof J?J(n):J&&(J.current=n);return J})})}function wd(b){return b}function Sd(b,g){void 0===g&&(g=wd);var n=[],J=!1;return{read:function(){if(J)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:b},useMedium:function(X){var la=g(X,J);n.push(la);return function(){n=n.filter(function(va){return va!==
la})}},assignSyncMedium:function(X){for(J=!0;n.length;){var la=n;n=[];la.forEach(X)}n={push:function(va){return X(va)},filter:function(){return n}}},assignMedium:function(X){J=!0;var la=[];if(n.length){var va=n;n=[];va.forEach(X);la=n}var La=function(){var Wa=la;la=[];Wa.forEach(X)};Promise.resolve().then(La);n={push:function(Wa){la.push(Wa);Promise.resolve().then(La)},filter:function(Wa){la=la.filter(Wa);return n}}}}}function Fd(b){const g=document.activeElement;for(const n of b){if(n===g)break;
n.focus();if(document.activeElement!==g)break}}function Bd(b,g){return b.map((n,J)=>b[(g+J)%b.length])}function Hd(b,g,n){const J=1<g.length&&Array.from(g).every(la=>la===g[0])?g[0]:g,X=n?b.indexOf(n):-1;b=Bd(b,Math.max(X,0));1===J.length&&(b=b.filter(la=>la!==n));b=b.find(la=>la.toLowerCase().startsWith(J.toLowerCase()));return b!==n?b:void 0}function ye(b){return g=>"mouse"===g.pointerType?b(g):void 0}function Of(b,[g,n]){return Math.min(n,Math.max(g,b))}function ue(b){const g=(0,Iz.useRef)({value:b,
previous:b});return(0,Iz.useMemo)(()=>{g.current.value!==b&&(g.current.previous=g.current.value,g.current.value=b);return g.current.previous},[b])}function $e(b=[],g,n){b=[...b];b[n]=g;return b.sort((J,X)=>J-X)}function Qe(b,g,n){return 100/(n-g)*(b-g)}function Ve(b,g){if(2<g)return`Value ${b+1} of ${g}`;if(2===g)return["Minimum","Maximum"][b]}function lg(b,g){if(1===b.length)return 0;b=b.map(J=>Math.abs(J-g));const n=Math.min(...b);return b.indexOf(n)}function Rf(b,g,n){b/=2;const J=Lf([0,50],[0,
b]);return(b-J(g)*n)*n}function Wi(b){return b.slice(0,-1).map((g,n)=>b[n+1]-g)}function Lf(b,g){return n=>b[0]===b[1]||g[0]===g[1]?g[0]:g[0]+(g[1]-g[0])/(b[1]-b[0])*(n-b[0])}function fg(b,g){g=Math.pow(10,g);return Math.round(b*g)/g}function jh(b){function g(La){return La?(0,xb.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:La},children:(0,xb.jsx)("div",{className:`w-full h-full bg-${La}-500`})}):(0,xb.jsx)("div",{className:"tl-color-bg",children:(0,xb.jsx)(Vh,{name:"color-swatch"})})}
var {color:n,opacity:J,popoverSide:X,setColor:la,setOpacity:va}=b;b=Qf(b,["color","opacity","popoverSide","setColor","setOpacity"]);return(0,xb.jsx)(Qz,of(xe({},b),{border:!0,arrow:!0,side:X,label:g(n),children:(0,xb.jsxs)("div",{className:"p-1",children:[(0,xb.jsx)("div",{className:"tl-color-palette",children:Object.values(ca).map(La=>(0,xb.jsx)("button",{className:`tl-color-drip m-1${La===n?" active":""}`,onClick:()=>la(La),children:g(La)},La))}),va&&(0,xb.jsx)("div",{className:"mx-1 my-2",children:(0,xb.jsxs)(fF,
{defaultValue:[null!=J?J:0],onValueCommit:La=>va(La[0]),max:1,step:.1,"aria-label":"Opacity",className:"tl-slider-root",children:[(0,xb.jsx)(gF,{className:"tl-slider-track",children:(0,xb.jsx)(hF,{className:"tl-slider-range"})}),(0,xb.jsx)(iF,{className:"tl-slider-thumb"})]})})]})}))}function Kg(b){const g=Tf(b),n=(0,xf.useRef)(""),J=(0,xf.useRef)(0);b=(0,xf.useCallback)(la=>{la=n.current+la;g(la);(function Wa(La){n.current=La;window.clearTimeout(J.current);""!==La&&(J.current=window.setTimeout(()=>
Wa(""),1E3))})(la)},[g]);const X=(0,xf.useCallback)(()=>{n.current="";window.clearTimeout(J.current)},[]);(0,xf.useEffect)(()=>()=>window.clearTimeout(J.current),[]);return[n,b,X]}function Lg(b,g,n){const J=1<g.length&&Array.from(g).every(la=>la===g[0])?g[0]:g,X=n?b.indexOf(n):-1;b=ph(b,Math.max(X,0));1===J.length&&(b=b.filter(la=>la!==n));b=b.find(la=>la.textValue.toLowerCase().startsWith(J.toLowerCase()));return b!==n?b:void 0}function ph(b,g){return b.map((n,J)=>b[(g+J)%b.length])}function qg(b){var {options:g,
value:n,onValueChange:J}=b;b=Qf(b,["options","value","onValueChange"]);const [X,la]=lF.useState(!1);return(0,xb.jsx)("div",of(xe({},b),{className:"tl-select-input",children:(0,xb.jsxs)(FF,{open:X,onOpenChange:la,value:n,onValueChange:J,children:[(0,xb.jsxs)(GF,{className:"tl-select-input-trigger",children:[(0,xb.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,xb.jsx)(HF,{})}),(0,xb.jsx)(IF,{style:{lineHeight:1},children:(0,xb.jsx)(Vh,{name:X?"chevron-up":"chevron-down"})})]}),(0,xb.jsx)(JF,
{className:"tl-select-input-portal",children:(0,xb.jsxs)(KF,{className:"tl-select-input-content",children:[(0,xb.jsx)(OF,{}),(0,xb.jsx)(LF,{className:"tl-select-input-viewport",children:g.map(va=>(0,xb.jsx)(MF,{className:"tl-select-input-select-item",value:va.value,children:(0,xb.jsx)(NF,{children:va.label})},va.value))}),(0,xb.jsx)(PF,{})]})})]})}))}function $f(b,g){return function(n){return b(g(n))}}function bh(b,g){return g(b)}function Jf(b,g){return function(n){return b(g,n)}}function Li(b,g){return function(){return b(g)}}
function qh(b,g){g(b);return b}function Cg(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return g}function Uj(b){b()}function si(b){return function(){return b}}function uk(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return function(){g.map(Uj)}}function Vj(){}function ch(b,g){return b(1,g)}function am(b,g){b(0,g)}function ym(b){b(2)}function kg(b){return b(4)}function tg(b,g){return ch(b,Jf(g,0))}function Dl(b,g){var n=b(1,function(J){n();g(J)});return n}
function ug(){var b=[];return function(g,n){switch(g){case 2:b.splice(0,b.length);break;case 1:return b.push(n),function(){var J=b.indexOf(n);-1<J&&b.splice(J,1)};case 0:b.slice().forEach(function(J){J(n)});break;default:throw Error("unrecognized action "+g);}}}function Bf(b){var g=b,n=ug();return function(J,X){switch(J){case 1:X(g);break;case 0:g=X;break;case 4:return g}return n(J,X)}}function Fj(b){var g,n;return function(J,X){switch(J){case 1:if(X){if(n===X)break;g&&g();n=X;return g=b(1,X)}g&&
g();return Vj;case 2:g&&g();n=null;break;default:throw Error("unrecognized action "+J);}}}function Xh(b){return qh(ug(),function(g){return tg(b,g)})}function Ng(b,g){return qh(Bf(g),function(n){return tg(b,n)})}function Di(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return function(J){return g.reduceRight(bh,J)}}function qf(b){for(var g=arguments.length,n=Array(1<g?g-1:0),J=1;J<g;J++)n[J-1]=arguments[J];var X=Di.apply(void 0,n);return function(la,va){switch(la){case 1:return ch(b,
X(va));case 2:b(2);break;default:throw Error("unrecognized action "+la);}}}function bm(b,g){return b===g}function Tg(b){void 0===b&&(b=bm);var g;return function(n){return function(J){b(g,J)||(g=J,n(J))}}}function Og(b){return function(g){return function(n){b(n)&&g(n)}}}function Vd(b){return function(g){return $f(g,b)}}function sf(b){return function(g){return function(){return g(b)}}}function Ie(b,g){return function(n){return function(J){return n(g=b(g,J))}}}function bf(b){return function(g){return function(n){0<
b?b--:g(n)}}}function Ei(b){var g,n;return function(J){return function(X){g=X;n||=setTimeout(function(){n=void 0;J(g)},b)}}}function Yg(b){var g,n;return function(J){return function(X){g=X;n&&clearTimeout(n);n=setTimeout(function(){J(g)},b)}}}function wg(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];var J=Array(g.length),X=0,la=null,va=Math.pow(2,g.length)-1;g.forEach(function(La,Wa){var bb=Math.pow(2,Wa);ch(La,function(pb){var Db=X;X|=bb;J[Wa]=pb;Db!==va&&X===va&&la&&(la(),
la=null)})});return function(La){return function(Wa){var bb=function(){return La([Wa].concat(J))};X===va?bb():la=bb}}}function Ah(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return function(J,X){switch(J){case 1:return uk.apply(void 0,g.map(function(la){return la(1,X)}));case 2:break;default:throw Error("unrecognized action "+J);}}}function Vg(b,g){void 0===g&&(g=bm);return qf(b,Tg(g))}function we(){for(var b=ug(),g=arguments.length,n=Array(g),J=0;J<g;J++)n[J]=arguments[J];
var X=Array(n.length),la=0,va=Math.pow(2,n.length)-1;n.forEach(function(La,Wa){var bb=Math.pow(2,Wa);ch(La,function(pb){X[Wa]=pb;la|=bb;la===va&&b(0,X)})});return function(La,Wa){switch(La){case 1:return la===va&&Wa(X),b(1,Wa);case 2:b(2);break;default:throw Error("unrecognized action "+La);}}}function ze(b,g,n){void 0===g&&(g=[]);n=(void 0===n?{singleton:!0}:n).singleton;return{id:Symbol(),constructor:b,dependencies:g,singleton:n}}function xi(b){var g=new Map;return function X(J){var la=J.id,va=
J.constructor,La=J.dependencies;if((J=J.singleton)&&g.has(la))return g.get(la);va=va(La.map(function(Wa){return X(Wa)}));J&&g.set(la,va);return va}(b)}function Be(b,g){if(null==b)return{};var n={},J=Object.keys(b),X;for(X=0;X<J.length;X++){var la=J[X];0<=g.indexOf(la)||(n[la]=b[la])}return n}function El(b,g){if(b){if("string"===typeof b)return Fl(b,g);var n=Object.prototype.toString.call(b).slice(8,-1);"Object"===n&&b.constructor&&(n=b.constructor.name);if("Map"===n||"Set"===n)return Array.from(b);
if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fl(b,g)}}function Fl(b,g){if(null==g||g>b.length)g=b.length;for(var n=0,J=Array(g);n<g;n++)J[n]=b[n];return J}function bl(b,g){var n="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(n)return(n=n.call(b)).next.bind(n);if(Array.isArray(b)||(n=El(b))||g&&b&&"number"===typeof b.length){n&&(b=n);var J=0;return function(){return J>=b.length?{done:!0}:{done:!1,value:b[J++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function ti(b,g){for(var n={},J={},X=0,la=b.length;X<la;)J[b[X]]=1,X+=1;for(var va in g)J.hasOwnProperty(va)||(n[va]=g[va]);return n}function th(b,g,n){function J(Db,Qb){Db.propsReady&&(0,Db.propsReady)(0,!1);for(var oc=bl(va),ac;!(ac=oc()).done;)ac=ac.value,(0,Db[g.required[ac]])(0,Qb[ac]);for(oc=bl(La);!(ac=oc()).done;)if(ac=ac.value,ac in Qb)(0,Db[g.optional[ac]])(0,Qb[ac]);Db.propsReady&&(0,Db.propsReady)(0,!0)}function X(Db){return Wa.reduce(function(Qb,oc){Qb[oc]=function(ac){(0,Db[g.methods[oc]])(0,
ac)};return Qb},{})}function la(Db){return bb.reduce(function(Qb,oc){Qb[oc]=Fj(Db[g.events[oc]]);return Qb},{})}var va=Object.keys(g.required||{}),La=Object.keys(g.optional||{}),Wa=Object.keys(g.methods||{}),bb=Object.keys(g.events||{}),pb=(0,qn.createContext)({});return{Component:(0,qn.forwardRef)(function(Db,Qb){var oc=Db.children,ac=Be(Db,SF),xc=(0,qn.useState)(function(){return qh(xi(b),function(Tb){return J(Tb,ac)})})[0],pc=(0,qn.useState)(Li(la,xc))[0];Xt(function(){for(var Tb=bl(bb),tc;!(tc=
Tb()).done;)if(tc=tc.value,tc in ac)(0,pc[tc])(1,ac[tc]);return function(){Object.values(pc).map(ym)}},[ac,pc,xc]);Xt(function(){J(xc,ac)});(0,qn.useImperativeHandle)(Qb,si(X(xc)));return(0,qn.createElement)(pb.Provider,{value:xc},n?(0,qn.createElement)(n,ti([].concat(va,La,bb),ac),oc):oc)}),usePublisher:function(Db){return(0,qn.useCallback)(Jf(am,(0,qn.useContext)(pb)[Db]),[Db])},useEmitterValue:function(Db){var Qb=(0,qn.useContext)(pb)[Db];Db=(0,qn.useState)(Li(kg,Qb));var oc=Db[0],ac=Db[1];Xt(function(){return ch(Qb,
function(xc){xc!==oc&&ac(si(xc))})},[Qb,oc]);return oc},useEmitter:function(Db,Qb){var oc=(0,qn.useContext)(pb)[Db];Xt(function(){return oc(1,Qb)},[Qb,oc])}}}function Je(){return Je=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var n=arguments[g],J;for(J in n)Object.prototype.hasOwnProperty.call(n,J)&&(b[J]=n[J])}return b},Je.apply(this,arguments)}function Pg(b,g){if(null==b)return{};var n,J,X={},la=Object.keys(b);for(J=0;J<la.length;J++)0<=g.indexOf(n=la[J])||(X[n]=b[n]);return X}
function Ll(b,g){(null==g||g>b.length)&&(g=b.length);for(var n=0,J=Array(g);n<g;n++)J[n]=b[n];return J}function vk(b,g){var n="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(n)return(n=n.call(b)).next.bind(n);if(Array.isArray(b)||(n=function(X,la){if(X){if("string"==typeof X)return Ll(X,la);var va=Object.prototype.toString.call(X).slice(8,-1);return"Object"===va&&X.constructor&&(va=X.constructor.name),"Map"===va||"Set"===va?Array.from(X):"Arguments"===va||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(va)?
Ll(X,la):void 0}}(b))||g&&b&&"number"==typeof b.length){n&&(b=n);var J=0;return function(){return J>=b.length?{done:!0}:{done:!1,value:b[J++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Nf(b,g){void 0===g&&(g=!0);var n=(0,bi.useRef)(null),J=function(la){};if("undefined"!=typeof ResizeObserver){var X=new ResizeObserver(function(la){la=la[0].target;null!==la.offsetParent&&b(la)});
J=function(la){la&&g?(X.observe(la),n.current=la):(n.current&&X.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:J}}function Nk(b,g){return void 0===g&&(g=!0),Nf(b,g).callbackRef}function jl(b,g,n,J,X,la,va){return Nf(function(La){for(var Wa=function(Db,Qb,oc,ac){oc=Db.length;if(0===oc)return null;for(var xc=[],pc=0;pc<oc;pc++){var Tb=Db.item(pc);if(Tb&&void 0!==Tb.dataset.index){var tc=parseInt(Tb.dataset.index),Qc=parseFloat(Tb.dataset.knownSize),Wc=Qb(Tb,"offsetHeight");if(0===Wc&&
ac("Zero-sized element, this should not happen",{child:Tb},lm.ERROR),Wc!==Qc)Tb=xc[xc.length-1],0===xc.length||Tb.size!==Wc||Tb.endIndex!==tc-1?xc.push({startIndex:tc,endIndex:tc,size:Wc}):xc[xc.length-1].endIndex++}}return xc}(La.children,g,0,X),bb=La.parentElement;!bb.dataset.virtuosoScroller;)bb=bb.parentElement;var pb="window"===bb.firstElementChild.dataset.viewportType;J({scrollTop:Math.max(va?va.scrollTop:pb?window.pageYOffset||document.documentElement.scrollTop:bb.scrollTop,0),scrollHeight:va?
va.scrollHeight:pb?document.documentElement.scrollHeight:bb.scrollHeight,viewportHeight:va?va.offsetHeight:pb?window.innerHeight:bb.offsetHeight});null==la||la(function(Db,Qb,oc){return"normal"===Qb||null!=Qb&&Qb.endsWith("px")||oc("row-gap was not resolved to pixel value correctly",Qb,lm.WARN),"normal"===Qb?0:parseInt(null!=Qb?Qb:"0",10)}(0,getComputedStyle(La).rowGap,X));null!==Wa&&b(Wa)},n)}function vf(b,g){return Math.round(b.getBoundingClientRect()[g])}function xl(b,g,n,J,X){void 0===J&&(J=Vj);
var la=(0,bi.useRef)(null),va=(0,bi.useRef)(null),La=(0,bi.useRef)(null),Wa=(0,bi.useRef)(!1),bb=(0,bi.useCallback)(function(pb){pb=pb.target;var Db=pb===window||pb===document,Qb=Db?window.pageYOffset||document.documentElement.scrollTop:pb.scrollTop,oc=Db?document.documentElement.scrollHeight:pb.scrollHeight,ac=Db?window.innerHeight:pb.offsetHeight;pb=function(){b({scrollTop:Math.max(Qb,0),scrollHeight:oc,viewportHeight:ac})};Wa.current?(0,TF.flushSync)(pb):pb();Wa.current=!1;null!==va.current&&(Qb===
va.current||0>=Qb||Qb===oc-ac)&&(va.current=null,g(!0),La.current&&(clearTimeout(La.current),La.current=null))},[b,g]);return(0,bi.useEffect)(function(){var pb=X||la.current;return J(X||la.current),bb({target:pb}),pb.addEventListener("scroll",bb,{passive:!0}),function(){J(null);pb.removeEventListener("scroll",bb)}},[la,bb,n,J,X]),{scrollerRef:la,scrollByCallback:function(pb){Wa.current=!0;la.current.scrollBy(pb)},scrollToCallback:function(pb){var Db=la.current;if(Db&&!("offsetHeight"in Db&&0===Db.offsetHeight)){var Qb,
oc,ac,xc="smooth"===pb.behavior;if(Db===window?(oc=Math.max(vf(document.documentElement,"height"),document.documentElement.scrollHeight),Qb=window.innerHeight,ac=document.documentElement.scrollTop):(oc=Db.scrollHeight,Qb=vf(Db,"height"),ac=Db.scrollTop),pb.top=Math.ceil(Math.max(Math.min(oc-Qb,pb.top),0)),1.01>Math.abs(Qb-oc)||pb.top===ac)return b({scrollTop:ac,scrollHeight:oc,viewportHeight:Qb}),void(xc&&g(!0));xc?(va.current=pb.top,La.current&&clearTimeout(La.current),La.current=setTimeout(function(){La.current=
null;va.current=null;g(!0)},1E3)):va.current=null;Db.scrollTo(pb)}}}}function Eh(b,g,n,J,X){return void 0===J&&(J=Ji),void 0===X&&(X=Ji),{k:b,v:g,lvl:n,l:J,r:X}}function ei(b,g){if(b===Ji)return Ji;var n=b.k,J=b.l,X=b.r;if(g===n){if(J===Ji)return X;if(X===Ji)return J;g=Xl(J);return Rh(Tj(b,{k:g[0],v:g[1],l:rj(J)}))}return Rh(Tj(b,g<n?{l:ei(J,g)}:{r:ei(X,g)}))}function kl(b,g,n){return(void 0===n&&(n="k"),b===Ji)?[-Infinity,void 0]:b[n]===g?[b.k,b.v]:b[n]<g?(g=kl(b.r,g,n),-Infinity===g[0]?[b.k,b.v]:
g):kl(b.l,g,n)}function yj(b,g,n){return b===Ji?Eh(g,n,1):g===b.k?Tj(b,{k:g,v:n}):Hi(Tm(Tj(b,g<b.k?{l:yj(b.l,g,n)}:{r:yj(b.r,g,n)})))}function Wk(b,g,n){if(b===Ji)return[];var J=b.k,X=b.v,la=b.r,va=[];return J>g&&(va=va.concat(Wk(b.l,g,n))),J>=g&&J<=n&&va.push({k:J,v:X}),J<=n&&(va=va.concat(Wk(la,g,n))),va}function cl(b){return b===Ji?[]:[].concat(cl(b.l),[{k:b.k,v:b.v}],cl(b.r))}function Xl(b){return b.r===Ji?[b.k,b.v]:Xl(b.r)}function rj(b){return b.r===Ji?b.l:Rh(Tj(b,{r:rj(b.r)}))}function Tj(b,
g){return Eh(void 0!==g.k?g.k:b.k,void 0!==g.v?g.v:b.v,void 0!==g.lvl?g.lvl:b.lvl,void 0!==g.l?g.l:b.l,void 0!==g.r?g.r:b.r)}function ml(b){return b===Ji||b.lvl>b.r.lvl}function Rh(b){var g=b.l,n=b.r,J=b.lvl;if(n.lvl>=J-1&&g.lvl>=J-1)return b;if(J>n.lvl+1){if(ml(g))return Tm(Tj(b,{lvl:J-1}));if(g===Ji||g.r===Ji)throw Error("Unexpected empty nodes");return Tj(g.r,{l:Tj(g,{r:g.r.l}),r:Tj(b,{l:g.r.r,lvl:J-1}),lvl:J})}if(ml(b))return Hi(Tj(b,{lvl:J-1}));if(n===Ji||n.l===Ji)throw Error("Unexpected empty nodes");
g=n.l;var X=ml(g)?n.lvl-1:n.lvl;return Tj(g,{l:Tj(b,{r:g.l,lvl:J-1}),r:Hi(Tj(n,{l:g.r,lvl:X})),lvl:g.lvl+1})}function pm(b,g,n){return b===Ji?[]:bj(Wk(b,kl(b,g)[0],n),function(J){return{index:J.k,value:J.v}})}function bj(b,g){var n=b.length;if(0===n)return[];var J=g(b[0]),X=J.index;J=J.value;for(var la=[],va=1;va<n;va++){var La=g(b[va]),Wa=La.index;La=La.value;la.push({start:X,end:Wa-1,value:J});X=Wa;J=La}return la.push({start:X,end:Infinity,value:J}),la}function Hi(b){var g=b.r,n=b.lvl;return g===
Ji||g.r===Ji||g.lvl!==n||g.r.lvl!==n?b:Tj(g,{l:Tj(b,{r:g.l}),lvl:n+1})}function Tm(b){var g=b.l;return g===Ji||g.lvl!==b.lvl?b:Tj(g,{r:Tj(b,{l:g.r})})}function fm(b,g,n,J){void 0===J&&(J=0);for(var X=b.length-1;J<=X;){var la=Math.floor((J+X)/2),va=n(b[la],g);if(0===va)return la;if(-1===va){if(2>X-J)return la-1;X=la-1}else{if(X===J)return la;J=la+1}}throw Error("Failed binary finding record in array - "+b.join(",")+", searched for "+g);}function Hj(b){var g=b.size,n=b.startIndex,J=b.endIndex;return function(X){return X.start===
n&&(X.end===J||Infinity===X.end)&&X.value===g}}function bg(b,g){b=b.index;return g===b?0:g<b?-1:1}function Si(b,g){b=b.offset;return g===b?0:g<b?-1:1}function kn(b){return{index:b.index,value:b}}function om(b,g,n,J){var X=0,la=0,va=0,La;0!==g?(va=b[La=fm(b,g-1,bg)].offset,la=kl(n,g-1),X=la[0],la=la[1],b.length&&b[La].size===kl(n,g)[1]&&--La,b=b.slice(0,La+1)):b=[];for(g=vk(pm(n,g,Infinity));!(n=g()).done;)La=n.value,n=La.start,La=La.value,X=n-X,va=X*la+va+X*J,b.push({offset:va,size:La,index:n}),X=
n,la=La;return{offsetTree:b,lastIndex:X,lastOffset:va,lastSize:la}}function y(b,g){var n=g[0],J=g[1],X=g[3];0<n.length&&(0,g[2])("received item sizes",n,lm.DEBUG);var la=b.sizeTree;g=la;var va=0;if(0<J.length&&la===Ji&&2===n.length){var La=n[0].size,Wa=n[1].size;g=J.reduce(function(pb,Db){return yj(yj(pb,Db,La),Db+1,Wa)},g)}else n=function(pb,Db){var Qb,oc=pb===Ji?0:Infinity;for(Db=vk(Db);!(Qb=Db()).done;){var ac=Qb.value;Qb=ac.size;var xc=ac.startIndex,pc=ac.endIndex;if(oc=Math.min(oc,xc),pb===Ji)pb=
yj(pb,0,Qb);else{var Tb=pm(pb,xc-1,pc+1);if(!Tb.some(Hj(ac))){var tc,Qc=ac=!1;for(Tb=vk(Tb);!(tc=Tb()).done;){var Wc=tc.value;tc=Wc.start;var rd=Wc.end;Wc=Wc.value;ac?(pc>=tc||Qb===Wc)&&(pb=ei(pb,tc)):(Qc=Wc!==Qb,ac=!0);rd>pc&&pc>=tc&&Wc!==Qb&&(pb=yj(pb,pc+1,Wc))}Qc&&(pb=yj(pb,xc,Qb))}}}return[pb,oc]}(g,n),g=n[0],va=n[1];if(g===la)return b;b=om(b.offsetTree,va,g,X);var bb=b.offsetTree;return{sizeTree:g,offsetTree:bb,lastIndex:b.lastIndex,lastOffset:b.lastOffset,lastSize:b.lastSize,groupOffsetTree:J.reduce(function(pb,
Db){return yj(pb,Db,U(Db,bb,X))},Ji),groupIndices:J}}function U(b,g,n){if(0===g.length)return 0;g=g[fm(g,b,bg)];b-=g.index;b=g.size*b+(b-1)*n+g.offset;return 0<b?b+n:b}function ya(b,g,n){if(void 0!==b.groupIndex)return g.groupIndices[b.groupIndex]+1;b=ua("LAST"===b.index?n:b.index,g);return Math.max(0,b,Math.min(n,b))}function ua(b,g){if(g.groupOffsetTree===Ji)return b;for(var n=0;g.groupIndices[n]<=b+n;)n++;return b+n}function Ga(b){b="number"==typeof b?{index:b}:b;return b.align||(b.align="start"),
b.behavior&&XF||(b.behavior="auto"),b.offset||(b.offset=0),b}function Za(b){return!!b&&("smooth"===b?"smooth":"auto")}function nb(b){return b.reduce(function(g,n){return g.groupIndices.push(g.totalCount),g.totalCount+=n+1,g},{totalCount:0,groupIndices:[]})}function rb(b,g){return!(!b||b[0]!==g[0]||b[1]!==g[1])}function Yb(b,g){return!(!b||b.startIndex!==g.startIndex||b.endIndex!==g.endIndex)}function zc(b,g,n){return"number"==typeof b?"up"===n&&"top"===g||"down"===n&&"bottom"===g?b:0:"up"===n?"top"===
g?b.main:b.reverse:"bottom"===g?b.main:b.reverse}function Bc(b,g,n){if(0===b.length)return[];if(g.groupOffsetTree===Ji)return b.map(function(Wa){return Je({},Wa,{index:Wa.index+n,originalIndex:Wa.index})});var J,X=[],la=pm(g.groupOffsetTree,b[0].index,b[b.length-1].index),va=void 0,La=0;for(b=vk(b);!(J=b()).done;)J=J.value,(!va||va.end<J.index)&&(va=la.shift(),La=g.groupIndices.indexOf(va.start)),X.push(Je({},J.index===va.start?{type:"group",index:La}:{index:J.index-(La+1)+n,groupIndex:La},{size:J.size,
offset:J.offset,originalIndex:J.index,data:J.data}));return X}function Gd(b,g,n,J,X,la){var va=0,La=0;0<b.length&&(va=b[0].offset,La=b[b.length-1],La=La.offset+La.size);var Wa=n-X.lastIndex,bb=va;J=X.lastOffset+Wa*X.lastSize+(Wa-1)*J-La;return{items:Bc(b,X,la),topItems:Bc(g,X,la),topListHeight:g.reduce(function(pb,Db){return Db.size+pb},0),offsetTop:va,offsetBottom:J,top:bb,bottom:La,totalCount:n,firstItemIndex:la}}function Nd(b){var g,n=!1;return function(){return n||(n=!0,g=b()),g}}function pd(b,
g){var n=(0,bi.useRef)(null),J=(0,bi.useCallback)(function(Wa){if(null!==Wa&&Wa.offsetParent){var bb=Wa.getBoundingClientRect();Wa=bb.width;if(g){var pb=g.getBoundingClientRect();bb=bb.top-pb.top;pb=pb.height-Math.max(0,bb);bb+=g.scrollTop}else pb=window.innerHeight-Math.max(0,bb.top),bb=bb.top+window.pageYOffset;n.current={offsetTop:bb,visibleHeight:pb,visibleWidth:Wa};b(n.current)}},[b,g]),X=Nf(J),la=X.callbackRef,va=X.ref,La=(0,bi.useCallback)(function(){J(va.current)},[J,va]);return(0,bi.useEffect)(function(){if(g){g.addEventListener("scroll",
La);var Wa=new ResizeObserver(La);return Wa.observe(g),function(){g.removeEventListener("scroll",La);Wa.unobserve(g)}}return window.addEventListener("scroll",La),window.addEventListener("resize",La),function(){window.removeEventListener("scroll",La);window.removeEventListener("resize",La)}},[La,g]),la}function Ce(b){return b}function tf(b,g){var n=ug();return ch(n,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+g,"color: red;","color: inherit;","color: blue;")}),
tg(n,b),n}function Vf(b,g){if("string"!=typeof b)return{context:g}}function jj(b){var g=b.usePublisher,n=b.useEmitter,J=b.useEmitterValue;return fh.memo(function(X){var la=X.style,va=X.children;X=Pg(X,kG);var La=g("scrollContainerState"),Wa=J("ScrollerComponent"),bb=g("smoothScrollTargetReached"),pb=J("scrollerRef"),Db=J("context");La=xl(La,bb,Wa,pb);bb=La.scrollerRef;pb=La.scrollByCallback;return n("scrollTo",La.scrollToCallback),n("scrollBy",pb),(0,bi.createElement)(Wa,Je({ref:bb,style:Je({},rG,
la),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},X,Vf(Wa,Db)),va)})}function hg(b){var g=b.usePublisher,n=b.useEmitter,J=b.useEmitterValue;return fh.memo(function(X){var la=X.style,va=X.children;X=Pg(X,lG);var La=g("windowScrollContainerState"),Wa=J("ScrollerComponent"),bb=g("smoothScrollTargetReached"),pb=J("totalListHeight"),Db=J("deviation"),Qb=J("customScrollParent"),oc=J("context");bb=xl(La,bb,Wa,Vj,Qb);var ac=bb.scrollerRef;La=bb.scrollByCallback;bb=bb.scrollToCallback;
return UF(function(){return ac.current=Qb||window,function(){ac.current=null}},[ac,Qb]),n("windowScrollTo",bb),n("scrollBy",La),(0,bi.createElement)(Wa,Je({style:Je({position:"relative"},la,0!==pb?{height:pb+Db}:{}),"data-virtuoso-scroller":!0},X,Vf(Wa,oc)),va)})}function hh(b,g,n){return Array.from({length:g-b+1}).map(function(J,X){return{index:X+b,data:null==n?void 0:n[X+b]}})}function di(b,g){return b&&b.column===g.column&&b.row===g.row}function pi(b,g,n,J){var X=n.height;return void 0===X||0===
J.length?{top:0,bottom:0}:{top:Mh(b,g,n,J[0].index),bottom:Mh(b,g,n,J[J.length-1].index)+X}}function Mh(b,g,n,J){var X=g.column;b=Er(1,$t((b.width+X)/(n.width+X)));J=$t(J/b);n=J*n.height+Er(0,J-1)*g.row;return 0<n?n+g.row:n}function ag(b,g,n){return"normal"===g||null!=g&&g.endsWith("px")||n(b+" was not resolved to pixel value correctly",g,lm.WARN),"normal"===g?0:parseInt(null!=g?g:"0",10)}function yf(b,g){void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));void 0!==g.opacity&&(g.opacity=
Math.min(1,Math.max(g.opacity,0)));return g}function yh({strokeWidth:b,size:g,mode:n}){return"svg"===n?(0,xb.jsx)("rect",{className:"tl-binding-indicator",x:b,y:b,rx:2,ry:2,width:Math.max(0,g[0]-2*b),height:Math.max(0,g[1]-2*b),strokeWidth:4*b}):(0,xb.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function dh(){const b=Fg();return"panning"===b.inputs.state||"pinching"===b.inputs.state}
function kj({left:b,middle:g,right:n,stroke:J,strokeWidth:X}){return(0,xb.jsxs)("g",{children:[(0,xb.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${b} L ${g} ${n}`}),(0,xb.jsx)("path",{d:`M ${b} L ${g} ${n}`,fill:"none",stroke:J,strokeWidth:X,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function qi(b,g,n){g=G(b,g,b,n).points;if(!g)return console.warn("Could not find an intersection for the arrow head."),{left:b,right:b};g=(n=g[0])?sd.rotWith(n,b,Math.PI/6):b;b=n?sd.rotWith(n,
b,-Math.PI/6):b;return{left:g,right:b}}function Gj(b,g,n){const {left:J,right:X}=qi(b,g,n);return`M ${J} L ${b} ${X}`}function Rl(b,g,n,J,X){b=b.strokeWidth;var la=sd.dist(g,n);b=Math.min(la/3,16*b);la=[];la.push(`M ${g} L ${n}`);J&&la.push(Gj(g,n,b));X&&la.push(Gj(n,g,b));return la.join(" ")}function Hk({id:b,bounds:g,labelSize:n,offset:J,scale:X=1}){return(0,xb.jsx)("defs",{children:(0,xb.jsxs)("mask",{id:b+"_clip",children:[(0,xb.jsx)("rect",{x:-100,y:-100,width:g.width+200,height:g.height+200,
fill:"white"}),(0,xb.jsx)("rect",{x:g.width/2-n[0]/2*X+((null==J?void 0:J[0])||0),y:g.height/2-n[1]/2*X+((null==J?void 0:J[1])||0),width:n[0]*X,height:n[1]*X,rx:4*X,ry:4*X,fill:"black"})]})})}function sm(b,g,n,J=X=>X){return b*J(.5-g*(.5-n))}function $o(b){return[-b[0],-b[1]]}function Tk(b,g){return[b[0]+g[0],b[1]+g[1]]}function zg(b,g){return[b[0]-g[0],b[1]-g[1]]}function Xk(b,g){return[b[0]*g,b[1]*g]}function gk(b){return[b[1],-b[0]]}function co(b,g){return b[0]===g[0]&&b[1]===g[1]}function Um(b){return b[0]*
b[0]+b[1]*b[1]}function On(b){var g=Math.hypot(b[0],b[1]);return[b[0]/g,b[1]/g]}function eo(b,g){return Math.hypot(b[1]-g[1],b[0]-g[0])}function nl(b,g,n){let J=Math.sin(n);n=Math.cos(n);let X=b[0]-g[0];b=b[1]-g[1];return[X*n-b*J+g[0],X*J+b*n+g[1]]}function zm(b,g,n){return Tk(b,Xk(zg(g,b),n))}function Ok(b,g,n){return Tk(b,Xk(g,n))}function ol(b,g={}){let {size:n=16,smoothing:J=.5,thinning:X=.5,simulatePressure:la=!0,easing:va=Ad=>Ad,start:La={},end:Wa={},last:bb=!1}=g,{cap:pb=!0,easing:Db=Ad=>Ad*
(2-Ad)}=La,{cap:Qb=!0,easing:oc=Ad=>--Ad*Ad*Ad+1}=Wa;if(0===b.length||0>=n)return[];var ac=b[b.length-1].runningLength;let xc=!1===La.taper?0:!0===La.taper?Math.max(n,ac):La.taper,pc=!1===Wa.taper?0:!0===Wa.taper?Math.max(n,ac):Wa.taper;var Tb=Math.pow(n*J,2);g=[];let tc=[];var Qc=b.slice(0,10).reduce((Ad,Ed)=>{var Pd=Ed.pressure;la&&(Ed=Fr(1,Ed.distance/n),Pd=Fr(1,1-Ed),Pd=Fr(1,Ad+.275*(Pd-Ad)*Ed));return(Ad+Pd)/2},b[0].pressure),Wc=sm(n,X,b[b.length-1].pressure,va),rd;let $d=b[0].vector;var ke=
b[0].point;let Fe=ke;var Se=ke;let mf=Fe;var ff=!1;for(var Xe=0;Xe<b.length;Xe++){var {pressure:Me}=b[Xe];let {point:Ad,vector:Ed,distance:Pd,runningLength:De}=b[Xe];if(Xe<b.length-1&&3>ac-De)continue;X?(la&&(Wc=Fr(1,Pd/n),Me=Fr(1,1-Wc),Me=Fr(1,Qc+.275*(Me-Qc)*Wc)),Wc=sm(n,X,Me,va)):Wc=n/2;void 0===rd&&(rd=Wc);var Uc=De<xc?Db(De/xc):1,Xc=ac-De<pc?oc((ac-De)/pc):1;Wc=Math.max(.01,Wc*Math.min(Uc,Xc));Xc=(Xe<b.length-1?b[Xe+1]:b[Xe]).vector;let Ge=Xe<b.length-1?Ed[0]*Xc[0]+Ed[1]*Xc[1]:1;Uc=null!==Ge&&
0>Ge;if(0>Ed[0]*$d[0]+Ed[1]*$d[1]&&!ff||Uc){ke=Xk(gk($d),Wc);for(let Pe=1/13,Ff=0;1>=Ff;Ff+=Pe)Se=nl(zg(Ad,ke),Ad,Js*Ff),g.push(Se),mf=nl(Tk(Ad,ke),Ad,Js*-Ff),tc.push(mf);ke=Se;Fe=mf;Uc&&(ff=!0)}else(ff=!1,Xe===b.length-1)?(Me=Xk(gk(Ed),Wc),g.push(zg(Ad,Me)),tc.push(Tk(Ad,Me))):(Qc=Xk(gk(zm(Xc,Ed,Ge)),Wc),Se=zg(Ad,Qc),(1>=Xe||Um(zg(ke,Se))>Tb)&&(g.push(Se),ke=Se),mf=Tk(Ad,Qc),(1>=Xe||Um(zg(Fe,mf))>Tb)&&(tc.push(mf),Fe=mf),Qc=Me,$d=Ed)}ac=b[0].point.slice(0,2);Tb=1<b.length?b[b.length-1].point.slice(0,
2):Tk(b[0].point,[1,1]);Se=[];ff=[];if(1===b.length){if(!xc&&!pc||bb){b=Ok(ac,On(gk(zg(ac,Tb))),-(rd||Wc));g=[];for(let Ad=1/13,Ed=Ad;1>=Ed;Ed+=Ad)g.push(nl(b,ac,2*Js*Ed));return g}}else{if(!(xc||pc&&1===b.length))if(pb)for(let Ad=1/13,Ed=Ad;1>=Ed;Ed+=Ad)rd=nl(tc[0],ac,Js*Ed),Se.push(rd);else Xe=zg(g[0],tc[0]),rd=Xk(Xe,.5),Xe=Xk(Xe,.51),Se.push(zg(ac,rd),zg(ac,Xe),Tk(ac,Xe),Tk(ac,rd));rd=gk($o(b[b.length-1].vector));if(pc||xc&&1===b.length)ff.push(Tb);else if(Qb){b=Ok(Tb,rd,Wc);for(let Ad=1/29,Ed=
Ad;1>Ed;Ed+=Ad)ff.push(nl(b,Tb,3*Js*Ed))}else ff.push(Tk(Tb,Xk(rd,Wc)),Tk(Tb,Xk(rd,.99*Wc)),zg(Tb,Xk(rd,.99*Wc)),zg(Tb,Xk(rd,Wc)))}return g.concat(ff,tc.reverse(),Se)}function Vm(b,g={}){var n;let {streamline:J=.5,size:X=16,last:la=!1}=g;if(0===b.length)return[];g=.15+.85*(1-J);b=Array.isArray(b[0])?b:b.map(({x:Db,y:Qb,pressure:oc=.5})=>[Db,Qb,oc]);if(2===b.length){var va=b[1];b=b.slice(0,-1);for(var La=1;5>La;La++)b.push(zm(b[0],va,La/4))}1===b.length&&(b=[...b,[...Tk(b[0],[1,1]),...b[0].slice(2)]]);
va=[{point:[b[0][0],b[0][1]],pressure:0<=b[0][2]?b[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];La=!1;let Wa=0,bb=va[0],pb=b.length-1;for(let Db=1;Db<b.length;Db++){let Qb=la&&Db===pb?b[Db].slice(0,2):zm(bb.point,b[Db],g);if(co(bb.point,Qb))continue;let oc=eo(Qb,bb.point);if(Wa+=oc,Db<pb&&!La){if(Wa<X)continue;La=!0}bb={point:Qb,pressure:0<=b[Db][2]?b[Db][2]:.5,vector:On(zg(bb.point,Qb)),distance:oc,runningLength:Wa};va.push(bb)}return va[0].vector=(null==(n=va[1])?void 0:n.vector)||[0,0],
va}function yn(b,g=4/3){return(new kw(b)).exportAsSVG(g)}function Zm(b,g=4/3){return(new kw(b)).generatePreviewJsx(void 0,g)}function Go({id:b,type:g,onRemove:n,showContent:J}){const {handlers:X}=QF.default.useContext(to);return(0,xb.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,xb.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,xb.jsx)(Wz,{id:b,showReferenceContent:J})}),(0,xb.jsx)("div",{className:"flex-1"}),
(0,xb.jsx)(Gf,{title:"Open Page",type:"button",onClick:()=>null==X?void 0:X.redirectToPage(b),children:(0,xb.jsx)(Vh,{name:"open-as-page"})}),(0,xb.jsx)(Gf,{title:"Open Page in Right Sidebar",type:"button",onClick:()=>null==X?void 0:X.sidebarAddBlock(b,"B"===g?"block":"page"),children:(0,xb.jsx)(Vh,{name:"move-to-sidebar-right"})}),n&&(0,xb.jsx)(Gf,{className:"tl-shape-links-panel-item-remove-button",title:"Remove link",type:"button",onClick:n,children:(0,xb.jsx)(Vh,{name:"x",className:"!translate-y-0"})})]})}
function Pn({options:b,value:g,onValueChange:n}){return(0,xb.jsx)(DA,{className:"tl-toggle-group-input",type:"single",value:g,onValueChange:n,children:b.map(J=>(0,xb.jsx)(EA,{className:"tl-toggle-group-input-button",value:J.value,disabled:J.value===g,children:(0,xb.jsx)(Vh,{name:J.icon})},J.value))})}function Ho({options:b,value:g,onValueChange:n}){return(0,xb.jsx)(DA,{className:"tl-toggle-group-input",type:"multiple",value:g,onValueChange:n,children:b.map(J=>(0,xb.jsx)(EA,{className:"tl-toggle-group-input-button",
value:J.value,children:(0,xb.jsx)(Vh,{name:J.icon})},J.value))})}function Rk(b){var {toggle:g=!0,pressed:n,onPressedChange:J,className:X}=b;b=Qf(b,["toggle","pressed","onPressedChange","className"]);return(0,xb.jsx)(jH,of(xe({},b),{"data-toggle":g,className:"tl-toggle-input"+(X?" "+X:""),pressed:n,onPressedChange:J}))}function gm(b,g){return b.filter(n=>{var J;return null==(J=mw[n.props.type])?void 0:J.includes(g)})}function An(b){return g=>"mouse"!==g.pointerType?b(g):void 0}function Gm(b){b=b.match(/\.[0-9a-z]+$/i);
if(!b)return"unknown";b=b[0].toLowerCase();return OH.includes(b)?"image":PH.includes(b)?"video":"unknown"}function Wm(...b){return(...g)=>eb(this,null,function*(){for(const n of b){const J=yield n(...g);if(J&&0<J.length)return J}return null})}function Xm(b,g){return eb(this,null,function*(){return b.types.includes(g)?b instanceof DataTransfer?b.getData(g):yield(yield b.getType(g)).text():null})}function fo(){const {handlers:b}=JA.useContext(to);return JA.useCallback((g,n)=>eb(this,null,function*(){if(n.shiftKey&&
1===g.selectedShapesArray.length){var J=yield navigator.clipboard.read();let X;0<J.length&&(J=(yield(yield J[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(J)&&40===J.length?(J=J.slice(2,-2),Uh(J)&&(X=J)):/^\[\[.*\]\]$/.test(J)&&(X=J.slice(2,-2)));if(X){g.selectedShapesArray[0].update({refs:[X]});g.persist();return}}QH(g,n,b)}),[])}function Eo(){const b=fo();return NH.useCallback((g,n)=>eb(this,[g,n],function*(J,{dataTransfer:X,point:la}){b(J,{point:la,shiftKey:!1,dataTransfer:X,
fromDrop:!0})}),[])}function Fo(){return RH.default.useCallback(b=>eb(this,null,function*(){b.selectTool("logseq-portal").selectedTool.transition("creating")}),[])}var Lo=Object.create,Vk=Object.defineProperty,Hm=Object.defineProperties,Qn=Object.getOwnPropertyDescriptor,Io=Object.getOwnPropertyDescriptors,Sn=Object.getOwnPropertyNames,Bk=Object.getOwnPropertySymbols,Ko=Object.getPrototypeOf,wn=Object.prototype.hasOwnProperty,xn=Object.prototype.propertyIsEnumerable,Im=(b,g,n)=>g in b?Vk(b,g,{enumerable:!0,
configurable:!0,writable:!0,value:n}):b[g]=n,xe=(b,g)=>{for(var n in g||={})wn.call(g,n)&&Im(b,n,g[n]);if(Bk)for(n of Bk(g))xn.call(g,n)&&Im(b,n,g[n]);return b},of=(b,g)=>Hm(b,Io(g)),Qf=(b,g)=>{var n={},J;for(J in b)wn.call(b,J)&&0>g.indexOf(J)&&(n[J]=b[J]);if(null!=b&&Bk)for(J of Bk(b))0>g.indexOf(J)&&xn.call(b,J)&&(n[J]=b[J]);return n},gn=(b,g)=>function(){return g||(0,b[Sn(b)[0]])((g={exports:{}}).exports,g),g.exports},go=(b,g,n,J)=>{if(g&&"object"===typeof g||"function"===typeof g)for(let X of Sn(g))wn.call(b,
X)||X===n||Vk(b,X,{get:()=>g[X],enumerable:!(J=Qn(g,X))||J.enumerable});return b},Ja=(b,g,n)=>(n=null!=b?Lo(Ko(b)):{},go(!g&&b&&b.__esModule?n:Vk(n,"default",{value:b,enumerable:!0}),b)),Qa=(b,g,n,J)=>{for(var X=1<J?void 0:J?Qn(g,n):g,la=b.length-1,va;0<=la;la--)if(va=b[la])X=(J?va(g,n,X):va(X))||X;J&&X&&Vk(g,n,X);return X},ia=(b,g,n)=>{Im(b,"symbol"!==typeof g?g+"":g,n);return n},eb=(b,g,n)=>new Promise((J,X)=>{var la=Wa=>{try{La(n.next(Wa))}catch(bb){X(bb)}},va=Wa=>{try{La(n.throw(Wa))}catch(bb){X(bb)}},
La=Wa=>Wa.done?J(Wa.value):Promise.resolve(Wa.value).then(la,va);La((n=n.apply(b,g)).next())}),Ib=gn({["../../node_modules/mousetrap/mousetrap.js"](b,g){(function(n,J,X){function la(pc,Tb,tc){pc.addEventListener?pc.addEventListener(Tb,tc,!1):pc.attachEvent("on"+Tb,tc)}function va(pc){if("keypress"==pc.type){var Tb=String.fromCharCode(pc.which);pc.shiftKey||(Tb=Tb.toLowerCase());return Tb}return Db[pc.which]?Db[pc.which]:Qb[pc.which]?Qb[pc.which]:String.fromCharCode(pc.which).toLowerCase()}function La(pc){return"shift"==
pc||"ctrl"==pc||"alt"==pc||"meta"==pc}function Wa(pc,Tb){var tc,Qc=[];"+"===pc?pc=["+"]:(pc=pc.replace(/\+{2}/g,"+plus"),pc=pc.split("+"));for(tc=0;tc<pc.length;++tc){var Wc=pc[tc];ac[Wc]&&(Wc=ac[Wc]);Tb&&"keypress"!=Tb&&oc[Wc]&&(Wc=oc[Wc],Qc.push("shift"));La(Wc)&&Qc.push(Wc)}pc=Wc;if(!Tb){if(!xc){xc={};for(var rd in Db)95<rd&&112>rd||Db.hasOwnProperty(rd)&&(xc[Db[rd]]=rd)}Tb=xc[pc]?"keydown":"keypress"}"keypress"==Tb&&Qc.length&&(Tb="keydown");return{key:Wc,modifiers:Qc,action:Tb}}function bb(pc,
Tb){return null===pc||pc===J?!1:pc===Tb?!0:bb(pc.parentNode,Tb)}function pb(pc){function Tb(Me){Me=Me||{};var Uc=!1,Xc;for(Xc in Fe)Me[Xc]?Uc=!0:Fe[Xc]=0;Uc||(Xe=!1)}function tc(Me,Uc,Xc,Ad,Ed,Pd){var De,Ge=[],Pe=Xc.type;if(!ke._callbacks[Me])return[];"keyup"==Pe&&La(Me)&&(Uc=[Me]);for(De=0;De<ke._callbacks[Me].length;++De){var Ff=ke._callbacks[Me][De];if((Ad||!Ff.seq||Fe[Ff.seq]==Ff.level)&&Pe==Ff.action){var lf;(lf="keypress"==Pe&&!Xc.metaKey&&!Xc.ctrlKey)||(lf=Ff.modifiers,lf=Uc.sort().join(",")===
lf.sort().join(","));lf&&(lf=Ad&&Ff.seq==Ad&&Ff.level==Pd,(!Ad&&Ff.combo==Ed||lf)&&ke._callbacks[Me].splice(De,1),Ge.push(Ff))}}return Ge}function Qc(Me,Uc,Xc,Ad){ke.stopCallback(Uc,Uc.target||Uc.srcElement,Xc,Ad)||!1!==Me(Uc,Xc)||(Uc.preventDefault?Uc.preventDefault():Uc.returnValue=!1,Uc.stopPropagation?Uc.stopPropagation():Uc.cancelBubble=!0)}function Wc(Me){"number"!==typeof Me.which&&(Me.which=Me.keyCode);var Uc=va(Me);if(Uc)if("keyup"==Me.type&&mf===Uc)mf=!1;else{var Xc=ke,Ad=Xc.handleKey,Ed=
[];Me.shiftKey&&Ed.push("shift");Me.altKey&&Ed.push("alt");Me.ctrlKey&&Ed.push("ctrl");Me.metaKey&&Ed.push("meta");Ad.call(Xc,Uc,Ed,Me)}}function rd(Me,Uc,Xc,Ad){function Ed(Pe){return function(){Xe=Pe;++Fe[Me];clearTimeout(Se);Se=setTimeout(Tb,1E3)}}function Pd(Pe){Qc(Xc,Pe,Me);"keyup"!==Ad&&(mf=va(Pe));setTimeout(Tb,10)}for(var De=Fe[Me]=0;De<Uc.length;++De){var Ge=De+1===Uc.length?Pd:Ed(Ad||Wa(Uc[De+1]).action);$d(Uc[De],Ge,Ad,Me,De)}}function $d(Me,Uc,Xc,Ad,Ed){ke._directMap[Me+":"+Xc]=Uc;Me=
Me.replace(/\s+/g," ");var Pd=Me.split(" ");1<Pd.length?rd(Me,Pd,Uc,Xc):(Xc=Wa(Me,Xc),ke._callbacks[Xc.key]=ke._callbacks[Xc.key]||[],tc(Xc.key,Xc.modifiers,{type:Xc.action},Ad,Me,Ed),ke._callbacks[Xc.key][Ad?"unshift":"push"]({callback:Uc,modifiers:Xc.modifiers,action:Xc.action,seq:Ad,level:Ed,combo:Me}))}var ke=this;pc=pc||J;if(!(ke instanceof pb))return new pb(pc);ke.target=pc;ke._callbacks={};ke._directMap={};var Fe={},Se,mf=!1,ff=!1,Xe=!1;ke._handleKey=function(Me,Uc,Xc){var Ad=tc(Me,Uc,Xc),
Ed;Uc={};var Pd=0,De=!1;for(Ed=0;Ed<Ad.length;++Ed)Ad[Ed].seq&&(Pd=Math.max(Pd,Ad[Ed].level));for(Ed=0;Ed<Ad.length;++Ed)Ad[Ed].seq?Ad[Ed].level==Pd&&(De=!0,Uc[Ad[Ed].seq]=1,Qc(Ad[Ed].callback,Xc,Ad[Ed].combo,Ad[Ed].seq)):De||Qc(Ad[Ed].callback,Xc,Ad[Ed].combo);Ad="keypress"==Xc.type&&ff;Xc.type!=Xe||La(Me)||Ad||Tb(Uc);ff=De&&"keydown"==Xc.type};ke._bindMultiple=function(Me,Uc,Xc){for(var Ad=0;Ad<Me.length;++Ad)$d(Me[Ad],Uc,Xc)};la(pc,"keypress",Wc);la(pc,"keydown",Wc);la(pc,"keyup",Wc)}if(n){var Db=
{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},Qb={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},oc={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","\x26":"7","*":"8","(":"9",")":"0",_:"-","+":"\x3d",":":";",'"':"'","\x3c":",",
"\x3e":".","?":"/","|":"\\"},ac={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},xc;for(X=1;20>X;++X)Db[111+X]="f"+X;for(X=0;9>=X;++X)Db[X+96]=X.toString();pb.prototype.bind=function(pc,Tb,tc){pc=pc instanceof Array?pc:[pc];this._bindMultiple.call(this,pc,Tb,tc);return this};pb.prototype.unbind=function(pc,Tb){return this.bind.call(this,pc,function(){},Tb)};pb.prototype.trigger=function(pc,Tb){if(this._directMap[pc+
":"+Tb])this._directMap[pc+":"+Tb]({},pc);return this};pb.prototype.reset=function(){this._callbacks={};this._directMap={};return this};pb.prototype.stopCallback=function(pc,Tb){if(-1<(" "+Tb.className+" ").indexOf(" mousetrap ")||bb(Tb,this.target))return!1;if("composedPath"in pc&&"function"===typeof pc.composedPath){var tc=pc.composedPath()[0];tc!==pc.target&&(Tb=tc)}return"INPUT"==Tb.tagName||"SELECT"==Tb.tagName||"TEXTAREA"==Tb.tagName||Tb.isContentEditable};pb.prototype.handleKey=function(){return this._handleKey.apply(this,
arguments)};pb.addKeycodes=function(pc){for(var Tb in pc)pc.hasOwnProperty(Tb)&&(Db[Tb]=pc[Tb]);xc=null};pb.init=function(){var pc=pb(J),Tb;for(Tb in pc)"_"!==Tb.charAt(0)&&(pb[Tb]=function(tc){return function(){return pc[tc].apply(pc,arguments)}}(Tb))};pb.init();n.Mousetrap=pb;"undefined"!==typeof g&&g.exports&&(g.exports=pb);"function"===typeof define&&define.amd&&define(function(){return pb})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}),qc=gn({["../../node_modules/rbush/rbush.min.js"](b,
g){!function(n,J){"object"==typeof b&&"undefined"!=typeof g?g.exports=J():"function"==typeof define&&define.amd?define(J):(n=n||self).RBush=J()}(b,function(){function n(Tb,tc,Qc,Wc,rd){!function Xe(ke,Fe,Se,mf,ff){for(;mf>Se;){if(600<mf-Se){var Me=mf-Se+1,Uc=Fe-Se+1,Xc=Math.log(Me),Ad=.5*Math.exp(2*Xc/3);Xc=.5*Math.sqrt(Xc*Ad*(Me-Ad)/Me)*(0>Uc-Me/2?-1:1);Xe(ke,Fe,Math.max(Se,Math.floor(Fe-Uc*Ad/Me+Xc)),Math.min(mf,Math.floor(Fe+(Me-Uc)*Ad/Me+Xc)),ff)}Me=ke[Fe];Uc=Se;Ad=mf;J(ke,Se,Fe);for(0<ff(ke[mf],
Me)&&J(ke,Se,mf);Uc<Ad;){J(ke,Uc,Ad);Uc++;for(Ad--;0>ff(ke[Uc],Me);)Uc++;for(;0<ff(ke[Ad],Me);)Ad--}0===ff(ke[Se],Me)?J(ke,Se,Ad):J(ke,++Ad,mf);Ad<=Fe&&(Se=Ad+1);Fe<=Ad&&(mf=Ad-1)}}(Tb,tc,Qc||0,Wc||Tb.length-1,rd||X)}function J(Tb,tc,Qc){var Wc=Tb[tc];Tb[tc]=Tb[Qc];Tb[Qc]=Wc}function X(Tb,tc){return Tb<tc?-1:Tb>tc?1:0}function la(Tb,tc){va(Tb,0,Tb.children.length,tc,Tb)}function va(Tb,tc,Qc,Wc,rd){rd||=ac(null);rd.minX=1/0;rd.minY=1/0;rd.maxX=-1/0;for(rd.maxY=-1/0;tc<Qc;tc++){var $d=Tb.children[tc];
La(rd,Tb.leaf?Wc($d):$d)}return rd}function La(Tb,tc){return Tb.minX=Math.min(Tb.minX,tc.minX),Tb.minY=Math.min(Tb.minY,tc.minY),Tb.maxX=Math.max(Tb.maxX,tc.maxX),Tb.maxY=Math.max(Tb.maxY,tc.maxY),Tb}function Wa(Tb,tc){return Tb.minX-tc.minX}function bb(Tb,tc){return Tb.minY-tc.minY}function pb(Tb){return(Tb.maxX-Tb.minX)*(Tb.maxY-Tb.minY)}function Db(Tb){return Tb.maxX-Tb.minX+(Tb.maxY-Tb.minY)}function Qb(Tb,tc){return Tb.minX<=tc.minX&&Tb.minY<=tc.minY&&tc.maxX<=Tb.maxX&&tc.maxY<=Tb.maxY}function oc(Tb,
tc){return tc.minX<=Tb.maxX&&tc.minY<=Tb.maxY&&tc.maxX>=Tb.minX&&tc.maxY>=Tb.minY}function ac(Tb){return{children:Tb,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function xc(Tb,tc,Qc,Wc,rd){for(var $d=[tc,Qc];$d.length;)if(!((Qc=$d.pop())-(tc=$d.pop())<=Wc)){var ke=tc+Math.ceil((Qc-tc)/Wc/2)*Wc;n(Tb,ke,tc,Qc,rd);$d.push(tc,ke,ke,Qc)}}var pc=function(Tb){void 0===Tb&&(Tb=9);this._maxEntries=Math.max(4,Tb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return pc.prototype.all=
function(){return this._all(this.data,[])},pc.prototype.search=function(Tb){var tc=this.data,Qc=[];if(!oc(Tb,tc))return Qc;for(var Wc=this.toBBox,rd=[];tc;){for(var $d=0;$d<tc.children.length;$d++){var ke=tc.children[$d],Fe=tc.leaf?Wc(ke):ke;oc(Tb,Fe)&&(tc.leaf?Qc.push(ke):Qb(Tb,Fe)?this._all(ke,Qc):rd.push(ke))}tc=rd.pop()}return Qc},pc.prototype.collides=function(Tb){var tc=this.data;if(!oc(Tb,tc))return!1;for(var Qc=[];tc;){for(var Wc=0;Wc<tc.children.length;Wc++){var rd=tc.children[Wc],$d=tc.leaf?
this.toBBox(rd):rd;if(oc(Tb,$d)){if(tc.leaf||Qb(Tb,$d))return!0;Qc.push(rd)}}tc=Qc.pop()}return!1},pc.prototype.load=function(Tb){if(!Tb||!Tb.length)return this;if(Tb.length<this._minEntries){for(var tc=0;tc<Tb.length;tc++)this.insert(Tb[tc]);return this}Tb=this._build(Tb.slice(),0,Tb.length-1,0);this.data.children.length?this.data.height===Tb.height?this._splitRoot(this.data,Tb):(this.data.height<Tb.height&&(tc=this.data,this.data=Tb,Tb=tc),this._insert(Tb,this.data.height-Tb.height-1,!0)):this.data=
Tb;return this},pc.prototype.insert=function(Tb){return Tb&&this._insert(Tb,this.data.height-1),this},pc.prototype.clear=function(){return this.data=ac([]),this},pc.prototype.remove=function(Tb,tc){if(!Tb)return this;for(var Qc,Wc,rd,$d=this.data,ke=this.toBBox(Tb),Fe=[],Se=[];$d||Fe.length;){if($d||($d=Fe.pop(),Wc=Fe[Fe.length-1],Qc=Se.pop(),rd=!0),$d.leaf){a:{var mf=Tb;var ff=$d.children,Xe=tc;if(Xe){for(var Me=0;Me<ff.length;Me++)if(Xe(mf,ff[Me])){mf=Me;break a}mf=-1}else mf=ff.indexOf(mf)}if(-1!==
mf)return $d.children.splice(mf,1),Fe.push($d),this._condense(Fe),this}rd||$d.leaf||!Qb($d,ke)?Wc?(Qc++,$d=Wc.children[Qc],rd=!1):$d=null:(Fe.push($d),Se.push(Qc),Qc=0,Wc=$d,$d=$d.children[0])}return this},pc.prototype.toBBox=function(Tb){return Tb},pc.prototype.compareMinX=function(Tb,tc){return Tb.minX-tc.minX},pc.prototype.compareMinY=function(Tb,tc){return Tb.minY-tc.minY},pc.prototype.toJSON=function(){return this.data},pc.prototype.fromJSON=function(Tb){return this.data=Tb,this},pc.prototype._all=
function(Tb,tc){for(var Qc=[];Tb;)Tb.leaf?tc.push.apply(tc,Tb.children):Qc.push.apply(Qc,Tb.children),Tb=Qc.pop();return tc},pc.prototype._build=function(Tb,tc,Qc,Wc){var rd,$d=Qc-tc+1,ke=this._maxEntries;if($d<=ke)return la(rd=ac(Tb.slice(tc,Qc+1)),this.toBBox),rd;Wc||(Wc=Math.ceil(Math.log($d)/Math.log(ke)),ke=Math.ceil($d/Math.pow(ke,Wc-1)));(rd=ac([])).leaf=!1;rd.height=Wc;$d=Math.ceil($d/ke);ke=$d*Math.ceil(Math.sqrt(ke));for(xc(Tb,tc,Qc,ke,this.compareMinX);tc<=Qc;tc+=ke){var Fe=Math.min(tc+
ke-1,Qc);xc(Tb,tc,Fe,$d,this.compareMinY);for(var Se=tc;Se<=Fe;Se+=$d)rd.children.push(this._build(Tb,Se,Math.min(Se+$d-1,Fe),Wc-1))}return la(rd,this.toBBox),rd},pc.prototype._chooseSubtree=function(Tb,tc,Qc,Wc){for(;Wc.push(tc),!tc.leaf&&Wc.length-1!==Qc;){for(var rd=1/0,$d=1/0,ke=void 0,Fe=0;Fe<tc.children.length;Fe++){var Se=tc.children[Fe],mf=pb(Se),ff=(Xe=Tb,Me=Se,(Math.max(Me.maxX,Xe.maxX)-Math.min(Me.minX,Xe.minX))*(Math.max(Me.maxY,Xe.maxY)-Math.min(Me.minY,Xe.minY))-mf);ff<$d?($d=ff,rd=
mf<rd?mf:rd,ke=Se):ff===$d&&mf<rd&&(rd=mf,ke=Se)}tc=ke||tc.children[0]}var Xe,Me;return tc},pc.prototype._insert=function(Tb,tc,Qc){Qc=Qc?Tb:this.toBBox(Tb);var Wc=[],rd=this._chooseSubtree(Qc,this.data,tc,Wc);rd.children.push(Tb);for(La(rd,Qc);0<=tc&&Wc[tc].children.length>this._maxEntries;)this._split(Wc,tc),tc--;this._adjustParentBBoxes(Qc,Wc,tc)},pc.prototype._split=function(Tb,tc){var Qc=Tb[tc],Wc=Qc.children.length,rd=this._minEntries;this._chooseSplitAxis(Qc,rd,Wc);Wc=this._chooseSplitIndex(Qc,
rd,Wc);Wc=ac(Qc.children.splice(Wc,Qc.children.length-Wc));Wc.height=Qc.height;Wc.leaf=Qc.leaf;la(Qc,this.toBBox);la(Wc,this.toBBox);tc?Tb[tc-1].children.push(Wc):this._splitRoot(Qc,Wc)},pc.prototype._splitRoot=function(Tb,tc){this.data=ac([Tb,tc]);this.data.height=Tb.height+1;this.data.leaf=!1;la(this.data,this.toBBox)},pc.prototype._chooseSplitIndex=function(Tb,tc,Qc){for(var Wc,rd,$d,ke,Fe,Se,mf,ff=1/0,Xe=1/0,Me=tc;Me<=Qc-tc;Me++){var Uc=va(Tb,0,Me,this.toBBox),Xc=va(Tb,Me,Qc,this.toBBox),Ad=(rd=
Uc,$d=Xc,ke=void 0,Fe=void 0,Se=void 0,mf=void 0,ke=Math.max(rd.minX,$d.minX),Fe=Math.max(rd.minY,$d.minY),Se=Math.min(rd.maxX,$d.maxX),mf=Math.min(rd.maxY,$d.maxY),Math.max(0,Se-ke)*Math.max(0,mf-Fe));Uc=pb(Uc)+pb(Xc);Ad<ff?(ff=Ad,Wc=Me,Xe=Uc<Xe?Uc:Xe):Ad===ff&&Uc<Xe&&(Xe=Uc,Wc=Me)}return Wc||Qc-tc},pc.prototype._chooseSplitAxis=function(Tb,tc,Qc){var Wc=Tb.leaf?this.compareMinX:Wa,rd=Tb.leaf?this.compareMinY:bb;this._allDistMargin(Tb,tc,Qc,Wc)<this._allDistMargin(Tb,tc,Qc,rd)&&Tb.children.sort(Wc)},
pc.prototype._allDistMargin=function(Tb,tc,Qc,Wc){Tb.children.sort(Wc);Wc=this.toBBox;for(var rd=va(Tb,0,tc,Wc),$d=va(Tb,Qc-tc,Qc,Wc),ke=Db(rd)+Db($d),Fe=tc;Fe<Qc-tc;Fe++){var Se=Tb.children[Fe];La(rd,Tb.leaf?Wc(Se):Se);ke+=Db(rd)}for(Qc=Qc-tc-1;Qc>=tc;Qc--)rd=Tb.children[Qc],La($d,Tb.leaf?Wc(rd):rd),ke+=Db($d);return ke},pc.prototype._adjustParentBBoxes=function(Tb,tc,Qc){for(;0<=Qc;Qc--)La(tc[Qc],Tb)},pc.prototype._condense=function(Tb){for(var tc=Tb.length-1,Qc=void 0;0<=tc;tc--)0===Tb[tc].children.length?
0<tc?(Qc=Tb[tc-1].children).splice(Qc.indexOf(Tb[tc]),1):this.clear():la(Tb[tc],this.toBBox)},pc})}}),$c=gn({["../../node_modules/fast-deep-equal/index.js"](b,g){g.exports=function la(J,X){if(J===X)return!0;if(J&&X&&"object"==typeof J&&"object"==typeof X){if(J.constructor!==X.constructor)return!1;var va;if(Array.isArray(J)){var La=J.length;if(La!=X.length)return!1;for(va=La;0!==va--;)if(!la(J[va],X[va]))return!1;return!0}if(J.constructor===RegExp)return J.source===X.source&&J.flags===X.flags;if(J.valueOf!==
Object.prototype.valueOf)return J.valueOf()===X.valueOf();if(J.toString!==Object.prototype.toString)return J.toString()===X.toString();var Wa=Object.keys(J);La=Wa.length;if(La!==Object.keys(X).length)return!1;for(va=La;0!==va--;)if(!Object.prototype.hasOwnProperty.call(X,Wa[va]))return!1;for(va=La;0!==va--;)if(La=Wa[va],!la(J[La],X[La]))return!1;return!0}return J!==J&&X!==X}}}),Od=gn({["../../../node_modules/deepmerge/dist/cjs.js"](b,g){function n(Db,Qb){return!1!==Qb.clone&&Qb.isMergeableObject(Db)?
Wa(Array.isArray(Db)?[]:{},Db,Qb):Db}function J(Db,Qb,oc){return Db.concat(Qb).map(function(ac){return n(ac,oc)})}function X(Db){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(Db).filter(function(Qb){return Db.propertyIsEnumerable(Qb)}):[]}function la(Db){return Object.keys(Db).concat(X(Db))}function va(Db,Qb){try{return Qb in Db}catch(oc){return!1}}function La(Db,Qb,oc){var ac={};oc.isMergeableObject(Db)&&la(Db).forEach(function(xc){ac[xc]=n(Db[xc],oc)});la(Qb).forEach(function(xc){if(!va(Db,
xc)||Object.hasOwnProperty.call(Db,xc)&&Object.propertyIsEnumerable.call(Db,xc))if(va(Db,xc)&&oc.isMergeableObject(Qb[xc])){if(oc.customMerge){var pc=oc.customMerge(xc);pc="function"===typeof pc?pc:Wa}else pc=Wa;ac[xc]=pc(Db[xc],Qb[xc],oc)}else ac[xc]=n(Qb[xc],oc)});return ac}function Wa(Db,Qb,oc){oc=oc||{};oc.arrayMerge=oc.arrayMerge||J;oc.isMergeableObject=oc.isMergeableObject||bb;oc.cloneUnlessOtherwiseSpecified=n;var ac=Array.isArray(Qb),xc=Array.isArray(Db);return ac!==xc?n(Qb,oc):ac?oc.arrayMerge(Db,
Qb,oc):La(Db,Qb,oc)}var bb=function(Db){var Qb;if(Qb=!!Db&&"object"===typeof Db)Qb=Object.prototype.toString.call(Db),Qb=!("[object RegExp]"===Qb||"[object Date]"===Qb||Db.$$typeof===pb);return Qb},pb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Wa.all=function(Db,Qb){if(!Array.isArray(Db))throw Error("first argument should be an array");return Db.reduce(function(oc,ac){return Wa(oc,ac,Qb)},{})};g.exports=Wa}}),ge=gn({["../../node_modules/tslib/tslib.js"](b,g){var n,J,
X,la,va,La,Wa,bb,pb,Db,Qb,oc,ac,xc,pc,Tb,tc,Qc,Wc,rd,$d,ke,Fe,Se,mf;(function(ff){function Xe(Uc,Xc){Uc!==Me&&("function"===typeof Object.create?Object.defineProperty(Uc,"__esModule",{value:!0}):Uc.__esModule=!0);return function(Ad,Ed){return Uc[Ad]=Xc?Xc(Ad,Ed):Ed}}var Me="object"===typeof xa?xa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Uc){ff(Xe(Me,Xe(Uc)))}):"object"===typeof g&&"object"===typeof g.exports?
ff(Xe(Me,Xe(g.exports))):ff(Xe(Me))})(function(ff){var Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Uc,Xc){Uc.__proto__=Xc}||function(Uc,Xc){for(var Ad in Xc)Object.prototype.hasOwnProperty.call(Xc,Ad)&&(Uc[Ad]=Xc[Ad])};n=function(Uc,Xc){function Ad(){this.constructor=Uc}if("function"!==typeof Xc&&null!==Xc)throw new TypeError("Class extends value "+String(Xc)+" is not a constructor or null");Xe(Uc,Xc);Uc.prototype=null===Xc?Object.create(Xc):(Ad.prototype=Xc.prototype,new Ad)};
J=Object.assign||function(Uc){for(var Xc,Ad=1,Ed=arguments.length;Ad<Ed;Ad++){Xc=arguments[Ad];for(var Pd in Xc)Object.prototype.hasOwnProperty.call(Xc,Pd)&&(Uc[Pd]=Xc[Pd])}return Uc};X=function(Uc,Xc){var Ad={},Ed;for(Ed in Uc)Object.prototype.hasOwnProperty.call(Uc,Ed)&&0>Xc.indexOf(Ed)&&(Ad[Ed]=Uc[Ed]);if(null!=Uc&&"function"===typeof Object.getOwnPropertySymbols){var Pd=0;for(Ed=Object.getOwnPropertySymbols(Uc);Pd<Ed.length;Pd++)0>Xc.indexOf(Ed[Pd])&&Object.prototype.propertyIsEnumerable.call(Uc,
Ed[Pd])&&(Ad[Ed[Pd]]=Uc[Ed[Pd]])}return Ad};la=function(Uc,Xc,Ad,Ed){var Pd=arguments.length,De=3>Pd?Xc:null===Ed?Ed=Object.getOwnPropertyDescriptor(Xc,Ad):Ed,Ge;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)De=Reflect.decorate(Uc,Xc,Ad,Ed);else for(var Pe=Uc.length-1;0<=Pe;Pe--)if(Ge=Uc[Pe])De=(3>Pd?Ge(De):3<Pd?Ge(Xc,Ad,De):Ge(Xc,Ad))||De;return 3<Pd&&De&&Object.defineProperty(Xc,Ad,De),De};va=function(Uc,Xc){return function(Ad,Ed){Xc(Ad,Ed,Uc)}};La=function(Uc,Xc){if("object"===
typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Uc,Xc)};Wa=function(Uc,Xc,Ad,Ed){function Pd(De){return De instanceof Ad?De:new Ad(function(Ge){Ge(De)})}return new (Ad||=Promise)(function(De,Ge){function Pe(gh){try{lf(Ed.next(gh))}catch(Wg){Ge(Wg)}}function Ff(gh){try{lf(Ed["throw"](gh))}catch(Wg){Ge(Wg)}}function lf(gh){gh.done?De(gh.value):Pd(gh.value).then(Pe,Ff)}lf((Ed=Ed.apply(Uc,Xc||[])).next())})};bb=function(Uc,Xc){function Ad(lf){return function(gh){return Ed([lf,
gh])}}function Ed(lf){if(De)throw new TypeError("Generator is already executing.");for(;Pd;)try{if(De=1,Ge&&(Pe=lf[0]&2?Ge["return"]:lf[0]?Ge["throw"]||((Pe=Ge["return"])&&Pe.call(Ge),0):Ge.next)&&!(Pe=Pe.call(Ge,lf[1])).done)return Pe;if(Ge=0,Pe)lf=[lf[0]&2,Pe.value];switch(lf[0]){case 0:case 1:Pe=lf;break;case 4:return Pd.label++,{value:lf[1],done:!1};case 5:Pd.label++;Ge=lf[1];lf=[0];continue;case 7:lf=Pd.ops.pop();Pd.trys.pop();continue;default:if(!(Pe=Pd.trys,Pe=0<Pe.length&&Pe[Pe.length-1])&&
(6===lf[0]||2===lf[0])){Pd=0;continue}if(3===lf[0]&&(!Pe||lf[1]>Pe[0]&&lf[1]<Pe[3]))Pd.label=lf[1];else if(6===lf[0]&&Pd.label<Pe[1])Pd.label=Pe[1],Pe=lf;else if(Pe&&Pd.label<Pe[2])Pd.label=Pe[2],Pd.ops.push(lf);else{Pe[2]&&Pd.ops.pop();Pd.trys.pop();continue}}lf=Xc.call(Uc,Pd)}catch(gh){lf=[6,gh],Ge=0}finally{De=Pe=0}if(lf[0]&5)throw lf[1];return{value:lf[0]?lf[1]:void 0,done:!0}}var Pd={label:0,sent:function(){if(Pe[0]&1)throw Pe[1];return Pe[1]},trys:[],ops:[]},De,Ge,Pe,Ff;return Ff={next:Ad(0),
"throw":Ad(1),"return":Ad(2)},"function"===typeof Symbol&&(Ff[Symbol.iterator]=function(){return this}),Ff};pb=function(Uc,Xc){for(var Ad in Uc)"default"===Ad||Object.prototype.hasOwnProperty.call(Xc,Ad)||mf(Xc,Uc,Ad)};mf=Object.create?function(Uc,Xc,Ad,Ed){void 0===Ed&&(Ed=Ad);var Pd=Object.getOwnPropertyDescriptor(Xc,Ad);if(!Pd||("get"in Pd?!Xc.__esModule:Pd.writable||Pd.configurable))Pd={enumerable:!0,get:function(){return Xc[Ad]}};Object.defineProperty(Uc,Ed,Pd)}:function(Uc,Xc,Ad,Ed){void 0===
Ed&&(Ed=Ad);Uc[Ed]=Xc[Ad]};Db=function(Uc){var Xc="function"===typeof Symbol&&Symbol.iterator,Ad=Xc&&Uc[Xc],Ed=0;if(Ad)return Ad.call(Uc);if(Uc&&"number"===typeof Uc.length)return{next:function(){Uc&&Ed>=Uc.length&&(Uc=void 0);return{value:Uc&&Uc[Ed++],done:!Uc}}};throw new TypeError(Xc?"Object is not iterable.":"Symbol.iterator is not defined.");};Qb=function(Uc,Xc){var Ad="function"===typeof Symbol&&Uc[Symbol.iterator];if(!Ad)return Uc;Uc=Ad.call(Uc);var Ed,Pd=[];try{for(;(void 0===Xc||0<Xc--)&&
!(Ed=Uc.next()).done;)Pd.push(Ed.value)}catch(Ge){var De={error:Ge}}finally{try{Ed&&!Ed.done&&(Ad=Uc["return"])&&Ad.call(Uc)}finally{if(De)throw De.error;}}return Pd};oc=function(){for(var Uc=[],Xc=0;Xc<arguments.length;Xc++)Uc=Uc.concat(Qb(arguments[Xc]));return Uc};ac=function(){for(var Uc=0,Xc=0,Ad=arguments.length;Xc<Ad;Xc++)Uc+=arguments[Xc].length;Uc=Array(Uc);var Ed=0;for(Xc=0;Xc<Ad;Xc++)for(var Pd=arguments[Xc],De=0,Ge=Pd.length;De<Ge;De++,Ed++)Uc[Ed]=Pd[De];return Uc};xc=function(Uc,Xc,Ad){if(Ad||
2===arguments.length)for(var Ed=0,Pd=Xc.length,De;Ed<Pd;Ed++)!De&&Ed in Xc||(De||=Array.prototype.slice.call(Xc,0,Ed),De[Ed]=Xc[Ed]);return Uc.concat(De||Array.prototype.slice.call(Xc))};pc=function(Uc){return this instanceof pc?(this.v=Uc,this):new pc(Uc)};Tb=function(Uc,Xc,Ad){function Ed(Wg){Ff[Wg]&&(lf[Wg]=function(wi){return new Promise(function(Mk,$k){1<gh.push([Wg,wi,Mk,$k])||Pd(Wg,wi)})})}function Pd(Wg,wi){try{var Mk=Ff[Wg](wi);Mk.value instanceof pc?Promise.resolve(Mk.value.v).then(De,Ge):
Pe(gh[0][2],Mk)}catch($k){Pe(gh[0][3],$k)}}function De(Wg){Pd("next",Wg)}function Ge(Wg){Pd("throw",Wg)}function Pe(Wg,wi){(Wg(wi),gh.shift(),gh.length)&&Pd(gh[0][0],gh[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ff=Ad.apply(Uc,Xc||[]),lf,gh=[];return lf={},Ed("next"),Ed("throw"),Ed("return"),lf[Symbol.asyncIterator]=function(){return this},lf};tc=function(Uc){function Xc(Pd,De){Ad[Pd]=Uc[Pd]?function(Ge){return(Ed=!Ed)?{value:pc(Uc[Pd](Ge)),done:"return"===
Pd}:De?De(Ge):Ge}:De}var Ad,Ed;return Ad={},Xc("next"),Xc("throw",function(Pd){throw Pd;}),Xc("return"),Ad[Symbol.iterator]=function(){return this},Ad};Qc=function(Uc){function Xc(De){Pd[De]=Uc[De]&&function(Ge){return new Promise(function(Pe,Ff){Ge=Uc[De](Ge);Ad(Pe,Ff,Ge.done,Ge.value)})}}function Ad(De,Ge,Pe,Ff){Promise.resolve(Ff).then(function(lf){De({value:lf,done:Pe})},Ge)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ed=Uc[Symbol.asyncIterator],Pd;
return Ed?Ed.call(Uc):(Uc="function"===typeof Db?Db(Uc):Uc[Symbol.iterator](),Pd={},Xc("next"),Xc("throw"),Xc("return"),Pd[Symbol.asyncIterator]=function(){return this},Pd)};Wc=function(Uc,Xc){Object.defineProperty?Object.defineProperty(Uc,"raw",{value:Xc}):Uc.raw=Xc;return Uc};var Me=Object.create?function(Uc,Xc){Object.defineProperty(Uc,"default",{enumerable:!0,value:Xc})}:function(Uc,Xc){Uc["default"]=Xc};rd=function(Uc){if(Uc&&Uc.__esModule)return Uc;var Xc={};if(null!=Uc)for(var Ad in Uc)"default"!==
Ad&&Object.prototype.hasOwnProperty.call(Uc,Ad)&&mf(Xc,Uc,Ad);Me(Xc,Uc);return Xc};$d=function(Uc){return Uc&&Uc.__esModule?Uc:{"default":Uc}};ke=function(Uc,Xc,Ad,Ed){if("a"===Ad&&!Ed)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof Xc?Uc!==Xc||!Ed:!Xc.has(Uc))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===Ad?Ed:"a"===Ad?Ed.call(Uc):Ed?Ed.value:Xc.get(Uc)};Fe=function(Uc,Xc,Ad,Ed,Pd){if("m"===
Ed)throw new TypeError("Private method is not writable");if("a"===Ed&&!Pd)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof Xc?Uc!==Xc||!Pd:!Xc.has(Uc))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===Ed?Pd.call(Uc,Ad):Pd?Pd.value=Ad:Xc.set(Uc,Ad),Ad};Se=function(Uc,Xc){if(null===Xc||"object"!==typeof Xc&&"function"!==typeof Xc)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===
typeof Uc?Xc===Uc:Uc.has(Xc)};ff("__extends",n);ff("__assign",J);ff("__rest",X);ff("__decorate",la);ff("__param",va);ff("__metadata",La);ff("__awaiter",Wa);ff("__generator",bb);ff("__exportStar",pb);ff("__createBinding",mf);ff("__values",Db);ff("__read",Qb);ff("__spread",oc);ff("__spreadArrays",ac);ff("__spreadArray",xc);ff("__await",pc);ff("__asyncGenerator",Tb);ff("__asyncDelegator",tc);ff("__asyncValues",Qc);ff("__makeTemplateObject",Wc);ff("__importStar",rd);ff("__importDefault",$d);ff("__classPrivateFieldGet",
ke);ff("__classPrivateFieldSet",Fe);ff("__classPrivateFieldIn",Se)})}}),He={};((b,g)=>{for(var n in g)Vk(b,n,{get:g[n],enumerable:!0})})(He,{App:()=>WH,PreviewManager:()=>kw,generateJSXFromModel:()=>Zm,generateSVGFromModel:()=>yn});Ta.exports=(b=>go(Vk({},"__esModule",{value:!0}),b))(He);var ca=(b=>{b.Yellow="yellow";b.Red="red";b.Pink="pink";b.Green="green";b.Blue="blue";b.Purple="purple";b.Gray="gray";b.Default="";return b})(ca||{}),wa,Xa=new Uint8Array(16),ub=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,
Wb=[];for(let b=0;256>b;++b)Wb.push((b+256).toString(16).slice(1));var uc,Vc,nd=0,zd=0,Kd=function(b,g,n){n=g&&n||0;const J=g||Array(16);b=b||{};let X=b.node||uc;var la=void 0!==b.clockseq?b.clockseq:Vc;if(null==X||null==la){var va=b.random||(b.rng||p)();null==X&&(X=uc=[va[0]|1,va[1],va[2],va[3],va[4],va[5]]);null==la&&(la=Vc=(va[6]<<8|va[7])&16383)}va=void 0!==b.msecs?b.msecs:Date.now();let La=void 0!==b.nsecs?b.nsecs:zd+1;const Wa=va-nd+(La-zd)/1E4;0>Wa&&void 0===b.clockseq&&(la=la+1&16383);(0>
Wa||va>nd)&&void 0===b.nsecs&&(La=0);if(1E4<=La)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");nd=va;zd=La;Vc=la;va+=122192928E5;b=(1E4*(va&268435455)+La)%4294967296;J[n++]=b>>>24&255;J[n++]=b>>>16&255;J[n++]=b>>>8&255;J[n++]=b&255;b=va/4294967296*1E4&268435455;J[n++]=b>>>8&255;J[n++]=b&255;J[n++]=b>>>24&15|16;J[n++]=b>>>16&255;J[n++]=la>>>8|128;J[n++]=la&255;for(la=0;6>la;++la)J[n+la]=X[la];return g||S(J)},Wd=class{static clamp(b,g,n){return Math.max(g,"undefined"!==typeof n?Math.min(b,
n):b)}static clampV(b,g,n){return b.map(J=>n?Wd.clamp(J,g,n):Wd.clamp(J,g))}static cross(b,g,n){return(g[0]-b[0])*(n[1]-b[1])-(n[0]-b[0])*(g[1]-b[1])}static snap(b,g=1){return[Math.round(b[0]/g)*g,Math.round(b[1]/g)*g]}},Lc=Wd;Lc.neg=b=>[-b[0],-b[1]];Lc.add=(b,g)=>[b[0]+g[0],b[1]+g[1]];Lc.addScalar=(b,g)=>[b[0]+g,b[1]+g];Lc.sub=(b,g)=>[b[0]-g[0],b[1]-g[1]];Lc.subScalar=(b,g)=>[b[0]-g,b[1]-g];Lc.vec=(b,g)=>[g[0]-b[0],g[1]-b[1]];Lc.mul=(b,g)=>[b[0]*g,b[1]*g];Lc.mulV=(b,g)=>[b[0]*g[0],b[1]*g[1]];Lc.div=
(b,g)=>[b[0]/g,b[1]/g];Lc.divV=(b,g)=>[b[0]/g[0],b[1]/g[1]];Lc.per=b=>[b[1],-b[0]];Lc.dpr=(b,g)=>b[0]*g[0]+b[1]*g[1];Lc.cpr=(b,g)=>b[0]*g[1]-g[0]*b[1];Lc.len2=b=>b[0]*b[0]+b[1]*b[1];Lc.len=b=>Math.hypot(b[0],b[1]);Lc.pry=(b,g)=>Wd.dpr(b,g)/Wd.len(g);Lc.uni=b=>Wd.div(b,Wd.len(b));Lc.normalize=b=>Wd.uni(b);Lc.tangent=(b,g)=>Wd.uni(Wd.sub(b,g));Lc.dist2=(b,g)=>Wd.len2(Wd.sub(b,g));Lc.dist=(b,g)=>Math.hypot(b[1]-g[1],b[0]-g[0]);Lc.fastDist=(b,g)=>{b=[g[0]-b[0],g[1]-b[1]];g=[Math.abs(b[0]),Math.abs(b[1])];
let n=1/Math.max(g[0],g[1]);n*=1.29289-(g[0]+g[1])*n*.29289;return[b[0]*n,b[1]*n]};Lc.ang=(b,g)=>Math.atan2(Wd.cpr(b,g),Wd.dpr(b,g));Lc.angle=(b,g)=>Math.atan2(g[1]-b[1],g[0]-b[0]);Lc.med=(b,g)=>Wd.mul(Wd.add(b,g),.5);Lc.rot=(b,g=0)=>[b[0]*Math.cos(g)-b[1]*Math.sin(g),b[0]*Math.sin(g)+b[1]*Math.cos(g)];Lc.rotWith=(b,g,n=0)=>{if(0===n)return b;const J=Math.sin(n);n=Math.cos(n);const X=b[0]-g[0];b=b[1]-g[1];return[X*n-b*J+g[0],X*J+b*n+g[1]]};Lc.isEqual=(b,g)=>b[0]===g[0]&&b[1]===g[1];Lc.lrp=(b,g,n)=>
Wd.add(b,Wd.mul(Wd.sub(g,b),n));Lc.int=(b,g,n,J,X=1)=>{n=(Wd.clamp(n,J)-n)/(J-n);return Wd.add(Wd.mul(b,1-n),Wd.mul(g,X))};Lc.ang3=(b,g,n)=>{b=Wd.vec(g,b);g=Wd.vec(g,n);return Wd.ang(b,g)};Lc.abs=b=>[Math.abs(b[0]),Math.abs(b[1])];Lc.rescale=(b,g)=>{const n=Wd.len(b);return[g*b[0]/n,g*b[1]/n]};Lc.isLeft=(b,g,n)=>(g[0]-b[0])*(n[1]-b[1])-(n[0]-b[0])*(g[1]-b[1]);Lc.clockwise=(b,g,n)=>0<Wd.isLeft(b,g,n);Lc.toFixed=b=>b.map(g=>Math.round(100*g)/100);Lc.nearestPointOnLineThroughPoint=(b,g,n)=>Wd.add(b,
Wd.mul(g,Wd.pry(Wd.sub(n,b),g)));Lc.distanceToLineThroughPoint=(b,g,n)=>Wd.dist(n,Wd.nearestPointOnLineThroughPoint(b,g,n));Lc.nearestPointOnLineSegment=(b,g,n,J=!0)=>{const X=Wd.uni(Wd.sub(g,b));n=Wd.add(b,Wd.mul(X,Wd.pry(Wd.sub(n,b),X)));if(J){if(n[0]<Math.min(b[0],g[0]))return b[0]<g[0]?b:g;if(n[0]>Math.max(b[0],g[0]))return b[0]>g[0]?b:g;if(n[1]<Math.min(b[1],g[1]))return b[1]<g[1]?b:g;if(n[1]>Math.max(b[1],g[1]))return b[1]>g[1]?b:g}return n};Lc.distanceToLineSegment=(b,g,n,J=!0)=>Wd.dist(n,
Wd.nearestPointOnLineSegment(b,g,n,J));Lc.nudge=(b,g,n)=>Wd.isEqual(b,g)?b:Wd.add(b,Wd.mul(Wd.uni(Wd.sub(g,b)),n));Lc.nudgeAtAngle=(b,g,n)=>[Math.cos(g)*n+b[0],Math.sin(g)*n+b[1]];Lc.toPrecision=(b,g=4)=>[+b[0].toPrecision(g),+b[1].toPrecision(g)];Lc.pointsBetween=(b,g,n=6)=>Array.from(Array(n)).map((J,X)=>{J=X/(n-1);X=Math.min(1,.5+Math.abs(.5-J));return[...Wd.lrp(b,g,J),X]});Lc.slope=(b,g)=>b[0]===g[0]?NaN:(b[1]-g[1])/(b[0]-g[0]);Lc.toAngle=b=>{b=Math.atan2(b[1],b[0]);return 0>b?b+2*Math.PI:b};
Lc.max=(...b)=>[Math.max(...b.map(g=>g[0])),Math.max(...b.map(g=>g[1]))];Lc.min=(...b)=>[Math.min(...b.map(g=>g[0])),Math.min(...b.map(g=>g[1]))];var sd=Lc,se=class{static getRectangleSides(b,g,n=0){const J=[b[0]+g[0]/2,b[1]+g[1]/2],X=Lc.rotWith(b,J,n),la=Lc.rotWith(Lc.add(b,[g[0],0]),J,n),va=Lc.rotWith(Lc.add(b,g),J,n);b=Lc.rotWith(Lc.add(b,[0,g[1]]),J,n);return[["top",[X,la]],["right",[la,va]],["bottom",[va,b]],["left",[b,X]]]}static getBoundsSides(b){return se.getRectangleSides([b.minX,b.minY],
[b.width,b.height])}static expandBounds(b,g){return{minX:b.minX-g,minY:b.minY-g,maxX:b.maxX+g,maxY:b.maxY+g,width:b.width+2*g,height:b.height+2*g}}static boundsCollide(b,g){return!(b.maxX<g.minX||b.minX>g.maxX||b.maxY<g.minY||b.minY>g.maxY)}static boundsContain(b,g){return b.minX<g.minX&&b.minY<g.minY&&b.maxY>g.maxY&&b.maxX>g.maxX}static boundsContained(b,g){return se.boundsContain(g,b)}static boundsAreEqual(b,g){return!(g.maxX!==b.maxX||g.minX!==b.minX||g.maxY!==b.maxY||g.minY!==b.minY)}static getBoundsFromPoints(b,
g=0){let n=Infinity,J=Infinity,X=-Infinity,la=-Infinity;if(2>b.length)J=n=0,la=X=1;else for(const va of b)n=Math.min(va[0],n),J=Math.min(va[1],J),X=Math.max(va[0],X),la=Math.max(va[1],la);return 0!==g?se.getBoundsFromPoints(b.map(va=>Lc.rotWith(va,[(n+X)/2,(J+la)/2],g))):{minX:n,minY:J,maxX:X,maxY:la,width:Math.max(1,X-n),height:Math.max(1,la-J)}}static centerBounds(b,g){const n=se.getBoundsCenter(b);return se.translateBounds(b,[g[0]-n[0],g[1]-n[1]])}static snapBoundsToGrid(b,g){const n=Math.round(b.minX/
g)*g,J=Math.round(b.minY/g)*g,X=Math.round(b.maxX/g)*g;b=Math.round(b.maxY/g)*g;return{minX:n,minY:J,maxX:X,maxY:b,width:Math.max(1,X-n),height:Math.max(1,b-J)}}static translateBounds(b,g){return{minX:b.minX+g[0],minY:b.minY+g[1],maxX:b.maxX+g[0],maxY:b.maxY+g[1],width:b.width,height:b.height}}static multiplyBounds(b,g){const n=se.getBoundsCenter(b);return se.centerBounds({minX:b.minX*g,minY:b.minY*g,maxX:b.maxX*g,maxY:b.maxY*g,width:b.width*g,height:b.height*g},[n[0]*g,n[1]*g])}static divideBounds(b,
g){const n=se.getBoundsCenter(b);return se.centerBounds({minX:b.minX/g,minY:b.minY/g,maxX:b.maxX/g,maxY:b.maxY/g,width:b.width/g,height:b.height/g},[n[0]/g,n[1]/g])}static getRotatedBounds(b,g=0){b=se.getRotatedCorners(b,g);let n=g=Infinity,J=-Infinity,X=-Infinity;for(const la of b)g=Math.min(la[0],g),n=Math.min(la[1],n),J=Math.max(la[0],J),X=Math.max(la[1],X);return{minX:g,minY:n,maxX:J,maxY:X,width:Math.max(1,J-g),height:Math.max(1,X-n),rotation:0}}static getRotatedEllipseBounds(b,g,n,J,X=0){var la=
Math.cos(X);const va=Math.sin(X);X=Math.hypot(n*la,J*va);la=Math.hypot(n*va,J*la);return{minX:b+n-X,minY:g+J-la,maxX:b+n+X,maxY:g+J+la,width:2*X,height:2*la}}static getExpandedBounds(b,g){const n=Math.min(b.minX,g.minX),J=Math.min(b.minY,g.minY),X=Math.max(b.maxX,g.maxX);b=Math.max(b.maxY,g.maxY);return{minX:n,minY:J,maxX:X,maxY:b,width:Math.abs(X-n),height:Math.abs(b-J)}}static getCommonBounds(b){if(2>b.length)return b[0];let g=b[0];for(let n=1;n<b.length;n++)g=se.getExpandedBounds(g,b[n]);return g}static getRotatedCorners(b,
g=0){const n=[b.minX+b.width/2,b.minY+b.height/2];b=[[b.minX,b.minY],[b.maxX,b.minY],[b.maxX,b.maxY],[b.minX,b.maxY]];return g?b.map(J=>Lc.rotWith(J,n,g)):b}static getTransformedBoundingBox(b,g,n,J=0,X=!1){const [la,va]=[b.minX,b.minY],[La,Wa]=[b.maxX,b.maxY];let [bb,pb]=[b.minX,b.minY],[Db,Qb]=[b.maxX,b.maxY];if("center"===g)return{minX:bb+n[0],minY:pb+n[1],maxX:Db+n[0],maxY:Qb+n[1],width:Db-bb,height:Qb-pb,scaleX:1,scaleY:1};const [oc,ac]=Lc.rot(n,-J);switch(g){case "top_edge":case "top_left_corner":case "top_right_corner":pb+=
ac;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Qb+=ac}switch(g){case "left_edge":case "top_left_corner":case "bottom_left_corner":bb+=oc;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":Db+=oc}var xc=La-la;const pc=Wa-va;var Tb=(Db-bb)/xc,tc=(Qb-pb)/pc;b=0>Tb;n=0>tc;var Qc=Math.abs(Db-bb),Wc=Math.abs(Qb-pb);if(X)switch(X=xc/pc,xc=X<Qc/Wc,tc=1/X*(0>tc?1:-1)*Qc,Tb=Wc*(0>Tb?1:-1)*X,g){case "top_left_corner":xc?pb=Qb+tc:bb=Db+Tb;break;case "top_right_corner":xc?
pb=Qb+tc:Db=bb-Tb;break;case "bottom_right_corner":xc?Qb=pb-tc:Db=bb-Tb;break;case "bottom_left_corner":xc?Qb=pb-tc:bb=Db+Tb;break;case "bottom_edge":case "top_edge":Qc=(bb+Db)/2;Wc*=X;bb=Qc-Wc/2;Db=Qc+Wc/2;break;case "left_edge":case "right_edge":Wc=(pb+Qb)/2,Qc/=X,pb=Wc-Qc/2,Qb=Wc+Qc/2}if(0!==J%(2*Math.PI)){Qc=[0,0];Wc=Lc.med([la,va],[La,Wa]);Tb=Lc.med([bb,pb],[Db,Qb]);switch(g){case "top_left_corner":Qc=Lc.sub(Lc.rotWith([Db,Qb],Tb,J),Lc.rotWith([La,Wa],Wc,J));break;case "top_right_corner":Qc=
Lc.sub(Lc.rotWith([bb,Qb],Tb,J),Lc.rotWith([la,Wa],Wc,J));break;case "bottom_right_corner":Qc=Lc.sub(Lc.rotWith([bb,pb],Tb,J),Lc.rotWith([la,va],Wc,J));break;case "bottom_left_corner":Qc=Lc.sub(Lc.rotWith([Db,pb],Tb,J),Lc.rotWith([La,va],Wc,J));break;case "top_edge":Qc=Lc.sub(Lc.rotWith(Lc.med([bb,Qb],[Db,Qb]),Tb,J),Lc.rotWith(Lc.med([la,Wa],[La,Wa]),Wc,J));break;case "left_edge":Qc=Lc.sub(Lc.rotWith(Lc.med([Db,pb],[Db,Qb]),Tb,J),Lc.rotWith(Lc.med([La,va],[La,Wa]),Wc,J));break;case "bottom_edge":Qc=
Lc.sub(Lc.rotWith(Lc.med([bb,pb],[Db,pb]),Tb,J),Lc.rotWith(Lc.med([la,va],[La,va]),Wc,J));break;case "right_edge":Qc=Lc.sub(Lc.rotWith(Lc.med([bb,pb],[bb,Qb]),Tb,J),Lc.rotWith(Lc.med([la,va],[la,Wa]),Wc,J))}[bb,pb]=Lc.sub([bb,pb],Qc);[Db,Qb]=Lc.sub([Db,Qb],Qc)}Db<bb&&([Db,bb]=[bb,Db]);Qb<pb&&([Qb,pb]=[pb,Qb]);return{minX:bb,minY:pb,maxX:Db,maxY:Qb,width:Db-bb,height:Qb-pb,scaleX:(Db-bb)/(La-la||1)*(b?-1:1),scaleY:(Qb-pb)/(Wa-va||1)*(n?-1:1)}}static getTransformAnchor(b,g,n){let J=b;switch(b){case "top_left_corner":J=
g&&n?"bottom_right_corner":g?"top_right_corner":n?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":J=g&&n?"bottom_left_corner":g?"top_left_corner":n?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":J=g&&n?"top_left_corner":g?"bottom_left_corner":n?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":J=g&&n?"top_right_corner":g?"bottom_right_corner":n?"top_left_corner":"top_right_corner"}return J}static getRelativeTransformedBoundingBox(b,
g,n,J,X){J=b.minX+(J?g.maxX-n.maxX:n.minX-g.minX)/g.width*b.width;X=b.minY+(X?g.maxY-n.maxY:n.minY-g.minY)/g.height*b.height;const la=n.width/g.width*b.width;b=n.height/g.height*b.height;return{minX:J,minY:X,maxX:J+la,maxY:X+b,width:la,height:b}}static getRotatedSize(b,g){const n=Lc.div(b,2);b=[[0,0],[b[0],0],b,[0,b[1]]].map(J=>Lc.rotWith(J,n,g));b=se.getBoundsFromPoints(b);return[b.width,b.height]}static getBoundsCenter(b){return[b.minX+b.width/2,b.minY+b.height/2]}static getBoundsWithCenter(b){const g=
se.getBoundsCenter(b);return of(xe({},b),{midX:g[0],midY:g[1]})}static getCommonTopLeft(b){const g=[Infinity,Infinity];b.forEach(n=>{g[0]=Math.min(g[0],n[0]);g[1]=Math.min(g[1],n[1])});return g}static getTLSnapPoints(b,g,n){const J=xe({},b);b=[0,0];const X=[],la={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},va=["midX","minX","maxX"],La=["midY","minY","maxY"];g=g.map(Qb=>
{const oc=va.flatMap((xc,pc)=>va.map((Tb,tc)=>{const Qc=J[xc]-Qb[Tb];return{f:xc,t:Tb,gap:Qc,distance:Math.abs(Qc),isCareful:0===pc||3===pc+tc}})),ac=La.flatMap((xc,pc)=>La.map((Tb,tc)=>{const Qc=J[xc]-Qb[Tb];return{f:xc,t:Tb,gap:Qc,distance:Math.abs(Qc),isCareful:0===pc||3===pc+tc}}));return[Qb,oc,ac]});let Wa=Infinity,bb=Infinity,pb=Infinity,Db=Infinity;g.forEach(([,Qb,oc])=>{Qb.forEach(ac=>{ac.distance<n&&ac.distance<pb&&(pb=ac.distance,Wa=ac.gap)});oc.forEach(ac=>{ac.distance<n&&ac.distance<Db&&
(Db=ac.distance,bb=ac.gap)})});g.forEach(([Qb,oc,ac])=>{Infinity!==Wa&&oc.forEach(xc=>{2>Math.abs(xc.gap-Wa)&&(la[xc.f]=of(xe({},la[xc.f]),{isSnapped:!0,to:Qb[xc.t],B:Qb,distance:xc.distance}))});Infinity!==bb&&ac.forEach(xc=>{2>Math.abs(xc.gap-bb)&&(la[xc.f]=of(xe({},la[xc.f]),{isSnapped:!0,to:Qb[xc.t],B:Qb,distance:xc.distance}))})});b[0]=Infinity===Wa?0:Wa;b[1]=Infinity===bb?0:bb;J.minX-=b[0];J.midX-=b[0];J.maxX-=b[0];J.minY-=b[1];J.midY-=b[1];J.maxY-=b[1];va.forEach(Qb=>{Qb=la[Qb];if(Qb.isSnapped){var {id:oc,
B:ac}=Qb;Qb=J[oc];X.push("minX"===oc?[[Qb,J.midY],[Qb,ac.minY],[Qb,ac.maxY]]:[[Qb,J.minY],[Qb,J.maxY],[Qb,ac.minY],[Qb,ac.maxY]])}});La.forEach(Qb=>{Qb=la[Qb];if(Qb.isSnapped){var {id:oc,B:ac}=Qb;Qb=J[oc];X.push("midY"===oc?[[J.midX,Qb],[ac.minX,Qb],[ac.maxX,Qb]]:[[J.minX,Qb],[J.maxX,Qb],[ac.minX,Qb],[ac.maxX,Qb]])}});return{offset:b,snapLines:X}}static ensureRatio(b,g){const {width:n,height:J}=b,X=xe({},b);n/J<g?(X.width=J*g,X.maxX+=n-b.width):(X.height=n/g,X.maxY+=J-b.height);return X}static getDistributions(b,
g){var n=b.map(la=>{const va=la.getBounds();return{id:la.id,point:[va.minX,va.minY],bounds:va,center:la.getCenter()}});b=n.length;var J=se.getCommonBounds(n.map(({bounds:la})=>la));const X=[];switch(g){case "horizontal":g=n.reduce((la,va)=>la+va.bounds.width,0);if(g>J.width){const la=n.sort((bb,pb)=>bb.bounds.minX-pb.bounds.minX)[0],va=n.sort((bb,pb)=>pb.bounds.maxX-bb.bounds.maxX)[0];J=n.filter(bb=>bb!==la&&bb!==va).sort((bb,pb)=>bb.center[0]-pb.center[0]);const La=(va.center[0]-la.center[0])/(b-
1),Wa=la.center[0]+La;J.forEach(({id:bb,point:pb,bounds:Db},Qb)=>{X.push({id:bb,prev:pb,next:[Wa+La*Qb-Db.width/2,Db.minY]})})}else{n=n.sort((La,Wa)=>La.center[0]-Wa.center[0]);let la=J.minX;const va=(J.width-g)/(b-1);n.forEach(({id:La,point:Wa,bounds:bb})=>{X.push({id:La,prev:Wa,next:[la,bb.minY]});la+=bb.width+va})}break;case "vertical":if(g=n.reduce((la,va)=>la+va.bounds.height,0),g>J.height){const la=n.sort((bb,pb)=>bb.bounds.minY-pb.bounds.minY)[0],va=n.sort((bb,pb)=>pb.bounds.maxY-bb.bounds.maxY)[0];
J=n.filter(bb=>bb!==la&&bb!==va).sort((bb,pb)=>bb.center[1]-pb.center[1]);const La=(va.center[1]-la.center[1])/(b-1),Wa=la.center[1]+La;J.forEach(({id:bb,point:pb,bounds:Db},Qb)=>{X.push({id:bb,prev:pb,next:[Db.minX,Wa+La*Qb-Db.height/2]})})}else{n=n.sort((La,Wa)=>La.center[1]-Wa.center[1]);let la=J.minY;const va=(J.height-g)/(b-1);n.forEach(({id:La,point:Wa,bounds:bb})=>{X.push({id:La,prev:Wa,next:[bb.minX,la]});la+=bb.height+va})}}return X}static getPackedDistributions(b){const g=se.getCommonBounds(b.map(({bounds:X})=>
X)),n=[g.minX,g.minY],J=Object.fromEntries(b.map(X=>[X.id,[X.bounds.minX,X.bounds.minY]]));b=b.filter(X=>{var la,va,La,Wa;return!((null==(va=null==(la=X.props.handles)?void 0:la.start)?0:va.bindingId)||(null==(Wa=null==(La=X.props.handles)?void 0:La.end)?0:Wa.bindingId))}).map(X=>{const la=X.getBounds();return{id:X.id,w:la.width+16,h:la.height+16,x:la.minX,y:la.minY}});A(b);return b.map(({id:X,x:la,y:va})=>({id:X,prev:J[X],next:[la+n[0],va+n[1]]}))}},pg=class{static pointInCircle(b,g,n){return Lc.dist(b,
g)<=n}static pointInEllipse(b,g,n,J,X=0){X=X||0;var la=Math.cos(X);X=Math.sin(X);g=Lc.sub(b,g);b=la*g[0]+X*g[1];la=X*g[0]-la*g[1];return 1>=b*b/(n*n)+la*la/(J*J)}static pointInRect(b,g){return!(b[0]<g[0]||b[0]>b[0]+g[0]||b[1]<g[1]||b[1]>b[1]+g[1])}static pointInPolygon(b,g){let n=0;g.forEach((J,X)=>{X=g[(X+1)%g.length];J[1]<=b[1]?X[1]>b[1]&&0<Lc.cross(J,X,b)&&(n+=1):X[1]<=b[1]&&0>Lc.cross(J,X,b)&&--n});return 0!==n}static pointInBounds(b,g){return!(b[0]<g.minX||b[0]>g.maxX||b[1]<g.minY||b[1]>g.maxY)}static pointInPolyline(b,
g,n=3){for(let J=1;J<g.length;J++)if(Lc.distanceToLineSegment(g[J-1],g[J],b)<n)return!0;return!1}static _getSqSegDist(b,g,n){let J=g[0];g=g[1];let X=n[0]-J,la=n[1]-g;if(0!==X||0!==la){const va=((b[0]-J)*X+(b[1]-g)*la)/(X*X+la*la);1<va?(J=n[0],g=n[1]):0<va&&(J+=X*va,g+=la*va)}X=b[0]-J;la=b[1]-g;return X*X+la*la}static _simplifyStep(b,g,n,J,X){let la=J,va=-1;for(let La=g+1;La<n;La++){const Wa=pg._getSqSegDist(b[La],b[g],b[n]);Wa>la&&(va=La,la=Wa)}-1<va&&la>J&&(1<va-g&&pg._simplifyStep(b,g,va,J,X),X.push(b[va]),
1<n-va&&pg._simplifyStep(b,va,n,J,X))}static simplify2(b,g=1){if(2>=b.length)return b;g*=g;var n=b[0],J=b[1];const X=[n];for(let la=1,va=b.length;la<va;la++)J=b[la],(J[0]-n[0])*(J[0]-n[0])+(J[1]-n[1])*(J[1]-n[1])>g&&(X.push(J),n=J);n!==J&&X.push(J);n=X.length-1;J=[X[0]];pg._simplifyStep(X,0,n,g,J);J.push(X[n],b[b.length-1]);return J}static pointNearToPolyline(b,g,n=8){const J=g.length;for(let X=1;X<J;X++)if(Lc.distanceToLineSegment(g[X-1],g[X],b)<n)return!0;return!1}},Ig=pg;ia(Ig,"simplify",(b,g=
1)=>{var n=b.length;const J=b[0],X=b[n-1],[la,va]=J,[La,Wa]=X;if(2<n){let bb=0,pb=0;const Db=Lc.len2([Wa-va,La-la]);for(let Qb=1;Qb<n-1;Qb++){const [oc,ac]=b[Qb],xc=Math.pow(oc*(Wa-va)+la*(ac-Wa)+La*(va-ac),2)/Db;bb>xc||(bb=xc,pb=Qb)}if(bb>g)return n=pg.simplify(b.slice(0,pb+1),g),b=pg.simplify(b.slice(pb+1),g),n.concat(b.slice(1))}return[J,X]});var lk=Ja(Ib()),Ak=({target:b},g)=>{b=b&&b.tagName;return!!(b&&g&&g.includes(b))},Lh=class{static registerShortcut(b,g){lk.default.bind(b,(n,J)=>{var X;n.preventDefault();
Ak(n,["INPUT","TEXTAREA","SELECT"])||(null==(X=n.target)?0:X.isContentEditable)||g(n,J)},"keydown");return()=>{lk.default.unbind(b,"keydown")}}},ri=Math.PI,qj=ri/2,pj=2*ri,Mo={},ko={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",
top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Uk=class{static circleFromThreePoints(b,g,n){const [J,X]=b,[la,va]=g,[La,Wa]=n;g=J*(va-Wa)-X*(la-La)+la*Wa-La*va;b=-((J*J+X*X)*(Wa-va)+(la*la+va*va)*(X-Wa)+(La*La+Wa*Wa)*(va-X))/(2*g);g=-((J*J+X*X)*(la-La)+(la*la+va*va)*(La-J)+(La*La+Wa*Wa)*(J-la))/(2*g);return[b,g,Math.hypot(b-J,g-X)]}static perimeterOfEllipse(b,g){const n=Math.pow(b-g,2)/Math.pow(b+g,2);return ri*(b+g)*(1+3*n/(10+Math.sqrt(4-3*n)))}static shortAngleDist(b,
g){b=(g-b)%pj;return 2*b%pj-b}static longAngleDist(b,g){return pj-Uk.shortAngleDist(b,g)}static lerpAngles(b,g,n){return b+Uk.shortAngleDist(b,g)*n}static angleDelta(b,g){return Uk.shortAngleDist(b,g)}static getSweep(b,g,n){return Uk.angleDelta(sd.angle(b,g),sd.angle(b,n))}static clampRadians(b){return(pj+b)%pj}static snapAngleToSegments(b,g){g=pj/g;b=Math.floor((Uk.clampRadians(b)+g/2)/g)*g%pj;b<ri&&(b+=pj);b>ri&&(b-=pj);return b}static isAngleBetween(b,g,n){if(n===b||n===g)return!0;g=(g-b+qj)%qj;
return g<=ri!==(n-b+qj)%qj>g}static degreesToRadians(b){return b*ri/180}static radiansToDegrees(b){return 180*b/ri}static getArcLength(b,g,n,J){b=Uk.getSweep(b,n,J);return b/pj*pj*g}static getSweepFlag(b,g,n){n=sd.angle(b,n);return 0<(sd.angle(b,g)-n+3*ri)%pj-ri?0:1}static getLargeArcFlag(b,g,n){b=sd.angle(n,b);g=(sd.angle(n,g)-b+3*ri)%pj-ri;return Math.abs(g)>qj?0:1}static getArcDashOffset(b,g,n,J,X){const la=Uk.getSweepFlag(b,n,J);g=Uk.getArcLength(b,g,n,J);return-(0>la?g:pj*b[2]-g)/2+X}static getEllipseDashOffset(b,
g){return-(pj*b[2])/2+-g}static radiansToCardinalDirection(b){return b<.25*Math.PI?"north":b<.75*Math.PI?"east":b<1.25*Math.PI?"south":b<1.75*Math.PI?"west":"north"}},rg=class{static getPolygonCentroid(b){var g=b.map(n=>n[0]);b=b.map(n=>n[1]);g=Math.min(...g)+Math.max(...g);b=Math.min(...b)+Math.max(...b);return[g?g/2:0,b?b/2:0]}};ia(rg,"getEdges",b=>{const g=b.length;return b.map((n,J)=>[n,b[(J+1)%g]])});ia(rg,"getEdgeOutwardNormal",(b,g)=>sd.per(sd.uni(sd.sub(g,b))));ia(rg,"getEdgeInwardNormal",
(b,g)=>sd.neg(rg.getEdgeOutwardNormal(b,g)));ia(rg,"getOffsetEdge",(b,g,n)=>{n=sd.mul(sd.per(sd.uni(sd.sub(g,b))),n);return[sd.add(b,n),sd.add(g,n)]});ia(rg,"getOffsetEdges",(b,g)=>b.map(([n,J])=>rg.getOffsetEdge(n,J,g)));ia(rg,"getOffsetPolygon",(b,g)=>{if(1>b.length)throw Error("Expected at least one point.");if(1===b.length)return b=b[0],[sd.add(b,[-g,-g]),sd.add(b,[g,-g]),sd.add(b,[g,g]),sd.add(b,[-g,g])];if(2===b.length){const [n,J]=b;return[...rg.getOffsetEdge(n,J,g),...rg.getOffsetEdge(J,n,
g)]}return rg.getOffsetEdges(rg.getEdges(b),g).flatMap((n,J,X)=>{{J=X[(J+1)%X.length];const la=Lc.slope(n[0],n[1]);X=Lc.slope(J[0],J[1]);la!==X?Number.isNaN(la)&&!Number.isNaN(X)?n=[n[0][0],(n[0][0]-J[0][0])*X+J[0][1]]:Number.isNaN(X)&&!Number.isNaN(la)?n=[J[0][0],(J[0][0]-n[0][0])*la+n[0][1]]:(n=(la*n[0][0]-X*J[0][0]+J[0][1]-n[0][1])/(la-X),n=[n,X*(n-J[0][0])+J[0][1]]):n=void 0}if(void 0===n)throw Error("Expected an intersection");return n})});ia(rg,"getPolygonVertices",(b,g,n=0,J=1)=>{b=sd.div(b,
2);const [X,la]=[Math.max(1,b[0]-n),Math.max(1,b[1]-n)];n=[];for(let bb=0,pb=pj/g;bb<g;bb++){var va=(-qj+bb*pb)%pj,La=(-qj+(bb+1)*pb)%pj;va=sd.add(b,[X*Math.cos(va),la*Math.sin(va)]);La=sd.add(b,[X*Math.cos(La),la*Math.sin(La)]);var Wa=sd.med(va,La);Wa=sd.nudge(Wa,b,sd.dist(b,Wa)*(1-J));n.push(va,Wa,La)}return n});ia(rg,"getTriangleVertices",(b,g=0,n=1)=>{const [J,X]=b;var la=1-n;b=[J/2,g/2];n=[J-g,X-g];g=[g/2,X-g];const va=rg.getPolygonCentroid([b,n,g]),La=sd.med(b,n),Wa=sd.med(n,g),bb=sd.med(g,
b),pb=sd.dist(La,va)*la,Db=sd.dist(Wa,va)*la;la*=sd.dist(bb,va);return[b,pb?sd.nudge(La,va,pb):La,n,Db?sd.nudge(Wa,va,Db):Wa,g,la?sd.nudge(bb,va,la):bb]});ia(rg,"getStarVertices",(b,g,n,J=1)=>{const X=sd.div(g,2),la=sd.mul(X,J/2),va=pj/n/2;return Array.from(Array(2*n)).map((La,Wa)=>{La=-qj+Wa*va;const [bb,pb]=Wa%2?la:X;return sd.add(b,[bb*Math.cos(La),pb*Math.sin(La)])})});var cm=class{static getCurvedPathForPolygon(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=
["M",...b[0].slice(0,2),"Q"],n=b.length;for(let J=1;J<n;J++){const [X,la]=b[J],[va,La]=b[(J+1)%n];g.push(X,la,(X+va)/2,(la+La)/2)}g.push("Z");return g.join(" ")}static getCurvedPathForPoints(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],n=b.length;for(let J=1;J<n-1;J++){const [X,la]=b[J],[va,La]=b[J+1];g.push(X,la,(X+va)/2,(la+La)/2)}return g.join(" ")}static getSvgPathFromStroke(b,g=!0){const n=b.length;if(4>n)return"";let J=
b[0],X=b[1];var la=b[2];la=`M${J[0].toFixed(2)},${J[1].toFixed(2)} Q${X[0].toFixed(2)},${X[1].toFixed(2)} ${((X[0]+la[0])/2).toFixed(2)},${((X[1]+la[1])/2).toFixed(2)} T`;for(let va=2,La=n-1;va<La;va++)J=b[va],X=b[va+1],la+=`${((J[0]+X[0])/2).toFixed(2)},${((J[1]+X[1])/2).toFixed(2)} `;g&&(la+="Z");return la}static getSvgPathFromStrokePoints(b,g=!1){const n=b.length;if(4>n)return"";let J=b[0].point,X=b[1].point;var la=b[2].point;la=`M${J[0].toFixed(2)},${J[1].toFixed(2)} Q${X[0].toFixed(2)},${X[1].toFixed(2)} ${((X[0]+
la[0])/2).toFixed(2)},${((X[1]+la[1])/2).toFixed(2)} T`;for(let va=2,La=n-1;va<La;va++)J=b[va].point,X=b[va+1].point,la+=`${((J[0]+X[0])/2).toFixed(2)},${((J[1]+X[1])/2).toFixed(2)} `;g&&(la+="Z");return la}};ia(cm,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var Kl={},rm=Object.assign,Rn=Object.getOwnPropertyDescriptor,zn=Object.defineProperty,gl=Object.prototype,vp=[];Object.freeze(vp);var Jo={};Object.freeze(Jo);var nq="undefined"!==typeof Proxy,tp=Object.toString(),No=function(){},
$q="undefined"!==typeof Object.getOwnPropertySymbols,up="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:$q?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:Object.getOwnPropertyNames,es=Object.getOwnPropertyDescriptors||function(b){var g={};up(b).forEach(function(n){g[n]=Rn(b,n)});return g},Uf=Symbol("mobx-stored-annotations"),ah=Symbol("mobx administration"),Zo=function(){function b(n){void 0===n&&(n="Atom");this.name_=void 0;this.isBeingObserved_=
this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=Ab.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=n}var g=b.prototype;g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};g.reportObserved=function(){return Lb(this)};g.reportChanged=function(){md();dc(this);Td()};g.toString=function(){return this.name_};return b}(),hn=D("Atom",
Zo),$m={identity:function(b,g){return b===g},structural:function(b,g){return ta(b,g)},"default":function(b,g){return Object.is?Object.is(b,g):b===g?0!==b||1/b===1/g:b!==b&&g!==g},shallow:function(b,g){return ta(b,g,1)}},qq="override",rq=lb(),ap={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(ap);var br=Ub("observable"),jo=Ub("observable.ref",{enhancer:fb}),pq=Ub("observable.shallow",{enhancer:function(b,g,n){if(void 0===b||null===b||Yd(b)||ib(b)||Ip(b)||Gq(b))return b;if(Array.isArray(b))return sg.array(b,
{name:n,deep:!1});if(H(b))return sg.object(b,void 0,{name:n,deep:!1});if(O(b))return sg.map(b,{name:n,deep:!1});if(P(b))return sg.set(b,{name:n,deep:!1})}}),fs=Ub("observable.struct",{enhancer:function(b,g){return ta(b,g)?g:b}}),oq=Ua(br);Object.assign(bd,oq);var io={box:function(b,g){g=g||ap;return new Tn(b,Hc(g),g.name,!0,g.equals)},array:function(b,g){g=g||ap;return(!1===oe.useProxies||!1===g.proxy?ef:$a)(b,Hc(g),g.name)},map:function(b,g){g=g||ap;return new Qx(b,Hc(g),g.name)},set:function(b,
g){g=g||ap;return new Rx(b,Hc(g),g.name)},object:function(b,g,n){if(!1===oe.useProxies||!1===(null==n?void 0:n.proxy))n=Cd({},n);else{var J={},X,la;ka();J=Cd(J,n);n=null!=(la=(X=J[ah]).proxy_)?la:X.proxy_=new Proxy(J,VB)}return nc(n,b,g)},ref:Ua(jo),shallow:Ua(pq),deep:oq,struct:Ua(fs)},sg=rm(bd,io),wp=yb("computed"),ar=yb("computed.struct",{equals:$m.structural}),mh=function(b,g){if(Y(g))return Fa(b,g,wp);if(H(b))return Ua(yb("computed",b));g=H(g)?g:{};g.get=b;g.name||(g.name=b.name||"");return new Ea(g)};
Object.assign(mh,wp);mh.struct=Ua(ar);var mt,ds,Zq=0,Tu=1,Vu=null!=(mt=null==(ds=Rn(function(){},"name"))?void 0:ds.configurable)?mt:!1,xp={value:"action",configurable:!0,writable:!1,enumerable:!1};var Wu=Symbol.toPrimitive;var Tn=function(b){function g(J,X,la,va,La){void 0===la&&(la="ObservableValue");void 0===La&&(La=$m["default"]);va=b.call(this,la)||this;va.enhancer=void 0;va.hasUnreportedChange_=!1;va.interceptors_=void 0;va.changeListeners_=void 0;va.value_=void 0;va.dehancer=void 0;va.enhancer=
X;va.name_=la;va.equals=La;va.value_=X(J,void 0,la);return va}ea(g,b);var n=g.prototype;n.dehanceValue=function(J){return void 0!==this.dehancer?this.dehancer(J):J};n.set=function(J){J=this.prepareNewValue_(J);J!==oe.UNCHANGED&&this.setNewValue_(J)};n.prepareNewValue_=function(J){if(ce(this)){J=jc(this,{object:this,type:Po,newValue:J});if(!J)return oe.UNCHANGED;J=J.newValue}J=this.enhancer(J,this.value_,this.name_);return this.equals(this.value_,J)?oe.UNCHANGED:J};n.setNewValue_=function(J){var X=
this.value_;this.value_=J;this.reportChanged();Oe(this)&&cf(this,{type:Po,object:this,newValue:J,oldValue:X})};n.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};n.intercept_=function(J){return qd(this,J)};n.observe_=function(J,X){X&&J({observableKind:"value",debugObjectName:this.name_,object:this,type:Po,newValue:this.value_,oldValue:void 0});return Yf(this,J)};n.raw=function(){return this.value_};n.toJSON=function(){return this.get()};n.toString=function(){return this.name_+
"["+this.value_+"]"};n.valueOf=function(){return W(this.get())};n[Wu]=function(){return this.valueOf()};return g}(Zo),T=D("ObservableValue",Tn);var ma=Symbol.toPrimitive;var Ea=function(){function b(n){this.dependenciesState_=Ab.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Ab.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Gc(null);
this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=lc.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;n.get||m(31);this.derivation=n.get;this.name_=n.name||"ComputedValue";n.set&&(this.setter_=Mc("ComputedValue-setter",n.set));this.equals_=n.equals||(n.compareStructural||n.struct?$m.structural:$m["default"]);this.scope_=n.context;this.requiresReaction_=n.requiresReaction;
this.keepAlive_=!!n.keepAlive}var g=b.prototype;g.onBecomeStale_=function(){ob(this)};g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};g.get=function(){this.isComputing_&&m(32,this.name_,this.derivation);if(0!==oe.inBatch||0!==this.observers_.size||this.keepAlive_){if(Lb(this),Tc(this)){var n=oe.trackingContext;this.keepAlive_&&!n&&(oe.trackingContext=this);this.trackAndCompute()&&Vb(this);oe.trackingContext=
n}}else Tc(this)&&(this.warnAboutUntrackedRead_(),md(),this.value_=this.computeValue_(!1),Td());n=this.value_;if(n instanceof Gc)throw n.cause;return n};g.set=function(n){if(this.setter_){this.isRunningSetter_&&m(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else m(34,this.name_)};g.trackAndCompute=function(){var n=this.value_,J=this.dependenciesState_===Ab.NOT_TRACKING_,X=this.computeValue_(!0);if(n=J||n instanceof Gc||X instanceof
Gc||!this.equals_(n,X))this.value_=X;return n};g.computeValue_=function(n){this.isComputing_=!0;var J=vc(!1);if(n)var X=id(this,this.derivation,this.scope_);else if(!0===oe.disableErrorBoundaries)X=this.derivation.call(this.scope_);else try{X=this.derivation.call(this.scope_)}catch(la){X=new Gc(la)}oe.allowStateChanges=J;this.isComputing_=!1;return X};g.suspend_=function(){this.keepAlive_||(Ld(this),this.value_=void 0)};g.observe_=function(n,J){var X=this,la=!0,va=void 0;return Md(function(){var La=
X.get();if(!la||J){var Wa=mc();n({observableKind:"computed",debugObjectName:X.name_,type:Po,object:X,newValue:La,oldValue:va});oe.trackingDerivation=Wa}la=!1;va=La})};g.warnAboutUntrackedRead_=function(){};g.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};g.valueOf=function(){return W(this.get())};g[ma]=function(){return this.valueOf()};return b}(),gb=D("ComputedValue",Ea),Ab;(function(b){b[b.NOT_TRACKING_=-1]="NOT_TRACKING_";b[b.UP_TO_DATE_=0]="UP_TO_DATE_";b[b.POSSIBLY_STALE_=
1]="POSSIBLY_STALE_";b[b.STALE_=2]="STALE_"})(Ab||={});var lc;(function(b){b[b.NONE=0]="NONE";b[b.LOG=1]="LOG";b[b.BREAK=2]="BREAK"})(lc||={});var Gc=function(b){this.cause=void 0;this.cause=b},fd=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];
this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},Rd=!0,Ee=!1,oe=function(){var b=R();0<b.__mobxInstanceCount&&!b.__mobxGlobals&&(Rd=!1);b.__mobxGlobals&&b.__mobxGlobals.version!==(new fd).version&&(Rd=!1);if(Rd){if(b.__mobxGlobals)return b.__mobxInstanceCount+=1,b.__mobxGlobals.UNCHANGED||(b.__mobxGlobals.UNCHANGED=
{}),b.__mobxGlobals;b.__mobxInstanceCount=1;return b.__mobxGlobals=new fd}setTimeout(function(){Ee||m(35)},1);return new fd}(),kh=function(){function b(n,J,X,la){void 0===n&&(n="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Ab.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=lc.NONE;
this.name_=n;this.onInvalidate_=J;this.errorHandler_=X;this.requiresObservable_=la}var g=b.prototype;g.onBecomeStale_=function(){this.schedule_()};g.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,oe.pendingReactions.push(this),0<oe.inBatch||oe.isRunningReactions||Ag(kb))};g.isScheduled=function(){return this.isScheduled_};g.runReaction_=function(){if(!this.isDisposed_){md();this.isScheduled_=!1;var n=oe.trackingContext;oe.trackingContext=this;if(Tc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(J){this.reportExceptionInDerivation_(J)}}oe.trackingContext=
n;Td()}};g.track=function(n){if(!this.isDisposed_){md();this.isRunning_=!0;var J=oe.trackingContext;oe.trackingContext=this;n=id(this,n,void 0);oe.trackingContext=J;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Ld(this);n instanceof Gc&&this.reportExceptionInDerivation_(n.cause);Td()}};g.reportExceptionInDerivation_=function(n){var J=this;if(this.errorHandler_)this.errorHandler_(n,this);else{if(oe.disableErrorBoundaries)throw n;oe.suppressReactionErrors||console.error("[mobx] uncaught error in '"+
this+"'",n);oe.globalReactionErrorHandlers.forEach(function(X){return X(n,J)})}};g.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(md(),Ld(this),Td()))};g.getDisposer_=function(){var n=this.dispose.bind(this);n[ah]=this;return n};g.toString=function(){return"Reaction["+this.name_+"]"};g.trace=function(n){void 0===n&&(n=!1);zb(this,n)};return b}(),kf=100,Ag=function(b){return b()},rh=D("Reaction",kh),lh="action",ne=db(lh),Xd=db("action.bound",{bound:!0}),me=db("autoAction",
{autoAction:!0}),af=db("autoAction.bound",{autoAction:!0,bound:!0}),he=Sc(!1);Object.assign(he,ne);var vh=Sc(!0);Object.assign(vh,me);he.bound=Ua(Xd);vh.bound=Ua(af);var xg=function(b){return b()},Bh="onBO",ki="onBUO",Ph=0;Pb.prototype=Object.create(Error.prototype);var ho=sa("flow"),Uu=sa("flow.bound",{bound:!0}),js=Object.assign(function(b,g){if(Y(g))return Fa(b,g,ho);var n=b.name||"\x3cunnamed flow\x3e";g=function(){var J=arguments,X=++Ph,la=he(n+" - runid: "+X+" - init",b).apply(this,J),va,La=
void 0;J=new Promise(function(Wa,bb){function pb(ac){La=void 0;try{var xc=he(n+" - runid: "+X+" - yield "+oc++,la.next).call(la,ac)}catch(pc){return bb(pc)}Qb(xc)}function Db(ac){La=void 0;try{var xc=he(n+" - runid: "+X+" - yield "+oc++,la["throw"]).call(la,ac)}catch(pc){return bb(pc)}Qb(xc)}function Qb(ac){if(na(null==ac?void 0:ac.then))ac.then(Qb,bb);else{if(ac.done)return Wa(ac.value);La=Promise.resolve(ac.value);return La.then(pb,Db)}}var oc=0;va=bb;pb(void 0)});J.cancel=he(n+" - runid: "+X+" - cancel",
function(){try{if(La){var Wa=La;na(Wa.cancel)&&Wa.cancel()}var bb=la["return"](void 0),pb=Promise.resolve(bb.value);pb.then(No,No);na(pb.cancel)&&pb.cancel();va(new Pb)}catch(Db){va(Db)}});return J};g.isMobXFlow=!0;return g},ho);js.bound=Ua(Uu);var VB={has:function(b,g){return b[ah].has_(g)},get:function(b,g){return b[ah].get_(g)},set:function(b,g,n){var J;return Y(g)?null!=(J=b[ah].set_(g,n,!0))?J:!0:!1},deleteProperty:function(b,g){var n;return Y(g)?null!=(n=b[ah].delete_(g,!0))?n:!0:!1},defineProperty:function(b,
g,n){var J;return null!=(J=b[ah].defineProperty_(g,n))?J:!0},ownKeys:function(b){return b[ah].ownKeys_()},preventExtensions:function(b){m(13)}},Po="update",UB={get:function(b,g){var n=b[ah];return g===ah?n:"length"===g?n.getArrayLength_():"string"!==typeof g||isNaN(g)?F(st,g)?st[g]:b[g]:n.get_(parseInt(g))},set:function(b,g,n){var J=b[ah];"length"===g&&J.setArrayLength_(n);"symbol"===typeof g||isNaN(g)?b[g]=n:J.set_(parseInt(g),n);return!0},preventExtensions:function(){m(15)}},ev=function(){function b(n,
J,X,la){void 0===n&&(n="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=X;this.legacyMode_=la;this.atom_=new Zo(n);this.enhancer_=function(va,La){return J(va,La,"ObservableArray[..]")}}var g=b.prototype;g.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};g.dehanceValues_=function(n){return void 0!==this.dehancer&&0<
n.length?n.map(this.dehancer):n};g.intercept_=function(n){return qd(this,n)};g.observe_=function(n,J){void 0===J&&(J=!1);J&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Yf(this,n)};g.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};g.setArrayLength_=function(n){("number"!==typeof n||isNaN(n)||0>n)&&m("Out of range: "+
n);var J=this.values_.length;if(n!==J)if(n>J){for(var X=Array(n-J),la=0;la<n-J;la++)X[la]=void 0;this.spliceWithArray_(J,0,X)}else this.spliceWithArray_(n,J-n)};g.updateArrayLength_=function(n,J){n!==this.lastKnownLength_&&m(16);this.lastKnownLength_+=J;this.legacyMode_&&0<J&&te(n+J+1)};g.spliceWithArray_=function(n,J,X){var la=this,va=this.values_.length;void 0===n?n=0:n>va?n=va:0>n&&(n=Math.max(0,va+n));J=1===arguments.length?va-n:void 0===J||null===J?0:Math.max(0,Math.min(J,va-n));void 0===X&&
(X=vp);if(ce(this)){var La=jc(this,{object:this.proxy_,type:"splice",index:n,removedCount:J,added:X});if(!La)return vp;J=La.removedCount;X=La.added}X=0===X.length?X:X.map(function(Wa){return la.enhancer_(Wa,void 0)});this.legacyMode_&&this.updateArrayLength_(va,X.length-J);va=this.spliceItemsIntoValues_(n,J,X);0===J&&0===X.length||this.notifyArraySplice_(n,X,va);return this.dehanceValues_(va)};g.spliceItemsIntoValues_=function(n,J,X){if(1E4>X.length){var la;return(la=this.values_).splice.apply(la,
[n,J].concat(X))}la=this.values_.slice(n,n+J);var va=this.values_.slice(n+J);this.values_.length+=X.length-J;for(J=0;J<X.length;J++)this.values_[n+J]=X[J];for(J=0;J<va.length;J++)this.values_[n+X.length+J]=va[J];return la};g.notifyArrayChildUpdate_=function(n,J,X){var la=!this.owned_&&!1,va=Oe(this);n=va||la?{observableKind:"array",object:this.proxy_,type:Po,debugObjectName:this.atom_.name_,index:n,newValue:J,oldValue:X}:null;this.atom_.reportChanged();va&&cf(this,n)};g.notifyArraySplice_=function(n,
J,X){var la=!this.owned_&&!1,va=Oe(this);n=va||la?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:n,removed:X,added:J,removedCount:X.length,addedCount:J.length}:null;this.atom_.reportChanged();va&&cf(this,n)};g.get_=function(n){if(this.legacyMode_&&n>=this.values_.length)console.warn("[mobx] Out of bounds read: "+n);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])};g.set_=function(n,J){var X=this.values_;this.legacyMode_&&
n>X.length&&m(17,n,X.length);if(n<X.length){var la=X[n];if(ce(this)){J=jc(this,{type:Po,object:this.proxy_,index:n,newValue:J});if(!J)return;J=J.newValue}J=this.enhancer_(J,la);J!==la&&(X[n]=J,this.notifyArrayChildUpdate_(n,J,la))}else{n=Array(n+1-X.length);for(la=0;la<n.length-1;la++)n[la]=void 0;n[n.length-1]=J;this.spliceWithArray_(X.length,0,n)}};return b}(),st={clear:function(){return this.splice(0)},replace:function(b){var g=this[ah];return g.spliceWithArray_(0,g.values_.length,b)},toJSON:function(){return this.slice()},
splice:function(b,g){for(var n=arguments.length,J=Array(2<n?n-2:0),X=2;X<n;X++)J[X-2]=arguments[X];n=this[ah];switch(arguments.length){case 0:return[];case 1:return n.spliceWithArray_(b);case 2:return n.spliceWithArray_(b,g)}return n.spliceWithArray_(b,g,J)},spliceWithArray:function(b,g,n){return this[ah].spliceWithArray_(b,g,n)},push:function(){for(var b=this[ah],g=arguments.length,n=Array(g),J=0;J<g;J++)n[J]=arguments[J];b.spliceWithArray_(b.values_.length,0,n);return b.values_.length},pop:function(){return this.splice(Math.max(this[ah].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var b=this[ah],g=arguments.length,n=Array(g),J=0;J<g;J++)n[J]=arguments[J];b.spliceWithArray_(0,0,n);return b.values_.length},reverse:function(){oe.trackingDerivation&&m(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){oe.trackingDerivation&&m(37,"sort");var b=this.slice();b.sort.apply(b,arguments);this.replace(b);return this},remove:function(b){var g=this[ah];b=g.dehanceValues_(g.values_).indexOf(b);
return-1<b?(this.splice(b,1),!0):!1}};Bb("concat",cb);Bb("flat",cb);Bb("includes",cb);Bb("indexOf",cb);Bb("join",cb);Bb("lastIndexOf",cb);Bb("slice",cb);Bb("toString",cb);Bb("toLocaleString",cb);Bb("every",Cb);Bb("filter",Cb);Bb("find",Cb);Bb("findIndex",Cb);Bb("flatMap",Cb);Bb("forEach",Cb);Bb("map",Cb);Bb("some",Cb);Bb("reduce",ec);Bb("reduceRight",ec);var SB=D("ObservableArrayAdministration",ev),TB={};var WB=Symbol.iterator;var XB=Symbol.toStringTag;var Qx=function(){function b(n,J,X){var la=this;
void 0===J&&(J=Ma);void 0===X&&(X="ObservableMap");this.name_=this.enhancer_=void 0;this[ah]=TB;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=J;this.name_=X;na(Map)||m(18);this.keysAtom_=Ya("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Eb(!0,function(){la.merge(n)})}var g=b.prototype;g.has_=function(n){return this.data_.has(n)};g.has=function(n){var J=this;if(!oe.trackingDerivation)return this.has_(n);var X=this.hasMap_.get(n);
if(!X){var la=X=new Tn(this.has_(n),fb,"ObservableMap.key?",!1);this.hasMap_.set(n,la);sc(la,function(){return J.hasMap_["delete"](n)})}return X.get()};g.set=function(n,J){var X=this.has_(n);if(ce(this)){J=jc(this,{type:X?Po:"add",object:this,newValue:J,name:n});if(!J)return this;J=J.newValue}X?this.updateValue_(n,J):this.addValue_(n,J);return this};g["delete"]=function(n){var J=this;if(ce(this)&&!jc(this,{type:"delete",object:this,name:n}))return!1;if(this.has_(n)){var X=Oe(this),la=X?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(n).value_,name:n}:null;Id(function(){var va;J.keysAtom_.reportChanged();null==(va=J.hasMap_.get(n))?void 0:va.setNewValue_(!1);J.data_.get(n).setNewValue_(void 0);J.data_["delete"](n)});X&&cf(this,la);return!0}return!1};g.updateValue_=function(n,J){var X=this.data_.get(n);J=X.prepareNewValue_(J);if(J!==oe.UNCHANGED){var la=Oe(this);n=la?{observableKind:"map",debugObjectName:this.name_,type:Po,object:this,oldValue:X.value_,
name:n,newValue:J}:null;X.setNewValue_(J);la&&cf(this,n)}};g.addValue_=function(n,J){var X=this;Id(function(){var La,Wa=new Tn(J,X.enhancer_,"ObservableMap.key",!1);X.data_.set(n,Wa);J=Wa.value_;null==(La=X.hasMap_.get(n))?void 0:La.setNewValue_(!0);X.keysAtom_.reportChanged()});var la=Oe(this),va=la?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:n,newValue:J}:null;la&&cf(this,va)};g.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)};
g.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};g.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};g.values=function(){var n=this,J=this.keys();return ab({next:function(){var X=J.next(),la=X.done;X=X.value;return{done:la,value:la?void 0:n.get(X)}}})};g.entries=function(){var n=this,J=this.keys();return ab({next:function(){var X=J.next(),la=X.done;X=X.value;return{done:la,value:la?void 0:[X,n.get(X)]}}})};g[WB]=function(){return this.entries()};
g.forEach=function(n,J){for(var X=Ha(this),la;!(la=X()).done;)la=la.value,n.call(J,la[1],la[0],this)};g.merge=function(n){var J=this;Ip(n)&&(n=new Map(n));Id(function(){H(n)?ba(n).forEach(function(X){return J.set(X,n[X])}):Array.isArray(n)?n.forEach(function(X){return J.set(X[0],X[1])}):O(n)?(n.constructor!==Map&&m(19,n),n.forEach(function(X,la){return J.set(la,X)})):null!==n&&void 0!==n&&m(20,n)});return this};g.clear=function(){var n=this;Id(function(){Jd(function(){for(var J=Ha(n.keys()),X;!(X=
J()).done;)n["delete"](X.value)})})};g.replace=function(n){var J=this;Id(function(){for(var X=hd(n),la=new Map,va=!1,La=Ha(J.data_.keys()),Wa;!(Wa=La()).done;)if(Wa=Wa.value,!X.has(Wa))if(J["delete"](Wa))va=!0;else{var bb=J.data_.get(Wa);la.set(Wa,bb)}for(X=Ha(X.entries());!(La=X()).done;)Wa=La.value,La=Wa[0],bb=Wa[1],Wa=J.data_.has(La),J.set(La,bb),J.data_.has(La)&&(bb=J.data_.get(La),la.set(La,bb),Wa||(va=!0));if(!va)if(J.data_.size!==la.size)J.keysAtom_.reportChanged();else for(va=J.data_.keys(),
X=la.keys(),La=va.next(),Wa=X.next();!La.done;){if(La.value!==Wa.value){J.keysAtom_.reportChanged();break}La=va.next();Wa=X.next()}J.data_=la});return this};g.toString=function(){return"[object ObservableMap]"};g.toJSON=function(){return Array.from(this)};g.observe_=function(n,J){return Yf(this,n)};g.intercept_=function(n){return qd(this,n)};K(b,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:XB,get:function(){return"Map"}}]);return b}(),Ip=D("ObservableMap",
Qx),YB={};var ZB=Symbol.iterator;var $B=Symbol.toStringTag;var Rx=function(){function b(n,J,X){void 0===J&&(J=Ma);void 0===X&&(X="ObservableSet");this.name_=void 0;this[ah]=YB;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=X;na(Set)||m(22);this.atom_=Ya(this.name_);this.enhancer_=function(la,va){return J(la,va,X)};n&&this.replace(n)}var g=b.prototype;g.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};
g.clear=function(){var n=this;Id(function(){Jd(function(){for(var J=Ha(n.data_.values()),X;!(X=J()).done;)n["delete"](X.value)})})};g.forEach=function(n,J){for(var X=Ha(this),la;!(la=X()).done;)la=la.value,n.call(J,la,la,this)};g.add=function(n){var J=this;if(ce(this)&&!jc(this,{type:"add",object:this,newValue:n}))return this;if(!this.has(n)){Id(function(){J.data_.add(J.enhancer_(n,void 0));J.atom_.reportChanged()});var X=Oe(this),la=X?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:n}:null;X&&cf(this,la)}return this};g["delete"]=function(n){var J=this;if(ce(this)&&!jc(this,{type:"delete",object:this,oldValue:n}))return!1;if(this.has(n)){var X=Oe(this),la=X?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:n}:null;Id(function(){J.atom_.reportChanged();J.data_["delete"](n)});X&&cf(this,la);return!0}return!1};g.has=function(n){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(n))};g.entries=function(){var n=0,J=Array.from(this.keys()),
X=Array.from(this.values());return ab({next:function(){var la=n;n+=1;return la<X.length?{value:[J[la],X[la]],done:!1}:{done:!0}}})};g.keys=function(){return this.values()};g.values=function(){this.atom_.reportObserved();var n=this,J=0,X=Array.from(this.data_.values());return ab({next:function(){return J<X.length?{value:n.dehanceValue_(X[J++]),done:!1}:{done:!0}}})};g.replace=function(n){var J=this;Gq(n)&&(n=new Set(n));Id(function(){Array.isArray(n)?(J.clear(),n.forEach(function(X){return J.add(X)})):
P(n)?(J.clear(),n.forEach(function(X){return J.add(X)})):null!==n&&void 0!==n&&m("Cannot initialize set from "+n)});return this};g.observe_=function(n,J){return Yf(this,n)};g.intercept_=function(n){return qd(this,n)};g.toJSON=function(){return Array.from(this)};g.toString=function(){return"[object ObservableSet]"};g[ZB]=function(){return this.values()};K(b,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:$B,get:function(){return"Set"}}]);return b}(),Gq=D("ObservableSet",
Rx),Sx=Object.create(null),Tx=function(){function b(n,J,X,la){void 0===J&&(J=new Map);void 0===la&&(la=rq);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=n;this.values_=J;this.name_=X;this.defaultAnnotation_=la;this.keysAtom_=new Zo("ObservableObject.keys");this.isPlainObject_=H(this.target_)}var g=b.prototype;g.getObservablePropValue_=function(n){return this.values_.get(n).get()};
g.setObservablePropValue_=function(n,J){var X=this.values_.get(n);if(X instanceof Ea)return X.set(J),!0;if(ce(this)){J=jc(this,{type:Po,object:this.proxy_||this.target_,name:n,newValue:J});if(!J)return null;J=J.newValue}J=X.prepareNewValue_(J);if(J!==oe.UNCHANGED){var la=Oe(this);n=la?{type:Po,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:X.value_,name:n,newValue:J}:null;X.setNewValue_(J);la&&cf(this,n)}return!0};g.get_=function(n){oe.trackingDerivation&&
!F(this.target_,n)&&this.has_(n);return this.target_[n]};g.set_=function(n,J,X){void 0===X&&(X=!1);if(F(this.target_,n)){if(this.values_.has(n))return this.setObservablePropValue_(n,J);if(X)return Reflect.set(this.target_,n,J);this.target_[n]=J;return!0}return this.extend_(n,{value:J,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,X)};g.has_=function(n){if(!oe.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var J=this.pendingKeys_.get(n);
J||(J=new Tn(n in this.target_,fb,"ObservableObject.key?",!1),this.pendingKeys_.set(n,J));return J.get()};g.make_=function(n,J){!0===J&&(J=this.defaultAnnotation_);if(!1!==J){if(!(n in this.target_)){var X;if(null!=(X=this.target_[Uf])&&X[n])return;m(1,J.annotationType_,this.name_+"."+n.toString())}for(X=this.target_;X&&X!==gl;){var la=Rn(X,n);if(la){la=J.make_(this,n,la,X);if(0===la)return;if(1===la)break}X=Object.getPrototypeOf(X)}var va;null==(va=this.target_[Uf])?!0:delete va[n]}};g.extend_=function(n,
J,X,la){void 0===la&&(la=!1);!0===X&&(X=this.defaultAnnotation_);if(!1===X)return this.defineProperty_(n,J,la);if(J=X.extend_(this,n,J,la)){var va;null==(va=this.target_[Uf])?!0:delete va[n]}return J};g.defineProperty_=function(n,J,X){void 0===X&&(X=!1);try{md();var la=this.delete_(n);if(!la)return la;if(ce(this)){var va=jc(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:J.value});if(!va)return null;var La=va.newValue;J.value!==La&&(J=Z({},J,{value:La}))}if(X){if(!Reflect.defineProperty(this.target_,
n,J))return!1}else zn(this.target_,n,J);this.notifyPropertyAddition_(n,J.value)}finally{Td()}return!0};g.defineObservableProperty_=function(n,J,X,la){void 0===la&&(la=!1);try{md();var va=this.delete_(n);if(!va)return va;if(ce(this)){var La=jc(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:J});if(!La)return null;J=La.newValue}var Wa=je(n),bb={configurable:oe.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Wa.get,set:Wa.set};if(la){if(!Reflect.defineProperty(this.target_,
n,bb))return!1}else zn(this.target_,n,bb);var pb=new Tn(J,X,"ObservableObject.key",!1);this.values_.set(n,pb);this.notifyPropertyAddition_(n,pb.value_)}finally{Td()}return!0};g.defineComputedProperty_=function(n,J,X){void 0===X&&(X=!1);try{md();var la=this.delete_(n);if(!la)return la;if(ce(this)&&!jc(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:void 0}))return null;J.name||(J.name="ObservableObject.key");J.context=this.proxy_||this.target_;var va=je(n),La={configurable:oe.safeDescriptors?
this.isPlainObject_:!0,enumerable:!1,get:va.get,set:va.set};if(X){if(!Reflect.defineProperty(this.target_,n,La))return!1}else zn(this.target_,n,La);this.values_.set(n,new Ea(J));this.notifyPropertyAddition_(n,void 0)}finally{Td()}return!0};g.delete_=function(n,J){void 0===J&&(J=!1);if(!F(this.target_,n))return!0;if(ce(this)&&!jc(this,{object:this.proxy_||this.target_,name:n,type:"remove"}))return null;try{var X,la;md();var va=Oe(this),La=this.values_.get(n),Wa=void 0;if(!La&&va){var bb;Wa=null==(bb=
Rn(this.target_,n))?void 0:bb.value}if(J){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];La&&(this.values_["delete"](n),La instanceof Tn&&(Wa=La.value_),dc(La));this.keysAtom_.reportChanged();null==(X=this.pendingKeys_)?void 0:null==(la=X.get(n))?void 0:la.set(n in this.target_);if(va){var pb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Wa,name:n};va&&cf(this,pb)}}finally{Td()}return!0};g.observe_=function(n,
J){return Yf(this,n)};g.intercept_=function(n){return qd(this,n)};g.notifyPropertyAddition_=function(n,J){var X,la,va=Oe(this);va&&(J=va?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:J}:null,va&&cf(this,J));null==(X=this.pendingKeys_)?void 0:null==(la=X.get(n))?void 0:la.set(!0);this.keysAtom_.reportChanged()};g.ownKeys_=function(){this.keysAtom_.reportObserved();return up(this.target_)};g.keys_=function(){this.keysAtom_.reportObserved();
return Object.keys(this.target_)};return b}(),aC=D("ObservableObjectAdministration",Tx),bC=Ye(0),gv=0,Ux=function(){};(function(b,g){Object.setPrototypeOf?Object.setPrototypeOf(b.prototype,g):void 0!==b.prototype.__proto__?b.prototype.__proto__=g:b.prototype=g})(Ux,Array.prototype);var hv=function(b,g,n){function J(la,va,La,Wa){void 0===La&&(La="ObservableArray");void 0===Wa&&(Wa=!1);var bb=b.call(this)||this;va=new ev(La,va,Wa,!0);va.proxy_=qa(bb);Q(qa(bb),ah,va);la&&la.length&&(va=vc(!0),bb.spliceWithArray(0,
0,la),oe.allowStateChanges=va);Object.defineProperty(qa(bb),"0",bC);return bb}ea(J,b);var X=J.prototype;X.concat=function(){this[ah].atom_.reportObserved();for(var la=arguments.length,va=Array(la),La=0;La<la;La++)va[La]=arguments[La];return Array.prototype.concat.apply(this.slice(),va.map(function(Wa){return ib(Wa)?Wa.slice():Wa}))};X[n]=function(){var la=this,va=0;return ab({next:function(){return va<la.length?{value:la[va++],done:!1}:{done:!0,value:void 0}}})};K(J,[{key:"length",get:function(){return this[ah].getArrayLength_()},
set:function(la){this[ah].setArrayLength_(la)}},{key:g,get:function(){return"Array"}}]);return J}(Ux,Symbol.toStringTag,Symbol.iterator);Object.entries(st).forEach(function(b){var g=b[0];b=b[1];"concat"!==g&&M(hv.prototype,g,b)});te(1E3);var Nx=gl.toString;["Symbol","Map","Set"].forEach(function(b){"undefined"===typeof R()[b]&&m("MobX requires global '"+b+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:rc,extras:{getDebugName:wb},
$mobx:ah});var xb=V(586),hm=class{constructor(b){ia(this,"props");ia(this,"aspectRatio");ia(this,"type");ia(this,"hideCloneHandles",!1);ia(this,"hideResizeHandles",!1);ia(this,"hideRotateHandle",!1);ia(this,"hideContextBar",!1);ia(this,"hideSelectionDetail",!1);ia(this,"hideSelection",!1);ia(this,"canChangeAspectRatio",!0);ia(this,"canUnmount",!0);ia(this,"canResize",[!0,!0]);ia(this,"canScale",!0);ia(this,"canFlip",!0);ia(this,"canEdit",!1);ia(this,"canBind",!1);ia(this,"nonce");ia(this,"bindingDistance",
4);ia(this,"isDirty",!1);ia(this,"lastSerialized");ia(this,"getCenter",()=>se.getBoundsCenter(this.bounds));ia(this,"getRotatedBounds",()=>{const {bounds:la,props:{rotation:va}}=this;return va?se.getBoundsFromPoints(se.getRotatedCorners(la,va)):la});ia(this,"hitTestPoint",la=>{var va=this.rotatedBounds;if(!this.props.rotation)return Ig.pointInBounds(la,va);va=se.getRotatedCorners(va,this.props.rotation);return Ig.pointInPolygon(la,va)});ia(this,"hitTestLineSegment",(la,va)=>{const La=se.getBoundsFromPoints([la,
va]),{rotatedBounds:Wa,props:{rotation:bb=0}}=this;return se.boundsContain(Wa,La)||bb?k(la,va,se.getRotatedCorners(this.bounds)).didIntersect:0<t(Wa,la,va).length});ia(this,"hitTestBounds",la=>{const {rotatedBounds:va,props:{rotation:La=0}}=this,Wa=se.getRotatedCorners(this.bounds,La);return se.boundsContain(la,va)||0<z([la.minX,la.minY],[la.width,la.height],Wa).length});ia(this,"getExpandedBounds",()=>se.expandBounds(this.getBounds(),this.bindingDistance));ia(this,"getBindingPoint",(la,va,La,Wa)=>
{var bb=this.getBounds(),pb=this.getExpandedBounds();if(Ig.pointInBounds(la,pb)){var Db=C(va,La,pb).filter(Qb=>Qb.didIntersect).map(Qb=>Qb.points[0]);if(Db.length)return La=this.getCenter(),Db=Db.sort((Qb,oc)=>sd.dist(oc,va)-sd.dist(Qb,va))[0],Db=sd.med(la,Db),Wa?(Wa=2>sd.dist(la,La)?La:la,bb=0):(Wa=2>sd.distanceToLineSegment(la,Db,La)?La:Db,bb=Ig.pointInBounds(la,bb)?this.bindingDistance:Math.max(this.bindingDistance,se.getBoundsSides(bb).map(Qb=>sd.distanceToLineSegment(Qb[1][0],Qb[1][1],la)).sort((Qb,
oc)=>Qb-oc)[0])),pb=sd.divV(sd.sub(Wa,[pb.minX,pb.minY]),[pb.width,pb.height]),{point:sd.clampV(pb,0,1),distance:bb}}});ia(this,"getSerialized",()=>Cc(of(xe({},this.props),{type:this.type,nonce:this.nonce})));ia(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Id(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});ia(this,"validateProps",la=>la);ia(this,
"update",(la,va=!1,La=!1)=>{va||this.isDirty||this.setIsDirty(!0);va||La||this.incNonce();Object.assign(this.props,this.validateProps(la));return this});ia(this,"clone",()=>new this.constructor(this.serialized));ia(this,"onResetBounds",la=>this);ia(this,"scale",[1,1]);ia(this,"onResizeStart",la=>{var va;this.scale=[...(null!=(va=this.props.scale)?va:[1,1])];return this});ia(this,"onResize",(la,va)=>{const {bounds:La,rotation:Wa,scale:[bb,pb]}=va;la=[...this.scale];0>bb&&(la[0]*=-1);0>pb&&(la[1]*=
-1);this.update({point:[La.minX,La.minY],scale:la,rotation:Wa});return this});ia(this,"onHandleChange",(la,{id:va,delta:La})=>{if(void 0!==la.handles){var Wa=Hq(la.handles);Wa[va]=of(xe({},Wa[va]),{point:sd.add(La,la.handles[va].point)});var bb=se.getCommonTopLeft(Object.values(Wa).map(pb=>pb.point));Object.values(Wa).forEach(pb=>{pb.point=sd.sub(pb.point,bb)});this.update({point:sd.add(la.point,bb),handles:Wa})}});var g,n;const J=this.constructor.id,X=null!=(g=this.constructor.defaultProps)?g:{};
this.type=J;this.props=xe(xe({scale:[1,1]},X),b);this.nonce=null!=(n=b.nonce)?n:Date.now();og(this)}get id(){return this.props.id}setNonce(b){this.nonce=b}incNonce(){this.nonce++}setIsDirty(b){this.isDirty=b}setLastSerialized(b){this.lastSerialized=b}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(b){b=this.getBounds();const {stroke:g,strokeWidth:n,strokeType:J,
opacity:X,fill:la,noFill:va,borderRadius:La}=this.props;return(0,xb.jsx)("rect",{fill:va?"none":Cf(la,"background"),stroke:Cf(g,"stroke"),strokeWidth:null!=n?n:2,strokeDasharray:"dashed"===J?"8 2":void 0,fillOpacity:null!=X?X:.2,width:b.width,height:b.height,rx:La,ry:La})}};ia(hm,"type");Qa([sg],hm.prototype,"props",2);Qa([sg],hm.prototype,"canResize",2);Qa([sg],hm.prototype,"nonce",2);Qa([sg],hm.prototype,"isDirty",2);Qa([sg],hm.prototype,"lastSerialized",2);Qa([mh],hm.prototype,"id",1);Qa([he],
hm.prototype,"setNonce",1);Qa([he],hm.prototype,"incNonce",1);Qa([he],hm.prototype,"setIsDirty",1);Qa([he],hm.prototype,"setLastSerialized",1);Qa([mh],hm.prototype,"center",1);Qa([mh],hm.prototype,"bounds",1);Qa([mh],hm.prototype,"rotatedBounds",1);Qa([mh],hm.prototype,"serialized",1);Qa([he],hm.prototype,"update",2);var Bn=class extends hm{constructor(b={}){super(b);ia(this,"canBind",!0);ia(this,"getBounds",()=>{const [g,n]=this.props.point,[J,X]=this.props.size;return{minX:g,minY:n,maxX:g+J,maxY:n+
X,width:J,height:X}});ia(this,"getRotatedBounds",()=>se.getBoundsFromPoints(se.getRotatedCorners(this.bounds,this.props.rotation)));ia(this,"onResize",(g,n)=>{const {bounds:J,rotation:X,scale:[la,va]}=n;g=[...this.scale];0>la&&(g[0]*=-1);0>va&&(g[1]*=-1);this.update({point:[J.minX,J.minY],scale:g,rotation:X});return this.update({rotation:X,point:[J.minX,J.minY],size:[Math.max(1,J.width),Math.max(1,J.height)],scale:g})});ia(this,"validateProps",g=>{void 0!==g.size&&(g.size[0]=Math.max(g.size[0],1),
g.size[1]=Math.max(g.size[1],1));return g});og(this)}};ia(Bn,"id","box");ia(Bn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var gr=class extends hm{constructor(b={}){super(b);ia(this,"getBounds",()=>{const {pointBounds:g,props:{point:n}}=this;return se.translateBounds(g,n)});ia(this,"getRotatedBounds",()=>{const {props:{rotation:g,point:n},bounds:J,rotatedPoints:X}=this;return g?se.translateBounds(se.getBoundsFromPoints(X),n):J});ia(this,"normalizedPoints",[]);
ia(this,"isResizeFlippedX",!1);ia(this,"isResizeFlippedY",!1);ia(this,"onResizeStart",()=>{var g;const {bounds:n,props:{points:J}}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const X=[n.width,n.height];this.normalizedPoints=J.map(la=>Lc.divV(la,X));return this});ia(this,"onResize",(g,n)=>{const {bounds:J,scale:[X,la]}=n,va=[J.width,J.height];g=[...this.scale];0>X&&(g[0]*=-1);0>la&&(g[1]*=-1);return this.update(X||la?{point:[J.minX,J.minY],points:this.normalizedPoints.map(La=>Lc.mulV(La,
va).concat(La[2])),scale:g}:{point:[J.minX,J.minY],points:this.normalizedPoints.map(La=>Lc.mulV(La,va).concat(La[2]))})});ia(this,"hitTestPoint",g=>{const {props:{points:n,point:J}}=this;return Ig.pointNearToPolyline(Lc.sub(g,J),n)});ia(this,"hitTestLineSegment",(g,n)=>{const {bounds:J,props:{points:X,point:la}}=this;if(Ig.pointInBounds(g,J)||Ig.pointInBounds(n,J)||0<t(J,g,n).length){const va=Lc.sub(g,la),La=Lc.sub(n,la);return k(va,La,X).didIntersect||!!X.find(Wa=>5>Lc.dist(va,Wa)||5>Lc.dist(La,
Wa))}return!1});ia(this,"hitTestBounds",g=>{const {rotatedBounds:n,props:{points:J,point:X}}=this,la=se.translateBounds(g,Lc.neg(X));return se.boundsContain(g,n)||J.every(va=>Ig.pointInBounds(va,la))||se.boundsCollide(g,n)&&0<I([la.minX,la.minY],[la.width,la.height],J).length});og(this)}get pointBounds(){const {props:{points:b}}=this;return se.getBoundsFromPoints(b)}get rotatedPoints(){const {props:{point:b,points:g,rotation:n},center:J}=this;if(!n)return g;const X=Lc.sub(J,b);return g.map(la=>Lc.rotWith(la,
X,n))}};ia(gr,"id","draw");ia(gr,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});Qa([mh],gr.prototype,"pointBounds",1);Qa([mh],gr.prototype,"rotatedPoints",1);var cv=class extends Bn{constructor(b={}){super(b);ia(this,"getBounds",()=>{const {props:{point:[g,n],size:[J,X]}}=this;return se.getRotatedEllipseBounds(g,n,J/2,X/2,0)});ia(this,"getRotatedBounds",()=>{const {props:{point:[g,n],size:[J,X],rotation:la}}=this;return se.getRotatedEllipseBounds(g,n,J/
2,X/2,la)});ia(this,"hitTestPoint",g=>{const {props:{size:n,rotation:J},center:X}=this;return Ig.pointInEllipse(g,X,n[0],n[1],J||0)});ia(this,"hitTestLineSegment",(g,n)=>{const {props:{size:[J,X],rotation:la=0},center:va}=this;return v(g,n,va,J,X,la).didIntersect});ia(this,"hitTestBounds",g=>{const {props:{size:[n,J],rotation:X=0},rotatedBounds:la}=this;var va;if(!(va=se.boundsContain(g,la))){const {minX:La,minY:Wa,width:bb,height:pb}=g;va=0<u(this.center,n/2,J/2,X,[La,Wa],[bb,pb]).length}return va});
og(this)}};ia(cv,"id","ellipse");ia(cv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var dv=class extends Bn{constructor(b={}){super(b);ia(this,"onResetBounds",g=>{const {clipping:n,size:J,point:X}=this.props;if(n){const [la,va,La,Wa]=Array.isArray(n)?n:[n,n,n,n];return this.update({clipping:0,point:[X[0]-Wa,X[1]-la],size:[J[0]+(Wa-va),J[1]+(la-La)]})}if(g.asset){const {size:[la,va]}=g.asset;this.update({clipping:0,point:[X[0]+J[0]/2-la/2,X[1]+J[1]/2-va/
2],size:[la,va]})}return this});ia(this,"onResize",(g,n)=>{const {bounds:J,clip:X,scale:la}=n;({clipping:n}=this.props);const {clipping:va}=g;if(X){const {point:[La,Wa],size:[bb,pb]}=g,[Db,Qb,oc,ac]=va?Array.isArray(va)?va:[va,va,va,va]:[0,0,0,0];n=[Db+(J.minY-Wa),Qb+(J.maxX-(La+bb)),oc+(J.maxY-(Wa+pb)),ac+(J.minX-La)]}else void 0!==va&&(n=Array.isArray(va)?va:[va,va,va,va],n=[n[0]*la[1],n[1]*la[0],n[2]*la[1],n[3]*la[0]]);if(n&&Array.isArray(n)){const La=n;La.every((Wa,bb)=>0===bb||Wa===La[bb-1])&&
(n=La[0])}return this.update({point:[J.minX,J.minY],size:[Math.max(1,J.width),Math.max(1,J.height)],clipping:n})});og(this)}};ia(dv,"id","ellipse");ia(dv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Px=class extends hm{constructor(b={}){super(b);ia(this,"getBounds",()=>{const {points:g,props:{point:n}}=this;return se.translateBounds(se.getBoundsFromPoints(g),n)});ia(this,"getRotatedBounds",()=>{const {rotatedPoints:g,
props:{point:n}}=this;return se.translateBounds(se.getBoundsFromPoints(g),n)});ia(this,"normalizedHandles",[]);ia(this,"onResizeStart",()=>{var g;const {props:{handles:n},bounds:J}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const X=[J.width,J.height];this.normalizedHandles=Object.values(n).map(la=>Lc.divV(la.point,X));return this});ia(this,"onResize",(g,n)=>{const {bounds:J,scale:[X,la]}=n,{props:{handles:va},normalizedHandles:La}=this,Wa=[J.width,J.height];g=[...this.scale];0>X&&(g[0]*=
-1);0>la&&(g[1]*=-1);return this.update({point:[J.minX,J.minY],handles:Object.values(va).map((bb,pb)=>of(xe({},bb),{point:Lc.mulV(La[pb],Wa)})),scale:g})});ia(this,"hitTestPoint",g=>{const {points:n}=this;return Ig.pointNearToPolyline(Lc.sub(g,this.props.point),n)});ia(this,"hitTestLineSegment",(g,n)=>{const {bounds:J,points:X,props:{point:la}}=this;if(Ig.pointInBounds(g,J)||Ig.pointInBounds(n,J)||0<t(J,g,n).length){const va=Lc.sub(g,la),La=Lc.sub(n,la);return k(va,La,X).didIntersect||!!X.find(Wa=>
5>Lc.dist(va,Wa)||5>Lc.dist(La,Wa))}return!1});ia(this,"hitTestBounds",g=>{const {rotatedBounds:n,points:J,props:{point:X}}=this,la=se.translateBounds(g,Lc.neg(X));return se.boundsContain(g,n)||J.every(va=>Ig.pointInBounds(va,la))||se.boundsCollide(g,n)&&0<I([la.minX,la.minY],[la.width,la.height],J).length});ia(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=Px.defaultProps.handles);return g});og(this)}get points(){return Object.values(this.props.handles).map(b=>
b.point)}get centroid(){const {points:b}=this;return rg.getPolygonCentroid(b)}get rotatedPoints(){const {centroid:b,props:{handles:g,rotation:n}}=this;return n?Object.values(g).map(J=>Lc.rotWith(J.point,b,n)):this.points}},fr=Px;ia(fr,"id","polyline");ia(fr,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});Qa([mh],fr.prototype,"points",1);Qa([mh],fr.prototype,"centroid",1);Qa([mh],fr.prototype,"rotatedPoints",1);var Mx=class extends fr{constructor(b={}){super(b);
ia(this,"hideResizeHandles",!0);ia(this,"hideRotateHandle",!0);ia(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=Mx.defaultProps.handles);return g});ia(this,"getHandlesChange",(g,n)=>{var J=yi(g.handles,n);J=yi(J,{start:{point:sd.toFixed(J.start.point)},end:{point:sd.toFixed(J.end.point)}});if(!sd.isEqual(J.start.point,J.end.point)){n={point:g.point,handles:Hq(J)};g=g.point;J=se.translateBounds(se.getBoundsFromPoints(Object.values(J).map(la=>
la.point)),n.point);var X=sd.sub([J.minX,J.minY],g);sd.isEqual(X,[0,0])||(Object.values(n.handles).forEach(la=>{la.point=sd.toFixed(sd.sub(la.point,X))}),n.point=sd.toFixed(sd.add(n.point,X)));return n}});og(this)}},is=Mx;ia(is,"id","line");ia(is,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var zp=class extends Bn{constructor(b={}){super(b);ia(this,"getRotatedBounds",()=>{const {rotatedVertices:g,
props:{point:n},offset:J}=this;return se.translateBounds(se.getBoundsFromPoints(g),Lc.add(n,J))});ia(this,"hitTestPoint",g=>{const {vertices:n}=this;return Ig.pointInPolygon(Lc.add(g,this.props.point),n)});ia(this,"hitTestLineSegment",(g,n)=>{const {vertices:J,props:{point:X}}=this;return k(Lc.sub(g,X),Lc.sub(n,X),J).didIntersect});ia(this,"hitTestBounds",g=>{const {rotatedBounds:n,offset:J,rotatedVertices:X,props:{point:la}}=this,va=se.translateBounds(g,Lc.neg(Lc.add(la,J)));return se.boundsContain(g,
n)||X.every(La=>Ig.pointInBounds(La,va))||0<z([va.minX,va.minY],[va.width,va.height],X).length});ia(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.sides&&3>g.sides&&(g.sides=3);return g});og(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:b},vertices:g}=this;return g.map(n=>Lc.add(n,b))}get centroid(){const {vertices:b}=this;return rg.getPolygonCentroid(b)}get rotatedVertices(){const {vertices:b,centroid:g,props:{rotation:n}}=this;return n?b.map(J=>
Lc.rotWith(J,g,n)):b}get offset(){const {props:{size:[b,g]}}=this,n=se.getBoundsCenter(se.getBoundsFromPoints(this.vertices));return Lc.sub(Lc.div([b,g],2),n)}getVertices(b=0){const {ratio:g,sides:n,size:J}=this.props;return 3===n?rg.getTriangleVertices(J,b,g):rg.getPolygonVertices(J,n,b,g)}};ia(zp,"id","polygon");ia(zp,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});Qa([mh],zp.prototype,"vertices",1);Qa([mh],zp.prototype,"pageVertices",
1);Qa([mh],zp.prototype,"centroid",1);Qa([mh],zp.prototype,"rotatedVertices",1);Qa([mh],zp.prototype,"offset",1);var bv=class extends Bn{constructor(b={}){super(b);ia(this,"canEdit",!0);ia(this,"canFlip",!1);og(this)}};ia(bv,"id","text");ia(bv,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var kr=class{constructor(){ia(this,"_id");ia(this,"_initial");ia(this,"_states");ia(this,"_isActive",!1);ia(this,"cursor");ia(this,"_disposables",[]);ia(this,
"children",new Map([]));ia(this,"registerStates",n=>{n.forEach(J=>this.children.set(J.id,new J(this,this)));return this});ia(this,"deregisterStates",n=>{n.forEach(J=>{var X;null==(X=this.children.get(J.id))?void 0:X.dispose();this.children.delete(J.id)});return this});ia(this,"currentState",{});ia(this,"transition",(n,J={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${n}.`);const X=this.children.get(n),la=this.currentState;if(!X)throw Error(`Could not find a state named ${n}.`);
Id(()=>{this.currentState?(la._events.onExit(of(xe({},J),{toId:n})),la.dispose(),X.registerKeyboardShortcuts(),this.setCurrentState(X),this._events.onTransition(of(xe({},J),{fromId:la.id,toId:n})),X._events.onEnter(of(xe({},J),{fromId:la.id}))):(this.currentState=X,X._events.onEnter(of(xe({},J),{fromId:""})))});return this});ia(this,"isIn",n=>{n=n.split(".").reverse();let J=this;for(;0<n.length;){const X=n.pop();if(!X)return!0;if(J.currentState.id===X){if(0===n.length)return!0;J=J.currentState}else break}return!1});
ia(this,"isInAny",(...n)=>n.some(this.isIn));ia(this,"forwardEvent",(n,...J)=>{var X,la;(null==(la=null==(X=this.currentState)?void 0:X._events)?0:la[n])&&Id(()=>{var va;return null==(va=this.currentState._events)?void 0:va[n](...J)})});ia(this,"_events",{onTransition:n=>{var J;null==(J=this.onTransition)?void 0:J.call(this,n)},onEnter:n=>{var J;this._isActive=!0;this.initial&&this.transition(this.initial,n);null==(J=this.onEnter)?void 0:J.call(this,n)},onExit:n=>{var J,X,la;this._isActive=!1;null==
(X=null==(J=this.currentState)?void 0:J.onExit)?void 0:X.call(J,{toId:"parent"});null==(la=this.onExit)?void 0:la.call(this,n)},onPointerDown:(n,J)=>{var X;null==(X=this.onPointerDown)?void 0:X.call(this,n,J);this.forwardEvent("onPointerDown",n,J)},onPointerUp:(n,J)=>{var X;null==(X=this.onPointerUp)?void 0:X.call(this,n,J);this.forwardEvent("onPointerUp",n,J)},onPointerMove:(n,J)=>{var X;null==(X=this.onPointerMove)?void 0:X.call(this,n,J);this.forwardEvent("onPointerMove",n,J)},onPointerEnter:(n,
J)=>{var X;null==(X=this.onPointerEnter)?void 0:X.call(this,n,J);this.forwardEvent("onPointerEnter",n,J)},onPointerLeave:(n,J)=>{var X;null==(X=this.onPointerLeave)?void 0:X.call(this,n,J);this.forwardEvent("onPointerLeave",n,J)},onDoubleClick:(n,J)=>{var X;null==(X=this.onDoubleClick)?void 0:X.call(this,n,J);this.forwardEvent("onDoubleClick",n,J)},onKeyDown:(n,J)=>{var X;this._events.onModifierKey(n,J);null==(X=this.onKeyDown)?void 0:X.call(this,n,J);this.forwardEvent("onKeyDown",n,J)},onKeyUp:(n,
J)=>{var X;this._events.onModifierKey(n,J);null==(X=this.onKeyUp)?void 0:X.call(this,n,J);this.forwardEvent("onKeyUp",n,J)},onPinchStart:(n,J)=>{var X;null==(X=this.onPinchStart)?void 0:X.call(this,n,J);this.forwardEvent("onPinchStart",n,J)},onPinch:(n,J)=>{var X;null==(X=this.onPinch)?void 0:X.call(this,n,J);this.forwardEvent("onPinch",n,J)},onPinchEnd:(n,J)=>{var X;null==(X=this.onPinchEnd)?void 0:X.call(this,n,J);this.forwardEvent("onPinchEnd",n,J)},onModifierKey:(n,J)=>{switch(J.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(n,
J)}}});ia(this,"onEnter");ia(this,"onExit");ia(this,"onTransition");ia(this,"onPointerDown");ia(this,"onPointerUp");ia(this,"onPointerMove");ia(this,"onPointerEnter");ia(this,"onPointerLeave");ia(this,"onDoubleClick");ia(this,"onKeyDown");ia(this,"onKeyUp");ia(this,"onPinchStart");ia(this,"onPinch");ia(this,"onPinchEnd");const b=this.constructor.initial,g=this.constructor.states;this._id=this.constructor.id;this._initial=b;this._states=g}dispose(){this._disposables.forEach(b=>b());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(b=>[b,...b.descendants])}setCurrentState(b){this.currentState=b}};ia(kr,"id");ia(kr,"shortcuts");Qa([sg],kr.prototype,"currentState",2);Qa([he],kr.prototype,"setCurrentState",1);var fv=class extends kr{constructor(b,g){var n,J;super();ia(this,"registerKeyboardShortcuts",
()=>{var X;null!=(X=this._shortcuts)&&X.length&&this._disposables.push(...this._shortcuts.map(({keys:la,fn:va})=>Lh.registerShortcut(la,La=>{this.isActive&&va(this.root,this,La)})))});ia(this,"_root");ia(this,"_parent");ia(this,"_shortcuts",[]);ia(this,"children",new Map([]));ia(this,"registerStates",X=>{X.forEach(la=>this.children.set(la.id,new la(this,this._root)));return this});ia(this,"deregisterStates",X=>{X.forEach(la=>{var va;null==(va=this.children.get(la.id))?void 0:va.dispose();this.children.delete(la.id)});
return this});this._parent=b;this._root=g;this.states&&0<this.states.length&&(this.registerStates(this.states),b=null!=(n=this.initial)?n:this.states[0].id,n=this.children.get(b))&&(this.setCurrentState(n),null==(J=this.currentState)?void 0:J._events.onEnter({fromId:"initial"}));this._shortcuts=this.constructor.shortcuts;og(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,
this]:[this]}};ia(fv,"cursor");var yp=class extends fv{constructor(){super(...arguments);ia(this,"isLocked",!1);ia(this,"previous");ia(this,"onEnter",({fromId:b})=>{this.previous=b;this.cursor&&this.app.cursors.setCursor(this.cursor)});ia(this,"onTransition",b=>{({toId:b}=b);b=this.children.get(b);this.app.cursors.reset();b.cursor?this.app.cursors.setCursor(b.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},vi=class extends fv{get app(){return this.root}get tool(){return this.parent}},
Lx=class extends vi{constructor(){super(...arguments);ia(this,"cursor","crosshair");ia(this,"creatingShape");ia(this,"aspectRatio");ia(this,"initialBounds",{});ia(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g,currentPoint:n}}=this.app;var {Shape:J}=this.tool;J=new J({id:Kd(),type:J.id,parentId:b.id,point:[...g],fill:this.app.settings.color,stroke:this.app.settings.color,size:sd.abs(sd.sub(n,g))});this.initialBounds={minX:g[0],minY:g[1],maxX:g[0]+1,maxY:g[1]+1,width:1,height:1};J.canChangeAspectRatio||
(J.aspectRatio?(this.aspectRatio=J.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=J;this.app.currentPage.addShapes(J);this.app.setSelectedShapes([J])});ia(this,"onPointerMove",b=>{if(!b.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:b}=this);var {currentPoint:g,originPoint:n,shiftKey:J}=
this.app.inputs;b=se.getTransformedBoundingBox(b,"bottom_right_corner",sd.sub(g,n),0,J||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[b.minX,b.minY],size:[b.width,b.height]})}});ia(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape&&this.app.setSelectedShapes([this.creatingShape]);this.app.persist()});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");
this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};ia(Lx,"id","creating");var Ox=class extends vi{constructor(){super(...arguments);ia(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});ia(this,"onPinchStart",(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};ia(Ox,
"id","idle");var Kx=class extends vi{constructor(){super(...arguments);ia(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Lc.dist(b,g)&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});ia(this,"onPointerUp",()=>{this.tool.transition("idle")})}};ia(Kx,"id","pointing");var bp=class extends yp{constructor(){super(...arguments);ia(this,"cursor","crosshair")}};ia(bp,"id","box");ia(bp,"states",[Ox,Kx,Lx]);ia(bp,"initial","idle");
var Jx=class extends vi{constructor(){super(...arguments);ia(this,"shape",{});ia(this,"points",[[0,0,.5]]);ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ia(this,"onEnter",()=>{var b;const {Shape:g,previousShape:n}=this.tool;var {originPoint:J}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&n){this.shape=n;var {shape:X}=this;var la=X.props.points[X.props.points.length-1];const La=Lc.sub(J,X.props.point).concat(null!=(b=J[2])?b:.5);this.points=
[...X.props.points,la,la];const Wa=Math.ceil(Lc.dist(la,J)/16);for(let bb=0,pb=bb/(Wa-1);bb<Wa;bb++){b=this.points;J=b.push;X=Lc.lrp(la,La,pb);var va=la[2];J.call(b,X.concat.call(X,va+(La[2]-va)*pb))}this.addNextPoint(La)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(la=J[2])?la:.5]],this.shape=new g({id:Kd(),type:g.id,parentId:this.app.currentPage.id,point:J.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.app.currentPage.addShapes(this.shape)});
ia(this,"onPointerMove",()=>{const {shape:b}=this,{currentPoint:g,previousPoint:n}=this.app.inputs;Lc.isEqual(n,g)||this.addNextPoint(Lc.sub(g,b.props.point).concat(g[2]))});ia(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?Ig.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");this.app.persist()});
ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(b){const {shape:g}=this,n=Lc.min(b,[0,0]);this.points.push(b);0>n[0]||0>n[1]?(this.points=this.points.map(J=>Lc.sub(J,n).concat(J[2])),g.update({point:Lc.add(g.props.point,n),points:this.points})):g.update({points:this.points})}};ia(Jx,"id","creating");var Hx=class extends vi{constructor(){super(...arguments);
ia(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("creating")});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};ia(Hx,"id","idle");var Ix=class extends vi{constructor(){super(...arguments);ia(this,"origin",[0,0]);ia(this,"prevDelta",[0,0]);ia(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});ia(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,
b.delta,b.delta[2])});ia(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};ia(Ix,"id","pinching");var hs=class extends yp{constructor(){super(...arguments);ia(this,"cursor","crosshair");ia(this,"simplify",!0);ia(this,"simplifyTolerance",1);ia(this,"previousShape");ia(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};ia(hs,"id","draw");ia(hs,"states",[Hx,Jx,Ix]);ia(hs,"initial","idle");var ox=class extends vi{constructor(){super(...arguments);ia(this,"points",[[0,0,
.5]]);ia(this,"hitShapes",new Set);ia(this,"onEnter",()=>{const {originPoint:b}=this.app.inputs;this.points=[b];this.hitShapes.clear()});ia(this,"onPointerMove",()=>{const {currentPoint:b,previousPoint:g}=this.app.inputs;Lc.isEqual(g,b)||(this.points.push(b),this.app.shapesInViewport.filter(n=>n.hitTestLineSegment(g,b)).forEach(n=>this.hitShapes.add(n)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});ia(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));
this.tool.transition("idle")});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};ia(ox,"id","erasing");var px=class extends vi{constructor(){super(...arguments);ia(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});ia(this,"onPinchStart",(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});ia(this,"onKeyDown",
(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};ia(px,"id","idle");var qx=class extends vi{constructor(){super(...arguments);ia(this,"onEnter",()=>{const {currentPoint:b}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(g=>g.hitTestPoint(b)))});ia(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Lc.dist(b,g)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});ia(this,"onPointerUp",()=>{const b=[...this.app.erasingShapes];
this.app.setErasingShapes([]);this.app.deleteShapes(b);this.tool.transition("idle")})}};ia(qx,"id","pointing");var pt=class extends yp{constructor(){super(...arguments);ia(this,"cursor","crosshair")}};ia(pt,"id","erase");ia(pt,"states",[px,qx,ox]);ia(pt,"initial","idle");var $u=class extends vi{constructor(){super(...arguments);ia(this,"handle",{});ia(this,"handleId","end");ia(this,"currentShape",{});ia(this,"initialShape",{});ia(this,"bindableShapeIds",[]);ia(this,"startBindingShapeId");ia(this,
"newStartBindingId","");ia(this,"draggedBindingId","");ia(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,previousPoint:g,originPoint:n,currentPoint:J,modKey:X,altKey:la}}=this.app;var va=this.app.getShapeById(this.initialShape.id),{handles:La}=this.initialShape,Wa=this.handleId,bb="start"===this.handleId?"end":"start";if(!sd.isEqual(g,J)){var pb=sd.sub(J,n);if(b){var Db=La[bb].point,Qb=sd.add(La[Wa].point,pb),oc=sd.angle(Db,Qb);Db=sd.rotWith(Qb,Db,Uk.snapAngleToSegments(oc,24)-oc);pb=sd.add(pb,
sd.sub(Db,Qb))}pb=sd.add(La[Wa].point,pb);La={[Wa]:of(xe({},La[Wa]),{point:sd.toFixed(pb),bindingId:void 0})};var ac=this.currentShape.getHandlesChange(this.initialShape,La);if(ac){La=yi(va.props,ac);var xc={},pc;Wa=La.handles[Wa];bb=La.handles[bb];if(this.startBindingShapeId){var Tb;if(pb=this.app.getShapeById(this.startBindingShapeId)){Qb=pb.getCenter();Db=La.handles.end;var tc=sd.add(La.handles.start.point,La.point);sd.isEqual(tc,Qb)&&tc[1]++;oc=pb.hitTestPoint(J);tc=sd.uni(sd.sub(tc,Qb));const Qc=
void 0!==this.app.currentPage.bindings[this.newStartBindingId];X||pb.hitTestPoint(sd.add(La.point,Db.point))||(Tb=Pc(va.props,pb,"start",this.newStartBindingId,Qb,Qb,tc,oc));Tb&&!Qc?(xc[this.newStartBindingId]=Tb,La.handles.start.bindingId=Tb.id):!Tb&&Qc&&(console.log("removing start binding"),delete xc[this.newStartBindingId],La.handles.start.bindingId=void 0)}}if(!X){Tb=sd.add(bb.point,La.point);bb=sd.add(Wa.point,La.point);Wa=sd.uni(sd.sub(bb,Tb));const Qc=sd.add(La.point,La.handles.start.point),
Wc=sd.add(La.point,La.handles.end.point);pb=this.bindableShapeIds.map(rd=>this.app.getShapeById(rd)).sort((rd,$d)=>$d.nonce-rd.nonce).filter(rd=>![Qc,Wc].every($d=>rd.hitTestPoint($d)));for(const rd of pb)if(pc=Pc(va.props,rd,this.handleId,this.draggedBindingId,bb,Tb,Wa,la))break}pc?(xc[this.draggedBindingId]=pc,La=yi(La,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(va=va.props.handles[this.handleId].bindingId,void 0!==va&&(delete xc[va],La=yi(La,{handles:{[this.handleId]:{bindingId:void 0}}})));
ac=this.currentShape.getHandlesChange(La,La.handles);Id(()=>{var Qc;if(ac){this.currentShape.update(ac);this.app.currentPage.updateBindings(xc);const Wc=Object.values(null!=(Qc=ac.handles)?Qc:{}).map(rd=>rd.bindingId).map(rd=>this.app.currentPage.bindings[rd]).filter(Boolean).flatMap(rd=>[rd.toId,rd.fromId].filter(Boolean));this.app.setBindingShapes(Wc)}})}}});ia(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.persist()});
ia(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};ia($u,"id","creating");var rx=class extends $u{constructor(){super(...arguments);ia(this,"onEnter",()=>{var b;this.app.history.pause();this.newStartBindingId=Kd();this.draggedBindingId=Kd();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:g}=this.tool;
const {originPoint:n}=this.app.inputs;g=new g(of(xe({},g.defaultProps),{id:Kd(),type:g.id,parentId:this.app.currentPage.id,point:n,fill:this.app.settings.color,stroke:this.app.settings.color}));this.initialShape=Cc(g.props);this.currentShape=g;this.app.currentPage.addShapes(g);this.app.setSelectedShapes([g]);if(this.startBindingShapeId=null==(b=this.bindableShapeIds.map(J=>this.app.getShapeById(J)).filter(J=>Ig.pointInBounds(n,J.bounds))[0])?void 0:b.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),
1),this.app.setBindingShapes([this.startBindingShapeId])})}};ia(rx,"id","creating");var sx=class extends vi{constructor(){super(...arguments);ia(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});ia(this,"onPinchStart",(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});ia(this,"onPointerEnter",
b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b)}});ia(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};ia(sx,"id","idle");var tx=class extends vi{constructor(){super(...arguments);ia(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Lc.dist(b,g)&&(this.tool.transition("creating"),
this.app.setSelectedShapes(this.app.currentPage.shapes))})}};ia(tx,"id","pointing");var qt=class extends yp{constructor(){super(...arguments);ia(this,"cursor","crosshair")}};ia(qt,"id","line");ia(qt,"states",[sx,tx,rx]);ia(qt,"initial","idle");var ux=class extends vi{constructor(){super(...arguments);ia(this,"cursor","crosshair");ia(this,"creatingShape");ia(this,"aspectRatio");ia(this,"initialBounds",{});ia(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g}}=this.app,{Shape:n}=this.tool,
J=new n({id:Kd(),type:n.id,parentId:b.id,point:[...g],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=J;Id(()=>{this.app.currentPage.addShapes(J);const {bounds:X}=J;J.update({point:sd.sub(g,[X.width/2,X.height/2])});this.app.transition("select");this.app.setSelectedShapes([J]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};ia(ux,"id","creating");var vx=class extends vi{constructor(){super(...arguments);
ia(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("creating")});ia(this,"onPinchStart",(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};ia(vx,"id","idle");var rt=class extends yp{constructor(){super(...arguments);ia(this,"cursor","crosshair")}};ia(rt,"id","box");ia(rt,"states",[vx,ux]);ia(rt,"initial",
"idle");var RB=Ja(qc()),QB=class extends RB.default{constructor(){super(...arguments);ia(this,"toBBox",b=>b.rotatedBounds)}},dx=class extends vi{constructor(){super(...arguments);ia(this,"initialSelectedIds",[]);ia(this,"initialSelectedShapes",[]);ia(this,"tree",new QB);ia(this,"onEnter",()=>{const {selectedShapes:b,currentPage:g,selectedIds:n}=this.app;this.initialSelectedIds=Array.from(n.values());this.initialSelectedShapes=Array.from(b.values());this.tree.load(g.shapes)});ia(this,"onExit",()=>
{this.initialSelectedIds=[];this.tree.clear()});ia(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,ctrlKey:g,originPoint:n,currentPoint:J}}=this.app,X=se.getBoundsFromPoints([J,n],0);this.app.setBrush(X);const la=this.tree.search(X).filter(va=>g?se.boundsContain(X,va.rotatedBounds):va.hitTestBounds(X));b?la.every(va=>this.initialSelectedShapes.includes(va))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(va=>!la.includes(va))):this.app.setSelectedShapes(Array.from((new Set([...this.initialSelectedShapes,
...la])).values())):this.app.setSelectedShapes(la)});ia(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});ia(this,"handleModifierKey",(b,g)=>{switch(g.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};ia(dx,"id","brushing");var ex=class extends vi{constructor(){super(...arguments);ia(this,"onEnter",b=>{const {selectedIds:g,selectedShapes:n,inputs:{shiftKey:J}}=this.app;"shape"!==b.type||
n.has(b.shape)||(J?this.app.setSelectedShapes([...Array.from(g.values()),b.shape.id]):this.app.setSelectedShapes([b.shape]))});ia(this,"onPointerDown",()=>{this.tool.transition("idle")})}};ia(ex,"id","contextMenu");var fx=class extends vi{constructor(){super(...arguments);ia(this,"onEnter",b=>{"pinching"===b.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});ia(this,"onExit",()=>{});ia(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);
break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b);break;case "canvas":this.app.setHoveredShape(void 0)}});ia(this,"onPointerDown",(b,g)=>{const {selectedShapes:n,inputs:{ctrlKey:J}}=this.app;if(2===g.button)this.tool.transition("contextMenu",b);else if(J)this.tool.transition("pointingCanvas");else switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");
break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",b)}break;case "shape":if(n.has(b.shape))this.tool.transition("pointingSelectedShape",b);else{const {selectionBounds:X,inputs:la}=this.app;X&&Ig.pointInBounds(la.currentPoint,X)?this.tool.transition("pointingShapeBehindBounds",b):this.tool.transition("pointingShape",b)}break;case "handle":this.tool.transition("pointingHandle",b);break;case "canvas":this.tool.transition("pointingCanvas");
break;case "minimap":this.tool.transition("pointingMinimap",xe(xe({},g),b))}});ia(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ia(this,"onDoubleClick",b=>{if(!b.order&&1===this.app.selectedShapesArray.length){var g=this.app.selectedShapesArray[0];if(g.canEdit&&Ig.pointInBounds(this.app.inputs.currentPoint,g.bounds))switch(b.type){case "shape":this.tool.transition("editingShape",
b);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:g})}}});ia(this,"onKeyDown",(b,g)=>{({selectedShapesArray:b}=this.app);switch(g.key){case "Enter":1===b.length&&b[0].canEdit&&this.tool.transition("editingShape",{type:"shape",shape:b[0],order:0});break;case "Escape":b.length&&this.app.setSelectedShapes([])}})}};ia(fx,"id","idle");var gx=class extends vi{constructor(){super(...arguments);ia(this,"onEnter",b=>{const {selectedIds:g,
inputs:{shiftKey:n}}=this.app;n?this.app.setSelectedShapes([...Array.from(g.values()),b.shape.id]):this.app.setSelectedShapes([b.shape])});ia(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Lc.dist(b,g)&&this.tool.transition("translating")});ia(this,"onPointerUp",()=>{this.tool.transition("idle")});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ia(gx,"id","pointingShape");var hx=class extends vi{constructor(){super(...arguments);
ia(this,"cursor","move");ia(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Lc.dist(b,g)&&this.tool.transition("translating")});ia(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ia(hx,"id","pointingBoundsBackground");var ix=class extends vi{constructor(){super(...arguments);ia(this,"onEnter",()=>{var b;const {shiftKey:g}=this.app.inputs;g||(this.app.setSelectedShapes([]),
this.app.setEditingShape(),null==(b=window.getSelection())?void 0:b.removeAllRanges())});ia(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Lc.dist(b,g)&&this.tool.transition("brushing")});ia(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ia(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};
ia(ix,"id","pointingCanvas");var jx=class extends vi{constructor(){super(...arguments);ia(this,"cursor","move");ia(this,"isCloning",!1);ia(this,"didClone",!1);ia(this,"initialPoints",{});ia(this,"initialShapePoints",{});ia(this,"initialClonePoints",{});ia(this,"clones",[]);ia(this,"onEnter",()=>{var b;this.app.history.pause();const {selectedShapesArray:g,inputs:n}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(g.map(({id:J,props:{point:X}})=>[J,X.slice()]));document.querySelectorAll("input,textarea").forEach(J=>
J.blur());null==(b=document.getSelection())?void 0:b.empty();n.altKey?this.startCloning():this.moveSelectedShapesToPointer()});ia(this,"onExit",()=>{this.app.history.resume();this.app.persist();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});ia(this,"onPointerMove",()=>{this.moveSelectedShapesToPointer()});ia(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ia(this,"onPointerUp",
()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Alt":this.startCloning();break;case "Escape":this.app.selectedShapes.forEach(n=>{n.update({point:this.initialPoints[n.id]})}),this.tool.transition("idle")}});ia(this,"onKeyUp",(b,g)=>{switch(g.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:n,selectedShapes:J}=this.app;n.removeShapes(...J);this.initialPoints=this.initialShapePoints;
this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {selectedShapes:b,inputs:{shiftKey:g,originPoint:n,currentPoint:J}}=this.app,{initialPoints:X}=this,la=Lc.sub(J,n);g&&(Math.abs(la[0])<Math.abs(la[1])?la[0]=0:la[1]=0);Id(()=>{b.forEach(va=>va.update({point:Lc.add(X[va.id],la)}))})}startCloning(){this.didClone||(this.clones=this.app.selectedShapesArray.map(b=>{const g=this.app.getShapeClass(b.type);
if(!g)throw Error("Could not find that shape class.");return new g(of(xe({},b.serialized),{id:Kd(),type:b.type,point:this.initialPoints[b.id],rotation:b.props.rotation}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:b,props:{point:g}})=>[b,g.slice()])),this.didClone=!0);this.app.selectedShapes.forEach(b=>{b.update({point:this.initialPoints[b.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));
this.moveSelectedShapesToPointer();this.isCloning=!0;this.moveSelectedShapesToPointer()}};ia(jx,"id","translating");var kx=class extends vi{constructor(){super(...arguments);ia(this,"pointedSelectedShape");ia(this,"onEnter",b=>{this.pointedSelectedShape=b.shape});ia(this,"onExit",()=>{this.pointedSelectedShape=void 0});ia(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Lc.dist(b,g)&&this.tool.transition("translating")});ia(this,"onPointerUp",()=>{const {shiftKey:b,
currentPoint:g}=this.app.inputs;var {selectedShapesArray:n}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(b)({selectedIds:n}=this.app),n=Array.from(n.values()),n.splice(n.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(n);else{if(1===n.length&&this.pointedSelectedShape.canEdit&&this.pointedSelectedShape instanceof Bn&&Ig.pointInBounds(g,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,
order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ia(kx,"id","pointingSelectedShape");var lx=class extends vi{constructor(){super(...arguments);ia(this,"info",{});ia(this,"onEnter",b=>{this.info=b;this.updateCursor()});ia(this,"onExit",()=>{this.app.cursors.reset()});ia(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;
5<Lc.dist(b,g)&&this.tool.transition("resizing",this.info)});ia(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(ko[this.info.handle],this.app.selectionBounds.rotation)}};ia(lx,"id","pointingResizeHandle");var mx=class extends vi{constructor(){super(...arguments);ia(this,"isSingle",!1);ia(this,"handle","bottom_right_corner");ia(this,"snapshots",
{});ia(this,"initialCommonBounds",{});ia(this,"selectionRotation",0);ia(this,"resizeType","corner");ia(this,"onEnter",b=>{var g,n;const {history:J,selectedShapesArray:X,selectionBounds:la}=this.app;if(!la)throw Error("Expected a selected bounds.");this.handle=b.handle;this.resizeType="left_edge"===b.handle||"right_edge"===b.handle?"horizontal-edge":"top_edge"===b.handle||"bottom_edge"===b.handle?"vertical-edge":"corner";this.app.cursors.setCursor(mx.CURSORS[b.handle],null==(g=this.app.selectionBounds)?
void 0:g.rotation);J.pause();const va=se.getBoundsFromPoints(X.map(La=>se.getBoundsCenter(La.bounds)));this.selectionRotation=(this.isSingle=1===X.length)?null!=(n=X[0].props.rotation)?n:0:0;this.initialCommonBounds=xe({},la);this.snapshots=Object.fromEntries(X.map(La=>{const Wa=xe({},La.bounds),[bb,pb]=se.getBoundsCenter(Wa);return[La.id,{props:La.serialized,bounds:Wa,transformOrigin:[(bb-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(pb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],
innerTransformOrigin:[(bb-va.minX)/va.width,(pb-va.minY)/va.height],isAspectRatioLocked:La.props.isAspectRatioLocked||!(La.canChangeAspectRatio&&!La.props.rotation)}]}));X.forEach(La=>{var Wa;null==(Wa=La.onResizeStart)?void 0:Wa.call(La,{isSingle:this.isSingle})})});ia(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});ia(this,"onPointerMove",()=>{const {inputs:{altKey:b,shiftKey:g,ctrlKey:n,originPoint:J,
currentPoint:X}}=this.app,{handle:la,snapshots:va,initialCommonBounds:La}=this;let Wa=Lc.sub(X,J);b&&(Wa=Lc.mul(Wa,2));const bb=this.app.selectedShapes.values().next().value;let pb=se.getTransformedBoundingBox(La,la,Wa,this.selectionRotation,g||this.isSingle&&(n?!("clipping"in bb.props):!bb.canChangeAspectRatio||bb.props.isAspectRatioLocked));b&&(pb=xe(xe({},pb),se.centerBounds(pb,se.getBoundsCenter(La))));const {scaleX:Db,scaleY:Qb}=pb;this.app.selectedShapes.forEach(oc=>{var ac,xc;const {props:pc,
bounds:Tb,transformOrigin:tc}=va[oc.id];let Qc=se.getRelativeTransformedBoundingBox(pb,La,Tb,0>Db,0>Qb);if(oc.canResize.some($d=>$d)||oc.props.isSizeLocked||!this.isSingle){var Wc=[Db,Qb],rd=null!=(ac=pc.rotation)?ac:0;ac=se.getBoundsCenter(Qc);oc.canFlip||(Wc=Lc.abs(Wc));oc.canScale||(Wc=null!=(xc=pc.scale)?xc:[1,1]);if(rd&&0>Db&&0<=Qb||0>Qb&&0<=Db)rd*=-1;oc.onResize(pc,{center:ac,rotation:rd,scale:Wc,bounds:Qc,type:la,clip:n,transformOrigin:tc})}});this.updateCursor(Db,Qb)});ia(this,"onPointerUp",
()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(xe({},this.snapshots[n.id].props))}),this.tool.transition("idle")}})}updateCursor(b,g){var n,J,X,la;const va=0>b&&0<=g;b=0>g&&0<=b;switch(this.handle){case "top_left_corner":case "bottom_right_corner":va||b?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(n=this.app.selectionBounds)?
void 0:n.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(J=this.app.selectionBounds)?void 0:J.rotation);break;case "top_right_corner":case "bottom_left_corner":va||b?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(X=this.app.selectionBounds)?void 0:X.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(la=this.app.selectionBounds)?void 0:la.rotation)}}},Zu=mx;ia(Zu,
"id","resizing");ia(Zu,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var nx=class extends vi{constructor(){super(...arguments);ia(this,"cursor","rotate");ia(this,"handle","");ia(this,"onEnter",b=>{this.app.history.pause();this.handle=b.handle;this.updateCursor()});ia(this,"onPointerMove",()=>{const {currentPoint:b,
originPoint:g}=this.app.inputs;5<Lc.dist(b,g)&&this.tool.transition("rotating",{handle:this.handle})});ia(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(ko[this.handle],this.app.selectionRotation)}};ia(nx,"id","pointingRotateHandle");var wx=class extends vi{constructor(){super(...arguments);ia(this,"info",{});ia(this,"onEnter",
b=>{this.info=b});ia(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Lc.dist(b,g)&&this.tool.transition("translating")});ia(this,"onPointerUp",()=>{const {selectedIds:b,inputs:{shiftKey:g}}=this.app;g?this.app.setSelectedShapes([...Array.from(b.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ia(wx,"id","pointingShapeBehindBounds");
var av=class extends vi{constructor(){super(...arguments);ia(this,"cursor","rotate");ia(this,"snapshot",{});ia(this,"initialCommonCenter",[0,0]);ia(this,"initialCommonBounds",{});ia(this,"initialAngle",0);ia(this,"initialSelectionRotation",0);ia(this,"handle","");ia(this,"onEnter",b=>{const {history:g,selectedShapesArray:n,selectionBounds:J}=this.app;if(!J)throw Error("Expected selected bounds.");g.pause();this.handle=b.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=
xe({},J);this.initialCommonCenter=se.getBoundsCenter(J);this.initialAngle=Lc.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(n.map(X=>[X.id,{point:[...X.props.point],center:[...X.center],rotation:X.props.rotation,handles:"handles"in X?Hq(X.handles):void 0}]));this.updateCursor()});ia(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});ia(this,"onPointerMove",()=>{const {selectedShapes:b,inputs:{shiftKey:g,currentPoint:n}}=this.app,{snapshot:J,
initialCommonCenter:X,initialAngle:la,initialSelectionRotation:va}=this;let La=Lc.angle(X,n)-la;g&&(La=Uk.snapAngleToSegments(La,24));b.forEach(bb=>{var pb=J[bb.id];let Db=0;if(g){var {rotation:Qb=0}=pb;Db=Uk.snapAngleToSegments(Qb,24)-Qb}const oc=Lc.sub(pb.center,pb.point);Qb=Lc.rotWith(pb.center,X,La);if("handles"in bb){pb=pb.handles;const ac=pb.map(pc=>Lc.rotWith(pc.point,oc,La)),xc=se.getCommonTopLeft(ac);bb.update({point:Lc.add(xc,Lc.sub(Qb,oc)),handles:pb.map((pc,Tb)=>of(xe({},pc),{point:Lc.sub(ac[Tb],
xc)}))})}else bb.update({point:Lc.sub(Qb,oc),rotation:Uk.clampRadians((pb.rotation||0)+La+Db)})});const Wa=Uk.clampRadians(va+La);this.app.setSelectionRotation(g?Uk.snapAngleToSegments(Wa,24):Wa);this.updateCursor()});ia(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(this.snapshot[n.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(ko[this.handle],
this.app.selectionRotation)}};ia(av,"id","rotating");var xx=class extends vi{constructor(){super(...arguments);ia(this,"onPinch",(b,g)=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});ia(this,"onPinchEnd",()=>{this.tool.transition("idle")});ia(this,"onPointerDown",()=>{this.tool.transition("idle")})}};ia(xx,"id","pinching");var yx=class extends $u{constructor(){super(...arguments);ia(this,"cursor","grabbing");ia(this,"onEnter",b=>{this.app.history.pause();this.newStartBindingId=Kd();this.draggedBindingId=
Kd();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=b.id;this.currentShape=b.shape;this.initialShape=Cc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};ia(yx,"id","translatingHandle");var zx=class extends vi{constructor(){super(...arguments);ia(this,"cursor","grabbing");ia(this,"info",{});ia(this,"onEnter",b=>{this.info=b});ia(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Lc.dist(b,g)&&this.tool.transition("translatingHandle",
this.info)});ia(this,"onPointerUp",()=>{this.tool.transition("idle")});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ia(zx,"id","pointingHandle");var Ax=class extends vi{constructor(){super(...arguments);ia(this,"handle");ia(this,"onEnter",b=>{var g;this.app.cursors.setCursor(ko[b.handle],null!=(g=this.app.selectionBounds.rotation)?g:0);this.handle=b.handle});ia(this,"onExit",()=>{this.app.cursors.reset()});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",
{info:b,event:g})});ia(this,"onPointerDown",b=>{switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",b);break;default:this.tool.transition("pointingResizeHandle",b)}}});ia(this,"onPointerLeave",()=>{this.tool.transition("idle")});ia(this,"onDoubleClick",b=>{var g;if(!b.order&&1===this.app.selectedShapes.size){var n=
this.app.selectedShapes.values().next().value;if(n.canEdit)switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":null==(g=n.onResetBounds)?void 0:g.call(n,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:n})}else n.onResetBounds({asset:n.props.assetId?this.app.assets[n.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle")}})}};ia(Ax,"id","hoveringSelectionHandle");
var Bx=class extends vi{constructor(){super(...arguments);ia(this,"editingShape",{});ia(this,"onEnter",b=>{this.editingShape=b.shape;this.app.setEditingShape(b.shape)});ia(this,"onExit",()=>{var b;if(this.editingShape&&"text"in this.editingShape.props){const g=this.editingShape.props.text.trim();""===g&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:g}))}this.app.persist();this.app.setEditingShape();
null==(b=document.querySelector(".tl-canvas"))?void 0:b.focus()});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ia(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.editingShape)break;this.tool.transition("idle",b);break;case "canvas":b.order||this.tool.transition("idle",b)}});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":Id(()=>{g.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};
ia(Bx,"id","editingShape");var Cx=class extends vi{constructor(){super(...arguments);ia(this,"minimapZoom",1);ia(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});ia(this,"getCameraPoint",b=>{const g=document.querySelector(".tl-preview-minimap svg");var n=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(g&&n){const J=g.getBoundingClientRect();this.minimapRect.height=J.height;this.minimapRect.width=J.width;this.minimapRect.minX=J.left;this.minimapRect.minY=J.top;
this.minimapRect.maxX=J.right;this.minimapRect.maxY=J.bottom;this.minimapZoom=+g.dataset.commonBoundWidth/this.minimapRect.width;b=Lc.sub(b,[this.minimapRect.minX,this.minimapRect.minY]);n=n.getBoundingClientRect();n=Lc.mul(Lc.sub(b,[n.left+n.width/2,n.top+n.height/2]),this.minimapZoom);return Lc.sub(this.app.viewport.camera.point,n)}});ia(this,"onEnter",b=>{(b=this.getCameraPoint([b.clientX,b.clientY]))?this.app.viewport.update({point:b}):this.tool.transition("idle")});ia(this,"onPointerMove",(b,
g)=>{(b=this.getCameraPoint([g.clientX,g.clientY]))&&this.app.viewport.update({point:b})});ia(this,"onPointerUp",()=>{this.tool.transition("idle")})}};ia(Cx,"id","pointingMinimap");var er=class extends yp{constructor(){super(...arguments);ia(this,"returnTo","");ia(this,"onEnter",b=>{this.returnTo=null==b?void 0:b.returnTo})}};ia(er,"id","select");ia(er,"initial","idle");ia(er,"shortcut",["8"]);ia(er,"states",[fx,dx,ex,ix,gx,wx,kx,hx,Ax,lx,nx,Cx,zx,yx,jx,Zu,av,av,xx,Bx]);var Dx=class extends vi{constructor(){super(...arguments);
ia(this,"cursor","grabbing");ia(this,"originalScreenPoint",[]);ia(this,"originalCameraPoint",[]);ia(this,"prevState","idle");ia(this,"onEnter",b=>{this.prevState=null==b?void 0:b.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});ia(this,"onPointerMove",(b,g)=>{b=sd.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:sd.sub(this.originalCameraPoint,sd.div(b,this.app.viewport.camera.zoom))})});
ia(this,"onPointerUp",()=>{var b;this.tool.transition(null!=(b=this.prevState)?b:"idle")})}};ia(Dx,"id","panning");var Ex=class extends vi{constructor(){super(...arguments);ia(this,"onEnter",b=>{this.parent.prevTool&&b.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});ia(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning")})}};ia(Ex,"id","idle");var Fx=class extends vi{constructor(){super(...arguments);
ia(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning",{prevState:"idleHold"})});ia(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ia(Fx,"id","idleHold");var Gx=class extends vi{constructor(){super(...arguments);ia(this,"origin",[0,0]);ia(this,"prevDelta",[0,0]);ia(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});ia(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});ia(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};
ia(Gx,"id","pinching");var cr=class extends yp{constructor(){super(...arguments);ia(this,"cursor","grab");ia(this,"prevTool",null);ia(this,"onEnter",b=>{this.prevTool=null==b?void 0:b.prevTool});ia(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});ia(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};ia(cr,"id","move");ia(cr,"shortcut",["9"]);ia(cr,"states",[Ex,Fx,Dx,Gx]);ia(cr,"initial","idle");var tm=class{constructor(b,g={}){ia(this,
"lastShapesNounces",null);ia(this,"app");ia(this,"id");ia(this,"name");ia(this,"shapes",[]);ia(this,"bindings",{});ia(this,"nonce",0);ia(this,"bump",()=>{this.nonce++});ia(this,"bringForward",La=>{const Wa=this.parseShapesArg(La);Wa.sort((bb,pb)=>this.shapes.indexOf(pb)-this.shapes.indexOf(bb)).map(bb=>this.shapes.indexOf(bb)).forEach(bb=>{if(bb!==this.shapes.length-1&&!Wa.includes(this.shapes[bb+1])){var pb=this.shapes[bb];this.shapes[bb]=this.shapes[bb+1];this.shapes[bb+1]=pb}});this.app.persist();
return this});ia(this,"sendBackward",La=>{const Wa=this.parseShapesArg(La);Wa.sort((bb,pb)=>this.shapes.indexOf(bb)-this.shapes.indexOf(pb)).map(bb=>this.shapes.indexOf(bb)).forEach(bb=>{if(0!==bb&&!Wa.includes(this.shapes[bb-1])){var pb=this.shapes[bb];this.shapes[bb]=this.shapes[bb-1];this.shapes[bb-1]=pb}});this.app.persist();return this});ia(this,"bringToFront",La=>{const Wa=this.parseShapesArg(La);this.shapes=this.shapes.filter(bb=>!Wa.includes(bb)).concat(Wa);this.app.persist();return this});
ia(this,"sendToBack",La=>{const Wa=this.parseShapesArg(La);this.shapes=Wa.concat(this.shapes.filter(bb=>!Wa.includes(bb)));this.app.persist();return this});ia(this,"flip",(La,Wa)=>{La=this.parseShapesArg(La);const bb=se.getCommonBounds(La.map(pb=>pb.bounds));La.forEach(pb=>{var Db;const Qb=se.getRelativeTransformedBoundingBox(bb,bb,pb.bounds,"horizontal"===Wa,"vertical"===Wa);if(pb.serialized)pb.onResize(pb.serialized,{bounds:Qb,center:se.getBoundsCenter(Qb),rotation:null!=(Db=pb.props.rotation)?
Db:-0,type:"top_left_corner",scale:pb.canFlip&&pb.props.scale?"horizontal"===Wa?[-pb.props.scale[0],1]:[1,-pb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});ia(this,"getShapeById",La=>this.shapes.find(Wa=>Wa.id===La));ia(this,"cleanup",La=>{La=ic(this.bindings,La);const Wa=new Set;let bb=!1,pb=!1;const Db=Hq(this.bindings);La.forEach(Qb=>{var oc;if(this.bindings[Qb.id]){var ac=this.getShapeById(Qb.toId),xc=this.getShapeById(Qb.fromId);ac&&xc?Wa.has(xc.id)||
(Qb=this.updateArrowBindings(xc),Wa.add(xc.id),Qb&&(xc=xe(xe({},xc.props),Qb),bb=!0,null==(oc=this.getShapeById(xc.id))?void 0:oc.update(xc,!1,!0))):(delete Db[Qb.id],pb=!0)}});Object.keys(Db).forEach(Qb=>{const oc=this.bindings[Qb];0===this.shapes.filter(ac=>ac.id===oc.fromId||ac.id===oc.toId).length&&(delete Db[Qb],pb=!0)});pb&&this.update({bindings:Db});(bb||pb)&&this.app.persist(!0)});ia(this,"updateArrowBindings",La=>{var Wa,bb,pb,Db={start:Hq(La.props.handles.start),end:Hq(La.props.handles.end)},
Qb={isBound:!1,handle:La.props.handles.start,point:sd.add(La.props.handles.start.point,La.props.point)},oc={isBound:!1,handle:La.props.handles.end,point:sd.add(La.props.handles.end.point,La.props.point)};if(La.props.handles.start.bindingId){var ac=void 0!==(null==(Wa=La.props.decorations)?void 0:Wa.start);Wa=La.props.handles.start;var xc=this.bindings[La.props.handles.start.bindingId],pc=this.getShapeById(null==xc?void 0:xc.toId);if(pc){Qb=pc.getBounds();var Tb=pc.getExpandedBounds(),tc=se.expandBounds(Qb,
ac?xc.distance:1);const {minX:Qc,minY:Wc,width:rd,height:$d}=Tb,ke=sd.add([Qc,Wc],sd.mulV([rd,$d],sd.rotWith(xc.point,[.5,.5],pc.props.rotation||0)));Qb={isBound:!0,hasDecoration:ac,binding:xc,handle:Wa,point:ke,target:pc,bounds:Qb,expandedBounds:Tb,intersectBounds:tc,center:pc.getCenter()}}}if(La.props.handles.end.bindingId&&(ac=void 0!==(null==(bb=La.props.decorations)?void 0:bb.end),bb=La.props.handles.end,Wa=this.bindings[La.props.handles.end.bindingId],xc=this.getShapeById(null==Wa?void 0:Wa.toId))){oc=
xc.getBounds();pc=xc.getExpandedBounds();Tb=ac?se.expandBounds(oc,Wa.distance):oc;const {minX:Qc,minY:Wc,width:rd,height:$d}=pc;tc=sd.add([Qc,Wc],sd.mulV([rd,$d],sd.rotWith(Wa.point,[.5,.5],xc.props.rotation||0)));oc={isBound:!0,hasDecoration:ac,binding:Wa,handle:bb,point:tc,target:xc,bounds:oc,expandedBounds:pc,intersectBounds:Tb,center:xc.getCenter()}}for(const Qc of["end","start"]){bb="start"===Qc?Qb:oc;const Wc="start"===Qc?oc:Qb;if(bb.isBound)if(bb.binding.distance){if(ac=sd.uni(sd.sub(bb.point,
Wc.point)),Wa=C(Wc.point,ac,bb.intersectBounds,bb.target.props.rotation).filter(rd=>rd.didIntersect).map(rd=>rd.points[0]).sort((rd,$d)=>sd.dist(rd,Wc.point)-sd.dist($d,Wc.point)),Wa[0])if(xc=void 0,Wc.isBound&&(xc=C(Wc.point,ac,Wc.intersectBounds,Wc.target.props.rotation).filter(rd=>rd.didIntersect).map(rd=>rd.points[0]).sort((rd,$d)=>sd.dist(rd,Wc.point)-sd.dist($d,Wc.point))[0]),Wc.isBound&&(2>Wa.length||xc&&Wa[0]&&10>Math.ceil(sd.dist(Wa[0],xc))||se.boundsContain(bb.expandedBounds,Wc.expandedBounds)||
se.boundsCollide(bb.expandedBounds,Wc.expandedBounds)))ac=sd.uni(sd.sub(Wc.point,bb.point)),Wa=C(bb.point,ac,bb.bounds,bb.target.props.rotation).filter(rd=>rd.didIntersect).map(rd=>rd.points[0]),Wa[0]&&(Db[Qc].point=sd.toFixed(sd.sub(Wa[0],La.props.point)),Db["start"===Qc?"end":"start"].point=sd.toFixed(sd.add(sd.sub(Wa[0],La.props.point),sd.mul(ac,Math.min(sd.dist(Wa[0],Wc.point),10*(se.boundsContain(Wc.bounds,bb.intersectBounds)?-1:1))))));else{if(!Wc.isBound&&(Wa[0]&&10>sd.dist(Wa[0],Wc.point)||
Ig.pointInBounds(Wc.point,bb.intersectBounds)))return Db=sd.uni(sd.sub(bb.center,Wc.point)),null==(pb=La.getHandlesChange)?void 0:pb.call(La,La.props,{[Qc]:of(xe({},La.props.handles[Qc]),{point:sd.toFixed(sd.add(sd.sub(Wc.point,La.props.point),sd.mul(Db,10)))})});Wa[0]&&(Db[Qc].point=sd.toFixed(sd.sub(Wa[0],La.props.point)))}}else Db[Qc].point=sd.sub(bb.point,La.props.point)}return La.getHandlesChange(La.props,Db)});const {id:n,name:J,shapes:X=[],bindings:la={},nonce:va}=g;this.id=n;this.name=J;this.bindings=
Object.assign({},la);this.app=b;this.nonce=va||0;this.addShapes(...X);og(this);Md(()=>{const La=0<this.shapes.length?Object.fromEntries(this.shapes.map(Wa=>[Wa.id,Wa.nonce])):null;if(this.lastShapesNounces&&La){const Wa=this.lastShapesNounces,bb=[...(new Set([...Object.keys(La),...Object.keys(Wa)]))].filter(pb=>Wa[pb]!==La[pb]);requestAnimationFrame(()=>{this.cleanup(bb)})}La&&(this.lastShapesNounces=La)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(b=>b.serialized).filter(b=>
!!b).map(b=>Cc(b)),bindings:Hq(this.bindings),nonce:this.nonce}}update(b){Object.assign(this,b);return this}updateBindings(b){Object.assign(this.bindings,b);return this}addShapes(...b){if(0!==b.length)return b="getBounds"in b[0]?b:b.map(g=>new (this.app.getShapeClass(g.type))(g)),this.shapes.push(...b),this.bump(),b}parseShapesArg(b){return"string"===typeof b[0]?this.shapes.filter(g=>b.includes(g.id)):b}removeShapes(...b){const g=this.parseShapesArg(b);this.shapes=this.shapes.filter(n=>!g.includes(n));
return g}getBindableShapes(){return this.shapes.filter(b=>b.canBind).sort((b,g)=>g.nonce-b.nonce).map(b=>b.id)}};Qa([sg],tm.prototype,"id",2);Qa([sg],tm.prototype,"name",2);Qa([sg],tm.prototype,"shapes",2);Qa([sg],tm.prototype,"bindings",2);Qa([mh],tm.prototype,"serialized",1);Qa([sg],tm.prototype,"nonce",2);Qa([he],tm.prototype,"bump",2);Qa([he],tm.prototype,"update",1);Qa([he],tm.prototype,"updateBindings",1);Qa([he],tm.prototype,"addShapes",1);Qa([he],tm.prototype,"removeShapes",1);Qa([he],tm.prototype,
"bringForward",2);Qa([he],tm.prototype,"sendBackward",2);Qa([he],tm.prototype,"bringToFront",2);Qa([he],tm.prototype,"sendToBack",2);Qa([he],tm.prototype,"cleanup",2);var Ik=class{constructor(){ia(this,"shiftKey",!1);ia(this,"ctrlKey",!1);ia(this,"modKey",!1);ia(this,"altKey",!1);ia(this,"spaceKey",!1);ia(this,"isPinching",!1);ia(this,"currentScreenPoint",[0,0]);ia(this,"currentPoint",[0,0]);ia(this,"previousScreenPoint",[0,0]);ia(this,"previousPoint",[0,0]);ia(this,"originScreenPoint",[0,0]);ia(this,
"originPoint",[0,0]);ia(this,"pointerIds",new Set);ia(this,"state","idle");ia(this,"containerOffset",[0,0]);ia(this,"onPointerDown",(b,g)=>{this.pointerIds.add(g.pointerId);this.updateModifiers(g);this.originScreenPoint=this.currentScreenPoint;this.originPoint=b;this.state="pointing"});ia(this,"onPointerMove",(b,g)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(g),this.previousPoint=this.currentPoint,this.currentPoint=b)});ia(this,"onPointerUp",(b,g)=>
{this.pointerIds.clear();this.updateModifiers(g);this.state="idle"});ia(this,"onKeyDown",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!0}});ia(this,"onKeyUp",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!1}});ia(this,"onPinchStart",(b,g)=>{this.updateModifiers(g);this.state="pinching"});ia(this,"onPinch",(b,g)=>{"pinching"===this.state&&this.updateModifiers(g)});ia(this,"onPinchEnd",(b,g)=>{"pinching"===this.state&&(this.updateModifiers(g),this.state="idle")});
og(this)}updateContainerOffset(b){Object.assign(this.containerOffset,b)}updateModifiers(b){b.isPrimary&&("clientX"in b&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=sd.sub([b.clientX,b.clientY],this.containerOffset)),"shiftKey"in b&&(this.shiftKey=b.shiftKey,this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.modKey=xk()?b.metaKey:b.ctrlKey))}};Qa([sg],Ik.prototype,"shiftKey",2);Qa([sg],Ik.prototype,"ctrlKey",2);Qa([sg],Ik.prototype,"modKey",2);Qa([sg],Ik.prototype,"altKey",
2);Qa([sg],Ik.prototype,"spaceKey",2);Qa([sg],Ik.prototype,"isPinching",2);Qa([sg],Ik.prototype,"currentScreenPoint",2);Qa([sg],Ik.prototype,"currentPoint",2);Qa([sg],Ik.prototype,"previousScreenPoint",2);Qa([sg],Ik.prototype,"previousPoint",2);Qa([sg],Ik.prototype,"originScreenPoint",2);Qa([sg],Ik.prototype,"originPoint",2);Qa([sg],Ik.prototype,"state",2);Qa([sg],Ik.prototype,"containerOffset",2);Qa([he],Ik.prototype,"updateContainerOffset",1);Qa([he],Ik.prototype,"updateModifiers",1);Qa([he],Ik.prototype,
"onPointerDown",2);Qa([he],Ik.prototype,"onPointerMove",2);Qa([he],Ik.prototype,"onPointerUp",2);Qa([he],Ik.prototype,"onKeyDown",2);Qa([he],Ik.prototype,"onKeyUp",2);Qa([he],Ik.prototype,"onPinchStart",2);Qa([he],Ik.prototype,"onPinch",2);Qa([he],Ik.prototype,"onPinchEnd",2);var ot=class{constructor(){ia(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});ia(this,"camera",{point:[0,0],zoom:1});ia(this,"updateBounds",b=>{this.bounds=b;return this});ia(this,"panCamera",b=>this.update({point:Lc.sub(this.camera.point,
Lc.div(b,this.camera.zoom))}));ia(this,"update",({point:b,zoom:g})=>{void 0!==b&&(this.camera.point=b);void 0!==g&&(this.camera.zoom=g);return this});ia(this,"getPagePoint",b=>{const {camera:g,bounds:n}=this;return Lc.sub(Lc.div(Lc.sub(b,[n.minX,n.minY]),g.zoom),g.point)});ia(this,"getScreenPoint",b=>{const {camera:g}=this;return Lc.mul(Lc.add(b,g.point),g.zoom)});ia(this,"onZoom",(b,g)=>this.pinchZoom(b,[0,0],g));ia(this,"pinchZoom",(b,g,n)=>{var {camera:J}=this;g=Lc.sub(J.point,Lc.div(g,J.zoom));
n=Lc.clamp(n,ot.minZoom,ot.maxZoom);J=Lc.sub(Lc.div(b,J.zoom),g);b=Lc.sub(Lc.div(b,n),g);return this.update({point:Lc.toFixed(Lc.add(g,Lc.sub(b,J))),zoom:n})});ia(this,"setZoom",b=>{const {bounds:g}=this;this.onZoom([g.width/2,g.height/2],b)});ia(this,"zoomIn",()=>{const {camera:b}=this;this.setZoom(b.zoom/.8)});ia(this,"zoomOut",()=>{const {camera:b}=this;this.setZoom(.8*b.zoom)});ia(this,"resetZoom",()=>{const {bounds:b,camera:{zoom:g,point:n}}=this;var J=[b.width/2,b.height/2];const X=Lc.sub(Lc.div(J,
g),n);J=Lc.sub(Lc.div(J,1),n);return this.update({point:Lc.toFixed(Lc.add(n,Lc.sub(J,X))),zoom:1})});ia(this,"zoomToBounds",({width:b,height:g,minX:n,minY:J})=>{const {bounds:X,camera:la}=this;let va=Math.min((X.width-100)/b,(X.height-100)/g);va=Math.min(1,Math.max(ot.minZoom,la.zoom===va||1>la.zoom?Math.min(1,va):va));return this.update({point:Lc.add([-n,-J],[(X.width-b*va)/2/va,(X.height-g*va)/2/va]),zoom:va})});og(this)}get currentView(){const {bounds:b,camera:{point:g,zoom:n}}=this,J=b.width/
n,X=b.height/n;return{minX:-g[0],minY:-g[1],maxX:J-g[0],maxY:X-g[1],width:J,height:X}}},Oo=ot;ia(Oo,"minZoom",.1);ia(Oo,"maxZoom",4);Qa([sg],Oo.prototype,"bounds",2);Qa([sg],Oo.prototype,"camera",2);Qa([he],Oo.prototype,"updateBounds",2);Qa([he],Oo.prototype,"update",2);Qa([mh],Oo.prototype,"currentView",1);var NB=class{constructor(b){ia(this,"app");ia(this,"editShape",g=>{this.app.transition("select").selectedTool.transition("editingShape",{shape:g});return this});ia(this,"hoverShape",g=>{this.app.setHoveredShape(g);
return this});ia(this,"createShapes",(...g)=>{this.app.createShapes(g);return this});ia(this,"updateShapes",(...g)=>{this.app.updateShapes(g);return this});ia(this,"deleteShapes",(...g)=>{this.app.deleteShapes(g.length?g:this.app.selectedShapesArray);return this});ia(this,"selectShapes",(...g)=>{this.app.setSelectedShapes(g);return this});ia(this,"deselectShapes",(...g)=>{const n="string"===typeof g[0]?g:g.map(J=>J.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(J=>!n.includes(J.id)));
return this});ia(this,"flipHorizontal",(...g)=>{this.app.flipHorizontal(g);return this});ia(this,"flipVertical",(...g)=>{this.app.flipVertical(g);return this});ia(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes);return this});ia(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});ia(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});ia(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});ia(this,"resetZoom",()=>{this.app.viewport.resetZoom();
return this});ia(this,"zoomToFit",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=se.getCommonBounds(g.map(n=>n.bounds));this.app.viewport.zoomToBounds(g);return this});ia(this,"cameraToCenter",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=se.getCommonBounds(g.map(n=>n.bounds));this.app.viewport.update({point:sd.add(sd.neg(se.getBoundsCenter(g)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});ia(this,"zoomToSelection",
()=>{const {selectionBounds:g}=this.app;if(!g)return this;this.app.viewport.zoomToBounds(g);return this});ia(this,"resetZoomToCursor",()=>{this.app.viewport.update({zoom:1,point:sd.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});ia(this,"toggleGrid",()=>{const {settings:g}=this.app;g.update({showGrid:!g.showGrid});return this});ia(this,"setColor",g=>{const {settings:n}=this.app;n.update({color:g});this.app.selectedShapesArray.forEach(J=>{J.update({fill:g,stroke:g})});
this.app.persist();return this});ia(this,"save",()=>{this.app.save();return this});ia(this,"saveAs",()=>{this.app.save();return this});ia(this,"undo",()=>{this.app.undo();return this});ia(this,"redo",()=>{this.app.redo();return this});ia(this,"createNewLineBinding",(g,n)=>this.app.createNewLineBinding(g,n));ia(this,"cloneShapes",({shapes:g,assets:n,bindings:J,point:X=[0,0]})=>{const la=se.getCommonBounds(g.map(Wa=>{var bb,pb,Db,Qb,oc,ac,xc,pc,Tb,tc,Qc,Wc,rd,$d,ke,Fe;return{minX:null!=(pb=null==(bb=
Wa.point)?void 0:bb[0])?pb:X[0],minY:null!=(Qb=null==(Db=Wa.point)?void 0:Db[1])?Qb:X[1],width:null!=(ac=null==(oc=Wa.size)?void 0:oc[0])?ac:4,height:null!=(pc=null==(xc=Wa.size)?void 0:xc[1])?pc:4,maxX:(null!=(tc=null==(Tb=Wa.point)?void 0:Tb[0])?tc:X[0])+(null!=(Wc=null==(Qc=Wa.size)?void 0:Qc[0])?Wc:4),maxY:(null!=($d=null==(rd=Wa.point)?void 0:rd[1])?$d:X[1])+(null!=(Fe=null==(ke=Wa.size)?void 0:ke[1])?Fe:4)}})),va=g.map(Wa=>of(xe({},Wa),{id:Kd(),point:[X[0]+Wa.point[0]-la.minX,X[1]+Wa.point[1]-
la.minY]})),La=[];va.flatMap(Wa=>{var bb;return Object.values(null!=(bb=Wa.handles)?bb:{})}).forEach(Wa=>{if(Wa.bindingId){var bb=J[Wa.bindingId];if(bb){var pb=g.findIndex(Qb=>Qb.id===bb.fromId);const Db=g.findIndex(Qb=>Qb.id===bb.toId);bb&&-1!==pb&&-1!==Db?(pb=of(xe({},bb),{id:Kd(),fromId:va[pb].id,toId:va[Db].id}),La.push(pb),Wa.bindingId=pb.id):Wa.bindingId=void 0}else console.warn("binding not found",Wa.bindingId)}});n=n.filter(Wa=>va.some(bb=>bb.assetId===Wa.id));return{shapes:va,assets:n,bindings:La}});
ia(this,"getClonedShapesFromTldrString",(g,n)=>{try{{var J;const bb=null==(J=g.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:J[1];if(bb){try{var X=JSON.parse(bb)}catch(pb){X=null}var la=X}else la=void 0}g=la;if(!g)return null;const {shapes:va,bindings:La,assets:Wa}=g;return this.cloneShapes({shapes:va,bindings:La,assets:Wa,point:n})}catch(va){console.log(va)}return null});ia(this,"cloneShapesIntoCurrentPage",g=>{(g=this.cloneShapes(g))&&this.addClonedShapes(g);return this});ia(this,"addClonedShapes",
g=>{const {shapes:n,assets:J,bindings:X}=g;0<J.length&&this.app.createAssets(J);0<n.length&&this.app.createShapes(n);this.app.currentPage.updateBindings(Object.fromEntries(X.map(la=>[la.id,la])));this.app.selectedTool.transition("idle");return this});ia(this,"addClonedShapesFromTldrString",(g,n)=>{(g=this.getClonedShapesFromTldrString(g,n))&&this.addClonedShapes(g);return this});this.app=b}},dr=class{constructor(){ia(this,"cursor","default");ia(this,"rotation",0);ia(this,"reset",()=>{this.cursor=
"default"});ia(this,"setCursor",(b,g=0)=>{if(b!==this.cursor||g!==this.rotation)this.cursor=b,this.rotation=g});ia(this,"setRotation",b=>{b!==this.rotation&&(this.rotation=b)});og(this)}};Qa([sg],dr.prototype,"cursor",2);Qa([sg],dr.prototype,"rotation",2);Qa([he],dr.prototype,"reset",2);Qa([he],dr.prototype,"setCursor",2);Qa([he],dr.prototype,"setRotation",2);var OB=(b,g)=>{b=wk(b.pages[0],"nonce");g=wk(g.pages[0],"nonce");return!(0,Yx.default)(b,g)},lo=class{constructor(b){ia(this,"app");ia(this,
"stack",[]);ia(this,"pointer",0);ia(this,"isPaused",!0);ia(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});ia(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});ia(this,"reset",()=>{this.stack=[this.app.serialized];this.pointer=0;this.resume();this.app.notify("persist",null)});ia(this,"persist",(g=!1)=>{if(!this.isPaused&&!this.creating){var {serialized:n}=this.app;0<this.stack.length&&!OB(this.stack[this.pointer],n)||(g?this.stack[this.pointer]=n:(this.pointer<this.stack.length&&(this.stack=
this.stack.slice(0,this.pointer+1)),this.stack.push(n),this.pointer=this.stack.length-1),this.app.pages.forEach(J=>J.bump()),this.app.notify("persist",null))}});ia(this,"setPointer",g=>{this.pointer=g;this.deserialize(this.stack[this.pointer]);this.app.notify("persist",null)});ia(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canUndo&&this.setPointer(this.pointer-1)});ia(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canRedo&&
this.setPointer(this.pointer+1)});ia(this,"deserialize",g=>{Id(()=>{var n,{pages:J}=g;const X=this.isPaused;this.pause();const la=[...this.app.selectedIds];try{const va=new Map(this.app.pages),La=[];for(const Wa of J){const bb=va.get(Wa.id);if(void 0!==bb){const pb=new Map(bb.shapes.map(Db=>[Db.props.id,Db]));J=[];for(const Db of Wa.shapes){const Qb=pb.get(Db.id);if(void 0!==Qb)Qb.nonce!==Db.nonce&&(Qb.update(Db,!0),Qb.nonce=Db.nonce,Qb.setLastSerialized(Db)),pb.delete(Db.id);else{const oc=new (this.app.getShapeClass(Db.type))(Db);
J.push(oc)}}0<pb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&bb.removeShapes(...pb.values());0<J.length&&bb.addShapes(...J);va.delete(Wa.id);bb.updateBindings(Wa.bindings);bb.nonce=null!=(n=Wa.nonce)?n:0}else{const {id:pb,name:Db,shapes:Qb,bindings:oc,nonce:ac}=Wa;La.push(new tm(this.app,{id:pb,name:Db,nonce:ac,bindings:oc,shapes:Qb.map(xc=>new (this.app.getShapeClass(xc.type))(xc))}))}}0<La.length&&this.app.addPages(La);0<va.size&&this.app.removePages(Array.from(va.values()));
this.app.setSelectedShapes(la).setErasingShapes([])}catch(va){console.warn(va)}X||this.resume()})});this.app=b;og(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}get canUndo(){return 0<this.pointer}get canRedo(){return this.pointer<this.stack.length-1}};Qa([sg],lo.prototype,"stack",2);Qa([sg],lo.prototype,"pointer",2);Qa([mh],lo.prototype,"canUndo",1);Qa([mh],lo.prototype,"canRedo",1);Qa([he],lo.prototype,"reset",2);Qa([he],lo.prototype,"persist",2);Qa([he],lo.prototype,
"setPointer",2);Qa([he],lo.prototype,"undo",2);Qa([he],lo.prototype,"redo",2);Qa([he],lo.prototype,"deserialize",2);var gs=class{constructor(){ia(this,"mode","light");ia(this,"showGrid",!0);ia(this,"color","");og(this)}update(b){Object.assign(this,b)}};Qa([sg],gs.prototype,"mode",2);Qa([sg],gs.prototype,"showGrid",2);Qa([sg],gs.prototype,"color",2);Qa([he],gs.prototype,"update",1);var sh=class extends kr{constructor(b,g,n){var J,X;super();ia(this,"keybindingRegistered",!1);ia(this,"uuid",Kd());ia(this,
"api");ia(this,"inputs",new Ik);ia(this,"cursors",new dr);ia(this,"viewport",new Oo);ia(this,"settings",new gs);ia(this,"Tools",[]);ia(this,"history",new lo(this));ia(this,"persist",this.history.persist);ia(this,"undo",this.history.undo);ia(this,"redo",this.history.redo);ia(this,"saving",!1);ia(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});ia(this,"load",()=>{this.notify("load",null);return this});ia(this,
"save",()=>{this.notify("save",null);return this});ia(this,"saveAs",()=>{this.notify("saveAs",null);return this});ia(this,"pages",new Map([["page",new tm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));ia(this,"getPageById",la=>{const va=this.pages.get(la);if(!va)throw Error(`Could not find a page named ${la}.`);return va});ia(this,"getShapeById",(la,va=this.currentPage.id)=>{var La;return null==(La=this.getPageById(va))?void 0:La.shapes.find(Wa=>Wa.id===la)});ia(this,"createShapes",la=>{(la=
this.currentPage.addShapes(...la))&&this.notify("create-shapes",la);this.persist();return this});ia(this,"updateShapes",la=>{la.forEach(va=>{var La;return null==(La=this.getShapeById(va.id))?void 0:La.update(va)});this.persist();return this});ia(this,"deleteShapes",la=>{if(0===la.length)return this;let va;va="string"===typeof la[0]?new Set(la):new Set(la.map(La=>La.id));this.setSelectedShapes(this.selectedShapesArray.filter(La=>!va.has(La.id)));(la=this.currentPage.removeShapes(...la))&&this.notify("delete-shapes",
la);this.persist();return this});ia(this,"bringForward",(la=this.selectedShapesArray)=>{0<la.length&&this.currentPage.bringForward(la);return this});ia(this,"sendBackward",(la=this.selectedShapesArray)=>{0<la.length&&this.currentPage.sendBackward(la);return this});ia(this,"sendToBack",(la=this.selectedShapesArray)=>{0<la.length&&this.currentPage.sendToBack(la);return this});ia(this,"bringToFront",(la=this.selectedShapesArray)=>{0<la.length&&this.currentPage.bringToFront(la);return this});ia(this,
"flipHorizontal",(la=this.selectedShapesArray)=>{this.currentPage.flip(la,"horizontal");return this});ia(this,"flipVertical",(la=this.selectedShapesArray)=>{this.currentPage.flip(la,"vertical");return this});ia(this,"align",(la,va=this.selectedShapesArray)=>{if(2>va.length)return this;const La=va.map(Qb=>{const oc=Qb.getBounds();return{id:Qb.id,point:[oc.minX,oc.minY],bounds:oc}}),Wa=se.getCommonBounds(La.map(({bounds:Qb})=>Qb)),bb=Wa.minX+Wa.width/2,pb=Wa.minY+Wa.height/2,Db=Object.fromEntries(La.map(({id:Qb,
point:oc,bounds:ac})=>[Qb,{prev:oc,next:{top:[oc[0],Wa.minY],centerVertical:[oc[0],pb-ac.height/2],bottom:[oc[0],Wa.maxY-ac.height],left:[Wa.minX,oc[1]],centerHorizontal:[bb-ac.width/2,oc[1]],right:[Wa.maxX-ac.width,oc[1]]}[la]}]));va.forEach(Qb=>{Db[Qb.id]&&Qb.update({point:Db[Qb.id].next})});this.persist();return this});ia(this,"distribute",(la,va=this.selectedShapesArray)=>{if(2>va.length)return this;const La=Object.fromEntries(se.getDistributions(va,la).map(Wa=>[Wa.id,Wa]));va.forEach(Wa=>{La[Wa.id]&&
Wa.update({point:La[Wa.id].next})});this.persist();return this});ia(this,"packIntoRectangle",(la=this.selectedShapesArray)=>{if(2>la.length)return this;const va=Object.fromEntries(se.getPackedDistributions(la).map(La=>[La.id,La]));la.forEach(La=>{va[La.id]&&La.update({point:va[La.id].next})});this.persist();return this});ia(this,"assets",{});ia(this,"removeUnusedAssets",()=>{const la=this.getCleanUpAssets();Object.keys(this.assets).forEach(va=>{la.some(La=>La.id===va)||delete this.assets[va]});this.persist();
return this});ia(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){var la=JSON.stringify({shapes:this.selectedShapesArray.map(va=>va.serialized),assets:this.getCleanUpAssets().filter(va=>this.selectedShapesArray.some(La=>La.props.assetId===va.id)),bindings:Cc(this.currentPage.bindings)});la=encodeURIComponent(`<whiteboard-tldr>${la}</whiteboard-tldr>`);navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([la],{type:"text/html"}),"text/plain":new Blob([`((${this.selectedShapesArray[0].props.id}))`],
{type:"text/plain"})})])}});ia(this,"paste",(la,va)=>{var La;this.editingShape||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!va,dataTransfer:null!=(La=null==la?void 0:la.clipboardData)?La:void 0})});ia(this,"cut",()=>{this.copy();this.api.deleteShapes()});ia(this,"drop",(la,va)=>{this.notify("drop",{dataTransfer:la,point:va?this.viewport.getPagePoint(va):se.getBoundsCenter(this.viewport.currentView)})});ia(this,"selectTool",this.transition);ia(this,"editingId");ia(this,"setEditingShape",
la=>{this.editingId="string"===typeof la?la:null==la?void 0:la.id;return this});ia(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});ia(this,"hoveredId");ia(this,"setHoveredShape",la=>{this.hoveredId="string"===typeof la?la:null==la?void 0:la.id;return this});ia(this,"selectedIds",new Set);ia(this,"selectedShapes",new Set);ia(this,"selectionRotation",0);ia(this,"setSelectedShapes",la=>{var va;const {selectedIds:La,selectedShapes:Wa}=this;La.clear();
Wa.clear();la[0]&&"string"===typeof la[0]?la.forEach(pb=>La.add(pb)):la.forEach(pb=>La.add(pb.id));const bb=this.currentPage.shapes.filter(pb=>La.has(pb.id));bb.forEach(pb=>Wa.add(pb));this.selectionRotation=1===bb.length?null!=(va=bb[0].props.rotation)?va:0:0;0===la.length&&this.setEditingShape();return this});ia(this,"erasingIds",new Set);ia(this,"erasingShapes",new Set);ia(this,"setErasingShapes",la=>{const {erasingIds:va,erasingShapes:La}=this;va.clear();La.clear();la[0]&&"string"===typeof la[0]?
la.forEach(Wa=>va.add(Wa)):la.forEach(Wa=>va.add(Wa.id));this.currentPage.shapes.filter(Wa=>va.has(Wa.id)).forEach(Wa=>La.add(Wa));return this});ia(this,"bindingIds");ia(this,"setBindingShapes",la=>{this.bindingIds=la;return this});ia(this,"clearBindingShape",()=>this.setBindingShapes());ia(this,"createNewLineBinding",(la,va)=>{la="string"===typeof la?this.getShapeById(la):la;va="string"===typeof va?this.getShapeById(va):va;if((null==la?0:la.canBind)&&(null==va?0:va.canBind)&&(va=ld(la,va))){const [La,
Wa]=va;this.createShapes([La]);this.currentPage.updateBindings(Object.fromEntries(Wa.map(bb=>[bb.id,bb])));this.persist();return!0}return!1});ia(this,"brush");ia(this,"setBrush",la=>{this.brush=la;return this});ia(this,"setCamera",(la,va)=>{this.viewport.update({point:la,zoom:va});return this});ia(this,"getPagePoint",la=>{const {camera:va}=this.viewport;return Lc.sub(Lc.div(la,va.zoom),va.point)});ia(this,"getScreenPoint",la=>{const {camera:va}=this.viewport;return Lc.mul(Lc.add(la,va.point),va.zoom)});
ia(this,"Shapes",new Map);ia(this,"registerShapes",la=>{la.forEach(va=>this.Shapes.set(va.id,va))});ia(this,"deregisterShapes",la=>{la.forEach(va=>this.Shapes.delete(va.id))});ia(this,"getShapeClass",la=>{if(!la)throw Error("No shape type provided.");const va=this.Shapes.get(la);if(!va)throw Error(`Could not find shape class for ${la}`);return va});ia(this,"wrapUpdate",la=>{Id(()=>{const va=!this.history.isPaused;va&&this.history.pause();la();va&&(this.history.resume(),this.persist())})});ia(this,
"subscriptions",new Set([]));ia(this,"subscribe",(la,va)=>{if(void 0===va)throw Error("Callback is required.");const La={event:la,callback:va};this.subscriptions.add(La);return()=>this.unsubscribe(La)});ia(this,"unsubscribe",la=>{this.subscriptions.delete(la);return this});ia(this,"notify",(la,va)=>{this.subscriptions.forEach(La=>{La.event===la&&La.callback(this,va)});return this});ia(this,"onTransition",()=>{});ia(this,"onPointerDown",(la,va)=>{if(!this.editingShape&&1===va.button&&!this.isIn("move"))this.temporaryTransitionToMove(va);
else if(2===va.button)this.transition("select");else if("clientX"in va)this.inputs.onPointerDown([...this.viewport.getPagePoint([va.clientX,va.clientY]),.5],va)});ia(this,"onPointerUp",(la,va)=>{if(!this.editingShape&&1===va.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),va.stopPropagation(),va.preventDefault();else if("clientX"in va)this.inputs.onPointerUp([...this.viewport.getPagePoint([va.clientX,va.clientY]),.5],va)});ia(this,"onPointerMove",(la,va)=>{if("clientX"in va)this.inputs.onPointerMove([...this.viewport.getPagePoint([va.clientX,
va.clientY]),.5],va)});ia(this,"onKeyDown",(la,va)=>{if(this.editingShape||" "!==va.key||this.isIn("move"))this.inputs.onKeyDown(va);else this.temporaryTransitionToMove(va)});ia(this,"onKeyUp",(la,va)=>{if(!this.editingShape&&" "===va.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),va.stopPropagation(),va.preventDefault();else this.inputs.onKeyUp(va)});ia(this,"onPinchStart",(la,va)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(la.point),.5],va)});ia(this,"onPinch",
(la,va)=>{this.inputs.onPinch([...this.viewport.getPagePoint(la.point),.5],va)});ia(this,"onPinchEnd",(la,va)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(la.point),.5],va)});this._states=[er,cr];this.history.pause();if(this.states&&0<this.states.length){this.registerStates(this.states);const la=null!=(J=this.initial)?J:this.states[0].id;if(J=this.children.get(la))this.currentState=J,null==(X=this.currentState)?void 0:X._events.onEnter({fromId:"initial"})}g&&this.registerShapes(g);n&&this.registerTools(n);
this.history.resume();b&&this.history.deserialize(b);this.api=new NB(this);og(this);this.notify("mount",null)}dispose(){super.dispose();this.keybindingRegistered=!1;return this}initKeyboardShortcuts(){if(!this.keybindingRegistered){var b=this.constructor.shortcuts||[],g=Array.from(this.children.values()).filter(n=>n.constructor.shortcut).map(n=>({keys:n.constructor.shortcut,fn:(J,X,la)=>{this.transition(n.id);la.stopPropagation()}}));this._disposables.push(...[{keys:"shift+0",fn:()=>this.api.resetZoom()},
{keys:"shift+1",fn:()=>this.api.zoomToFit()},{keys:"mod+shift+1",fn:()=>this.api.zoomToSelection()},{keys:"mod+-",fn:()=>this.api.zoomOut()},{keys:"mod+\x3d",fn:()=>this.api.zoomIn()},{keys:"mod+z",fn:()=>this.undo()},{keys:"mod+x",fn:()=>this.cut()},{keys:"mod+shift+z",fn:()=>this.redo()},{keys:"[",fn:()=>this.sendBackward()},{keys:"shift+[",fn:()=>this.sendToBack()},{keys:"]",fn:()=>this.bringForward()},{keys:"shift+]",fn:()=>this.bringToFront()},{keys:"mod+a",fn:()=>{const {selectedTool:n}=this;
"select"!==n.id&&this.selectTool("select");this.api.selectAll()}},{keys:"mod+shift+s",fn:()=>{this.saveAs();this.notify("saveAs",null)}},{keys:"mod+shift+v",fn:(n,J,X)=>{this.editingShape||(X.preventDefault(),this.paste(void 0,!0))}},{keys:["del","backspace"],fn:()=>{this.api.deleteShapes();this.selectedTool.transition("idle")}},...b,...g].map(({keys:n,fn:J})=>Lh.registerShortcut(n,X=>{J(this,this,X)})));this.keybindingRegistered=!0}}loadDocumentModel(b){this.history.deserialize(b);b.assets&&0<b.assets.length&&
this.addAssets(b.assets);return this}get serialized(){return{selectedIds:Array.from(this.selectedIds.values()),pages:Array.from(this.pages.values()).map(b=>b.serialized),assets:this.getCleanUpAssets()}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(b){b.forEach(g=>this.pages.set(g.id,g));this.persist();return this}removePages(b){b.forEach(g=>this.pages.delete(g.id));this.persist();return this}addAssets(b){b.forEach(g=>
this.assets[g.id]=g);this.persist();return this}removeAssets(b){"string"===typeof b[0]?b.forEach(g=>delete this.assets[g]):b.forEach(g=>delete this.assets[g.id]);this.persist();return this}getCleanUpAssets(){const b=new Set;this.pages.forEach(g=>g.shapes.forEach(n=>{n.props.assetId&&this.assets[n.props.assetId]&&b.add(this.assets[n.props.assetId])}));return Array.from(b)}createAssets(b){this.addAssets(b);this.notify("create-assets",{assets:b});this.persist();return this}get selectedTool(){return this.currentState}registerTools(b){this.Tools=
b;return this.registerStates(b)}get editingShape(){const {editingId:b,currentPage:g}=this;return b?g.shapes.find(n=>n.id===b):void 0}get hoveredShape(){const {hoveredId:b,currentPage:g}=this;return b?g.shapes.find(n=>n.id===b):void 0}get selectedShapesArray(){const {selectedShapes:b,selectedTool:g}=this;return"select"!==g.id?[]:Array.from(b.values())}setSelectionRotation(b){this.selectionRotation=b}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var b;const g=
1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(J=>{var X;return Object.values(null!=(X=J.props.handles)?X:{})}).flatMap(J=>J.bindingId).filter(ih).flatMap(J=>{var X,la;return[null==(X=this.currentPage.bindings[J])?void 0:X.fromId,null==(la=this.currentPage.bindings[J])?void 0:la.toId]}).filter(ih):[],n=[...(null!=(b=this.bindingIds)?b:[]),...g];return n?this.currentPage.shapes.filter(J=>null==n?void 0:n.includes(J.id)):void 0}get currentGrid(){const {zoom:b}=this.viewport.camera;
return.15>b?128:1>b?32:8}get shapes(){const {currentPage:{shapes:b}}=this;return Array.from(b.values())}get shapesInViewport(){const {selectedShapes:b,currentPage:g,viewport:{currentView:n}}=this;return g.shapes.filter(J=>!J.canUnmount||b.has(J)||se.boundsContain(n,J.rotatedBounds)||se.boundsCollide(n,J.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:b,viewport:{currentView:g}}=this;if(b&&!se.boundsContain(g,b)&&!se.boundsCollide(g,b)){var n=se.getBoundsCenter(b);return Lc.clampV([(n[0]-
g.minX-g.width/2)/g.width,(n[1]-g.minY-g.height/2)/g.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:b}=this;if(0!==b.length)return 1===b.length?of(xe({},b[0].bounds),{rotation:b[0].props.rotation}):se.getCommonBounds(this.selectedShapesArray.map(g=>g.rotatedBounds))}get showSelection(){var b;const {selectedShapesArray:g}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===g.length&&!(null==(b=g[0])?0:b.hideSelection)||1<g.length)}get showSelectionDetail(){return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(b=>b.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<b.length&&!b.every(g=>g.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:b}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<b.length&&!b.some(g=>g.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===b.length&&!b.every(g=>g.hideResizeHandles)}temporaryTransitionToMove(b){b.stopPropagation();
b.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};ia(sh,"id","app");ia(sh,"initial","select");Qa([mh],sh.prototype,"serialized",1);Qa([sg],sh.prototype,"pages",2);Qa([mh],sh.prototype,"currentPageId",1);Qa([mh],sh.prototype,"currentPage",1);Qa([he],sh.prototype,"addPages",1);Qa([he],sh.prototype,"removePages",1);Qa([he],sh.prototype,"createShapes",2);Qa([he],sh.prototype,"updateShapes",2);Qa([he],sh.prototype,"deleteShapes",2);Qa([sg],
sh.prototype,"assets",2);Qa([he],sh.prototype,"addAssets",1);Qa([he],sh.prototype,"removeAssets",1);Qa([he],sh.prototype,"removeUnusedAssets",2);Qa([mh],sh.prototype,"selectedTool",1);Qa([sg],sh.prototype,"editingId",2);Qa([mh],sh.prototype,"editingShape",1);Qa([he],sh.prototype,"setEditingShape",2);Qa([sg],sh.prototype,"hoveredId",2);Qa([mh],sh.prototype,"hoveredShape",1);Qa([he],sh.prototype,"setHoveredShape",2);Qa([sg],sh.prototype,"selectedIds",2);Qa([sg],sh.prototype,"selectedShapes",2);Qa([sg],
sh.prototype,"selectionRotation",2);Qa([mh],sh.prototype,"selectedShapesArray",1);Qa([he],sh.prototype,"setSelectedShapes",2);Qa([he],sh.prototype,"setSelectionRotation",1);Qa([sg],sh.prototype,"erasingIds",2);Qa([sg],sh.prototype,"erasingShapes",2);Qa([mh],sh.prototype,"erasingShapesArray",1);Qa([he],sh.prototype,"setErasingShapes",2);Qa([sg],sh.prototype,"bindingIds",2);Qa([mh],sh.prototype,"bindingShapes",1);Qa([he],sh.prototype,"setBindingShapes",2);Qa([he],sh.prototype,"createNewLineBinding",
2);Qa([sg],sh.prototype,"brush",2);Qa([he],sh.prototype,"setBrush",2);Qa([he],sh.prototype,"setCamera",2);Qa([mh],sh.prototype,"currentGrid",1);Qa([mh],sh.prototype,"shapes",1);Qa([mh],sh.prototype,"shapesInViewport",1);Qa([mh],sh.prototype,"selectionDirectionHint",1);Qa([mh],sh.prototype,"selectionBounds",1);Qa([mh],sh.prototype,"showSelection",1);Qa([mh],sh.prototype,"showSelectionDetail",1);Qa([mh],sh.prototype,"showSelectionRotation",1);Qa([mh],sh.prototype,"showContextBar",1);Qa([mh],sh.prototype,
"showRotateHandles",1);Qa([mh],sh.prototype,"showResizeHandles",1);var PB=Function.prototype.toString,Yu=Object.create,GB=Object.prototype.toString,HB=function(){function b(){this._keys=[];this._values=[]}b.prototype.has=function(g){return!!~this._keys.indexOf(g)};b.prototype.get=function(g){return this._values[this._keys.indexOf(g)]};b.prototype.set=function(g,n){this._keys.push(g);this._values.push(n)};return b}(),IB="undefined"!==typeof WeakMap?We:ve,JB="g"===/test/g.flags?Df:cg,KB="undefined"!==
typeof Symbol?Pf:uf,LB=Object.defineProperty,MB=Object.getOwnPropertyDescriptor,cx=Object.getOwnPropertyNames,Xu=Object.getOwnPropertySymbols,zy=Object.prototype,Vx=zy.hasOwnProperty,dC=zy.propertyIsEnumerable,Wx="function"===typeof Xu,fC=Wx?Qg:cx,gC=Array.isArray,iv=Object.assign,hC=Object.getPrototypeOf,Xx={array:function(b,g){var n=new g.Constructor;g.cache.set(b,n);for(var J=0,X=b.length;J<X;++J)n[J]=g.copier(b[J],g);return n},arrayBuffer:function(b,g){return b.slice(0)},blob:function(b,g){return b.slice(0,
b.size,b.type)},dataView:function(b,g){return new g.Constructor(b.buffer.slice(0))},date:function(b,g){return new g.Constructor(b.getTime())},error:Nh,map:wh,object:Wx?Yh:li,regExp:function(b,g){g=new g.Constructor(b.source,JB(b));g.lastIndex=b.lastIndex;return g},set:df},iC=iv({},Xx,{array:function(b,g){var n=new g.Constructor;g.cache.set(b,n);return fi(b,n,g)},map:function(b,g){return fi(b,wh(b,g),g)},object:function(b,g){var n=Hf(g.prototype);g.cache.set(b,n);return fi(b,n,g)},set:function(b,g){return fi(b,
df(b,g),g)}});Oh(iv({},iC,{}));var jC=Oh({}),Yx=Ja($c()),cC=Ja(Od()),Hq=jC,Fn=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const n=b.ownerDocument,J=n.activeElement;J!==b&&b.focus();n.execCommand("insertText",!1,g)||Fn.insertTextFirefox(b,g);J===n.body?b.blur():J instanceof HTMLElement&&J!==b&&J.focus()}static set(b,g){b.select();Fn.insert(b,
g)}static getSelection(b){const {selectionStart:g,selectionEnd:n}=b;return b.value.slice(g?g:void 0,n?n:void 0)}static wrapSelection(b,g,n){const {selectionStart:J,selectionEnd:X}=b,la=Fn.getSelection(b);Fn.insert(b,g+la+(null!=n?n:g));b.selectionStart=(J||0)+g.length;b.selectionEnd=(X||0)+g.length}static replace(b,g,n){let J=0;b.value.replace(g,(...X)=>{const la=J+X[X.length-2],va=X[0].length;b.selectionStart=la;b.selectionEnd=la+va;X="string"===typeof n?n:n(...X);Fn.insert(b,X);b.selectionStart=
la;J+=X.length-va;return X})}static findLineEnd(b,g){const n=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(n)?g:n+1}static indent(b){var g;const {selectionStart:n,selectionEnd:J,value:X}=b;var la=X.slice(n,J);if((la=null==(g=/\n/g.exec(la))?void 0:g.length)&&0<la){g=X.lastIndexOf("\n",n-1)+1;var va=b.value.slice(g,J-1);la=va.replace(/^|\n/g,`$&${Fn.INDENT}`);va=la.length-va.length;b.setSelectionRange(g,J-1);Fn.insert(b,la);b.setSelectionRange(n+1,J+va)}else Fn.insert(b,Fn.INDENT)}static unindent(b){const {selectionStart:g,
selectionEnd:n,value:J}=b;var X=J.lastIndexOf("\n",g-1)+1;const la=Fn.findLineEnd(J,n);var va=b.value.slice(X,la);const La=va.replace(/(^|\n)(\t| {1,2})/g,"$1");va=va.length-La.length;b.setSelectionRange(X,la);Fn.insert(b,La);X=(X=/\t| {1,2}/.exec(J.slice(X,g)))?X[0].length:0;b.setSelectionRange(g-X,Math.max(g-X,n-va))}static normalizeText(b){return b.replace(Fn.fixNewLines,"\n")}},vr=Fn;ia(vr,"fixNewLines",/\r?\n|\r/g);ia(vr,"INDENT","  ");var Lp;"undefined"!==typeof window&&(Lp=zj());var jv=new Map,
Kp=xk()?"⌘":"Ctrl",cD=class extends sh{},Ay=Ja(V(22)),dD=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var dy=Ja(V(22)),nv={},us=Ja(V(22)),nC=b=>{for(b=b.parentElement;b&&b!==document.body;){const {overflowY:g}=window.getComputedStyle(b);if(b.scrollHeight>b.clientHeight&&("auto"===g||"scroll"===g||"overlay"===g))return b;b=b.parentElement}return document},mv=Ja(V(22)),lv=new Map,lC={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",
selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},mC=((b,...g)=>b.reduce((n,J,X)=>n+J+(X<g.length?g[X]:""),""))`
  .tl-container {
    --tl-cursor: inherit;
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: var(--tl-cursor) !important;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-touch-callout: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,ey=Ja(V(22)),cy=Ja(V(22)),kv={},Lk={toVector(b,g){void 0===b&&(b=g);return Array.isArray(b)?b:[b,b]},add(b,g){return[b[0]+g[0],b[1]+g[1]]},sub(b,g){return[b[0]-g[0],b[1]-g[1]]},addTo(b,g){b[0]+=g[0];b[1]+=g[1]},subTo(b,g){b[0]-=g[0];b[1]-=g[1]}},by={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},kC=["enter","leave"],ay=["gotpointercapture","lostpointercapture"],
$x=class{constructor(b,g,n){this.ctrl=b;this.args=g;this.key=n;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(b){this.ctrl.state[this.key]=b}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:b,
shared:g,ingKey:n,args:J}=this;g[n]=b._active=b.active=b._blocked=b._force=!1;b._step=[!1,!1];b.intentional=!1;b._movement=[0,0];b._distance=[0,0];b._direction=[0,0];b._delta=[0,0];b._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];b.args=J;b.axis=void 0;b.memo=void 0;b.elapsedTime=0;b.direction=[0,0];b.distance=[0,0];b.overflow=[0,0];b._movementBound=[!1,!1];b.velocity=[0,0];b.movement=[0,0];b.delta=[0,0];b.timeStamp=0}start(b){const g=this.state,n=this.config;g._active||(this.reset(),this.computeInitial(),
g._active=!0,g.target=b.target,g.currentTarget=b.currentTarget,g.lastOffset=n.from?Jh(n.from,g):g.offset,g.offset=g.lastOffset);g.startTime=g.timeStamp=b.timeStamp}computeValues(b){const g=this.state;g._values=b;g.values=this.config.transform(b)}computeInitial(){const b=this.state;b._initial=b._values;b.initial=b.values}compute(b){const {state:g,config:n,shared:J}=this;g.args=this.args;var X=0;if(b){g.event=b;n.preventDefault&&b.cancelable&&g.event.preventDefault();g.type=b.type;J.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;J.locked=!!document.pointerLockElement;X=Object;var la=X.assign,va={};"buttons"in b&&(va.buttons=b.buttons);if("shiftKey"in b){const {shiftKey:Wc,altKey:rd,metaKey:$d,ctrlKey:ke}=b;Object.assign(va,{shiftKey:Wc,altKey:rd,metaKey:$d,ctrlKey:ke})}la.call(X,J,va);J.down=J.pressed=1===J.buttons%2||0<J.touches;X=b.timeStamp-g.timeStamp;g.timeStamp=b.timeStamp;g.elapsedTime=g.timeStamp-g.startTime}g._active&&(la=g._delta.map(Math.abs),Lk.addTo(g._distance,la));this.axisIntent&&this.axisIntent(b);
const [La,Wa]=g._movement,[bb,pb]=n.threshold,{_step:Db,values:Qb}=g;n.hasCustomTransform?(!1===Db[0]&&(Db[0]=Math.abs(La)>=bb&&Qb[0]),!1===Db[1]&&(Db[1]=Math.abs(Wa)>=pb&&Qb[1])):(!1===Db[0]&&(Db[0]=Math.abs(La)>=bb&&Math.sign(La)*bb),!1===Db[1]&&(Db[1]=Math.abs(Wa)>=pb&&Math.sign(Wa)*pb));g.intentional=!1!==Db[0]||!1!==Db[1];if(g.intentional){la=[0,0];if(n.hasCustomTransform){const [Wc,rd]=Qb;la[0]=!1!==Db[0]?Wc-Db[0]:0;la[1]=!1!==Db[1]?rd-Db[1]:0}else la[0]=!1!==Db[0]?La-Db[0]:0,la[1]=!1!==Db[1]?
Wa-Db[1]:0;this.restrictToAxis&&!g._blocked&&this.restrictToAxis(la);va=g.offset;var oc=g._active&&!g._blocked||g.active;oc&&(g.first=g._active&&!g.active,g.last=!g._active&&g.active,g.active=J[this.ingKey]=g._active,b&&(g.first&&("bounds"in n&&(g._bounds=Jh(n.bounds,g)),this.setup&&this.setup()),g.movement=la,this.computeOffset()));var [ac,xc]=g.offset,[[pc,Tb],[tc,Qc]]=g._bounds;g.overflow=[ac<pc?-1:ac>Tb?1:0,xc<tc?-1:xc>Qc?1:0];g._movementBound[0]=g.overflow[0]?!1===g._movementBound[0]?g._movement[0]:
g._movementBound[0]:!1;g._movementBound[1]=g.overflow[1]?!1===g._movementBound[1]?g._movement[1]:g._movementBound[1]:!1;g.offset=Ch(g._bounds,g.offset,g._active?n.rubberband||[0,0]:[0,0]);g.delta=Lk.sub(g.offset,va);this.computeMovement();oc&&(!g.last||32<X)&&(g.delta=Lk.sub(g.offset,va),b=g.delta.map(Math.abs),Lk.addTo(g.distance,b),g.direction=g.delta.map(Math.sign),g._direction=g._delta.map(Math.sign),!g.first&&0<X&&(g.velocity=[b[0]/X,b[1]/X]))}}emit(){const b=this.state;var g=this.shared;const n=
this.config;b._active||this.clean();if(!b._blocked&&b.intentional||b._force||n.triggerAllEvents)g=this.handler(Dg(Dg(Dg({},g),b),{},{[this.aliasKey]:b.values})),void 0!==g&&(b.memo=g)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},xs=class extends $x{constructor(...b){super(...b);Ug(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Lk.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
Lk.sub(this.state.offset,this.state.lastOffset)}axisIntent(b){const g=this.state,n=this.config;!g.axis&&b&&(b="object"===typeof n.axisThreshold?n.axisThreshold[Ih(b)]:n.axisThreshold,g.axis=$i(g._movement,b));g._blocked=(n.lockDirection||!!n.axis)&&!g.axis||!!n.axis&&n.axis!==g.axis}restrictToAxis(b){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":b[1]=0;break;case "y":b[0]=0}}},IC=b=>b,gy={enabled(b=!0){return b},eventOptions(b,g,n){return Dg(Dg({},n.shared.eventOptions),
b)},preventDefault(b=!1){return b},triggerAllEvents(b=!1){return b},rubberband(b=0){switch(b){case !0:return[.15,.15];case !1:return[0,0];default:return Lk.toVector(b)}},from(b){if("function"===typeof b)return b;if(null!=b)return Lk.toVector(b)},transform(b,g,n){b=b||n.shared.transform;this.hasCustomTransform=!!b;return b||IC},threshold(b){return Lk.toVector(b,0)}},Iq=Dg(Dg({},gy),{},{axis(b,g,{axis:n}){this.lockDirection="lock"===n;if(!this.lockDirection)return n},axisThreshold(b=0){return b},bounds(b=
{}){if("function"===typeof b)return la=>Iq.bounds(b(la));if("current"in b)return()=>b.current;if("function"===typeof HTMLElement&&b instanceof HTMLElement)return b;const {left:g=-Infinity,right:n=Infinity,top:J=-Infinity,bottom:X=Infinity}=b;return[[g,n],[J,X]]}}),hy={ArrowRight:(b=1)=>[10*b,0],ArrowLeft:(b=1)=>[-10*b,0],ArrowUp:(b=1)=>[0,-10*b],ArrowDown:(b=1)=>[0,10*b]},KC=class extends xs{constructor(...b){super(...b);Ug(this,"ingKey","dragging")}reset(){super.reset();const b=this.state;b._pointerId=
void 0;b._pointerActive=!1;b._keyboardActive=!1;b._preventScroll=!1;b._delayed=!1;b.swipe=[0,0];b.tap=!1;b.canceled=!1;b.cancel=this.cancel.bind(this)}setup(){const b=this.state;if(b._bounds instanceof HTMLElement){const g=b._bounds.getBoundingClientRect(),n=b.currentTarget.getBoundingClientRect();b._bounds=Iq.bounds({left:g.left-n.left+b.offset[0],right:g.right-n.right+b.offset[0],top:g.top-n.top+b.offset[1],bottom:g.bottom-n.bottom+b.offset[1]})}}cancel(){const b=this.state;b.canceled||(b.canceled=
!0,b._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(b){const g=this.config,n=this.state;if(null==b.buttons||(Array.isArray(g.pointerButtons)?g.pointerButtons.includes(b.buttons):-1===g.pointerButtons||g.pointerButtons===b.buttons)){var J=this.ctrl.setEventIds(b);g.pointerCapture&&b.target.setPointerCapture(b.pointerId);
J&&1<J.size&&n._pointerActive||(this.start(b),this.setupPointer(b),n._pointerId=Nj(b),n._pointerActive=!0,this.computeValues(gi(b)),this.computeInitial(),g.preventScrollAxis&&"mouse"!==Ih(b)?(n._active=!1,this.setupScrollPrevention(b)):0<g.delay?(this.setupDelayTrigger(b),g.triggerAllEvents&&(this.compute(b),this.emit())):this.startPointerDrag(b))}}startPointerDrag(b){const g=this.state;g._active=!0;g._preventScroll=!0;g._delayed=!1;this.compute(b);this.emit()}pointerMove(b){const g=this.state,n=
this.config;if(g._pointerActive&&(g.type!==b.type||b.timeStamp!==g.timeStamp)){var J=Nj(b);if(void 0===g._pointerId||J===g._pointerId)J=gi(b),document.pointerLockElement===b.target?g._delta=[b.movementX,b.movementY]:(g._delta=Lk.sub(J,g._values),this.computeValues(J)),Lk.addTo(g._movement,g._delta),this.compute(b),g._delayed&&g.intentional?(this.timeoutStore.remove("dragDelay"),g.active=!1,this.startPointerDrag(b)):n.preventScrollAxis&&!g._preventScroll?g.axis&&(g.axis===n.preventScrollAxis||"xy"===
n.preventScrollAxis?(g._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(b))):this.emit()}}pointerUp(b){this.ctrl.setEventIds(b);try{this.config.pointerCapture&&b.target.hasPointerCapture(b.pointerId)&&b.target.releasePointerCapture(b.pointerId)}catch(va){}const g=this.state,n=this.config;if(g._active&&g._pointerActive){var J=Nj(b);if(void 0===g._pointerId||J===g._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(b);var [X,la]=g._distance;
g.tap=X<=n.tapsThreshold&&la<=n.tapsThreshold;if(g.tap&&n.filterTaps)g._force=!0;else{const [va,La]=g.direction,[Wa,bb]=g.velocity,[pb,Db]=g.movement,[Qb,oc]=n.swipe.velocity,[ac,xc]=n.swipe.distance;g.elapsedTime<n.swipe.duration&&(Math.abs(Wa)>Qb&&Math.abs(pb)>ac&&(g.swipe[0]=va),Math.abs(bb)>oc&&Math.abs(Db)>xc&&(g.swipe[1]=La))}this.emit()}}}pointerClick(b){!this.state.tap&&0<b.detail&&(b.preventDefault(),b.stopPropagation())}setupPointer(b){const g=this.config,n=g.device;g.pointerLock&&b.currentTarget.requestPointerLock();
g.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(b){this.state._preventScroll&&b.cancelable&&b.preventDefault()}setupScrollPrevention(b){this.state._preventScroll=
!1;"persist"in b&&"function"===typeof b.persist&&b.persist();const g=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",g);this.eventStore.add(this.sharedConfig.window,"touch","cancel",g);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,b)}setupDelayTrigger(b){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(b)},this.config.delay)}keyDown(b){const g=hy[b.key];if(g){const n=this.state,J=b.shiftKey?10:b.altKey?.1:1;this.start(b);n._delta=g(J);n._keyboardActive=!0;Lk.addTo(n._movement,n._delta);this.compute(b);this.emit()}}keyUp(b){b.key in hy&&(this.state._keyboardActive=!1,this.setActive(),this.compute(b),this.emit())}bind(b){const g=this.config.device;b(g,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(b(g,"change",this.pointerMove.bind(this)),b(g,"end",this.pointerUp.bind(this)),
b(g,"cancel",this.pointerUp.bind(this)),b("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(b("key","down",this.keyDown.bind(this)),b("key","up",this.keyUp.bind(this)));this.config.filterTaps&&b("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Jq="undefined"!==typeof window&&window.document&&window.document.createElement;try{var iy="constructor"in GestureEvent}catch(b){iy=!1}var LC=iy,vs=Jq&&"ontouchstart"in window||Jq&&1<window.navigator.maxTouchPoints,jy=Jq&&
"ontouchstart"in window||Jq&&1<window.navigator.maxTouchPoints,ky=Jq&&"onpointerdown"in window,MC=Jq&&"exitPointerLock"in window.document,ly={mouse:0,touch:0,pen:8},NC=Dg(Dg({},Iq),{},{device(b,g,{pointer:{touch:n=!1,lock:J=!1,mouse:X=!1}={}}){this.pointerLock=J&&MC;return vs&&n?"touch":this.pointerLock?"mouse":ky&&!X?"pointer":vs?"touch":"mouse"},preventScrollAxis(b,g,{preventScroll:n}){this.preventScrollDelay="number"===typeof n?n:n||void 0===n&&b?250:void 0;if(jy&&!1!==n)return b?b:void 0!==n?
"y":void 0},pointerCapture(b,g,{pointer:{capture:n=!0,buttons:J=1,keys:X=!0}={}}){this.pointerButtons=J;this.keys=X;return!this.pointerLock&&"pointer"===this.device&&n},threshold(b,g,{filterTaps:n=!1,tapsThreshold:J=3,axis:X}){b=Lk.toVector(b,n?J:X?1:0);this.filterTaps=n;this.tapsThreshold=J;return b},swipe({velocity:b=.5,distance:g=50,duration:n=250}={}){return{velocity:this.transform(Lk.toVector(b)),distance:this.transform(Lk.toVector(g)),duration:n}},delay(b=0){switch(b){case !0:return 180;case !1:return 0;
default:return b}},axisThreshold(b){return b?Dg(Dg({},ly),b):ly}}),HC=class extends $x{constructor(...b){super(...b);Ug(this,"ingKey","pinching");Ug(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const b=this.state;b._touchIds=[];b.canceled=!1;b.cancel=this.cancel.bind(this);b.turns=0}computeOffset(){const {type:b,movement:g,lastOffset:n}=this.state;this.state.offset="wheel"===b?Lk.add(g,n):[(1+g[0])*n[0],g[1]+
n[1]]}computeMovement(){const {offset:b,lastOffset:g}=this.state;this.state.movement=[b[0]/g[0],b[1]-g[1]]}axisIntent(){const b=this.state,[g,n]=b._movement;if(!b.axis){const J=30*Math.abs(g)-Math.abs(n);0>J?b.axis="angle":0<J&&(b.axis="scale")}}restrictToAxis(b){this.config.lockDirection&&("scale"===this.state.axis?b[1]=0:"angle"===this.state.axis&&(b[0]=0))}cancel(){const b=this.state;b.canceled||setTimeout(()=>{b.canceled=!0;b._active=!1;this.compute();this.emit()},0)}touchStart(b){this.ctrl.setEventIds(b);
var g=this.state;const n=this.ctrl.touchIds;g._active&&g._touchIds.every(J=>n.has(J))||2>n.size||(this.start(b),g._touchIds=Array.from(n).slice(0,2),g=Am(b,g._touchIds),this.pinchStart(b,g))}pointerStart(b){if(null==b.buttons||1===b.buttons%2){this.ctrl.setEventIds(b);b.target.setPointerCapture(b.pointerId);var g=this.state,n=g._pointerEvents,J=this.ctrl.pointerIds;g._active&&Array.from(n.keys()).every(X=>J.has(X))||(2>n.size&&n.set(b.pointerId,b),2>g._pointerEvents.size||(this.start(b),g=tj(...Array.from(n.values())),
this.pinchStart(b,g)))}}pinchStart(b,g){this.state.origin=g.origin;this.computeValues([g.distance,g.angle]);this.computeInitial();this.compute(b);this.emit()}touchMove(b){if(this.state._active){var g=Am(b,this.state._touchIds);this.pinchMove(b,g)}}pointerMove(b){var g=this.state._pointerEvents;g.has(b.pointerId)&&g.set(b.pointerId,b);this.state._active&&(g=tj(...Array.from(g.values())),this.pinchMove(b,g))}pinchMove(b,g){const n=this.state,J=g.angle-n._values[1];let X=0;270<Math.abs(J)&&(X+=Math.sign(J));
this.computeValues([g.distance,g.angle-360*X]);n.origin=g.origin;n.turns=X;n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]];this.compute(b);this.emit()}touchEnd(b){this.ctrl.setEventIds(b);this.state._active&&this.state._touchIds.some(g=>!this.ctrl.touchIds.has(g))&&(this.state._active=!1,this.compute(b),this.emit())}pointerEnd(b){const g=this.state;this.ctrl.setEventIds(b);try{b.target.releasePointerCapture(b.pointerId)}catch(n){}g._pointerEvents.has(b.pointerId)&&g._pointerEvents.delete(b.pointerId);
g._active&&2>g._pointerEvents.size&&(g._active=!1,this.compute(b),this.emit())}gestureStart(b){b.cancelable&&b.preventDefault();const g=this.state;g._active||(this.start(b),this.computeValues([b.scale,b.rotation]),g.origin=[b.clientX,b.clientY],this.compute(b),this.emit())}gestureMove(b){b.cancelable&&b.preventDefault();if(this.state._active){var g=this.state;this.computeValues([b.scale,b.rotation]);g.origin=[b.clientX,b.clientY];var n=g._movement;g._movement=[b.scale-1,b.rotation];g._delta=Lk.sub(g._movement,
n);this.compute(b);this.emit()}}gestureEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}wheel(b){const g=this.config.modifierKey;if(!g||b[g])this.state._active?this.wheelChange(b):this.wheelStart(b),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(b){this.start(b);this.wheelChange(b)}wheelChange(b){"uv"in b||b.cancelable&&b.preventDefault();const g=this.state;g._delta=[-Oj(b)[1]/100*g.offset[0],0];Lk.addTo(g._movement,g._delta);mi(g);this.state.origin=
[b.clientX,b.clientY];this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){const g=this.config.device;g&&(b(g,"start",this[g+"Start"].bind(this)),b(g,"change",this[g+"Move"].bind(this)),b(g,"end",this[g+"End"].bind(this)),b(g,"cancel",this[g+"End"].bind(this)));this.config.pinchOnWheel&&b("wheel","",this.wheel.bind(this),{passive:!1})}},OC=Dg(Dg({},gy),{},{device(b,g,{shared:n,pointer:{touch:J=!1}={}}){if(n.target&&!vs&&LC)return"gesture";
if(vs&&J)return"touch";if(jy){if(ky)return"pointer";if(vs)return"touch"}},bounds(b,g,{scaleBounds:n={},angleBounds:J={}}){const X=va=>{va=Jh(n,va);va=Object.assign({},{min:-Infinity,max:Infinity},va||{});return[va.min,va.max]},la=va=>{va=Jh(J,va);va=Object.assign({},{min:-Infinity,max:Infinity},va||{});return[va.min,va.max]};return"function"!==typeof n&&"function"!==typeof J?[X(),la()]:va=>[X(va),la(va)]},threshold(b,g,n){this.lockDirection="lock"===n.axis;return Lk.toVector(b,this.lockDirection?
[.1,3]:0)},modifierKey(b){return void 0===b?"ctrlKey":b},pinchOnWheel(b=!0){return b}}),JC=class extends xs{constructor(...b){super(...b);Ug(this,"ingKey","moving")}move(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.state._active?this.moveChange(b):this.moveStart(b),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(b){this.start(b);this.computeValues(gi(b));this.compute(b);this.computeInitial();this.emit()}moveChange(b){if(this.state._active){var g=gi(b),n=this.state;
n._delta=Lk.sub(g,n._values);Lk.addTo(n._movement,n._delta);this.computeValues(g);this.compute(b);this.emit()}}moveEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}bind(b){b("pointer","change",this.move.bind(this));b("pointer","leave",this.moveEnd.bind(this))}},FC=Dg(Dg({},Iq),{},{mouseOnly:(b=!0)=>b}),GC=class extends xs{constructor(...b){super(...b);Ug(this,"ingKey","scrolling")}scroll(b){this.state._active||this.start(b);this.scrollChange(b);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(b){b.cancelable&&b.preventDefault();const g=this.state;var n,J;const {scrollX:X,scrollY:la,scrollLeft:va,scrollTop:La}=b.currentTarget;var Wa=[null!==(n=null!==X&&void 0!==X?X:va)&&void 0!==n?n:0,null!==(J=null!==la&&void 0!==la?la:La)&&void 0!==J?J:0];g._delta=Lk.sub(Wa,g._values);Lk.addTo(g._movement,g._delta);this.computeValues(Wa);this.compute(b);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("scroll",
"",this.scroll.bind(this))}},BC=Iq,CC=class extends xs{constructor(...b){super(...b);Ug(this,"ingKey","wheeling")}wheel(b){this.state._active||this.start(b);this.wheelChange(b);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(b){const g=this.state;g._delta=Oj(b);Lk.addTo(g._movement,g._delta);mi(g);this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("wheel","",this.wheel.bind(this))}},DC=Iq,yC=class extends xs{constructor(...b){super(...b);
Ug(this,"ingKey","hovering")}enter(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.start(b),this.computeValues(gi(b)),this.compute(b),this.emit())}leave(b){if(!this.config.mouseOnly||"mouse"===b.pointerType){var g=this.state;if(g._active){g._active=!1;var n=gi(b);g._movement=g._delta=Lk.sub(n,g._values);this.computeValues(n);this.compute(b);g.delta=g.movement;this.emit()}}}bind(b){b("pointer","enter",this.enter.bind(this));b("pointer","leave",this.leave.bind(this))}},zC=Dg(Dg({},Iq),{},{mouseOnly:(b=
!0)=>b}),pv=new Map,qv=new Map,uC={key:"drag",engine:KC,resolver:NC},vC={key:"hover",engine:yC,resolver:zC},wC={key:"move",engine:JC,resolver:FC},xC={key:"pinch",engine:HC,resolver:OC},tC={key:"scroll",engine:GC,resolver:BC},rC={key:"wheel",engine:CC,resolver:DC},ov=Ja(V(22)),sC={target(b){if(b)return()=>"current"in b?b.current:b},enabled(b=!0){return b},window(b=Jq?window:void 0){return b},eventOptions({passive:b=!0,capture:g=!1}={}){return{passive:b,capture:g}},transform(b){return b}},qC=["target",
"eventOptions","window","enabled","transform"],To=class{constructor(b,g){Ug(this,"_listeners",new Set);this._ctrl=b;this._gestureKey=g}add(b,g,n,J,X){const la=this._listeners,va=Fi(g,n),La=Dg(Dg({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),X);b.addEventListener(va,J,La);const Wa=()=>{b.removeEventListener(va,J,La);la.delete(Wa)};la.add(Wa);return Wa}clean(){this._listeners.forEach(b=>b());this._listeners.clear()}},qo=class{constructor(){Ug(this,"_timeouts",new Map)}add(b,
g,n=140,...J){this.remove(b);this._timeouts.set(b,window.setTimeout(g,n,...J))}remove(b){(b=this._timeouts.get(b))&&window.clearTimeout(b)}clean(){this._timeouts.forEach(b=>void window.clearTimeout(b));this._timeouts.clear()}},EC=class{constructor(b){Ug(this,"gestures",new Set);Ug(this,"_targetEventStore",new To(this));Ug(this,"gestureEventStores",{});Ug(this,"gestureTimeoutStores",{});Ug(this,"handlers",{});Ug(this,"config",{});Ug(this,"pointerIds",new Set);Ug(this,"touchIds",new Set);Ug(this,"state",
{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});b.drag&&Bg(this,"drag");b.wheel&&Bg(this,"wheel");b.scroll&&Bg(this,"scroll");b.move&&Bg(this,"move");b.pinch&&Bg(this,"pinch");b.hover&&Bg(this,"hover")}setEventIds(b){if("touches"in b)return this.touchIds=new Set(Jl(b));if("pointerId"in b)return"pointerup"===b.type||"pointercancel"===b.type?this.pointerIds.delete(b.pointerId):"pointerdown"===b.type&&this.pointerIds.add(b.pointerId),this.pointerIds}applyHandlers(b,g){this.handlers=b;this.nativeHandlers=
g}applyConfig(b,g){this.config=gj(b,g,this.config)}clean(){this._targetEventStore.clean();for(const b of this.gestures)this.gestureEventStores[b].clean(),this.gestureTimeoutStores[b].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...b){var g=this.config.shared;const n={};let J;if(g.target&&(J=g.target(),!J))return;if(g.enabled){for(const X of this.gestures){const la=this.config[X],va=fy(n,la.eventOptions,!!J);la.enabled&&(new (pv.get(X))(this,
b,X)).bind(va)}g=fy(n,g.eventOptions,!!J);for(const X in this.nativeHandlers)g(X,"",la=>this.nativeHandlers[X](Dg(Dg({},this.state.shared),{},{event:la,args:b})),void 0,!0)}for(const X in n)n[X]=Kh(...n[X]);if(!J)return n;for(const X in n){const {device:la,capture:va,passive:La}=Hh(X);this._targetEventStore.add(J,la,"",n[X],{capture:va,passive:La})}}},fy=(b,g,n)=>(J,X,la,va={},La=!1)=>{var Wa,bb;const pb=null!==(Wa=va.capture)&&void 0!==Wa?Wa:g.capture;va=null!==(bb=va.passive)&&void 0!==bb?bb:g.passive;
J=La?J:yk(J,X,pb);n&&va&&(J+="Passive");b[J]=b[J]||[];b[J].push(la)},pC=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,zt=Ja(V(22)),wv=Ja(V(22)),rv=Ja(V(22)),sv=Ja(V(22)),AC=Ja(V(22)),tv=Ja(V(22)),wt=Ja(V(22)),QC=Ja(V(22)),eD={none:(b,g)=>"none",["default"]:(b,g)=>"default",pointer:(b,g)=>"pointer",crosshair:(b,g)=>"crosshair",move:(b,g)=>"move",wait:(b,g)=>"wait",progress:(b,g)=>"progress",grab:(b,g)=>oj('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
b,g),grabbing:(b,g)=>oj("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
b,g),text:(b,g)=>oj("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
b,g),["resize-edge"]:(b,g)=>oj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["resize-corner"]:(b,g)=>oj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b,g),["ew-resize"]:(b,g)=>oj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["ns-resize"]:(b,g)=>oj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
b+90,g),["nesw-resize"]:(b,g)=>oj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",b,g),["nwse-resize"]:(b,g)=>oj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b+90,g),rotate:(b,g)=>oj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+45,g),["nwse-rotate"]:(b,g)=>oj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b,g),["nesw-rotate"]:(b,g)=>oj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+90,g),["senw-rotate"]:(b,g)=>oj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+180,g),["swne-rotate"]:(b,g)=>oj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+270,g)},XC=Ja(V(22));Ja(V(22));var By=V(22),Cy=Ja(V(22));if(!V(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!og)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var fD=V(31),ys=Ja(V(22)),Dy="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,gD=1E4,hD=function(b){var g="function"===typeof Symbol&&Symbol.iterator,n=g&&b[g],J=0;if(n)return n.call(b);if(b&&"number"===typeof b.length)return{next:function(){b&&J>=
b.length&&(b=void 0);return{value:b&&b[J++],done:!b}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.");},Ey=Dy?ng(Dy):dm(),iD=Ey.addReactionToTrack,jD=Ey.recordReactionAsCommitted,Fy=function(b,g){var n="function"===typeof Symbol&&b[Symbol.iterator];if(!n)return b;b=n.call(b);var J,X=[];try{for(;(void 0===g||0<g--)&&!(J=b.next()).done;)X.push(J.value)}catch(va){var la={error:va}}finally{try{J&&!J.done&&(n=b["return"])&&n.call(b)}finally{if(la)throw la.error;}}return X},
kD=function(){return function(){}}(),tr=V(22),sy="function"===typeof Symbol&&Symbol.for,ry=sy?Symbol.for("react.forward_ref"):"function"===typeof tr.forwardRef&&(0,tr.forwardRef)(function(b){return null}).$$typeof,qy=sy?Symbol.for("react.memo"):"function"===typeof tr.memo&&(0,tr.memo)(function(b){return null}).$$typeof,VC={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Oi.displayName="Observer";V(22);V(22);V(22);(function(b){b||=Qj;Ne({reactionScheduler:b})})(fD.unstable_batchedUpdates);
var WC=Ja(V(22));xb=V(586);var so=WC.forwardRef(function(b,g){var {children:n,opacity:J,centered:X,className:la=""}=b,va=Qf(b,["children","opacity","centered","className"]);return(0,xb.jsx)(Oi,{children:()=>(0,xb.jsx)("div",{ref:g,className:`tl-positioned-div ${la}`,style:J?{opacity:J}:void 0,draggable:!1,children:(0,xb.jsx)("div",of(xe({className:`tl-positioned-inner ${X?"tl-centered":""}`},va),{children:n}))})})}),TC=Ja(V(22));xb=V(586);var ro=TC.forwardRef(function(b,g){var {id:n,className:J="",
style:X,children:la}=b,va=Qf(b,["id","className","style","children"]);return(0,xb.jsx)(Oi,{children:()=>(0,xb.jsx)("svg",{ref:g,style:X,className:`tl-positioned-svg ${J}`,children:(0,xb.jsx)("g",of(xe({id:n,className:"tl-centered-g"},va),{children:la}))})})}),ws=Ja(V(22)),py=Ja(V(22)),xt=Ja(V(22));xb=V(586);var Mp=pf(function(b){var {id:g,bounds:n,zIndex:J,rotation:X=0,className:la="",children:va}=b;b=Qf(b,"id bounds zIndex rotation className children".split(" "));const La=xt.useRef(null);xt.useLayoutEffect(()=>
{La.current.style.transform=`translate(
        calc(${n.minX}px - var(--tl-padding)),
        calc(${n.minY}px - var(--tl-padding)))
        rotate(${X+(n.rotation||0)}rad)`},[n.minX,n.minY,X,n.rotation]);xt.useLayoutEffect(()=>{const Wa=La.current;Wa.style.width=`calc(${Math.floor(n.width)}px + (var(--tl-padding) * 2))`;Wa.style.height=`calc(${Math.floor(n.height)}px + (var(--tl-padding) * 2))`},[n.width,n.height]);xt.useLayoutEffect(()=>{const Wa=La.current;void 0!==J&&(Wa.style.zIndex=J.toString())},[J]);return(0,xb.jsx)("div",of(xe({id:g,ref:La,className:`tl-positioned ${la}`,"aria-label":"container"},b),{children:va}))}),
UC=Ja(V(22));xb=V(586);var uv=b=>b.stopPropagation(),lD=pf(function({shapes:b,hidden:g,bounds:n,rotation:J=0}){const {components:{ContextBar:X},viewport:{bounds:la,camera:{point:[va,La],zoom:Wa}}}=Mi(),bb=UC.useRef(null);var pb=se.getRotatedBounds(n,J);pb=se.multiplyBounds(pb,Wa);jk(bb,n,J,10005);if(!X)throw Error("Expected a ContextBar component.");const Db=se.translateBounds(pb,[va*Wa,La*Wa]);return(0,xb.jsx)("div",{ref:bb,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container",
onPointerMove:uv,onPointerUp:uv,onPointerDown:uv,children:(0,xb.jsx)(X,{hidden:g,shapes:b,bounds:n,offsets:{left:Db.minX,right:la.width-Db.maxX,top:Db.minY,bottom:la.height-Db.maxY,width:Db.width,height:Db.height},scaledBounds:pb,rotation:J})})}),Gy=Ja(V(22));xb=V(586);var RC=pf(function({children:b}){const g=Gy.useRef(null),{viewport:n}=Mi();Gy.useEffect(()=>Md(()=>{const J=g.current;if(J){var {zoom:X,point:la}=n.camera;J.style.setProperty("transform",`scale(${X}) translate3d(${la[0]}px, ${la[1]}px, 0)`)}}),
[]);return(0,xb.jsx)("div",{ref:g,className:"tl-absolute tl-layer",children:b})});xb=V(586);var oy=pf(function({shape:b,isHovered:g=!1,isSelected:n=!1,isBinding:J=!1,isEditing:X=!1,meta:la}){const {bounds:va,props:{scale:La,rotation:Wa=0},ReactIndicator:bb}=b;return(0,xb.jsx)(Mp,{"data-type":"Indicator",bounds:va,rotation:Wa,scale:La,zIndex:X?1E3:1E4,children:(0,xb.jsx)(ro,{children:(0,xb.jsx)("g",{className:`tl-indicator-container ${n?"tl-selected":"tl-hovered"}`,children:(0,xb.jsx)(bb,{isEditing:X,
isBinding:J,isHovered:g,isSelected:n,isErasing:!1,meta:la})})})})}),Hy=Ja(V(22));xb=V(586);var mD=pf(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:n}},components:{QuickLinks:J}}=Mi();var X=Fg();const la=ck(g);if(!J)throw Error("Expected a QuickLinks component.");X=50>b.height*n||!X.selectedShapesArray.includes(g);return(0,xb.jsx)(Mp,{bounds:b,className:"tl-quick-links-container",children:(0,xb.jsx)(so,{children:(0,xb.jsx)("span",of(xe({style:{position:"absolute",top:"100%",pointerEvents:"all",
transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},la),{onPointerDown:va=>va.stopPropagation(),children:(0,xb.jsx)(J,{className:"tl-backlinks-count "+(X?"tl-backlinks-count-rounded":""),id:g.id,shape:g})}))})})});xb=V(586);var nD=pf(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:n}},components:{BacklinksCount:J}}=Mi();var X=Fg();if(!J)throw Error("Expected a BacklinksCount component.");const la=va=>va.stopPropagation();X=50>b.height*n||!X.selectedShapesArray.includes(g);
return(0,xb.jsx)(Mp,{bounds:b,className:"tl-backlinks-count-container",children:(0,xb.jsx)(so,{children:(0,xb.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:la,onWheelCapture:la,title:"Shape Backlinks",children:(0,xb.jsx)(J,{className:"tl-backlinks-count "+(X?"tl-backlinks-count-rounded":""),id:g.id,shape:g})})})})}),oD=Ja(V(22));xb=V(586);var pD=pf(function({bounds:b,hidden:g,shapes:n,
rotation:J=0,detail:X="size"}){const {components:{SelectionDetail:la},viewport:{camera:{zoom:va}}}=Mi(),La=oD.useRef(null),Wa=se.multiplyBounds(b,va);jk(La,b,J,10003);if(!la)throw Error("Expected a SelectionDetail component.");return(0,xb.jsx)("div",{ref:La,className:`tl-counter-scaled-positioned ${g?"tl-fade-out":""}`,"aria-label":"bounds-detail-container",children:(0,xb.jsx)(la,{shapes:n,bounds:b,scaledBounds:Wa,zoom:va,rotation:J,detail:X})})});xb=V(586);var SC=pf(function({shape:b,isHovered:g=
!1,isSelected:n=!1,isBinding:J=!1,isErasing:X=!1,isEditing:la=!1,onEditingEnd:va,asset:La,meta:Wa,zIndex:bb}){const {bounds:pb,props:{rotation:Db,scale:Qb},ReactComponent:oc}=b,ac=ck(b);return(0,xb.jsx)(Mp,{"data-shape-id":b.id,zIndex:bb,"data-type":"Shape",bounds:pb,rotation:Db,scale:Qb,children:(0,xb.jsx)(oc,{meta:Wa,isEditing:la,isBinding:J,isHovered:g,isSelected:n,isErasing:X,events:ac,asset:La,onEditingEnd:va})})});xb=V(586);var Iy=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],qD=pf(function({size:b}){const {viewport:{camera:{point:g,
zoom:n}}}=Mi();return(0,xb.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,xb.jsx)("defs",{children:Iy.map(([J,X,la],va)=>{la=la*b*n;var La=g[0]*n,Wa=g[1]*n;La=0<La?La%la:la+La%la;Wa=0<Wa?Wa%la:la+Wa%la;J=Gl(n,[J,X],[0,1]);return(0,xb.jsx)("pattern",{id:`grid-${va}`,width:la,height:la,patternUnits:"userSpaceOnUse",children:!(2<J||.1>J)&&(0,xb.jsx)("circle",{className:"tl-grid-dot",cx:La,cy:Wa,r:1.5,opacity:Math.max(0,Math.min(J,1))})},`grid-pattern-${va}`)})}),
Iy.map((J,X)=>(0,xb.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${X})`},`grid-rect-${X}`))]})}),Jy=pf(function({size:b}){return(0,xb.jsx)(qD,{size:b})});xb=V(586);var Ky=pf(function({bounds:b}){const g=hk("background");return(0,xb.jsx)(ro,of(xe({},g),{children:(0,xb.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,b.width),height:Math.max(1,b.height),pointerEvents:"all",rx:8,ry:8})}))});V(22);xb=V(586);var Ly=pf(function({scaledBounds:b,shapes:g,detail:n="size",rotation:J=0}){var X;
const la=1===g.length?J:null!=(X=b.rotation)?X:0;return(0,xb.jsx)(so,{centered:!0,children:(0,xb.jsx)("div",{className:"tl-bounds-detail",style:{transform:la<qj||la>3*qj?`rotate(${la}rad) translateY(${b.height/2+24}px)`:`rotate(${Math.PI+la}rad) translateY(${b.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===g.length&&"line"===g[0].type?`${sd.dist(g[0].props.handles.start.point,g[0].props.handles.end.point).toFixed()}`:"size"===n?`${b.width.toFixed()} \xD7 ${b.height.toFixed()}`:
`\u2220${Uk.radiansToDegrees(Uk.clampRadians(J)).toFixed()}\xB0`})})});xb=V(586);var rD={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},At=pf(function({cx:b,cy:g,size:n,targetSize:J,corner:X,isHidden:la}){const va=hk(X);return(0,xb.jsxs)("g",of(xe({opacity:la?0:1},va),{children:[(0,xb.jsx)("rect",{className:"tl-transparent "+(la?"":rD[X]),"aria-label":`${X} target`,x:b-1.25*J,y:g-1.25*J,width:2.5*J,height:2.5*
J,pointerEvents:la?"none":"all"}),(0,xb.jsx)("rect",{className:"tl-corner-handle","aria-label":`${X} handle`,x:b-n/2,y:g-n/2,width:n,height:n,pointerEvents:"none"})]}))});xb=V(586);var sD={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},Bt=pf(function({x:b,y:g,width:n,height:J,targetSize:X,edge:la,disabled:va,isHidden:La}){const Wa=hk(la);return(0,xb.jsx)("rect",xe({pointerEvents:La||va?"none":"all",className:"tl-transparent tl-edge-handle "+
(La?"":sD[la]),"aria-label":`${la} target`,opacity:La?0:1,x:b-X,y:g-X,width:Math.max(1,n+2*X),height:Math.max(1,J+2*X)},Wa))});V(22);xb=V(586);pf(function({cx:b,cy:g,size:n,targetSize:J,isHidden:X}){const la=hk("rotate");return(0,xb.jsxs)("g",of(xe({opacity:X?0:1},la),{children:[(0,xb.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:b,cy:g,r:J,pointerEvents:X?"none":"all"}),(0,xb.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:b,cy:g,r:n/2,pointerEvents:"none"})]}))});
V(22);xb=V(586);var Ct=pf(function({cx:b,cy:g,targetSize:n,corner:J,isHidden:X}){const la=hk(J);return(0,xb.jsx)("g",of(xe({opacity:X?0:1},la),{children:(0,xb.jsx)("rect",{className:"tl-transparent","aria-label":`${J} target`,x:b-2.5*n,y:g-2.5*n,width:3*n,height:3*n,pointerEvents:X?"none":"all"})}))});xb=V(586);var uy=pf(function({bounds:b,showResizeHandles:g,showRotateHandles:n,shapes:J}){var X,la,va=Fg();let {width:La,height:Wa}=b;var bb=va.viewport.camera.zoom;b=8/bb;bb=6/bb;J=1===J.length?J[0].canResize:
[!0,!0];va=null!=(la=null==(X=va.editingShape)?void 0:X.props.borderRadius)?la:0;return(0,xb.jsxs)(ro,{children:[(0,xb.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(La,1),height:Math.max(Wa,1),rx:va,ry:va,pointerEvents:"none"}),(0,xb.jsx)(Bt,{x:2*bb,y:0,width:La-4*bb,height:0,targetSize:bb,edge:"top_edge",disabled:!J[1],isHidden:!g}),(0,xb.jsx)(Bt,{x:La,y:2*bb,width:0,height:Wa-4*bb,targetSize:bb,edge:"right_edge",disabled:!J[0],isHidden:!g}),(0,xb.jsx)(Bt,{x:2*bb,y:Wa,width:La-4*bb,height:0,
targetSize:bb,edge:"bottom_edge",disabled:!J[1],isHidden:!g}),(0,xb.jsx)(Bt,{x:0,y:2*bb,width:0,height:Wa-4*bb,targetSize:bb,edge:"left_edge",disabled:!J[0],isHidden:!g}),(0,xb.jsx)(Ct,{cx:0,cy:0,targetSize:bb,corner:"top_left_resize_corner",isHidden:!n}),(0,xb.jsx)(Ct,{cx:La+2*bb,cy:0,targetSize:bb,corner:"top_right_resize_corner",isHidden:!n}),(0,xb.jsx)(Ct,{cx:La+2*bb,cy:Wa+2*bb,targetSize:bb,corner:"bottom_right_resize_corner",isHidden:!n}),(0,xb.jsx)(Ct,{cx:0,cy:Wa+2*bb,targetSize:bb,corner:"bottom_left_resize_corner",
isHidden:!n}),(null==J?void 0:J.every(pb=>pb))&&(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsx)(At,{cx:0,cy:0,size:b,targetSize:bb,corner:"top_left_corner",isHidden:!g}),(0,xb.jsx)(At,{cx:La,cy:0,size:b,targetSize:bb,corner:"top_right_corner",isHidden:!g}),(0,xb.jsx)(At,{cx:La,cy:Wa,size:b,targetSize:bb,corner:"bottom_right_corner",isHidden:!g}),(0,xb.jsx)(At,{cx:0,cy:Wa,size:b,targetSize:bb,corner:"bottom_left_corner",isHidden:!g})]})]})});xb=V(586);var ty=pf(function({bounds:b}){return(0,xb.jsx)(Mp,
{bounds:b,zIndex:10001,children:(0,xb.jsx)(ro,{children:(0,xb.jsx)("rect",{className:"tl-brush",x:0,y:0,width:b.width,height:b.height})})})});xb=V(586);pf(function(){return(0,xb.jsx)(xb.Fragment,{})});xb=V(586);var xy=pf(function({shape:b,handle:g,id:n}){b=ql(b,n);const [J,X]=g.point;return(0,xb.jsxs)("g",of(xe({className:"tl-handle","aria-label":"handle"},b),{transform:`translate(${J}, ${X})`,children:[(0,xb.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,xb.jsx)("circle",{className:"tl-counter-scaled tl-handle",
pointerEvents:"none",r:4})]}))}),yy=Ja(V(22));xb=V(586);var vv=pf(function({direction:b}){const {viewport:{bounds:g}}=Mi(),n=yy.useRef(null);yy.useLayoutEffect(()=>{const J=n.current;if(J){var X=[g.width/2,g.height/2],la=se.getRectangleSides([12,12],[g.width-24,g.height-24]);for(const [,[va,La]]of la)la=r(X,b,va,La),la.didIntersect&&(la=la.points[0],J.style.setProperty("transform",`translate(${la[0]-6}px,${la[1]-6}px) rotate(${sd.toAngle(b)}rad)`))}},[b,g]);return(0,xb.jsx)("div",{ref:n,className:"tl-direction-indicator",
children:(0,xb.jsx)("svg",{height:12,width:12,children:(0,xb.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});xb=V(586);var YC=pf(function({id:b,className:g,brush:n,shapes:J,assets:X,bindingShapes:la,editingShape:va,hoveredShape:La,selectionBounds:Wa,selectedShapes:bb,erasingShapes:pb,selectionDirectionHint:Db,cursor:Qb="default",cursorRotation:oc=0,selectionRotation:ac=0,showSelection:xc=!0,showHandles:pc=!0,showSelectionRotation:Tb=!1,showResizeHandles:tc=!0,showRotateHandles:Qc=!0,showSelectionDetail:Wc=
!0,showContextBar:rd=!0,showGrid:$d=!0,gridSize:ke=8,onEditingEnd:Fe=dD,theme:Se=Mo,children:mf}){var ff;const Xe=ws.useRef(null),{viewport:Me,components:Uc,meta:Xc}=Mi(),Ad=Fg(),Ed=ws.useCallback(Pe=>{Ad.inputs.updateContainerOffset([Pe.minX,Pe.minY])},[]);Xj(Se,b);zk(Xe);Lj(Xe,Me,Ed);zi(Xe);kk();Tl(Xe,Qb,oc);qm(Xe);Ck(Xe);b=gg();const Pd=(Qb=1===(null==bb?void 0:bb.length)&&bb[0])&&"handles"in Qb.props?null==bb?void 0:bb[0]:void 0,De=ws.useMemo(()=>new Set(bb||[]),[bb]),Ge=ws.useMemo(()=>new Set(pb||
[]),[pb]);Qb=1===(null==bb?void 0:bb.length)?bb[0]:void 0;return(0,xb.jsxs)("div",{ref:Xe,className:`tl-container ${null!=g?g:""}`,children:[(0,xb.jsxs)("div",of(xe({tabIndex:-1,className:"tl-absolute tl-canvas"},b),{children:[$d&&Uc.Grid&&(0,xb.jsx)(Uc.Grid,{size:ke}),(0,xb.jsxs)(RC,{children:[Uc.SelectionBackground&&bb&&Wa&&xc&&(0,xb.jsx)(Mp,{"data-type":"SelectionBackground",bounds:Wa,zIndex:2,children:(0,xb.jsx)(Uc.SelectionBackground,{shapes:bb,bounds:Wa,showResizeHandles:tc,showRotateHandles:Qc})}),
J&&J.map((Pe,Ff)=>(0,xb.jsx)(SC,{shape:Pe,asset:X&&Pe.props.assetId?X[Pe.props.assetId]:void 0,isEditing:Pe===va,isHovered:Pe===La,isBinding:null==la?void 0:la.includes(Pe),isSelected:De.has(Pe),isErasing:Ge.has(Pe),meta:Xc,zIndex:1E3+Ff,onEditingEnd:Fe},"shape_"+Pe.id)),!Ad.isIn("select.pinching")&&(null==bb?void 0:bb.map(Pe=>(0,xb.jsx)(oy,{shape:Pe,isEditing:Pe===va,isHovered:!1,isBinding:!1,isSelected:!0},"selected_indicator_"+Pe.id))),La&&(0,xb.jsx)(oy,{shape:La},"hovered_indicator_"+La.id),Qb&&
Uc.BacklinksCount&&(0,xb.jsx)(nD,{hidden:!1,bounds:Qb.bounds,shape:Qb}),La&&La!==Qb&&Uc.QuickLinks&&(0,xb.jsx)(mD,{hidden:!1,bounds:La.bounds,shape:La}),n&&Uc.Brush&&(0,xb.jsx)(Uc.Brush,{bounds:n}),bb&&Wa&&(0,xb.jsxs)(xb.Fragment,{children:[xc&&Uc.SelectionForeground&&(0,xb.jsx)(Mp,{"data-type":"SelectionForeground",bounds:Wa,zIndex:va&&bb.includes(va)?1002:10002,children:(0,xb.jsx)(Uc.SelectionForeground,{shapes:bb,bounds:Wa,showResizeHandles:tc,showRotateHandles:Qc})}),pc&&Pd&&Uc.Handle&&(0,xb.jsx)(Mp,
{"data-type":"onlySelectedShapeWithHandles",bounds:Wa,zIndex:10003,children:(0,xb.jsx)(ro,{children:Object.entries(null!=(ff=Pd.props.handles)?ff:{}).map(([Pe,Ff])=>ws.createElement(Uc.Handle,{key:`${Ff.id}_handle_${Ff.id}`,shape:Pd,handle:Ff,id:Pe}))})}),bb&&Uc.SelectionDetail&&(0,xb.jsx)(pD,{shapes:bb,bounds:Wa,detail:Tb?"rotation":"size",hidden:!Wc,rotation:ac},"detail"+bb.map(Pe=>Pe.id).join("")),bb&&Uc.ContextBar&&(0,xb.jsx)(lD,{shapes:bb,hidden:!rd,bounds:Qb?Qb.bounds:Wa,rotation:Qb?Qb.props.rotation:
0},"context"+bb.map(Pe=>Pe.id).join(""))]})]}),Db&&Wa&&bb&&(0,xb.jsx)(vv,{direction:Db,bounds:Wa,shapes:bb}),(0,xb.jsx)("div",{id:"tl-dev-tools-canvas-anchor"})]})),mf]})}),wy=Ja(V(22)),vy=Ja(V(22));xb=V(586);pf(function({children:b}){const g=vy.useRef(null),{viewport:n}=Mi();vy.useEffect(()=>Md(()=>{const J=g.current;if(J){var {zoom:X,point:la}=n.camera;J.style.setProperty("transform",`scale(${X}) translateX(${la[0]}px) translateY(${la[1]}px)`)}}),[]);return(0,xb.jsx)("svg",{className:"tl-absolute tl-overlay",
pointerEvents:"none",children:(0,xb.jsx)("g",{ref:g,pointerEvents:"none",children:b})})});xb=V(586);var bD=pf(function(b){const g=nj(b),n=Mj(b.id);Ym(g,b);hj(g,b);return(0,xb.jsx)(n.Provider,{value:g,children:b.children})});xb=V(586);var aD=pf(function({id:b="noid",viewport:g,inputs:n,callbacks:J=Mo,meta:X=Mo,components:la=Mo,children:va}){const [La,Wa]=wy.useState(()=>{const {Brush:pb,ContextBar:Db,DirectionIndicator:Qb,Grid:oc,Handle:ac,SelectionBackground:xc,SelectionDetail:pc,SelectionForeground:Tb}=
la,tc=Qf(la,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:b,viewport:g,inputs:n,callbacks:J,meta:X,components:of(xe({},tc),{Brush:null===pb?void 0:ty,ContextBar:Db,DirectionIndicator:null===Qb?void 0:vv,Grid:null===oc?void 0:Jy,Handle:null===ac?void 0:xy,SelectionBackground:null===xc?void 0:Ky,SelectionDetail:null===pc?void 0:Ly,SelectionForeground:null===Tb?void 0:uy})}});wy.useLayoutEffect(()=>{const {Brush:pb,ContextBar:Db,
DirectionIndicator:Qb,Grid:oc,Handle:ac,SelectionBackground:xc,SelectionDetail:pc,SelectionForeground:Tb}=la,tc=Qf(la,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return Md(()=>{Wa({id:b,viewport:g,inputs:n,callbacks:J,meta:X,components:of(xe({},tc),{Brush:null===pb?void 0:ty,ContextBar:Db,DirectionIndicator:null===Qb?void 0:vv,Grid:null===oc?void 0:Jy,Handle:null===ac?void 0:xy,SelectionBackground:null===xc?void 0:Ky,SelectionDetail:null===
pc?void 0:Ly,SelectionForeground:null===Tb?void 0:uy})})})},[]);const bb=Aj(b);return(0,xb.jsx)(bb.Provider,{value:La,children:va})});xb=V(586);xb=V(586);var $C=pf(function(b){const g=Fg();return(0,xb.jsx)(em,xe({viewport:g.viewport,inputs:g.inputs,callbacks:g._events,brush:g.brush,editingShape:g.editingShape,hoveredShape:g.hoveredShape,bindingShapes:g.bindingShapes,selectionDirectionHint:g.selectionDirectionHint,selectionBounds:g.selectionBounds,selectedShapes:g.selectedShapesArray,erasingShapes:g.erasingShapesArray,
shapes:g.shapes,assets:g.assets,showGrid:g.settings.showGrid,showSelection:g.showSelection,showSelectionRotation:g.showSelectionRotation,showResizeHandles:g.showResizeHandles,showRotateHandles:g.showRotateHandles,showSelectionDetail:g.showSelectionDetail,showContextBar:g.showContextBar,cursor:g.cursors.cursor,cursorRotation:g.cursors.rotation,selectionRotation:g.selectionRotation,onEditingEnd:g.clearEditingState},b))});xb=V(586);var ur=Ja(V(22)),yt=Ja(V(22));xb=V(586);var ZC="add-link block-search block connector internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text whiteboard-element whiteboard".split(" "),
Vh=b=>{var {name:g,className:n}=b;b=Qf(b,["name","className"]);const J=ZC.includes(g)?"tie tie-":"ti ti-";return(0,xb.jsx)("i",xe({className:[J+g,n].join(" ")},b))};xb=V(586);var My=Ja(V(22));xb=V(586);var Ny=({active:b,style:g,icon:n,otherIcon:J,onClick:X})=>{const [la,va]=My.default.useState(!1);My.default.useEffect(()=>{va(!0);const La=setTimeout(()=>{va(!1)},500);return()=>clearTimeout(La)},[b]);return(0,xb.jsx)("button",{"data-active":b,"data-recently-changed":la,style:g,className:"tl-circle-button",
onMouseDown:X,children:(0,xb.jsxs)("div",{className:"tl-circle-button-icons-wrapper","data-icons-count":J?2:1,children:[J&&(0,xb.jsx)(Vh,{name:J}),(0,xb.jsx)(Vh,{name:n})]})})},tD=Ja(V(22));xb=V(586);var Uo=pf(b=>{var {id:g,icon:n,title:J}=b;b=Qf(b,["id","icon","title"]);var X,la;const va=Fg(),La=tD.useCallback(bb=>{(bb=bb.currentTarget.dataset.tool)&&va.selectTool(bb)},[va]),Wa=null==(la=(null==(X=[...va.Tools,er,cr])?void 0:X.find(bb=>bb.id===g)).shortcut)?void 0:la[0];X=Wa?`${J} (${Wa})`:J;return(0,xb.jsx)(Gf,
of(xe({},b),{title:X,"data-tool":g,"data-selected":g===va.selectedTool.id,onClick:La,children:"string"===typeof n?(0,xb.jsx)(Vh,{name:n}):n}))}),Yn=V(22),uD=V(22),Kq=V(22),Dt=V(22),xv=V(22),yv=V(22),vD=V(31),Fm=V(22),Lq=(0,Fm.forwardRef)((b,g)=>{var {children:n}=b;b=Qf(b,["children"]);const J=Fm.Children.toArray(n),X=J.find(Ef);if(X){const la=X.props.children;n=J.map(va=>va===X?1<Fm.Children.count(la)?Fm.Children.only(null):(0,Fm.isValidElement)(la)?la.props.children:null:va);return(0,Fm.createElement)(zv,
wf({},b,{ref:g}),(0,Fm.isValidElement)(la)?(0,Fm.cloneElement)(la,void 0,n):null)}return(0,Fm.createElement)(zv,wf({},b,{ref:g}),n)});Lq.displayName="Slot";var zv=(0,Fm.forwardRef)((b,g)=>{const {children:n}=b;b=Qf(b,["children"]);return(0,Fm.isValidElement)(n)?(0,Fm.cloneElement)(n,of(xe({},ok(b,n.props)),{ref:mk(g,n.ref)})):1<Fm.Children.count(n)?Fm.Children.only(null):null});zv.displayName="SlotClone";var wD=({children:b})=>(0,Fm.createElement)(Fm.Fragment,null,b),xj="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,
g)=>{const n=(0,yv.forwardRef)((J,X)=>{var {asChild:la}=J;J=Qf(J,["asChild"]);la=la?Lq:g;(0,yv.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,yv.createElement)(la,wf({},J,{ref:X}))});n.displayName=`Primitive.${g}`;return of(xe({},b),{[g]:n})},{}),Sg=V(22),Vo=Ja(V(22)),Oy=V(22),xD=(0,Oy.createContext)(void 0),on=V(22),yD=V(22),Py,zD=(0,on.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Av=(0,on.forwardRef)((b,g)=>{var n;const {disableOutsidePointerEvents:J=
!1,onEscapeKeyDown:X,onPointerDownOutside:la,onFocusOutside:va,onInteractOutside:La,onDismiss:Wa}=b,bb=Qf(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),pb=(0,on.useContext)(zD),[Db,Qb]=(0,on.useState)(null),oc=null!==(n=null===Db||void 0===Db?void 0:Db.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,ac]=(0,on.useState)({});g=Kf(g,Qc=>Qb(Qc));n=Array.from(pb.layers);var [xc]=
[...pb.layersWithOutsidePointerEventsDisabled].slice(-1);xc=n.indexOf(xc);const pc=Db?n.indexOf(Db):-1;n=0<pb.layersWithOutsidePointerEventsDisabled.size;const Tb=pc>=xc;xc=aj(Qc=>{const Wc=Qc.target,rd=[...pb.branches].some($d=>$d.contains(Wc));Tb&&!rd&&(null===la||void 0===la||la(Qc),null===La||void 0===La||La(Qc),Qc.defaultPrevented||null===Wa||void 0===Wa||Wa())},oc);const tc=Cj(Qc=>{const Wc=Qc.target;[...pb.branches].some(rd=>rd.contains(Wc))||(null===va||void 0===va||va(Qc),null===La||void 0===
La||La(Qc),Qc.defaultPrevented||null===Wa||void 0===Wa||Wa())},oc);Jm(Qc=>{pc===pb.layers.size-1&&(null===X||void 0===X||X(Qc),!Qc.defaultPrevented&&Wa&&(Qc.preventDefault(),Wa()))},oc);(0,on.useEffect)(()=>{if(Db)return J&&(0===pb.layersWithOutsidePointerEventsDisabled.size&&(Py=oc.body.style.pointerEvents,oc.body.style.pointerEvents="none"),pb.layersWithOutsidePointerEventsDisabled.add(Db)),pb.layers.add(Db),rl(),()=>{J&&1===pb.layersWithOutsidePointerEventsDisabled.size&&(oc.body.style.pointerEvents=
Py)}},[Db,oc,J,pb]);(0,on.useEffect)(()=>()=>{Db&&(pb.layers.delete(Db),pb.layersWithOutsidePointerEventsDisabled.delete(Db),rl())},[Db,pb]);(0,on.useEffect)(()=>{const Qc=()=>ac({});document.addEventListener("dismissableLayer.update",Qc);return()=>document.removeEventListener("dismissableLayer.update",Qc)},[]);return(0,on.createElement)(xj.div,wf({},bb,{ref:g,style:xe({pointerEvents:n?Tb?"auto":"none":void 0},b.style),onFocusCapture:Mf(b.onFocusCapture,tc.onFocusCapture),onBlurCapture:Mf(b.onBlurCapture,
tc.onBlurCapture),onPointerDownCapture:Mf(b.onPointerDownCapture,xc.onPointerDownCapture)}))}),AD=V(22),Bv=0,Np=V(22),Qy={bubbles:!1,cancelable:!0},Cv=(0,Np.forwardRef)((b,g)=>{const {loop:n=!1,trapped:J=!1,onMountAutoFocus:X,onUnmountAutoFocus:la}=b;b=Qf(b,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [va,La]=(0,Np.useState)(null),Wa=Tf(X),bb=Tf(la),pb=(0,Np.useRef)(null);g=Kf(g,oc=>La(oc));const Db=(0,Np.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;
(0,Np.useEffect)(()=>{if(J){let oc=function(xc){!Db.paused&&va&&(xc=xc.target,va.contains(xc)?pb.current=xc:Ui(pb.current,{select:!0}))},ac=function(xc){!Db.paused&&va&&(va.contains(xc.relatedTarget)||Ui(pb.current,{select:!0}))};document.addEventListener("focusin",oc);document.addEventListener("focusout",ac);return()=>{document.removeEventListener("focusin",oc);document.removeEventListener("focusout",ac)}}},[J,va,Db.paused]);(0,Np.useEffect)(()=>{if(va){Ry.add(Db);const oc=document.activeElement;
if(!va.contains(oc)){const ac=new CustomEvent("focusScope.autoFocusOnMount",Qy);va.addEventListener("focusScope.autoFocusOnMount",Wa);va.dispatchEvent(ac);ac.defaultPrevented||(jn(qk(Sl(va)),{select:!0}),document.activeElement===oc&&Ui(va))}return()=>{va.removeEventListener("focusScope.autoFocusOnMount",Wa);setTimeout(()=>{const ac=new CustomEvent("focusScope.autoFocusOnUnmount",Qy);va.addEventListener("focusScope.autoFocusOnUnmount",bb);va.dispatchEvent(ac);ac.defaultPrevented||Ui(null!==oc&&void 0!==
oc?oc:document.body,{select:!0});va.removeEventListener("focusScope.autoFocusOnUnmount",bb);Ry.remove(Db)},0)}}},[va,Wa,bb,Db]);const Qb=(0,Np.useCallback)(oc=>{if((n||J)&&!Db.paused){var ac=document.activeElement;if("Tab"===oc.key&&!oc.altKey&&!oc.ctrlKey&&!oc.metaKey&&ac){const pc=oc.currentTarget;var xc=pc;const Tb=Sl(xc),tc=Bm(Tb,xc);xc=Bm(Tb.reverse(),xc);const [Qc,Wc]=[tc,xc];Qc&&Wc?oc.shiftKey||ac!==Wc?oc.shiftKey&&ac===Qc&&(oc.preventDefault(),n&&Ui(Wc,{select:!0})):(oc.preventDefault(),n&&
Ui(Qc,{select:!0})):ac===pc&&oc.preventDefault()}}},[n,J,Db.paused]);return(0,Np.createElement)(xj.div,wf({tabIndex:-1},b,{ref:g,onKeyDown:Qb}))}),Ry=function(){let b=[];return{add(g){const n=b[0];g===n||null!==n&&void 0!==n&&n.pause();b=Fk(b,g);b.unshift(g)},remove(g){var n;b=Fk(b,g);null===(n=b[0])||void 0===n||n.resume()}}}(),Sy=Ja(V(22)),BD=V(22),pn=(null===globalThis||void 0===globalThis?0:globalThis.document)?BD.useLayoutEffect:()=>{},CD=Sy["useId".toString()]||(()=>{}),DD=0,Zl=V(22),ED=(b,
g,n)=>eb(void 0,null,function*(){const {placement:J="bottom",strategy:X="absolute",middleware:la=[],platform:va}=n,La=yield null==va.isRTL?void 0:va.isRTL(g);let Wa=yield va.getElementRects({reference:b,floating:g,strategy:X}),{x:bb,y:pb}=ul(Wa,J,La),Db=J,Qb={},oc=0;for(let ac=0;ac<la.length;ac++){const {name:xc,fn:pc}=la[ac],{x:Tb,y:tc,data:Qc,reset:Wc}=yield pc({x:bb,y:pb,initialPlacement:J,placement:Db,strategy:X,middlewareData:Qb,rects:Wa,platform:va,elements:{reference:b,floating:g}});bb=null!=
Tb?Tb:bb;pb=null!=tc?tc:pb;Qb=of(xe({},Qb),{[xc]:xe(xe({},Qb[xc]),Qc)});Wc&&50>=oc&&(oc++,"object"==typeof Wc&&(Wc.placement&&(Db=Wc.placement),Wc.rects&&(Wa=!0===Wc.rects?yield va.getElementRects({reference:b,floating:g,strategy:X}):Wc.rects),{x:bb,y:pb}=ul(Wa,Db,La)),ac=-1)}return{x:bb,y:pb,placement:Db,strategy:X,middlewareData:Qb}}),Dv=Math.min,Ev=Math.max,Ty=b=>({name:"arrow",options:b,fn(g){return eb(this,null,function*(){const {element:n,padding:J=0}=null!=b?b:{},{x:X,y:la,placement:va,rects:La,
platform:Wa}=g;if(null==n)return{};const bb=Ek(J),pb={x:X,y:la},Db=Sj(va),Qb=va.split("-")[1],oc=tl(Db);var ac=yield Wa.getDimensions(n);const xc="y"===Db?"top":"left",pc="y"===Db?"bottom":"right";var Tb=La.reference[oc]+La.reference[Db]-pb[Db]-La.floating[oc];const tc=pb[Db]-La.reference[Db];var Qc=yield null==Wa.getOffsetParent?void 0:Wa.getOffsetParent(n);let Wc=Qc?"y"===Db?Qc.clientHeight||0:Qc.clientWidth||0:0;0===Wc&&(Wc=La.floating[oc]);Qc=bb[xc];const rd=Wc-ac[oc]-bb[pc];ac=Wc/2-ac[oc]/2+
(Tb/2-tc/2);Tb=Ev(Qc,Dv(ac,rd));return{[Db]:pb[Db]-(0<("start"===Qb?bb[xc]:bb[pc])&&ac!==Tb&&La.reference[oc]<=La.floating[oc]?ac<Qc?Qc-ac:rd-ac:0),data:{[Db]:Tb,centerOffset:ac-Tb}}})}}),FD={left:"right",right:"left",bottom:"top",top:"bottom"},GD={start:"end",end:"start"},Uy=["top","right","bottom","left"];Uy.reduce((b,g)=>b.concat(g,g+"-start",g+"-end"),[]);var HD=function(b){return void 0===b&&(b={}),{name:"flip",options:b,fn(g){return eb(this,null,function*(){var n;const {placement:J,middlewareData:X,
rects:la,initialPlacement:va,platform:La,elements:Wa}=g;var bb=b;const {mainAxis:pb=!0,crossAxis:Db=!0,fallbackPlacements:Qb,fallbackStrategy:oc="bestFit",flipAlignment:ac=!0}=bb;bb=Qf(bb,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const xc=rk(J);var pc=Qb||(xc!==va&&ac?function($d){const ke=vl($d);return[Dk($d),ke,Dk(ke)]}(va):[vl(va)]);pc=[va,...pc];const Tb=yield Wl(g,bb),tc=[];bb=(null==(n=X.flip)?void 0:n.overflows)||[];if(pb&&tc.push(Tb[xc]),Db){const {main:$d,
cross:ke}=il(J,la,yield null==La.isRTL?void 0:La.isRTL(Wa.floating));tc.push(Tb[$d],Tb[ke])}if(bb=[...bb,{placement:J,overflows:tc}],!tc.every($d=>0>=$d)){var Qc,Wc;n=(null!=(Qc=null==(Wc=X.flip)?void 0:Wc.index)?Qc:0)+1;if(Qc=pc[n])return{data:{index:n,overflows:bb},reset:{placement:Qc}};Qc="bottom";switch(oc){case "bestFit":var rd;(Wc=null==(rd=bb.map($d=>[$d,$d.overflows.filter(ke=>0<ke).reduce((ke,Fe)=>ke+Fe,0)]).sort(($d,ke)=>$d[1]-ke[1])[0])?void 0:rd[0].placement)&&(Qc=Wc);break;case "initialPlacement":Qc=
va}if(J!==Qc)return{reset:{placement:Qc}}}return{}})}}},ID=function(b){b=void 0===b?{}:b;let {strategy:g="referenceHidden"}=b,n=Qf(b,["strategy"]);return{name:"hide",fn(J){return eb(this,null,function*(){var {rects:X}=J;switch(g){case "referenceHidden":return X=Cm(yield Wl(J,of(xe({},n),{elementContext:"reference"})),X.reference),{data:{referenceHiddenOffsets:X,referenceHidden:nk(X)}};case "escaped":return X=Cm(yield Wl(J,of(xe({},n),{altBoundary:!0})),X.floating),{data:{escapedOffsets:X,escaped:nk(X)}};
default:return{}}})}}},JD=function(b){return void 0===b&&(b=0),{name:"offset",options:b,fn(g){return eb(this,null,function*(){const {x:n,y:J}=g,X=yield function(la,va){return eb(this,null,function*(){const {placement:La,platform:Wa,elements:bb}=la;var pb=yield null==Wa.isRTL?void 0:Wa.isRTL(bb.floating),Db=rk(La);const Qb=La.split("-")[1],oc="x"===Sj(La);Db=["left","top"].includes(Db)?-1:1;pb=pb&&oc?-1:1;const ac="function"==typeof va?va(la):va;let {mainAxis:xc,crossAxis:pc,alignmentAxis:Tb}="number"==
typeof ac?{mainAxis:ac,crossAxis:0,alignmentAxis:null}:xe({mainAxis:0,crossAxis:0,alignmentAxis:null},ac);return Qb&&"number"==typeof Tb&&(pc="end"===Qb?-1*Tb:Tb),oc?{x:pc*pb,y:xc*Db}:{x:xc*Db,y:pc*pb}})}(g,b);return{x:n+X.x,y:J+X.y,data:X}})}}},KD=function(b){return void 0===b&&(b={}),{name:"shift",options:b,fn(g){return eb(this,null,function*(){const {x:n,y:J,placement:X}=g;var la=b;const {mainAxis:va=!0,crossAxis:La=!1,limiter:Wa={fn:oc=>{let {x:ac,y:xc}=oc;return{x:ac,y:xc}}}}=la;var bb=Qf(la,
["mainAxis","crossAxis","limiter"]);la={x:n,y:J};bb=yield Wl(g,bb);const pb=Sj(rk(X)),Db="x"===pb?"y":"x";let Qb=la[pb];la=la[Db];va&&(Qb=Ev(Qb+bb["y"===pb?"top":"left"],Dv(Qb,Qb-bb["y"===pb?"bottom":"right"])));La&&(la=Ev(la+bb["y"===Db?"top":"left"],Dv(la,la-bb["y"===Db?"bottom":"right"])));la=Wa.fn(of(xe({},g),{[pb]:Qb,[Db]:la}));return of(xe({},la),{data:{x:la.x-n,y:la.y-J}})})}}},LD=function(b){return void 0===b&&(b={}),{options:b,fn(g){const {x:n,y:J,placement:X,rects:la,middlewareData:va}=
g,{offset:La=0,mainAxis:Wa=!0,crossAxis:bb=!0}=b;var pb={x:n,y:J};g=Sj(X);const Db="x"===g?"y":"x";let Qb=pb[g];pb=pb[Db];var oc="function"==typeof La?La(of(xe({},la),{placement:X})):La;oc="number"==typeof oc?{mainAxis:oc,crossAxis:0}:xe({mainAxis:0,crossAxis:0},oc);if(Wa){var ac="y"===g?"height":"width",xc=la.reference[g]-la.floating[ac]+oc.mainAxis;ac=la.reference[g]+la.reference[ac]-oc.mainAxis;Qb<xc?Qb=xc:Qb>ac&&(Qb=ac)}if(bb){var pc,Tb,tc,Qc;const Wc="y"===g?"width":"height";xc=["top","left"].includes(rk(X));
ac=la.reference[Db]-la.floating[Wc]+(xc&&null!=(pc=null==(Tb=va.offset)?void 0:Tb[Db])?pc:0)+(xc?0:oc.crossAxis);pc=la.reference[Db]+la.reference[Wc]+(xc?0:null!=(tc=null==(Qc=va.offset)?void 0:Qc[Db])?tc:0)-(xc?oc.crossAxis:0);pb<ac?pb=ac:pb>pc&&(pb=pc)}return{[g]:Qb,[Db]:pb}}}},Vy=Math.min,zs=Math.max,Et=Math.round,MD={getClippingRect:function(b){let {element:g,boundary:n,rootBoundary:J,strategy:X}=b;b=[...("clippingAncestors"===n?Bi(g):[].concat(n)),J];b=b.reduce((la,va)=>{va=wl(g,va,X);return la.top=
zs(va.top,la.top),la.right=Vy(va.right,la.right),la.bottom=Vy(va.bottom,la.bottom),la.left=zs(va.left,la.left),la},wl(g,b[0],X));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(b){let {rect:g,offsetParent:n,strategy:J}=b;var X=Ti(n);const la=dg(n);if(n===la)return g;b={scrollLeft:0,scrollTop:0};var va=0,La=0;(X||!X&&"fixed"!==J)&&(("body"!==ui(n)||yg(la))&&(b=Ai(n)),Ti(n))&&(X=ii(n,!0),va=X.x+n.clientLeft,La=X.y+n.clientTop);
return of(xe({},g),{x:g.x-b.scrollLeft+va,y:g.y-b.scrollTop+La})},isElement:Zg,getDimensions:nh,getOffsetParent:Zh,getDocumentElement:dg,getElementRects:b=>{let {reference:g,floating:n,strategy:J}=b;b=Zh(n);var X=Ti(b);const la=dg(b);var va;if(va=X)va=ii(b),va=Et(va.width)!==b.offsetWidth||Et(va.height)!==b.offsetHeight;va=ii(g,va,"fixed"===J);let La={scrollLeft:0,scrollTop:0};var Wa=0,bb=0;if(X||!X&&"fixed"!==J)(("body"!==ui(b)||yg(la))&&(La=Ai(b)),Ti(b))?(X=ii(b,!0),Wa=X.x+b.clientLeft,bb=X.y+b.clientTop):
la&&(Wa=Sf(la));return{reference:{x:va.left+La.scrollLeft-Wa,y:va.top+La.scrollTop-bb,width:va.width,height:va.height},floating:of(xe({},nh(n)),{x:0,y:0})}},getClientRects:b=>Array.from(b.getClientRects()),isRTL:b=>"rtl"===zh(b).direction},ND=(b,g,n)=>ED(b,g,xe({platform:MD},n)),Gn=Ja(V(22),1),Wy=V(22),OD=Ja(V(31),1),Ft="undefined"!==typeof document?Wy.useLayoutEffect:Wy.useEffect,Xy=b=>{const {element:g,padding:n}=b;return{name:"arrow",options:b,fn(J){if(Object.prototype.hasOwnProperty.call(g,"current")){if(null!=
g.current)return Ty({element:g.current,padding:n}).fn(J)}else if(g)return Ty({element:g,padding:n}).fn(J);return{}}}},Gt=V(22),PD=(0,Gt.forwardRef)((b,g)=>{const {children:n,width:J=10,height:X=5}=b,la=Qf(b,["children","width","height"]);return(0,Gt.createElement)(xj.svg,wf({},la,{ref:g,width:J,height:X,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),b.asChild?n:(0,Gt.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),QD=V(22),[Fv,Ht]=Rj("Popper"),[RD,Yy]=Fv("Popper"),Zy=(0,Zl.forwardRef)((b,
g)=>{const {__scopePopper:n,virtualRef:J}=b;b=Qf(b,["__scopePopper","virtualRef"]);const X=Yy("PopperAnchor",n),la=(0,Zl.useRef)(null);g=Kf(g,la);(0,Zl.useEffect)(()=>{X.onAnchorChange((null===J||void 0===J?void 0:J.current)||la.current)});return J?null:(0,Zl.createElement)(xj.div,wf({},b,{ref:g}))}),[SD,TD]=Fv("PopperContent"),[UD,VD]=Fv("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),$y=(0,Zl.forwardRef)((b,g)=>{var n,J,X,la,va,La,Wa,bb;const {__scopePopper:pb,side:Db="bottom",sideOffset:Qb=
0,align:oc="center",alignOffset:ac=0,arrowPadding:xc=0,collisionBoundary:pc=[],collisionPadding:Tb=0,sticky:tc="partial",hideWhenDetached:Qc=!1,avoidCollisions:Wc=!0}=b;b=Qf(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const rd=Yy("PopperContent",pb),[$d,ke]=(0,Zl.useState)(null);g=Kf(g,Hr=>ke(Hr));const [Fe,Se]=(0,Zl.useState)(null);var mf=ja(Fe),ff=null!==(n=null===mf||void 0===mf?void 0:mf.width)&&
void 0!==n?n:0;n=null!==(J=null===mf||void 0===mf?void 0:mf.height)&&void 0!==J?J:0;J=Db+("center"!==oc?"-"+oc:"");mf="number"===typeof Tb?Tb:xe({top:0,right:0,bottom:0,left:0},Tb);const Xe=Array.isArray(pc)?pc:[pc],Me=0<Xe.length;mf={padding:mf,boundary:Xe.filter(Rb),altBoundary:Me};const {reference:Uc,floating:Xc,strategy:Ad,x:Ed,y:Pd,placement:De,middlewareData:Ge,update:Pe}=bc({strategy:"fixed",placement:J,whileElementsMounted:Ri,middleware:[JD({mainAxis:Qb+n,alignmentAxis:ac}),Wc?KD(xe({mainAxis:!0,
crossAxis:!1,limiter:"partial"===tc?LD():void 0},mf)):void 0,Fe?Xy({element:Fe,padding:xc}):void 0,Wc?HD(xe({},mf)):void 0,YD({arrowWidth:ff,arrowHeight:n}),Qc?ID({strategy:"referenceHidden"}):void 0].filter(Fb)});pn(()=>{Uc(rd.anchor)},[Uc,rd.anchor]);const Ff=null!==Ed&&null!==Pd,[lf,gh]=sb(De);ff=null===(X=Ge.arrow)||void 0===X?void 0:X.x;X=null===(la=Ge.arrow)||void 0===la?void 0:la.y;la=0!==(null===(va=Ge.arrow)||void 0===va?void 0:va.centerOffset);const [Wg,wi]=(0,Zl.useState)();pn(()=>{$d&&
wi(window.getComputedStyle($d).zIndex)},[$d]);const {hasParent:Mk,positionUpdateFns:$k}=VD("PopperContent",pb),yo=!Mk;(0,Zl.useLayoutEffect)(()=>{if(!yo)return $k.add(Pe),()=>{$k.delete(Pe)}},[yo,$k,Pe]);(0,Zl.useLayoutEffect)(()=>{yo&&Ff&&Array.from($k).reverse().forEach(Hr=>requestAnimationFrame(Hr))},[yo,Ff,$k]);va=of(xe({"data-side":lf,"data-align":gh},b),{ref:g,style:of(xe({},b.style),{animation:Ff?void 0:"none",opacity:null!==(La=Ge.hide)&&void 0!==La&&La.referenceHidden?0:void 0})});return(0,Zl.createElement)("div",
{ref:Xc,"data-radix-popper-content-wrapper":"",style:{position:Ad,left:0,top:0,transform:Ff?`translate3d(${Math.round(Ed)}px, ${Math.round(Pd)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Wg,["--radix-popper-transform-origin"]:[null===(Wa=Ge.transformOrigin)||void 0===Wa?void 0:Wa.x,null===(bb=Ge.transformOrigin)||void 0===bb?void 0:bb.y].join(" ")}},(0,Zl.createElement)(SD,{scope:pb,placedSide:lf,onArrowChange:Se,arrowX:ff,arrowY:X,shouldHideArrow:la},yo?(0,Zl.createElement)(UD,
{scope:pb,hasParent:!0,positionUpdateFns:$k},(0,Zl.createElement)(xj.div,va)):(0,Zl.createElement)(xj.div,va)))}),WD={top:"bottom",right:"left",bottom:"top",left:"right"},XD=(0,Zl.forwardRef)(function(b,g){var {__scopePopper:n}=b;b=Qf(b,["__scopePopper"]);n=TD("PopperArrow",n);return(0,Zl.createElement)("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[WD[n.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",
right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0}},(0,Zl.createElement)(PD,wf({},b,{ref:g,style:of(xe({},b.style),{display:"block"})})))}),YD=b=>({name:"transformOrigin",options:b,fn(g){var n,J,X,la,va;const {placement:La,rects:Wa,middlewareData:bb}=g,pb=(g=0!==(null===(n=bb.arrow)||void 0===n?void 0:n.centerOffset))?0:b.arrowWidth;n=g?0:b.arrowHeight;const [Db,
Qb]=sb(La),oc={start:"0%",center:"50%",end:"100%"}[Qb],ac=(null!==(J=null===(X=bb.arrow)||void 0===X?void 0:X.x)&&void 0!==J?J:0)+pb/2;J=(null!==(la=null===(va=bb.arrow)||void 0===va?void 0:va.y)&&void 0!==la?la:0)+n/2;va=la="";"bottom"===Db?(la=g?oc:`${ac}px`,va=`${-n}px`):"top"===Db?(la=g?oc:`${ac}px`,va=`${Wa.floating.height+n}px`):"right"===Db?(la=`${-n}px`,va=g?oc:`${J}px`):"left"===Db&&(la=`${Wa.floating.width+n}px`,va=g?oc:`${J}px`);return{data:{x:la,y:va}}}}),az=b=>{const {__scopePopper:g,
children:n}=b,[J,X]=(0,Zl.useState)(null);return(0,Zl.createElement)(RD,{scope:g,anchor:J,onAnchorChange:X},n)},bz=V(22),ZD=Ja(V(31)),$D=(0,bz.forwardRef)((b,g)=>{var n;const {container:J=null===globalThis||void 0===globalThis?void 0:null===(n=globalThis.document)||void 0===n?void 0:n.body}=b;b=Qf(b,["container"]);return J?ZD.default.createPortal((0,bz.createElement)(xj.div,wf({},b,{ref:g})),J):null}),ip=V(22),aE=V(31),Gv=b=>{const {present:g,children:n}=b;b=Nb(g);const J="function"===typeof n?n({present:b.isPresent}):
ip.Children.only(n),X=Kf(b.ref,J.ref);return"function"===typeof n||b.isPresent?(0,ip.cloneElement)(J,{ref:X}):null};Gv.displayName="Presence";var $l=V(22),bE={bubbles:!1,cancelable:!0},[Hv,cz,cE]=Pk("RovingFocusGroup"),[dE,It]=Rj("RovingFocusGroup",[cE]),[eE,fE]=dE("RovingFocusGroup"),dz=(0,$l.forwardRef)((b,g)=>(0,$l.createElement)(Hv.Provider,{scope:b.__scopeRovingFocusGroup},(0,$l.createElement)(Hv.Slot,{scope:b.__scopeRovingFocusGroup},(0,$l.createElement)(gE,wf({},b,{ref:g}))))),gE=(0,$l.forwardRef)((b,
g)=>{const {__scopeRovingFocusGroup:n,orientation:J,loop:X=!1,dir:la,currentTabStopId:va,defaultCurrentTabStopId:La,onCurrentTabStopIdChange:Wa,onEntryFocus:bb}=b,pb=Qf(b,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),Db=(0,$l.useRef)(null);g=Kf(g,Db);const Qb=Pj(la),[oc=null,ac]=hi({prop:va,defaultProp:La,onChange:Wa}),[xc,pc]=(0,$l.useState)(!1),Tb=Tf(bb),tc=cz(n),Qc=(0,$l.useRef)(!1),[Wc,rd]=(0,$l.useState)(0);
(0,$l.useEffect)(()=>{const $d=Db.current;if($d)return $d.addEventListener("rovingFocusGroup.onEntryFocus",Tb),()=>$d.removeEventListener("rovingFocusGroup.onEntryFocus",Tb)},[Tb]);return(0,$l.createElement)(eE,{scope:n,orientation:J,dir:Qb,loop:X,currentTabStopId:oc,onItemFocus:(0,$l.useCallback)($d=>ac($d),[ac]),onItemShiftTab:(0,$l.useCallback)(()=>pc(!0),[]),onFocusableItemAdd:(0,$l.useCallback)(()=>rd($d=>$d+1),[]),onFocusableItemRemove:(0,$l.useCallback)(()=>rd($d=>$d-1),[])},(0,$l.createElement)(xj.div,
wf({tabIndex:xc||0===Wc?-1:0,"data-orientation":J},pb,{ref:g,style:xe({outline:"none"},b.style),onMouseDown:Mf(b.onMouseDown,()=>{Qc.current=!0}),onFocus:Mf(b.onFocus,$d=>{var ke=!Qc.current;if($d.target===$d.currentTarget&&ke&&!xc&&(ke=new CustomEvent("rovingFocusGroup.onEntryFocus",bE),$d.currentTarget.dispatchEvent(ke),!ke.defaultPrevented)){$d=tc().filter(Se=>Se.focusable);ke=$d.find(Se=>Se.active);const Fe=$d.find(Se=>Se.id===oc);$d=[ke,Fe,...$d].filter(Boolean).map(Se=>Se.ref.current);Zb($d)}Qc.current=
!1}),onBlur:Mf(b.onBlur,()=>pc(!1))})))}),ez=(0,$l.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:n,focusable:J=!0,active:X=!1}=b,la=Qf(b,["__scopeRovingFocusGroup","focusable","active"]),va=Gk(),La=fE("RovingFocusGroupItem",n),Wa=La.currentTabStopId===va,bb=cz(n),{onFocusableItemAdd:pb,onFocusableItemRemove:Db}=La;(0,$l.useEffect)(()=>{if(J)return pb(),()=>Db()},[J,pb,Db]);return(0,$l.createElement)(Hv.ItemSlot,{scope:n,id:va,focusable:J,active:X},(0,$l.createElement)(xj.span,wf({tabIndex:Wa?
0:-1,"data-orientation":La.orientation},la,{ref:g,onMouseDown:Mf(b.onMouseDown,Qb=>{if(J)La.onItemFocus(va);else Qb.preventDefault()}),onFocus:Mf(b.onFocus,()=>La.onItemFocus(va)),onKeyDown:Mf(b.onKeyDown,Qb=>{if("Tab"===Qb.key&&Qb.shiftKey)La.onItemShiftTab();else if(Qb.target===Qb.currentTarget){var oc=Kb(Qb,La.orientation,La.dir);if(void 0!==oc){Qb.preventDefault();let ac=bb().filter(xc=>xc.focusable).map(xc=>xc.ref.current);if("last"===oc)ac.reverse();else if("prev"===oc||"next"===oc)"prev"===
oc&&ac.reverse(),Qb=ac.indexOf(Qb.currentTarget),ac=La.loop?Ac(ac,Qb+1):ac.slice(Qb+1);setTimeout(()=>Zb(ac))}}})})))}),hE={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},iE=function(b){return"undefined"===typeof document?null:(Array.isArray(b)?b[0]:b).ownerDocument.body},wr=new WeakMap,Jt=new WeakMap,Kt={},Iv=0,Jv=function(b,g,n){void 0===g&&(g=iE(b));void 0===n&&(n="data-aria-hidden");var J=Array.isArray(b)?b:[b];Kt[n]||
(Kt[n]=new WeakMap);var X=Kt[n],la=[],va=new Set,La=function(bb){bb&&!va.has(bb)&&(va.add(bb),La(bb.parentNode))};J.forEach(La);var Wa=function(bb){!bb||0<=J.indexOf(bb)||Array.prototype.forEach.call(bb.children,function(pb){if(va.has(pb))Wa(pb);else{var Db=pb.getAttribute("aria-hidden");Db=null!==Db&&"false"!==Db;var Qb=(wr.get(pb)||0)+1,oc=(X.get(pb)||0)+1;wr.set(pb,Qb);X.set(pb,oc);la.push(pb);1===Qb&&Db&&Jt.set(pb,!0);1===oc&&pb.setAttribute(n,"true");Db||pb.setAttribute("aria-hidden","true")}})};
Wa(g);va.clear();Iv++;return function(){la.forEach(function(bb){var pb=wr.get(bb)-1,Db=X.get(bb)-1;wr.set(bb,pb);X.set(bb,Db);pb||(Jt.has(bb)||bb.removeAttribute("aria-hidden"),Jt.delete(bb));Db||bb.removeAttribute(n)});Iv--;Iv||(wr=new WeakMap,wr=new WeakMap,Jt=new WeakMap,Kt={})}},jE=Ja(ge(),1),{__assign:Op,__rest:fz,__spreadArray:kE}=jE.default,gz=Ja(V(22)),jp=Ja(V(22)),lE=V(22),mE=Ja(V(22)),hz=function(b){var g=b.sideCar;b=fz(b,["sideCar"]);if(!g)throw Error("Sidecar: please provide `sideCar` property to import the right car");
g=g.read();if(!g)throw Error("Sidecar medium not found");return mE.createElement(g,Op({},b))};hz.isSideCarExport=!0;var iz=function(b){void 0===b&&(b={});var g=Sd(null);g.options=Op({async:!0,ssr:!1},b);return g}(),Kv=function(){},Lt=jp.forwardRef(function(b,g){var n=jp.useRef(null),J=jp.useState({onScrollCapture:Kv,onWheelCapture:Kv,onTouchMoveCapture:Kv}),X=J[0];J=J[1];var la=b.forwardProps,va=b.children,La=b.className,Wa=b.removeScrollBar,bb=b.enabled,pb=b.shards,Db=b.sideCar,Qb=b.noIsolation,
oc=b.inert,ac=b.allowPinchZoom,xc=b.as;xc=void 0===xc?"div":xc;b=fz(b,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));g=Rc([n,g]);X=Op(Op({},b),X);return jp.createElement(jp.Fragment,null,bb&&jp.createElement(Db,{sideCar:iz,removeScrollBar:Wa,shards:pb,noIsolation:Qb,inert:oc,setCallbacks:J,allowPinchZoom:!!ac,lockRef:n}),la?jp.cloneElement(jp.Children.only(va),Op(Op({},X),{ref:g})):jp.createElement(xc,Op({},X,{className:La,
ref:g}),va))});Lt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Lt.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var km=Ja(V(22)),jz=Ja(V(22)),nE=Ja(V(22)),oE=function(){var b=0,g=null;return{add:function(n){if(0==b){if(document){var J=document.createElement("style");J.type="text/css";var X="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;X&&J.setAttribute("nonce",X)}else J=null;if(g=J)J=g,J.styleSheet?J.styleSheet.cssText=n:J.appendChild(document.createTextNode(n)),
n=g,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)}b++},remove:function(){b--;!b&&g&&(g.parentNode&&g.parentNode.removeChild(g),g=null)}}},pE=function(){var b=oE();return function(g,n){nE.useEffect(function(){b.add(g);return function(){b.remove()}},[g&&n])}},kz=function(){var b=pE();return function(g){b(g.styles,g.dynamic);return null}},qE={left:0,top:0,right:0,gap:0},rE=kz(),sE=function(b,g,n,J){var X=b.left,la=b.top,va=b.right;b=b.gap;void 0===n&&(n="margin");return"\n  .".concat("with-scroll-bars-hidden",
" {\n   overflow: hidden ").concat(J,";\n   padding-right: ").concat(b,"px ").concat(J,";\n  }\n  body {\n    overflow: hidden ").concat(J,";\n    overscroll-behavior: contain;\n    ").concat([g&&"position: relative ".concat(J,";"),"margin"===n&&"\n    padding-left: ".concat(X,"px;\n    padding-top: ").concat(la,"px;\n    padding-right: ").concat(va,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(b,"px ").concat(J,";\n    "),"padding"===n&&"padding-right: ".concat(b,"px ").concat(J,
";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(b,"px ").concat(J,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(b,"px ").concat(J,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(J,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(J,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",
": ").concat(b,"px;\n  }\n")},tE=function(b){var g=b.noRelative,n=b.noImportant;b=b.gapMode;var J=void 0===b?"margin":b;b=jz.useMemo(function(){var X=J;void 0===X&&(X="margin");if("undefined"===typeof window)X=qE;else{var la=window.getComputedStyle(document.body),va=la["padding"===X?"paddingTop":"marginTop"],La=la["padding"===X?"paddingRight":"marginRight"];X=[parseInt(la["padding"===X?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(va||"",10)||0,parseInt(La||"",10)||0];X={left:X[0],top:X[1],right:X[2],
gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+X[2]-X[0])}}return X},[J]);return jz.createElement(rE,{styles:sE(b,!g,J,n?"":"!important")})},Lv=!1;if("undefined"!==typeof window)try{var Mt=Object.defineProperty({},"passive",{get:function(){return Lv=!0}});window.addEventListener("test",Mt,Mt);window.removeEventListener("test",Mt,Mt)}catch(b){Lv=!1}var xr=Lv?{passive:!1}:!1,lz=function(b,g){var n=window.getComputedStyle(b);return"hidden"!==n[g]&&!(n.overflowY===n.overflowX&&
"TEXTAREA"!==b.tagName&&"visible"===n[g])},mz=function(b,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(nz(b,g)){var n=oz(b,g);if(n[1]>n[2])return!0}g=g.parentNode}while(g&&g!==document.body);return!1},nz=function(b,g){return"v"===b?lz(g,"overflowY"):lz(g,"overflowX")},oz=function(b,g){return"v"===b?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},Nt=function(b){return"changedTouches"in b?[b.changedTouches[0].clientX,b.changedTouches[0].clientY]:
[0,0]},pz=function(b){return b&&"current"in b?b.current:b},uE=function(b){return"\n  .block-interactivity-".concat(b," {pointer-events: none;}\n  .allow-interactivity-").concat(b," {pointer-events: all;}\n")},vE=0,yr=[];iz.useMedium(function(b){var g=km.useRef([]),n=km.useRef([0,0]),J=km.useRef(),X=km.useState(vE++)[0],la=km.useState(function(){return kz()})[0],va=km.useRef(b);km.useEffect(function(){va.current=b},[b]);km.useEffect(function(){if(b.inert){document.body.classList.add("block-interactivity-".concat(X));
var ac=kE([b.lockRef.current],(b.shards||[]).map(pz),!0).filter(Boolean);ac.forEach(function(xc){return xc.classList.add("allow-interactivity-".concat(X))});return function(){document.body.classList.remove("block-interactivity-".concat(X));ac.forEach(function(xc){return xc.classList.remove("allow-interactivity-".concat(X))})}}},[b.inert,b.lockRef.current,b.shards]);var La=km.useCallback(function(ac,xc){if("touches"in ac&&2===ac.touches.length)return!va.current.allowPinchZoom;var pc=Nt(ac),Tb=n.current,
tc="deltaX"in ac?ac.deltaX:Tb[0]-pc[0];Tb="deltaY"in ac?ac.deltaY:Tb[1]-pc[1];var Qc=ac.target,Wc=Math.abs(tc)>Math.abs(Tb)?"h":"v";if("touches"in ac&&"h"===Wc&&"range"===Qc.type)return!1;var rd=mz(Wc,Qc);if(!rd)return!0;rd?pc=Wc:(pc="v"===Wc?"h":"v",rd=mz(Wc,Qc));if(!rd)return!1;!J.current&&"changedTouches"in ac&&(tc||Tb)&&(J.current=pc);if(!pc)return!0;pc=J.current||pc;Tb="h"===pc?tc:Tb;tc=window.getComputedStyle(xc).direction;tc="h"===pc&&"rtl"===tc?-1:1;Wc=tc*Tb;ac=ac.target;Tb=xc.contains(ac);
Qc=!1;Wc=0<Wc;var $d=rd=0;do{var ke=oz(pc,ac),Fe=ke[0];ke=ke[1]-ke[2]-tc*Fe;(Fe||ke)&&nz(pc,ac)&&(rd+=ke,$d+=Fe);ac=ac.parentNode}while(!Tb&&ac!==document.body||Tb&&(xc.contains(ac)||xc===ac));Wc&&0===rd?Qc=!0:Wc||0!==$d||(Qc=!0);return Qc},[]),Wa=km.useCallback(function(ac){if(yr.length&&yr[yr.length-1]===la){var xc="deltaY"in ac?[ac.deltaX,ac.deltaY]:Nt(ac),pc=g.current.filter(function(Tb){var tc;if(tc=Tb.name===ac.type&&Tb.target===ac.target)Tb=Tb.delta,tc=Tb[0]===xc[0]&&Tb[1]===xc[1];return tc})[0];
pc&&pc.should?ac.cancelable&&ac.preventDefault():pc||(pc=(va.current.shards||[]).map(pz).filter(Boolean).filter(function(Tb){return Tb.contains(ac.target)}),(0<pc.length?La(ac,pc[0]):!va.current.noIsolation)&&ac.cancelable&&ac.preventDefault())}},[]),bb=km.useCallback(function(ac,xc,pc,Tb){var tc={name:ac,delta:xc,target:pc,should:Tb};g.current.push(tc);setTimeout(function(){g.current=g.current.filter(function(Qc){return Qc!==tc})},1)},[]),pb=km.useCallback(function(ac){n.current=Nt(ac);J.current=
void 0},[]),Db=km.useCallback(function(ac){bb(ac.type,[ac.deltaX,ac.deltaY],ac.target,La(ac,b.lockRef.current))},[]),Qb=km.useCallback(function(ac){bb(ac.type,Nt(ac),ac.target,La(ac,b.lockRef.current))},[]);km.useEffect(function(){yr.push(la);b.setCallbacks({onScrollCapture:Db,onWheelCapture:Db,onTouchMoveCapture:Qb});document.addEventListener("wheel",Wa,xr);document.addEventListener("touchmove",Wa,xr);document.addEventListener("touchstart",pb,xr);return function(){yr=yr.filter(function(ac){return ac!==
la});document.removeEventListener("wheel",Wa,xr);document.removeEventListener("touchmove",Wa,xr);document.removeEventListener("touchstart",pb,xr)}},[]);var oc=b.removeScrollBar;return km.createElement(km.Fragment,null,b.inert?km.createElement(la,{styles:uE(X)}):null,oc?km.createElement(tE,{gapMode:"margin"}):null)});var Ot=gz.forwardRef(function(b,g){return gz.createElement(Lt,Op({},b,{ref:g,sideCar:hz}))});Ot.classNames=Lt.classNames;var Mv=["Enter"," "],qz=["ArrowUp","PageDown","End"],wE=["ArrowDown",
"PageUp","Home",...qz];[...Mv];[...Mv];var [Nv,xE,yE]=Pk("Menu"),[Mq,Pt]=Rj("Menu",[yE,Ht,It]),Ov=Ht(),rz=It(),[zE,Qt]=Mq("Menu"),[AE,Pv]=Mq("Menu"),sz=(0,Sg.forwardRef)((b,g)=>{var {__scopeMenu:n}=b;b=Qf(b,["__scopeMenu"]);n=Ov(n);return(0,Sg.createElement)(Zy,wf({},n,b,{ref:g}))}),[,BE]=Mq("MenuPortal",{forceMount:void 0}),[CE,tz]=Mq("MenuContent"),uz=(0,Sg.forwardRef)((b,g)=>{var n=BE("MenuContent",b.__scopeMenu);({forceMount:n=n.forceMount}=b);const J=Qf(b,["forceMount"]),X=Qt("MenuContent",b.__scopeMenu),
la=Pv("MenuContent",b.__scopeMenu);return(0,Sg.createElement)(Nv.Provider,{scope:b.__scopeMenu},(0,Sg.createElement)(Gv,{present:n||X.open},(0,Sg.createElement)(Nv.Slot,{scope:b.__scopeMenu},la.modal?(0,Sg.createElement)(DE,wf({},J,{ref:g})):(0,Sg.createElement)(EE,wf({},J,{ref:g})))))}),DE=(0,Sg.forwardRef)((b,g)=>{const n=Qt("MenuContent",b.__scopeMenu),J=(0,Sg.useRef)(null);g=Kf(g,J);(0,Sg.useEffect)(()=>{const X=J.current;if(X)return Jv(X)},[]);return(0,Sg.createElement)(vz,wf({},b,{ref:g,trapFocus:n.open,
disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Mf(b.onFocusOutside,X=>X.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),EE=(0,Sg.forwardRef)((b,g)=>{const n=Qt("MenuContent",b.__scopeMenu);return(0,Sg.createElement)(vz,wf({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),vz=(0,Sg.forwardRef)((b,g)=>{const {__scopeMenu:n,loop:J=!1,trapFocus:X,onOpenAutoFocus:la,onCloseAutoFocus:va,
disableOutsidePointerEvents:La,onEscapeKeyDown:Wa,onPointerDownOutside:bb,onFocusOutside:pb,onInteractOutside:Db,onDismiss:Qb,disableOutsideScroll:oc}=b,ac=Qf(b,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),xc=Qt("MenuContent",n),pc=Pv("MenuContent",n),Tb=Ov(n),tc=rz(n),Qc=xE(n),[Wc,rd]=(0,Sg.useState)(null),$d=(0,Sg.useRef)(null);g=Kf(g,$d,xc.onContentChange);
const ke=(0,Sg.useRef)(0),Fe=(0,Sg.useRef)(""),Se=(0,Sg.useRef)(0),mf=(0,Sg.useRef)(null),ff=(0,Sg.useRef)("right"),Xe=(0,Sg.useRef)(0),Me=oc?Ot:Sg.Fragment,Uc=oc?{as:Lq,allowPinchZoom:!0}:void 0,Xc=Ed=>{var Pd,De;Ed=Fe.current+Ed;const Ge=Qc().filter(Wg=>!Wg.disabled),Pe=document.activeElement,Ff=null===(Pd=Ge.find(Wg=>Wg.ref.current===Pe))||void 0===Pd?void 0:Pd.textValue;Pd=Ge.map(Wg=>Wg.textValue);const lf=Hd(Pd,Ed,Ff),gh=null===(De=Ge.find(Wg=>Wg.textValue===lf))||void 0===De?void 0:De.ref.current;
(function Mk(wi){Fe.current=wi;window.clearTimeout(ke.current);""!==wi&&(ke.current=window.setTimeout(()=>Mk(""),1E3))})(Ed);gh&&setTimeout(()=>gh.focus())};(0,Sg.useEffect)(()=>()=>window.clearTimeout(ke.current),[]);Sk();const Ad=(0,Sg.useCallback)(Ed=>{var Pd,De,Ge;if(Ge=ff.current===(null===(Pd=mf.current)||void 0===Pd?void 0:Pd.side)){if(Pd=null===(De=mf.current)||void 0===De?void 0:De.area){const {x:Pe,y:Ff}={x:Ed.clientX,y:Ed.clientY};Ed=!1;for(let lf=0,gh=Pd.length-1;lf<Pd.length;gh=lf++){De=
Pd[lf].x;Ge=Pd[lf].y;const Wg=Pd[gh].x,wi=Pd[gh].y;Ge>Ff!==wi>Ff&&Pe<(Wg-De)*(Ff-Ge)/(wi-Ge)+De&&(Ed=!Ed)}Pd=Ed}else Pd=!1;Ge=Pd}return Ge},[]);return(0,Sg.createElement)(CE,{scope:n,searchRef:Fe,onItemEnter:(0,Sg.useCallback)(Ed=>{Ad(Ed)&&Ed.preventDefault()},[Ad]),onItemLeave:(0,Sg.useCallback)(Ed=>{var Pd;Ad(Ed)||(null===(Pd=$d.current)||void 0===Pd||Pd.focus(),rd(null))},[Ad]),onTriggerLeave:(0,Sg.useCallback)(Ed=>{Ad(Ed)&&Ed.preventDefault()},[Ad]),pointerGraceTimerRef:Se,onPointerGraceIntentChange:(0,Sg.useCallback)(Ed=>
{mf.current=Ed},[])},(0,Sg.createElement)(Me,Uc,(0,Sg.createElement)(Cv,{asChild:!0,trapped:X,onMountAutoFocus:Mf(la,Ed=>{var Pd;Ed.preventDefault();null===(Pd=$d.current)||void 0===Pd||Pd.focus()}),onUnmountAutoFocus:va},(0,Sg.createElement)(Av,{asChild:!0,disableOutsidePointerEvents:La,onEscapeKeyDown:Wa,onPointerDownOutside:bb,onFocusOutside:pb,onInteractOutside:Db,onDismiss:Qb},(0,Sg.createElement)(dz,wf({asChild:!0},tc,{dir:pc.dir,orientation:"vertical",loop:J,currentTabStopId:Wc,onCurrentTabStopIdChange:rd,
onEntryFocus:Ed=>{pc.isUsingKeyboardRef.current||Ed.preventDefault()}}),(0,Sg.createElement)($y,wf({role:"menu","aria-orientation":"vertical","data-state":xc.open?"open":"closed","data-radix-menu-content":"",dir:pc.dir},Tb,ac,{ref:g,style:xe({outline:"none"},ac.style),onKeyDown:Mf(ac.onKeyDown,Ed=>{var Pd=Ed.target.closest("[data-radix-menu-content]")===Ed.currentTarget;const De=Ed.ctrlKey||Ed.altKey||Ed.metaKey,Ge=1===Ed.key.length;Pd&&("Tab"===Ed.key&&Ed.preventDefault(),!De&&Ge&&Xc(Ed.key));Ed.target===
$d.current&&wE.includes(Ed.key)&&(Ed.preventDefault(),Pd=Qc().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current),qz.includes(Ed.key)&&Pd.reverse(),Fd(Pd))}),onBlur:Mf(b.onBlur,Ed=>{Ed.currentTarget.contains(Ed.target)||(window.clearTimeout(ke.current),Fe.current="")}),onPointerMove:Mf(b.onPointerMove,ye(Ed=>{const Pd=Xe.current!==Ed.clientX;Ed.currentTarget.contains(Ed.target)&&Pd&&(ff.current=Ed.clientX>Xe.current?"right":"left",Xe.current=Ed.clientX)}))})))))))}),wz=(0,Sg.forwardRef)((b,g)=>{const {disabled:n=
!1,onSelect:J}=b,X=Qf(b,["disabled","onSelect"]),la=(0,Sg.useRef)(null),va=Pv("MenuItem",b.__scopeMenu),La=tz("MenuItem",b.__scopeMenu);g=Kf(g,la);const Wa=(0,Sg.useRef)(!1);return(0,Sg.createElement)(FE,wf({},X,{ref:g,disabled:n,onClick:Mf(b.onClick,()=>{const bb=la.current;if(!n&&bb){const pb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});bb.addEventListener("menu.itemSelect",Db=>null===J||void 0===J?void 0:J(Db),{once:!0});uj(bb,pb);if(pb.defaultPrevented)Wa.current=!1;else va.onClose()}}),
onPointerDown:bb=>{var pb;null===(pb=b.onPointerDown)||void 0===pb||pb.call(b,bb);Wa.current=!0},onPointerUp:Mf(b.onPointerUp,bb=>{var pb;Wa.current||null===(pb=bb.currentTarget)||void 0===pb||pb.click()}),onKeyDown:Mf(b.onKeyDown,bb=>{const pb=""!==La.searchRef.current;n||pb&&" "===bb.key||!Mv.includes(bb.key)||(bb.currentTarget.click(),bb.preventDefault())})}))}),FE=(0,Sg.forwardRef)((b,g)=>{const {__scopeMenu:n,disabled:J=!1,textValue:X}=b,la=Qf(b,["__scopeMenu","disabled","textValue"]),va=tz("MenuItem",
n),La=rz(n),Wa=(0,Sg.useRef)(null);g=Kf(g,Wa);const [bb,pb]=(0,Sg.useState)(!1),[Db,Qb]=(0,Sg.useState)("");(0,Sg.useEffect)(()=>{const oc=Wa.current;if(oc){var ac;Qb((null!==(ac=oc.textContent)&&void 0!==ac?ac:"").trim())}},[la.children]);return(0,Sg.createElement)(Nv.ItemSlot,{scope:n,disabled:J,textValue:null!==X&&void 0!==X?X:Db},(0,Sg.createElement)(ez,wf({asChild:!0},La,{focusable:!J}),(0,Sg.createElement)(xj.div,wf({role:"menuitem","data-highlighted":bb?"":void 0,"aria-disabled":J||void 0,
"data-disabled":J?"":void 0},la,{ref:g,onPointerMove:Mf(b.onPointerMove,ye(oc=>{if(J)va.onItemLeave(oc);else va.onItemEnter(oc),oc.defaultPrevented||oc.currentTarget.focus()})),onPointerLeave:Mf(b.onPointerLeave,ye(oc=>va.onItemLeave(oc))),onFocus:Mf(b.onFocus,()=>pb(!0)),onBlur:Mf(b.onBlur,()=>pb(!1))}))))});Mq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Mq("MenuItemIndicator",{checked:!1});var GE=(0,Sg.forwardRef)((b,g)=>{b=Qf(b,["__scopeMenu"]);return(0,Sg.createElement)(xj.div,wf({role:"separator",
"aria-orientation":"horizontal"},b,{ref:g}))});Mq("MenuSub");var xz=b=>{const {__scopeMenu:g,open:n=!1,children:J,dir:X,onOpenChange:la,modal:va=!0}=b;b=Ov(g);const [La,Wa]=(0,Sg.useState)(null),bb=(0,Sg.useRef)(!1),pb=Tf(la),Db=Pj(X);(0,Sg.useEffect)(()=>{const Qb=()=>{bb.current=!0;document.addEventListener("pointerdown",oc,{capture:!0,once:!0});document.addEventListener("pointermove",oc,{capture:!0,once:!0})},oc=()=>bb.current=!1;document.addEventListener("keydown",Qb,{capture:!0});return()=>{document.removeEventListener("keydown",
Qb,{capture:!0});document.removeEventListener("pointerdown",oc,{capture:!0});document.removeEventListener("pointermove",oc,{capture:!0})}},[]);return(0,Sg.createElement)(az,b,(0,Sg.createElement)(zE,{scope:g,open:n,onOpenChange:pb,content:La,onContentChange:Wa},(0,Sg.createElement)(AE,{scope:g,onClose:(0,Sg.useCallback)(()=>pb(!1),[pb]),isUsingKeyboardRef:bb,dir:Db,modal:va},J)))},[HE]=Rj("DropdownMenu",[Pt]),Rt=Pt(),[IE,yz]=HE("DropdownMenu"),JE=(0,Yn.forwardRef)((b,g)=>{const {__scopeDropdownMenu:n,
disabled:J=!1}=b,X=Qf(b,["__scopeDropdownMenu","disabled"]),la=yz("DropdownMenuTrigger",n),va=Rt(n);return(0,Yn.createElement)(sz,wf({asChild:!0},va),(0,Yn.createElement)(xj.button,wf({type:"button",id:la.triggerId,"aria-haspopup":"menu","aria-expanded":la.open,"aria-controls":la.open?la.contentId:void 0,"data-state":la.open?"open":"closed","data-disabled":J?"":void 0,disabled:J},X,{ref:mk(g,la.triggerRef),onPointerDown:Mf(b.onPointerDown,La=>{J||0!==La.button||!1!==La.ctrlKey||(la.onOpenToggle(),
la.open||La.preventDefault())}),onKeyDown:Mf(b.onKeyDown,La=>{if(!J){if(["Enter"," "].includes(La.key))la.onOpenToggle();if("ArrowDown"===La.key)la.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(La.key)&&La.preventDefault()}})})))}),KE=(0,Yn.forwardRef)((b,g)=>{var {__scopeDropdownMenu:n}=b;const J=Qf(b,["__scopeDropdownMenu"]),X=yz("DropdownMenuContent",n);n=Rt(n);const la=(0,Yn.useRef)(!1);return(0,Yn.createElement)(uz,wf({id:X.contentId,"aria-labelledby":X.triggerId},n,J,{ref:g,onCloseAutoFocus:Mf(b.onCloseAutoFocus,
va=>{var La;la.current||null===(La=X.triggerRef.current)||void 0===La||La.focus();la.current=!1;va.preventDefault()}),onInteractOutside:Mf(b.onInteractOutside,va=>{va=va.detail.originalEvent;const La=0===va.button&&!0===va.ctrlKey;va=2===va.button||La;if(!X.modal||va)la.current=!0}),style:of(xe({},b.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),As=(0,Yn.forwardRef)((b,g)=>{var {__scopeDropdownMenu:n}=b;b=Qf(b,["__scopeDropdownMenu"]);n=Rt(n);
return(0,Yn.createElement)(wz,wf({},n,b,{ref:g}))}),LE=b=>{const {__scopeDropdownMenu:g,children:n,dir:J,open:X,defaultOpen:la,onOpenChange:va,modal:La=!0}=b;b=Rt(g);const Wa=(0,Yn.useRef)(null),[bb=!1,pb]=hi({prop:X,defaultProp:la,onChange:va});return(0,Yn.createElement)(IE,{scope:g,triggerId:Gk(),triggerRef:Wa,contentId:Gk(),open:bb,onOpenChange:pb,onOpenToggle:(0,Yn.useCallback)(()=>pb(Db=>!Db),[pb]),modal:La},(0,Yn.createElement)(xz,wf({},b,{open:bb,onOpenChange:pb,dir:J,modal:La}),n))};xb=V(586);
var ME=pf(function(){const b=Fg(),g=n=>{n.preventDefault()};return(0,xb.jsxs)(LE,{children:[(0,xb.jsx)(JE,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*b.viewport.camera.zoom).toFixed(0)+"%"}),(0,xb.jsxs)(KE,{onCloseAutoFocus:n=>n.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,xb.jsxs)(As,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToFit,children:["Zoom to fit",(0,xb.jsx)("div",{className:"tl-menu-right-slot",children:(0,xb.jsxs)("span",
{className:"keyboard-shortcut",children:[(0,xb.jsx)("code",{children:"⇧"})," ",(0,xb.jsx)("code",{children:"1"})]})})]}),(0,xb.jsxs)(As,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToSelection,children:["Zoom to selection",(0,xb.jsx)("div",{className:"tl-menu-right-slot",children:(0,xb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,xb.jsx)("code",{children:Kp})," ",(0,xb.jsx)("code",{children:"⇧"})," ",(0,xb.jsx)("code",{children:"1"})]})})]}),(0,xb.jsxs)(As,{className:"tl-menu-item",
onSelect:g,onClick:b.api.zoomIn,children:["Zoom in",(0,xb.jsx)("div",{className:"tl-menu-right-slot",children:(0,xb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,xb.jsx)("code",{children:Kp})," ",(0,xb.jsx)("code",{children:"+"})]})})]}),(0,xb.jsxs)(As,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomOut,children:["Zoom out",(0,xb.jsx)("div",{className:"tl-menu-right-slot",children:(0,xb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,xb.jsx)("code",{children:Kp})," ",(0,xb.jsx)("code",
{children:"-"})]})})]}),(0,xb.jsxs)(As,{className:"tl-menu-item",onSelect:g,onClick:b.api.resetZoom,children:["Reset zoom",(0,xb.jsx)("div",{className:"tl-menu-right-slot",children:(0,xb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,xb.jsx)("code",{children:"⇧"})," ",(0,xb.jsx)("code",{children:"0"})]})})]})]})]})}),zz=V(22),Az=["horizontal","vertical"],Pp=(0,zz.forwardRef)((b,g)=>{const {decorative:n,orientation:J="horizontal"}=b;b=Qf(b,["decorative","orientation"]);const X=Az.includes(J)?
J:"horizontal";return(0,zz.createElement)(xj.div,wf({"data-orientation":X},n?{role:"none"}:{"aria-orientation":"vertical"===X?X:void 0,role:"separator"},b,{ref:g}))});Pp.propTypes={orientation(b,g,n){b=b[g];g=String(b);return b&&!Az.includes(b)?Error(`Invalid prop \`orientation\` of value \`${g}\` supplied to \`${n}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};xb=V(586);var NE=pf(function(){const b=Fg(),g=yt.useCallback(()=>{b.api.undo()},[b]),n=yt.useCallback(()=>{b.api.redo()},[b]),J=yt.useCallback(()=>{b.api.zoomIn()},[b]),X=yt.useCallback(()=>{b.api.zoomOut()},[b]);return(0,xb.jsxs)("div",{className:"tl-action-bar",children:[(0,xb.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,xb.jsx)(Uo,{title:"Select",id:"select",icon:"select-cursor"}),(0,xb.jsx)(Uo,{title:"Move",id:"move",icon:b.isIn("move.panning")?
"hand-grab":"hand-stop"}),(0,xb.jsx)(Pp,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,xb.jsx)(Gf,{title:"Undo",onClick:g,children:(0,xb.jsx)(Vh,{name:"arrow-back-up"})}),(0,xb.jsx)(Gf,{title:"Redo",onClick:n,children:(0,xb.jsx)(Vh,{name:"arrow-forward-up"})})]}),(0,xb.jsxs)("div",{className:"tl-toolbar tl-zoom-bar",children:[(0,xb.jsx)(Gf,{title:"Zoom in",onClick:J,id:"tl-zoom-in",children:(0,xb.jsx)(Vh,{name:"plus"})}),(0,xb.jsx)(Gf,{title:"Zoom out",onClick:X,id:"tl-zoom-out",children:(0,xb.jsx)(Vh,
{name:"minus"})}),(0,xb.jsx)(Pp,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,xb.jsx)(ME,{})]})]})}),Nq=Ja(V(22)),Qv=Ja(V(31));xb=V(586);var St=b=>`[${b.map(g=>{var n;return null!=(n=null==g?void 0:g.toFixed(2))?n:"-"}).join(", ")}]`,OE=pf(function(){const b=Fg(),g=Nq.default.useRef(),[,n]=Nq.default.useState(0);Nq.default.useEffect(()=>{g.current=document.createElement("div");g.current.style.display="contents";document.body.append(g.current);n(J=>J+1);return()=>{var J;null==(J=g.current)?
void 0:J.remove()}},[]);Nq.default.useEffect(()=>{requestAnimationFrame(()=>{var J,X;null==(X=null==(J=g.current)?void 0:J.querySelector(`[data-item-index="${b.history.pointer}"]`))?void 0:X.scrollIntoView()})},[b.history.pointer]);return g.current?Qv.default.createPortal((0,xb.jsx)("div",{className:"fixed z-[1000] left-4 max-w-[400px] top-4 overflow-scroll bg-gray-200 flex gap-2 p-2",children:b.history.stack.map((J,X)=>(0,xb.jsx)("div",{"data-item-index":X,style:{background:b.history.pointer===X?
"pink":"grey"},onClick:()=>b.history.setPointer(X),className:"flex items-center rounded-lg px-2 h-[32px] whitespace-nowrap",children:J.pages[0].nonce},X))}),g.current):null});pf(()=>{var b;const {viewport:{bounds:g,camera:{point:n,zoom:J}},inputs:X}=Mi(),la=Nq.default.useRef(),va=Nq.default.useRef();Nq.default.useEffect(()=>{var Wa=document.getElementById("tl-dev-tools-canvas-anchor");la.current=Wa;Wa=document.getElementById("tl-statusbar-anchor");va.current=Wa},[]);var La=[["Z",null!=(b=null==J?
void 0:J.toFixed(2))?b:"null"],["MP",St(X.currentPoint)],["MS",St(X.currentScreenPoint)],["VP",St(n)],["VBR",St([g.maxX,g.maxY])]].map(Wa=>Wa.join("")).join("|");b=la.current?Qv.default.createPortal((0,xb.jsx)("svg",{className:"tl-renderer-dev-tools tl-grid",children:(0,xb.jsx)("circle",{cx:n[0]*J,cy:n[1]*J,r:"4",fill:"red"})}),la.current):null;La=va.current?Qv.default.createPortal((0,xb.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:La}),va.current):null;return(0,xb.jsxs)(xb.Fragment,
{children:[b,La,(0,xb.jsx)(OE,{})]})});var PE=Ja(V(22)),Bz=Ja(V(22)),Pi=V(22),[Cz]=Rj("Popover",[Ht]),Tt=Ht(),[QE,Bs]=Cz("Popover"),Dz=(0,Pi.forwardRef)((b,g)=>{var {__scopePopover:n}=b;const J=Qf(b,["__scopePopover"]),X=Bs("PopoverTrigger",n);n=Tt(n);g=Kf(g,X.triggerRef);b=(0,Pi.createElement)(xj.button,wf({type:"button","aria-haspopup":"dialog","aria-expanded":X.open,"aria-controls":X.contentId,"data-state":X.open?"open":"closed"},J,{ref:g,onClick:Mf(b.onClick,X.onOpenToggle)}));return X.hasCustomAnchor?
b:(0,Pi.createElement)(Zy,wf({asChild:!0},n),b)}),[,RE]=Cz("PopoverPortal",{forceMount:void 0}),Ez=(0,Pi.forwardRef)((b,g)=>{var n=RE("PopoverContent",b.__scopePopover);({forceMount:n=n.forceMount}=b);const J=Qf(b,["forceMount"]);b=Bs("PopoverContent",b.__scopePopover);return(0,Pi.createElement)(Gv,{present:n||b.open},b.modal?(0,Pi.createElement)(SE,wf({},J,{ref:g})):(0,Pi.createElement)(TE,wf({},J,{ref:g})))}),SE=(0,Pi.forwardRef)((b,g)=>{const n=Bs("PopoverContent",b.__scopePopover),J=(0,Pi.useRef)(null);
g=Kf(g,J);const X=(0,Pi.useRef)(!1);(0,Pi.useEffect)(()=>{const la=J.current;if(la)return Jv(la)},[]);return(0,Pi.createElement)(Ot,{as:Lq,allowPinchZoom:!0},(0,Pi.createElement)(Fz,wf({},b,{ref:g,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mf(b.onCloseAutoFocus,la=>{var va;la.preventDefault();X.current||null===(va=n.triggerRef.current)||void 0===va||va.focus()}),onPointerDownOutside:Mf(b.onPointerDownOutside,la=>{la=la.detail.originalEvent;const va=0===la.button&&!0===la.ctrlKey;
X.current=2===la.button||va},{checkForDefaultPrevented:!1}),onFocusOutside:Mf(b.onFocusOutside,la=>la.preventDefault(),{checkForDefaultPrevented:!1})})))}),TE=(0,Pi.forwardRef)((b,g)=>{const n=Bs("PopoverContent",b.__scopePopover),J=(0,Pi.useRef)(!1);return(0,Pi.createElement)(Fz,wf({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:X=>{var la;null===(la=b.onCloseAutoFocus)||void 0===la||la.call(b,X);if(!X.defaultPrevented){var va;J.current||null===(va=n.triggerRef.current)||
void 0===va||va.focus();X.preventDefault()}J.current=!1},onInteractOutside:X=>{var la,va;null===(la=b.onInteractOutside)||void 0===la||la.call(b,X);X.defaultPrevented||(J.current=!0);la=X.target;(null===(va=n.triggerRef.current)||void 0===va?0:va.contains(la))&&X.preventDefault()}}))}),Fz=(0,Pi.forwardRef)((b,g)=>{const {__scopePopover:n,trapFocus:J,onOpenAutoFocus:X,onCloseAutoFocus:la,disableOutsidePointerEvents:va,onEscapeKeyDown:La,onPointerDownOutside:Wa,onFocusOutside:bb,onInteractOutside:pb}=
b;b=Qf(b,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const Db=Bs("PopoverContent",n),Qb=Tt(n);Sk();return(0,Pi.createElement)(Cv,{asChild:!0,loop:!0,trapped:J,onMountAutoFocus:X,onUnmountAutoFocus:la},(0,Pi.createElement)(Av,{asChild:!0,disableOutsidePointerEvents:va,onInteractOutside:pb,onEscapeKeyDown:La,onPointerDownOutside:Wa,onFocusOutside:bb,onDismiss:()=>Db.onOpenChange(!1)},
(0,Pi.createElement)($y,wf({"data-state":Db.open?"open":"closed",role:"dialog",id:Db.contentId},Qb,b,{ref:g,style:of(xe({},b.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),Gz=(0,Pi.forwardRef)((b,g)=>{var {__scopePopover:n}=b;b=Qf(b,["__scopePopover"]);n=Tt(n);return(0,Pi.createElement)(XD,wf({},n,b,{ref:g}))}),Hz=b=>{const {__scopePopover:g,children:n,open:J,defaultOpen:X,onOpenChange:la,modal:va=!1}=b;b=Tt(g);const La=(0,Pi.useRef)(null),[Wa,
bb]=(0,Pi.useState)(!1),[pb=!1,Db]=hi({prop:J,defaultProp:X,onChange:la});return(0,Pi.createElement)(az,b,(0,Pi.createElement)(QE,{scope:g,contentId:Gk(),triggerRef:La,open:pb,onOpenChange:Db,onOpenToggle:(0,Pi.useCallback)(()=>Db(Qb=>!Qb),[Db]),hasCustomAnchor:Wa,onCustomAnchorAdd:(0,Pi.useCallback)(()=>bb(!0),[]),onCustomAnchorRemove:(0,Pi.useCallback)(()=>bb(!1),[]),modal:va},n))};xb=V(586);var UE=pf(function(){const b=[{id:"box",icon:"square",title:"Rectangle"},{id:"ellipse",icon:"circle",title:"Circle"},
{id:"polygon",icon:"triangle",title:"Triangle"}],g=Fg(),[n,J]=Bz.useState(()=>{var X;return(null!=(X=b.find(la=>la.id===g.selectedTool.id))?X:b[0]).id});Bz.useEffect(()=>{J(X=>{var la,va;return null!=(va=null==(la=b.find(La=>La.id===g.selectedTool.id))?void 0:la.id)?va:X})},[g.selectedTool.id]);return(0,xb.jsxs)(Hz,{children:[(0,xb.jsxs)(Dz,{className:"tl-geometry-tools-pane-anchor",children:[(0,xb.jsx)(Uo,xe({},b.find(X=>X.id===n))),(0,xb.jsx)(Vh,{className:"tl-popover-indicator",name:"chevron-down-left"})]}),
(0,xb.jsxs)(Ez,{className:"tl-popover-content",side:"left",sideOffset:15,children:[(0,xb.jsx)("div",{className:"tl-toolbar tl-geometry-toolbar",children:b.map(X=>(0,xb.jsx)(Uo,xe({},X),X.id))}),(0,xb.jsx)(Gz,{className:"tl-popover-arrow"})]})]})}),oi=V(22),Iz=V(22),Jz=["PageUp","PageDown"],Kz=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Lz={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown",
"ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[Rv,VE,WE]=Pk("Slider"),[Mz]=Rj("Slider",[WE]),[XE,Ut]=Mz("Slider"),YE=(0,oi.forwardRef)((b,g)=>{function n(Xe){const Me=lg(Se,Xe);la(Xe,Me)}function J(Xe){la(Xe,$d.current)}function X(){Se[$d.current]!==ff.current[$d.current]&&pc(Se)}function la(Xe,Me,{commit:Uc}={commit:!1}){const Xc=(String(bb).split(".")[1]||"").length;Xe=fg(Math.round((Xe-La)/bb)*bb+La,Xc);const Ad=Of(Xe,[La,Wa]);mf((Ed=[])=>{const Pd=$e(Ed,Ad,Me);var De=Qb*bb;
if(0<De){const Ge=Wi(Pd);De=Math.min(...Ge)>=De}else De=!0;return De?($d.current=Pd.indexOf(Ad),(De=String(Pd)!==String(Ed))&&Uc&&pc(Pd),De?Pd:Ed):Ed})}const {name:va,min:La=0,max:Wa=100,step:bb=1,orientation:pb="horizontal",disabled:Db=!1,minStepsBetweenThumbs:Qb=0,defaultValue:oc=[La],value:ac,onValueChange:xc=()=>{},onValueCommit:pc=()=>{},inverted:Tb=!1}=b,tc=Qf(b,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),
[Qc,Wc]=(0,oi.useState)(null);g=Kf(g,Xe=>Wc(Xe));const rd=(0,oi.useRef)(new Set),$d=(0,oi.useRef)(0);var ke="horizontal"===pb;const Fe=Qc?!!Qc.closest("form"):!0;ke=ke?ZE:$E;const [Se=[],mf]=hi({prop:ac,defaultProp:oc,onChange:Xe=>{var Me;null===(Me=[...rd.current][$d.current])||void 0===Me||Me.focus();xc(Xe)}}),ff=(0,oi.useRef)(Se);return(0,oi.createElement)(XE,{scope:b.__scopeSlider,disabled:Db,min:La,max:Wa,valueIndexToChangeRef:$d,thumbs:rd.current,values:Se,orientation:pb},(0,oi.createElement)(Rv.Provider,
{scope:b.__scopeSlider},(0,oi.createElement)(Rv.Slot,{scope:b.__scopeSlider},(0,oi.createElement)(ke,wf({"aria-disabled":Db,"data-disabled":Db?"":void 0},tc,{ref:g,onPointerDown:Mf(tc.onPointerDown,()=>{Db||(ff.current=Se)}),min:La,max:Wa,inverted:Tb,onSlideStart:Db?void 0:n,onSlideMove:Db?void 0:J,onSlideEnd:Db?void 0:X,onHomeKeyDown:()=>!Db&&la(La,0,{commit:!0}),onEndKeyDown:()=>!Db&&la(Wa,Se.length-1,{commit:!0}),onStepKeyDown:({event:Xe,direction:Me})=>{if(!Db){Xe=Jz.includes(Xe.key)||Xe.shiftKey&&
Kz.includes(Xe.key);const Uc=$d.current;la(Se[Uc]+bb*(Xe?10:1)*Me,Uc,{commit:!0})}}})))),Fe&&Se.map((Xe,Me)=>(0,oi.createElement)(eF,{key:Me,name:va?va+(1<Se.length?"[]":""):void 0,value:Xe})))}),[Nz,Oz]=Mz("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),ZE=(0,oi.forwardRef)((b,g)=>{function n(tc){const Qc=ac.current||Qb.getBoundingClientRect(),Wc=Lf([0,Qc.width],Tb?[J,X]:[X,J]);ac.current=Qc;return Wc(tc-Qc.left)}const {min:J,max:X,dir:la,inverted:va,onSlideStart:La,onSlideMove:Wa,
onSlideEnd:bb,onStepKeyDown:pb}=b,Db=Qf(b,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Qb,oc]=(0,oi.useState)(null);g=Kf(g,tc=>oc(tc));const ac=(0,oi.useRef)(),xc=Pj(la),pc="ltr"===xc,Tb=pc&&!va||!pc&&va;return(0,oi.createElement)(Nz,{scope:b.__scopeSlider,startEdge:Tb?"left":"right",endEdge:Tb?"right":"left",direction:Tb?1:-1,size:"width"},(0,oi.createElement)(Pz,wf({dir:xc,"data-orientation":"horizontal"},Db,{ref:g,style:of(xe({},Db.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),
onSlideStart:tc=>{tc=n(tc.clientX);null===La||void 0===La||La(tc)},onSlideMove:tc=>{tc=n(tc.clientX);null===Wa||void 0===Wa||Wa(tc)},onSlideEnd:()=>{ac.current=void 0;null===bb||void 0===bb||bb()},onStepKeyDown:tc=>{const Qc=Lz[Tb?"from-left":"from-right"].includes(tc.key);null===pb||void 0===pb||pb({event:tc,direction:Qc?-1:1})}})))}),$E=(0,oi.forwardRef)((b,g)=>{function n(ac){const xc=Qb.current||Db.current.getBoundingClientRect(),pc=Lf([0,xc.height],oc?[X,J]:[J,X]);Qb.current=xc;return pc(ac-
xc.top)}const {min:J,max:X,inverted:la,onSlideStart:va,onSlideMove:La,onSlideEnd:Wa,onStepKeyDown:bb}=b,pb=Qf(b,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),Db=(0,oi.useRef)(null);g=Kf(g,Db);const Qb=(0,oi.useRef)(),oc=!la;return(0,oi.createElement)(Nz,{scope:b.__scopeSlider,startEdge:oc?"bottom":"top",endEdge:oc?"top":"bottom",size:"height",direction:oc?1:-1},(0,oi.createElement)(Pz,wf({"data-orientation":"vertical"},pb,{ref:g,style:of(xe({},pb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),
onSlideStart:ac=>{ac=n(ac.clientY);null===va||void 0===va||va(ac)},onSlideMove:ac=>{ac=n(ac.clientY);null===La||void 0===La||La(ac)},onSlideEnd:()=>{Qb.current=void 0;null===Wa||void 0===Wa||Wa()},onStepKeyDown:ac=>{const xc=Lz[oc?"from-bottom":"from-top"].includes(ac.key);null===bb||void 0===bb||bb({event:ac,direction:xc?-1:1})}})))}),Pz=(0,oi.forwardRef)((b,g)=>{const {__scopeSlider:n,onSlideStart:J,onSlideMove:X,onSlideEnd:la,onHomeKeyDown:va,onEndKeyDown:La,onStepKeyDown:Wa}=b,bb=Qf(b,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
pb=Ut("Slider",n);return(0,oi.createElement)(xj.span,wf({},bb,{ref:g,onKeyDown:Mf(b.onKeyDown,Db=>{"Home"===Db.key?(va(Db),Db.preventDefault()):"End"===Db.key?(La(Db),Db.preventDefault()):Jz.concat(Kz).includes(Db.key)&&(Wa(Db),Db.preventDefault())}),onPointerDown:Mf(b.onPointerDown,Db=>{const Qb=Db.target;Qb.setPointerCapture(Db.pointerId);Db.preventDefault();pb.thumbs.has(Qb)?Qb.focus():J(Db)}),onPointerMove:Mf(b.onPointerMove,Db=>{Db.target.hasPointerCapture(Db.pointerId)&&X(Db)}),onPointerUp:Mf(b.onPointerUp,
Db=>{const Qb=Db.target;Qb.hasPointerCapture(Db.pointerId)&&(Qb.releasePointerCapture(Db.pointerId),la(Db))})}))}),aF=(0,oi.forwardRef)((b,g)=>{var {__scopeSlider:n}=b;b=Qf(b,["__scopeSlider"]);n=Ut("SliderTrack",n);return(0,oi.createElement)(xj.span,wf({"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation},b,{ref:g}))}),bF=(0,oi.forwardRef)((b,g)=>{var {__scopeSlider:n}=b;const J=Qf(b,["__scopeSlider"]),X=Ut("SliderRange",n);n=Oz("SliderRange",n);var la=(0,oi.useRef)(null);g=Kf(g,
la);var va=X.values.length;la=X.values.map(La=>Qe(La,X.min,X.max));va=1<va?Math.min(...la):0;la=100-Math.max(...la);return(0,oi.createElement)(xj.span,wf({"data-orientation":X.orientation,"data-disabled":X.disabled?"":void 0},J,{ref:g,style:of(xe({},b.style),{[n.startEdge]:va+"%",[n.endEdge]:la+"%"})}))}),cF=(0,oi.forwardRef)((b,g)=>{const n=VE(b.__scopeSlider),[J,X]=(0,oi.useState)(null);g=Kf(g,va=>X(va));const la=(0,oi.useMemo)(()=>J?n().findIndex(va=>va.ref.current===J):-1,[n,J]);return(0,oi.createElement)(dF,
wf({},b,{ref:g,index:la}))}),dF=(0,oi.forwardRef)((b,g)=>{const {__scopeSlider:n,index:J}=b,X=Qf(b,["__scopeSlider","index"]),la=Ut("SliderThumb",n),va=Oz("SliderThumb",n),[La,Wa]=(0,oi.useState)(null);g=Kf(g,oc=>Wa(oc));var bb=ja(La);const pb=la.values[J],Db=void 0===pb?0:Qe(pb,la.min,la.max),Qb=Ve(J,la.values.length);bb=(bb=null===bb||void 0===bb?void 0:bb[va.size])?Rf(bb,Db,va.direction):0;(0,oi.useEffect)(()=>{if(La)return la.thumbs.add(La),()=>{la.thumbs.delete(La)}},[La,la.thumbs]);return(0,oi.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[va.startEdge]:`calc(${Db}% + ${bb}px)`}},(0,oi.createElement)(Rv.ItemSlot,{scope:b.__scopeSlider},(0,oi.createElement)(xj.span,wf({role:"slider","aria-label":b["aria-label"]||Qb,"aria-valuemin":la.min,"aria-valuenow":pb,"aria-valuemax":la.max,"aria-orientation":la.orientation,"data-orientation":la.orientation,"data-disabled":la.disabled?"":void 0,tabIndex:la.disabled?void 0:0},X,{ref:g,style:void 0===pb?{display:"none"}:
b.style,onFocus:Mf(b.onFocus,()=>{la.valueIndexToChangeRef.current=J})}))))}),eF=b=>{const {value:g}=b;b=Qf(b,["value"]);const n=(0,oi.useRef)(null),J=ue(g);(0,oi.useEffect)(()=>{const X=n.current,la=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(J!==g&&la){const va=new Event("input",{bubbles:!0});la.call(X,g);X.dispatchEvent(va)}},[J,g]);return(0,oi.createElement)("input",wf({style:{display:"none"}},b,{ref:n,defaultValue:g}))},fF=YE,gF=aF,hF=bF,iF=cF,Vt=Ja(V(22));
xb=V(586);var Qz=pf(b=>{var {side:g,align:n,alignOffset:J,label:X,arrow:la,children:va,border:La}=b;b=Qf(b,"side align alignOffset label arrow children border".split(" "));const Wa=Vt.useRef(null),[bb,pb]=Vt.useState(!1),{viewport:{bounds:Db,camera:{point:Qb,zoom:oc}}}=Fg(),[ac,xc]=Vt.useState(0);Vt.useEffect(()=>{if(Wa.current&&bb){var pc=Wa.current.getBoundingClientRect();se.boundsContain(Db,{minX:pc.x,minY:pc.y,maxX:pc.right,maxY:pc.bottom,width:pc.width,height:pc.height})||xc(Tb=>Tb+1)}},[Qb[0],
Qb[1],oc,bb]);return(0,xb.jsxs)(Hz,{onOpenChange:pc=>pb(pc),children:[(0,xb.jsx)(Dz,of(xe({},b),{"data-border":La,className:"tl-button tl-popover-trigger-button",children:X})),(0,xb.jsxs)(Ez,{ref:Wa,className:"tl-popover-content",align:n,alignOffset:J,side:g,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[va,la&&(0,xb.jsx)(Gz,{className:"tl-popover-arrow"})]},"popover-content-"+ac)]})});xb=V(586);xb=V(586);var jF=pf(function(){const b=Fg(),g=PE.useCallback(n=>{b.api.setColor(n)},
[]);return(0,xb.jsx)("div",{className:"tl-primary-tools",children:(0,xb.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,xb.jsx)(Uo,{title:"Add block or page",id:"logseq-portal",icon:"circle-plus"}),(0,xb.jsx)(Pp,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,xb.jsx)(Uo,{title:"Draw",id:"pencil",icon:"ballpen"}),(0,xb.jsx)(Uo,{title:"Highlight",id:"highlighter",icon:"highlight"}),(0,xb.jsx)(Uo,{title:"Eraser",id:"erase",icon:"eraser"}),(0,xb.jsx)(Uo,{title:"Connector",
id:"line",icon:"connector"}),(0,xb.jsx)(Uo,{title:"Text",id:"text",icon:"text"}),(0,xb.jsx)(UE,{}),(0,xb.jsx)(Pp,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,xb.jsx)(jh,{title:"Color Picker",popoverSide:"left",color:b.settings.color,setColor:g})]})})});xb=V(586);pf(function(){const b=Fg();return(0,xb.jsxs)("div",{className:"tl-statusbar",children:[b.selectedTool.id," | ",b.selectedTool.currentState.id,(0,xb.jsx)("div",{style:{flex:1}}),(0,xb.jsx)("div",{id:"tl-statusbar-anchor",
className:"flex gap-1"})]})});xb=V(586);var kF=pf(function(){return(0,xb.jsxs)(xb.Fragment,{children:[!1,!1,(0,xb.jsx)(jF,{}),(0,xb.jsx)(NE,{})]})}),Cs=Ja(V(22)),zr=Ja(V(22)),to=Ja(V(22)).default.createContext({}),lF=Ja(V(22)),xf=V(22),Rz=V(31),Sz=V(22),mF=(0,Sz.forwardRef)((b,g)=>(0,Sz.createElement)(xj.span,wf({},b,{ref:g,style:xe({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},b.style)}))),nF=[" ",
"Enter","ArrowUp","ArrowDown"],oF=[" ","Enter"],[Wt,Sv,pF]=Pk("Select"),[Ds]=Rj("Select",[pF]),[qF,Ar]=Ds("Select"),[rF,sF]=Ds("Select"),tF=(0,xf.forwardRef)((b,g)=>{const {__scopeSelect:n,disabled:J=!1}=b;b=Qf(b,["__scopeSelect","disabled"]);const X=Ar("SelectTrigger",n),la=X.disabled||J;g=Kf(g,X.onTriggerChange);const va=Sv(n),[La,Wa,bb]=Kg(pb=>{const Db=va().filter(oc=>!oc.disabled),Qb=Db.find(oc=>oc.value===X.value);pb=Lg(Db,pb,Qb);if(void 0!==pb)X.onValueChange(pb.value)});return(0,xf.createElement)(xj.button,
wf({type:"button",role:"combobox","aria-controls":X.contentId,"aria-expanded":X.open,"aria-required":X.required,"aria-autocomplete":"none",dir:X.dir,"data-state":X.open?"open":"closed",disabled:la,"data-disabled":la?"":void 0,"data-placeholder":void 0===X.value?"":void 0},b,{ref:g,onClick:Mf(b.onClick,pb=>{pb.currentTarget.focus()}),onPointerDown:Mf(b.onPointerDown,pb=>{const Db=pb.target;Db.hasPointerCapture(pb.pointerId)&&Db.releasePointerCapture(pb.pointerId);0===pb.button&&!1===pb.ctrlKey&&(la||
(X.onOpenChange(!0),bb()),X.triggerPointerDownPosRef.current={x:Math.round(pb.pageX),y:Math.round(pb.pageY)},pb.preventDefault())}),onKeyDown:Mf(b.onKeyDown,pb=>{const Db=""!==La.current;pb.ctrlKey||pb.altKey||pb.metaKey||1!==pb.key.length||Wa(pb.key);Db&&" "===pb.key||!nF.includes(pb.key)||(la||(X.onOpenChange(!0),bb()),pb.preventDefault())})}))}),uF=(0,xf.forwardRef)((b,g)=>{const {__scopeSelect:n,children:J,placeholder:X}=b;b=Qf(b,["__scopeSelect","className","style","children","placeholder"]);
const la=Ar("SelectValue",n),{onValueNodeHasChildrenChange:va}=la,La=void 0!==J;g=Kf(g,la.onValueNodeChange);pn(()=>{va(La)},[va,La]);return(0,xf.createElement)(xj.span,wf({},b,{ref:g,style:{pointerEvents:"none"}}),void 0===la.value&&void 0!==X?X:J)}),vF=(0,xf.forwardRef)((b,g)=>{const {children:n}=b;b=Qf(b,["__scopeSelect","children"]);return(0,xf.createElement)(xj.span,wf({"aria-hidden":!0},b,{ref:g}),n||"▼")}),wF=(0,xf.forwardRef)((b,g)=>{const n=Ar("SelectContent",b.__scopeSelect),[J,X]=(0,xf.useState)();
pn(()=>{X(new DocumentFragment)},[]);return(0,xf.createElement)(xf.Fragment,null,n.open?(0,xf.createElement)(xF,wf({},b,{ref:g})):J?(0,Rz.createPortal)((0,xf.createElement)(Tz,{scope:b.__scopeSelect},(0,xf.createElement)(Wt.Slot,{scope:b.__scopeSelect},(0,xf.createElement)("div",null,b.children))),J):null)}),[Tz,Br]=Ds("SelectContent"),xF=(0,xf.forwardRef)((b,g)=>{const {__scopeSelect:n,onCloseAutoFocus:J}=b;b=Qf(b,["__scopeSelect","onCloseAutoFocus"]);const X=Ar("SelectContent",n),[la,va]=(0,xf.useState)(null),
[La,Wa]=(0,xf.useState)(null),[bb,pb]=(0,xf.useState)(null);g=Kf(g,Pd=>Wa(Pd));const [Db,Qb]=(0,xf.useState)(null),[oc,ac]=(0,xf.useState)(null),xc=Sv(n),[pc,Tb]=(0,xf.useState)(!1),tc=(0,xf.useRef)(!0),Qc=(0,xf.useRef)(!1),Wc=(0,xf.useRef)(!1);(0,xf.useEffect)(()=>{if(La)return Jv(La)},[La]);Sk();const [rd,$d]=(0,xf.useState)();pn(()=>{La&&$d(window.getComputedStyle(La).zIndex)},[La]);const ke=(0,xf.useCallback)(Pd=>{const [De,...Ge]=xc().map(lf=>lf.ref.current),[Pe]=Ge.slice(-1),Ff=document.activeElement;
for(const lf of Pd){if(lf===Ff)break;null===lf||void 0===lf||lf.scrollIntoView({block:"nearest"});lf===De&&bb&&(bb.scrollTop=0);lf===Pe&&bb&&(bb.scrollTop=bb.scrollHeight);null===lf||void 0===lf||lf.focus();if(document.activeElement!==Ff)break}},[xc,bb]),Fe=(0,xf.useCallback)(()=>{if(X.trigger&&X.valueNode&&la&&La&&bb&&Db&&oc){var Pd=X.trigger.getBoundingClientRect(),De=La.getBoundingClientRect(),Ge=X.valueNode.getBoundingClientRect(),Pe=oc.getBoundingClientRect();"rtl"!==X.dir?(Pe=Ge.left-(Pe.left-
De.left),Ge=Pd.width+(Pd.left-Pe),De=Of(Pe,[10,window.innerWidth-10-Math.max(Ge,De.width)]),la.style.minWidth=Ge+"px",la.style.left=De+"px"):(Pe=window.innerWidth-Ge.right-(De.right-Pe.right),Ge=Pd.width+(window.innerWidth-Pd.right-Pe),De=Of(Pe,[10,window.innerWidth-10-Math.max(Ge,De.width)]),la.style.minWidth=Ge+"px",la.style.right=De+"px");const Mk=xc();De=window.innerHeight-20;var Ff=bb.scrollHeight,lf=window.getComputedStyle(La);Ge=parseInt(lf.borderTopWidth,10);var gh=parseInt(lf.paddingTop,
10);Pe=parseInt(lf.borderBottomWidth,10);lf=parseInt(lf.paddingBottom,10);var Wg=Ge+gh+Ff+lf+Pe;Ff=Math.min(5*Db.offsetHeight,Wg);var wi=window.getComputedStyle(bb);lf=parseInt(wi.paddingTop,10);wi=parseInt(wi.paddingBottom,10);const $k=Pd.top+Pd.height/2-10,yo=De-$k;Pd=Db.offsetHeight/2;gh=Ge+gh+(Db.offsetTop+Pd);Wg-=gh;gh<=$k?(Ge=Db===Mk[Mk.length-1].ref.current,la.style.bottom="0px",la.style.height=gh+Math.max(yo,Pd+(Ge?wi:0)+(La.clientHeight-bb.offsetTop-bb.offsetHeight)+Pe)+"px"):(Pe=Db===Mk[0].ref.current,
la.style.top="0px",la.style.height=Math.max($k,Ge+bb.offsetTop+(Pe?lf:0)+Pd)+Wg+"px",bb.scrollTop=gh-$k+bb.offsetTop);la.style.margin="10px 0";la.style.minHeight=Ff+"px";la.style.maxHeight=De+"px";Tb(!0);requestAnimationFrame(()=>Qc.current=!0)}},[xc,X.trigger,X.valueNode,la,La,bb,Db,oc,X.dir]);pn(()=>Fe(),[Fe]);const Se=(0,xf.useCallback)(()=>ke([Db,La]),[ke,Db,La]);(0,xf.useEffect)(()=>{pc&&Se()},[pc,Se]);const mf=(0,xf.useCallback)(Pd=>{Pd&&!0===tc.current&&(Fe(),Se(),tc.current=!1)},[Fe,Se]),
{onOpenChange:ff,triggerPointerDownPosRef:Xe}=X;(0,xf.useEffect)(()=>{if(La){var Pd=0,De=0;const Ge=Ff=>{var lf,gh,Wg,wi;Pd=Math.abs(Math.round(Ff.pageX)-(null!==(lf=null===(gh=Xe.current)||void 0===gh?void 0:gh.x)&&void 0!==lf?lf:0));De=Math.abs(Math.round(Ff.pageY)-(null!==(Wg=null===(wi=Xe.current)||void 0===wi?void 0:wi.y)&&void 0!==Wg?Wg:0))},Pe=Ff=>{10>=Pd&&10>=De?Ff.preventDefault():La.contains(Ff.target)||ff(!1);document.removeEventListener("pointermove",Ge);Xe.current=null};null!==Xe.current&&
(document.addEventListener("pointermove",Ge),document.addEventListener("pointerup",Pe,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Ge);document.removeEventListener("pointerup",Pe,{capture:!0})}}},[La,ff,Xe]);(0,xf.useEffect)(()=>{const Pd=()=>ff(!1);window.addEventListener("blur",Pd);window.addEventListener("resize",Pd);return()=>{window.removeEventListener("blur",Pd);window.removeEventListener("resize",Pd)}},[ff]);const [Me,Uc]=Kg(Pd=>{const De=xc().filter(Ff=>!Ff.disabled),
Ge=De.find(Ff=>Ff.ref.current===document.activeElement),Pe=Lg(De,Pd,Ge);Pe&&setTimeout(()=>Pe.ref.current.focus())}),Xc=(0,xf.useCallback)((Pd,De,Ge)=>{Ge=!Wc.current&&!Ge;if(void 0!==X.value&&X.value===De||Ge)Qb(Pd),Ge&&(Wc.current=!0)},[X.value]),Ad=(0,xf.useCallback)(()=>null===La||void 0===La?void 0:La.focus(),[La]),Ed=(0,xf.useCallback)((Pd,De,Ge)=>{Ge=!Wc.current&&!Ge;(void 0!==X.value&&X.value===De||Ge)&&ac(Pd)},[X.value]);return(0,xf.createElement)(Tz,{scope:n,contentWrapper:la,content:La,
viewport:bb,onViewportChange:pb,itemRefCallback:Xc,selectedItem:Db,onItemLeave:Ad,itemTextRefCallback:Ed,selectedItemText:oc,onScrollButtonChange:mf,isPositioned:pc,shouldExpandOnScrollRef:Qc,searchRef:Me},(0,xf.createElement)(Ot,{as:Lq,allowPinchZoom:!0},(0,xf.createElement)("div",{ref:va,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:rd}},(0,xf.createElement)(Cv,{asChild:!0,trapped:X.open,onMountAutoFocus:Pd=>{Pd.preventDefault()},onUnmountAutoFocus:Mf(J,Pd=>{var De;null===
(De=X.trigger)||void 0===De||De.focus({preventScroll:!0});Pd.preventDefault()})},(0,xf.createElement)(Av,wf({role:"listbox",id:X.contentId,"data-state":X.open?"open":"closed",dir:X.dir,onContextMenu:Pd=>Pd.preventDefault()},b,{ref:g,style:xe({display:"flex",flexDirection:"column",boxSizing:"border-box",maxHeight:"100%",outline:"none"},b.style),disableOutsidePointerEvents:!0,onFocusOutside:Pd=>Pd.preventDefault(),onDismiss:()=>X.onOpenChange(!1),onKeyDown:Mf(b.onKeyDown,Pd=>{var De=Pd.ctrlKey||Pd.altKey||
Pd.metaKey;"Tab"===Pd.key&&Pd.preventDefault();De||1!==Pd.key.length||Uc(Pd.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Pd.key)){let Ge=xc().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);["ArrowUp","End"].includes(Pd.key)&&(Ge=Ge.slice().reverse());["ArrowUp","ArrowDown"].includes(Pd.key)&&(De=Ge.indexOf(Pd.target),Ge=Ge.slice(De+1));setTimeout(()=>ke(Ge));Pd.preventDefault()}})}))))))}),yF=(0,xf.forwardRef)((b,g)=>{const {__scopeSelect:n}=b;b=Qf(b,["__scopeSelect"]);const J=Br("SelectViewport",
n);g=Kf(g,J.onViewportChange);const X=(0,xf.useRef)(0);return(0,xf.createElement)(xf.Fragment,null,(0,xf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,xf.createElement)(Wt.Slot,{scope:n},(0,xf.createElement)(xj.div,wf({"data-radix-select-viewport":"",role:"presentation"},b,{ref:g,style:xe({position:"relative",flex:1,
overflow:"auto"},b.style),onScroll:Mf(b.onScroll,la=>{la=la.currentTarget;const {contentWrapper:va,shouldExpandOnScrollRef:La}=J;if(null!==La&&void 0!==La&&La.current&&va){var Wa=Math.abs(X.current-la.scrollTop);if(0<Wa){var bb=window.innerHeight-20,pb=parseFloat(va.style.minHeight);const Db=parseFloat(va.style.height);pb=Math.max(pb,Db);pb<bb&&(Wa=pb+Wa,bb=Math.min(bb,Wa),Wa-=bb,va.style.height=bb+"px","0px"===va.style.bottom&&(la.scrollTop=0<Wa?Wa:0,va.style.justifyContent="flex-end"))}}X.current=
la.scrollTop})}))))});Ds("SelectGroup");var [zF,AF]=Ds("SelectItem"),BF=(0,xf.forwardRef)((b,g)=>{const {__scopeSelect:n,value:J,disabled:X=!1,textValue:la}=b;b=Qf(b,["__scopeSelect","value","disabled","textValue"]);const va=Ar("SelectItem",n),La=Br("SelectItem",n),Wa=va.value===J,[bb,pb]=(0,xf.useState)(null!==la&&void 0!==la?la:""),[Db,Qb]=(0,xf.useState)(!1);g=Kf(g,xc=>{var pc;return null===(pc=La.itemRefCallback)||void 0===pc?void 0:pc.call(La,xc,J,X)});const oc=Gk(),ac=()=>{X||(va.onValueChange(J),
va.onOpenChange(!1))};return(0,xf.createElement)(zF,{scope:n,value:J,disabled:X,textId:oc,isSelected:Wa,onItemTextChange:(0,xf.useCallback)(xc=>{pb(pc=>{var Tb;return pc||(null!==(Tb=null===xc||void 0===xc?void 0:xc.textContent)&&void 0!==Tb?Tb:"").trim()})},[])},(0,xf.createElement)(Wt.ItemSlot,{scope:n,value:J,disabled:X,textValue:bb},(0,xf.createElement)(xj.div,wf({role:"option","aria-labelledby":oc,"data-highlighted":Db?"":void 0,"aria-selected":Wa&&Db,"data-state":Wa?"checked":"unchecked","aria-disabled":X||
void 0,"data-disabled":X?"":void 0,tabIndex:X?void 0:-1},b,{ref:g,onFocus:Mf(b.onFocus,()=>Qb(!0)),onBlur:Mf(b.onBlur,()=>Qb(!1)),onPointerUp:Mf(b.onPointerUp,ac),onPointerMove:Mf(b.onPointerMove,xc=>{if(X){var pc;null===(pc=La.onItemLeave)||void 0===pc||pc.call(La)}else xc.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Mf(b.onPointerLeave,xc=>{if(xc.currentTarget===document.activeElement){var pc;null===(pc=La.onItemLeave)||void 0===pc||pc.call(La)}}),onKeyDown:Mf(b.onKeyDown,xc=>{var pc;
if(""===(null===(pc=La.searchRef)||void 0===pc?void 0:pc.current)||" "!==xc.key)oF.includes(xc.key)&&ac()," "===xc.key&&xc.preventDefault()})}))))}),CF=(0,xf.forwardRef)((b,g)=>{var {__scopeSelect:n}=b;b=Qf(b,["__scopeSelect","className","style"]);const J=Ar("SelectItemText",n),X=Br("SelectItemText",n),la=AF("SelectItemText",n);n=sF("SelectItemText",n);const [va,La]=(0,xf.useState)(null);g=Kf(g,Qb=>La(Qb),la.onItemTextChange,Qb=>{var oc;return null===(oc=X.itemTextRefCallback)||void 0===oc?void 0:
oc.call(X,Qb,la.value,la.disabled)});const Wa=null===va||void 0===va?void 0:va.textContent,bb=(0,xf.useMemo)(()=>(0,xf.createElement)("option",{key:la.value,value:la.value,disabled:la.disabled},Wa),[la.disabled,la.value,Wa]),{onNativeOptionAdd:pb,onNativeOptionRemove:Db}=n;pn(()=>{pb(bb);return()=>Db(bb)},[pb,Db,bb]);return(0,xf.createElement)(xf.Fragment,null,(0,xf.createElement)(xj.span,wf({id:la.textId},b,{ref:g})),la.isSelected&&J.valueNode&&!J.valueNodeHasChildren?(0,Rz.createPortal)(b.children,
J.valueNode):null)}),DF=(0,xf.forwardRef)((b,g)=>{const n=Br("SelectScrollUpButton",b.__scopeSelect),[J,X]=(0,xf.useState)(!1);g=Kf(g,n.onScrollButtonChange);pn(()=>{if(n.viewport&&n.isPositioned){let la=function(){X(0<va.scrollTop)};const va=n.viewport;la();va.addEventListener("scroll",la);return()=>va.removeEventListener("scroll",la)}},[n.viewport,n.isPositioned]);return J?(0,xf.createElement)(Uz,wf({},b,{ref:g,onAutoScroll:()=>{const {viewport:la,selectedItem:va}=n;la&&va&&(la.scrollTop-=va.offsetHeight)}})):
null}),EF=(0,xf.forwardRef)((b,g)=>{const n=Br("SelectScrollDownButton",b.__scopeSelect),[J,X]=(0,xf.useState)(!1);g=Kf(g,n.onScrollButtonChange);pn(()=>{if(n.viewport&&n.isPositioned){let la=function(){X(Math.ceil(va.scrollTop)<va.scrollHeight-va.clientHeight)};const va=n.viewport;la();va.addEventListener("scroll",la);return()=>va.removeEventListener("scroll",la)}},[n.viewport,n.isPositioned]);return J?(0,xf.createElement)(Uz,wf({},b,{ref:g,onAutoScroll:()=>{const {viewport:la,selectedItem:va}=n;
la&&va&&(la.scrollTop+=va.offsetHeight)}})):null}),Uz=(0,xf.forwardRef)((b,g)=>{const {__scopeSelect:n,onAutoScroll:J}=b;b=Qf(b,["__scopeSelect","onAutoScroll"]);const X=Br("SelectScrollButton",n),la=(0,xf.useRef)(null),va=Sv(n),La=(0,xf.useCallback)(()=>{null!==la.current&&(window.clearInterval(la.current),la.current=null)},[]);(0,xf.useEffect)(()=>()=>La(),[La]);pn(()=>{var Wa;const bb=va().find(pb=>pb.ref.current===document.activeElement);null===bb||void 0===bb||null===(Wa=bb.ref.current)||void 0===
Wa||Wa.scrollIntoView({block:"nearest"})},[va]);return(0,xf.createElement)(xj.div,wf({"aria-hidden":!0},b,{ref:g,style:xe({flexShrink:0},b.style),onPointerMove:Mf(b.onPointerMove,()=>{var Wa;null===(Wa=X.onItemLeave)||void 0===Wa||Wa.call(X);null===la.current&&(la.current=window.setInterval(J,50))}),onPointerLeave:Mf(b.onPointerLeave,()=>{La()})}))}),Vz=(0,xf.forwardRef)((b,g)=>{const {value:n}=b;b=Qf(b,["value"]);const J=(0,xf.useRef)(null);g=Kf(g,J);const X=ue(n);(0,xf.useEffect)(()=>{const la=
J.current,va=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(X!==n&&va){const La=new Event("change",{bubbles:!0});va.call(la,n);la.dispatchEvent(La)}},[X,n]);return(0,xf.createElement)(mF,{asChild:!0},(0,xf.createElement)("select",wf({},b,{ref:g,defaultValue:n})))});Vz.displayName="BubbleSelect";var FF=b=>{const {__scopeSelect:g,children:n,open:J,defaultOpen:X,onOpenChange:la,value:va,defaultValue:La,onValueChange:Wa,dir:bb,name:pb,autoComplete:Db,disabled:Qb,required:oc}=
b,[ac,xc]=(0,xf.useState)(null),[pc,Tb]=(0,xf.useState)(null),[tc,Qc]=(0,xf.useState)(!1),Wc=Pj(bb),[rd=!1,$d]=hi({prop:J,defaultProp:X,onChange:la}),[ke,Fe]=hi({prop:va,defaultProp:La,onChange:Wa}),Se=(0,xf.useRef)(null),mf=ac?!!ac.closest("form"):!0,[ff,Xe]=(0,xf.useState)(new Set),Me=Array.from(ff).map(Uc=>Uc.props.value).join(";");return(0,xf.createElement)(qF,{required:oc,scope:g,trigger:ac,onTriggerChange:xc,valueNode:pc,onValueNodeChange:Tb,valueNodeHasChildren:tc,onValueNodeHasChildrenChange:Qc,
contentId:Gk(),value:ke,onValueChange:Fe,open:rd,onOpenChange:$d,dir:Wc,triggerPointerDownPosRef:Se,disabled:Qb},(0,xf.createElement)(Wt.Provider,{scope:g},(0,xf.createElement)(rF,{scope:b.__scopeSelect,onNativeOptionAdd:(0,xf.useCallback)(Uc=>{Xe(Xc=>(new Set(Xc)).add(Uc))},[]),onNativeOptionRemove:(0,xf.useCallback)(Uc=>{Xe(Xc=>{Xc=new Set(Xc);Xc.delete(Uc);return Xc})},[])},n)),mf?(0,xf.createElement)(Vz,{key:Me,"aria-hidden":!0,required:oc,tabIndex:-1,name:pb,autoComplete:Db,value:ke,onChange:Uc=>
Fe(Uc.target.value),disabled:Qb},void 0===ke?(0,xf.createElement)("option",{value:""}):null,Array.from(ff)):null)},GF=tF,HF=uF,IF=vF,JF=b=>(0,xf.createElement)($D,wf({asChild:!0},b)),KF=wF,LF=yF,MF=BF,NF=CF,OF=DF,PF=EF;xb=V(586);var QF=Ja(V(22)),RF=Ja(V(22));xb=V(586);var Wz=({id:b,showReferenceContent:g=!1})=>{var n;const {handlers:{isWhiteboardPage:J,redirectToPage:X,sidebarAddBlock:la,queryBlockByUUID:va},renderers:{Breadcrumb:La,PageName:Wa}}=RF.default.useContext(to);var bb="";let pb=Uh(b)?"B":
"P",Db="";if(Uh(b)){bb=va(b);if(!bb)return(0,xb.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});Db=bb.content;bb="whiteboard-shape"===(null==(n=bb.properties)?void 0:n["ls-type"])?"link-to-whiteboard":"link-to-block"}else bb=J(b)?"link-to-whiteboard":"link-to-page";n=Db&&23<Db.length?Db.slice(0,20)+"...":Db;return(0,xb.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Qb=>{Qb.stopPropagation();Qb.shiftKey?la(b,"B"===pb?"block":"page"):
X(b)},children:[(0,xb.jsx)(Vh,{name:bb}),(0,xb.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===pb?(0,xb.jsx)(Wa,{pageName:b}):(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsx)(La,{levelLimit:1,blockId:b,endSeparator:g}),g&&n]})})]})},wm=Ja(V(22)),qn=V(22),SF=["children"],Xt="undefined"!==typeof document?qn.useLayoutEffect:qn.useEffect,fh=Ja(V(22)),bi=V(22),TF=V(31),Es,lm,UF="undefined"!=typeof document?bi.useLayoutEffect:bi.useEffect;!function(b){b[b.DEBUG=0]="DEBUG";
b[b.INFO=1]="INFO";b[b.WARN=2]="WARN";b[b.ERROR=3]="ERROR"}(lm||={});var VF=((Es={})[lm.DEBUG]="debug",Es[lm.INFO]="log",Es[lm.WARN]="warn",Es[lm.ERROR]="error",Es),Qp=ze(function(){var b=Bf(lm.ERROR);return{log:Bf(function(g,n,J){var X;void 0===J&&(J=lm.INFO);J>=(null!=(X=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?X:b(4))&&console[VF[J]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",g,n)}),logLevel:b}},[],{singleton:!0}),rn=ze(function(){var b=
ug(),g=ug(),n=Bf(0),J=ug(),X=Bf(0),la=ug(),va=ug(),La=Bf(0),Wa=Bf(0),bb=Bf(0),pb=Bf(0),Db=ug(),Qb=ug(),oc=Bf(!1),ac=Bf(!1);return tg(qf(b,Vd(function(xc){return xc.scrollTop})),g),tg(qf(b,Vd(function(xc){return xc.scrollHeight})),va),tg(g,X),{scrollContainerState:b,scrollTop:g,viewportHeight:la,headerHeight:La,fixedHeaderHeight:Wa,fixedFooterHeight:bb,footerHeight:pb,scrollHeight:va,smoothScrollTargetReached:J,react18ConcurrentRendering:ac,scrollTo:Db,scrollBy:Qb,statefulScrollTop:X,deviation:n,scrollingInProgress:oc}},
[],{singleton:!0}),Ji={lvl:0},Tv=ze(function(){return{recalcInProgress:Bf(!1)}},[],{singleton:!0}),WF={offsetHeight:"height",offsetWidth:"width"},kp=ze(function(b){var g=b[0].log,n=b[1].recalcInProgress;b=ug();var J=ug(),X=Ng(J,0),la=ug(),va=ug(),La=Bf(0),Wa=Bf([]),bb=Bf(void 0),pb=Bf(void 0),Db=Bf(function(tc,Qc){return vf(tc,WF[Qc])}),Qb=Bf(void 0),oc=Bf(0),ac={offsetTree:[],sizeTree:Ji,groupOffsetTree:Ji,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},xc=Ng(qf(b,wg(Wa,g,oc),Ie(y,ac),Tg()),
ac);tg(qf(Wa,Og(function(tc){return 0<tc.length}),wg(xc,oc),Vd(function(tc){var Qc=tc[0],Wc=tc[1],rd=tc[2];tc=Qc.reduce(function($d,ke,Fe){return yj($d,ke,U(ke,Wc.offsetTree,rd)||Fe)},Ji);return Je({},Wc,{groupIndices:Qc,groupOffsetTree:tc})})),xc);tg(qf(J,wg(xc),Og(function(tc){return tc[0]<tc[1].lastIndex}),Vd(function(tc){var Qc=tc[1];return[{startIndex:tc[0],endIndex:Qc.lastIndex,size:Qc.lastSize}]})),b);tg(bb,pb);var pc=Ng(qf(bb,Vd(function(tc){return void 0===tc})),!0);tg(qf(pb,Og(function(tc){return void 0!==
tc&&xc(4).sizeTree===Ji}),Vd(function(tc){return[{startIndex:0,endIndex:0,size:tc}]})),b);ac=Xh(qf(b,wg(xc),Ie(function(tc,Qc){Qc=Qc[1];return{changed:Qc!==tc.sizes,sizes:Qc}},{changed:!1,sizes:ac}),Vd(function(tc){return tc.changed})));ch(qf(La,Ie(function(tc,Qc){return{diff:tc.prev-Qc,prev:Qc}},{diff:0,prev:0}),Vd(function(tc){return tc.diff})),function(tc){0<tc?(n(0,!0),la(0,tc)):0>tc&&va(0,tc)});ch(qf(La,wg(g)),function(tc){0>tc[0]&&(0,tc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",
{firstItemIndex:La},lm.ERROR)});g=Xh(la);tg(qf(la,wg(xc),Vd(function(tc){var Qc=tc[0];tc=tc[1];if(0<tc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return cl(tc.sizeTree).reduce(function(Wc,rd){var $d=rd.k;rd=rd.v;return{ranges:[].concat(Wc.ranges,[{startIndex:Wc.prevIndex,endIndex:$d+Qc-1,size:Wc.prevSize}]),prevIndex:$d+Qc,prevSize:rd}},{ranges:[],prevIndex:0,prevSize:tc.lastSize}).ranges})),b);var Tb=Xh(qf(va,wg(xc,oc),Vd(function(tc){return U(-tc[0],
tc[1].offsetTree,tc[2])})));return tg(qf(va,wg(xc,oc),Vd(function(tc){var Qc=tc[0],Wc=tc[1];tc=tc[2];if(0<Wc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var rd=cl(Wc.sizeTree).reduce(function($d,ke){return yj($d,Math.max(0,ke.k+Qc),ke.v)},Ji);return Je({},Wc,{sizeTree:rd},om(Wc.offsetTree,0,rd,tc))})),xc),{data:Qb,totalCount:J,sizeRanges:b,groupIndices:Wa,defaultItemSize:pb,fixedItemSize:bb,unshiftWith:la,shiftWith:va,shiftWithOffset:Tb,beforeUnshiftWith:g,
firstItemIndex:La,gap:oc,sizes:xc,listRefresh:ac,statefulTotalCount:X,trackItemSizes:pc,itemSize:Db}},Cg(Qp,Tv),{singleton:!0}),XF="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,Fs=ze(function(b){function g(){pc&&(pc(),pc=null);tc&&(tc(),tc=null);Tb&&(clearTimeout(Tb),Tb=null);La(0,!1)}var n=b[0],J=n.sizes,X=n.totalCount,la=n.listRefresh;n=n.gap;var va=b[1],La=va.scrollingInProgress,Wa=va.viewportHeight,bb=va.scrollTo,pb=va.smoothScrollTargetReached,Db=va.headerHeight,
Qb=va.footerHeight,oc=va.fixedHeaderHeight;va=va.fixedFooterHeight;b=b[2].log;var ac=ug(),xc=Bf(0),pc=null,Tb=null,tc=null;return tg(qf(ac,wg(J,Wa,X,xc,Db,Qb,b),wg(n,oc,va),Vd(function(Qc){var Wc=Qc[0],rd=Wc[0],$d=Wc[1],ke=Wc[2],Fe=Wc[3],Se=Wc[4],mf=Wc[5],ff=Wc[6],Xe=Wc[7],Me=Qc[1];Wc=Qc[2];Qc=Qc[3];var Uc=Ga(rd),Xc=Uc.align,Ad=Uc.behavior,Ed=Uc.offset;--Fe;Uc=ya(Uc,$d,Fe);mf=U(Uc,$d.offsetTree,Me)+mf;"end"===Xc?(mf+=Wc+kl($d.sizeTree,Uc)[1]-ke+Qc,Uc===Fe&&(mf+=ff)):"center"===Xc?mf+=(Wc+kl($d.sizeTree,
Uc)[1]-ke+Qc)/2:mf-=Se;Ed&&(mf+=Ed);var Pd=function(Ge){g();Ge?(Xe("retrying to scroll to",{location:rd},lm.DEBUG),ac(0,rd)):Xe("list did not change, scroll successful",{},lm.DEBUG)};if(g(),"smooth"===Ad){var De=!1;tc=ch(la,function(Ge){De=De||Ge});pc=Dl(pb,function(){Pd(De)})}else pc=Dl(qf(la,function(Ge){var Pe=setTimeout(function(){Ge(!1)},150);return function(Ff){Ff&&(Ge(!0),clearTimeout(Pe))}}),Pd);Tb=setTimeout(function(){g()},1200);La(0,!0);return Xe("scrolling from index to",{index:Uc,top:mf,
behavior:Ad},lm.DEBUG),{top:mf,behavior:Ad}})),bb),{scrollToIndex:ac,topListHeight:xc}},Cg(kp,rn,Qp),{singleton:!0}),YF={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},Gs=ze(function(b){var g=b[0],n=g.scrollContainerState;b=g.scrollTop;var J=g.viewportHeight,X=g.headerHeight,la=g.footerHeight,va=g.scrollBy;g=Bf(!1);var La=Bf(!0),Wa=ug(),bb=ug(),pb=Bf(4),Db=Bf(0),Qb=Ng(qf(Ah(qf(Vg(b),bf(1),sf(!0)),qf(Vg(b),bf(1),sf(!1),Yg(100))),
Tg()),!1),oc=Ng(qf(Ah(qf(va,sf(!0)),qf(va,sf(!1),Yg(200))),Tg()),!1);tg(qf(we(Vg(b),Vg(Db)),Vd(function(ac){return ac[0]<=ac[1]}),Tg()),La);tg(qf(La,Ei(50)),bb);J=Xh(qf(we(n,Vg(J),Vg(X),Vg(la),Vg(pb)),Ie(function(ac,xc){var pc,Tb,tc=xc[0],Qc=tc.scrollTop;tc=tc.scrollHeight;var Wc=xc[1],rd={viewportHeight:Wc,scrollTop:Qc,scrollHeight:tc};return Qc+Wc-tc>-xc[4]?(Qc>ac.state.scrollTop?(pc="SCROLLED_DOWN",Tb=ac.state.scrollTop-Qc):(pc="SIZE_DECREASED",Tb=ac.state.scrollTop-Qc||ac.scrollTopDelta),{atBottom:!0,
state:rd,atBottomBecause:pc,scrollTopDelta:Tb}):{atBottom:!1,notAtBottomBecause:rd.scrollHeight>ac.state.scrollHeight?"SIZE_INCREASED":Wc<ac.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Qc<ac.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:rd}},YF),Tg(function(ac,xc){return ac&&ac.atBottom===xc.atBottom})));X=Ng(qf(n,Ie(function(ac,xc){var pc=xc.scrollTop,Tb=xc.scrollHeight;xc=xc.viewportHeight;return 1.01>Math.abs(ac.scrollHeight-Tb)?{scrollTop:pc,scrollHeight:Tb,
jump:0,changed:!1}:ac.scrollTop!==pc&&1>Tb-(pc+xc)?{scrollHeight:Tb,scrollTop:pc,jump:ac.scrollTop-pc,changed:!0}:{scrollHeight:Tb,scrollTop:pc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Og(function(ac){return ac.changed}),Vd(function(ac){return ac.jump})),0);tg(qf(J,Vd(function(ac){return ac.atBottom})),g);tg(qf(g,Ei(50)),Wa);la=Bf("down");tg(qf(n,Vd(function(ac){return ac.scrollTop}),Tg(),Ie(function(ac,xc){return oc(4)?{direction:ac.direction,prevScrollTop:xc}:{direction:xc<
ac.prevScrollTop?"up":"down",prevScrollTop:xc}},{direction:"down",prevScrollTop:0}),Vd(function(ac){return ac.direction})),la);tg(qf(n,Ei(50),sf("none")),la);n=Bf(0);return tg(qf(Qb,Og(function(ac){return!ac}),sf(0)),n),tg(qf(b,Ei(100),wg(Qb),Og(function(ac){return!!ac[1]}),Ie(function(ac,xc){return[ac[1],xc[0]]},[0,0]),Vd(function(ac){return ac[1]-ac[0]})),n),{isScrolling:Qb,isAtTop:La,isAtBottom:g,atBottomState:J,atTopStateChange:bb,atBottomStateChange:Wa,scrollDirection:la,atBottomThreshold:pb,
atTopThreshold:Db,scrollVelocity:n,lastJumpDueToItemResize:X}},Cg(rn)),Oq=ze(function(b){var g=b[0].log;b=Bf(!1);var n=Xh(qf(b,Og(function(J){return J}),Tg()));return ch(b,function(J){J&&g(4)("props updated",{},lm.DEBUG)}),{propsReady:b,didMount:n}},Cg(Qp),{singleton:!0}),Uv=ze(function(b){var g=b[0],n=g.sizes,J=g.listRefresh;g=g.defaultItemSize;var X=b[1].scrollTop,la=b[2].scrollToIndex;b=b[3].didMount;var va=Bf(!0),La=Bf(0);return tg(qf(b,wg(La),Og(function(Wa){return!!Wa[1]}),sf(!1)),va),ch(qf(we(J,
b),wg(va,n,g),Og(function(Wa){var bb=Wa[1],pb=Wa[3];return Wa[0][1]&&(Wa[2].sizeTree!==Ji||void 0!==pb)&&!bb}),wg(La)),function(Wa){var bb=Wa[1];setTimeout(function(){Dl(X,function(){va(0,!0)});la(0,bb)})}),{scrolledToInitialItem:va,initialTopMostItemIndex:La}},Cg(kp,rn,Fs,Oq),{singleton:!0}),ZF=ze(function(b){function g(xc){Wa(0,{index:"LAST",align:"end",behavior:xc})}function n(xc){var pc=Dl(La,function(Tb){!xc||Tb.atBottom||"SIZE_INCREASED"!==Tb.notAtBottomBecause||ac||(Db(4)("scrolling to bottom due to increased size",
{},lm.DEBUG),g("auto"))});setTimeout(pc,100)}var J=b[0],X=J.totalCount,la=J.listRefresh,va=b[1];J=va.isAtBottom;var La=va.atBottomState,Wa=b[2].scrollToIndex;va=b[3].scrolledToInitialItem;var bb=b[4],pb=bb.propsReady;bb=bb.didMount;var Db=b[5].log;b=b[6].scrollingInProgress;var Qb=Bf(!1),oc=ug(),ac=null;return ch(qf(we(qf(Vg(X),bf(1)),bb),wg(Vg(Qb),J,va,b),Vd(function(xc){var pc=xc[0],Tb=pc[0];pc=pc[1]&&xc[3];var tc="auto";pc&&(tc=xc[1],xc=xc[2]||xc[4],tc="function"==typeof tc?Za(tc(xc)):xc&&Za(tc),
pc=pc&&!!tc);return{totalCount:Tb,shouldFollow:pc,followOutputBehavior:tc}}),Og(function(xc){return xc.shouldFollow})),function(xc){var pc=xc.totalCount,Tb=xc.followOutputBehavior;ac&&(ac(),ac=null);ac=Dl(la,function(){Db(4)("following output to ",{totalCount:pc},lm.DEBUG);g(Tb);ac=null})}),ch(qf(we(Vg(Qb),X,pb),Og(function(xc){return xc[0]&&xc[2]}),Ie(function(xc,pc){pc=pc[1];return{refreshed:xc.value===pc,value:pc}},{refreshed:!1,value:0}),Og(function(xc){return xc.refreshed}),wg(Qb,X)),function(xc){n(!1!==
xc[1])}),ch(oc,function(){n(!1!==Qb(4))}),ch(we(Vg(Qb),La),function(xc){var pc=xc[1];xc[0]&&!pc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===pc.notAtBottomBecause&&g("auto")}),{followOutput:Qb,autoscrollToBottom:oc}},Cg(kp,Gs,Fs,Uv,Oq,Qp,rn)),Xz=ze(function(b){var g=b[0],n=g.totalCount,J=g.groupIndices;g=g.sizes;var X=b[1];b=X.scrollTop;X=X.headerHeight;var la=ug(),va=ug(),La=Xh(qf(la,Vd(nb)));return tg(qf(La,Vd(function(Wa){return Wa.totalCount})),n),tg(qf(La,Vd(function(Wa){return Wa.groupIndices})),
J),tg(qf(we(b,g,X),Og(function(Wa){return Wa[1].groupOffsetTree!==Ji}),Vd(function(Wa){return kl(Wa[1].groupOffsetTree,Math.max(Wa[0]-Wa[2],0),"v")[0]}),Tg(),Vd(function(Wa){return[Wa]})),va),{groupCounts:la,topItemsIndexes:va}},Cg(kp,rn)),Vv=ze(function(b){var g=b[0];b=g.scrollTop;var n=g.viewportHeight,J=g.deviation,X=g.headerHeight,la=g.fixedHeaderHeight;g=ug();var va=Bf(0),La=Bf(0),Wa=Bf(0);b=Ng(qf(we(Vg(b),Vg(n),Vg(X),Vg(g,rb),Vg(Wa),Vg(va),Vg(la),Vg(J),Vg(La)),Vd(function(bb){var pb=bb[0],Db=
bb[1],Qb=bb[2],oc=bb[3],ac=oc[0];oc=oc[1];var xc=bb[4],pc=bb[6],Tb=bb[7],tc=bb[8],Qc=pb-Tb;bb=bb[5]+pc;var Wc=Math.max(Qb-Qc,0),rd="none",$d="number"==typeof tc?tc:tc.top||0;tc="number"==typeof tc?tc:tc.bottom||0;return ac-=Tb,oc+=Qb+pc,ac+(Qb+pc)>pb+bb-$d&&(rd="up"),oc-Tb<pb-Wc+Db+tc&&(rd="down"),"none"!==rd?[Math.max(Qc-Qb-zc(xc,"top",rd)-$d,0),Qc-Wc-pc+Db+zc(xc,"bottom",rd)+tc]:null}),Og(function(bb){return null!=bb}),Tg(rb)),[0,0]);return{listBoundary:g,overscan:Wa,topListHeight:va,increaseViewportBy:La,
visibleRange:b}},Cg(rn),{singleton:!0}),Yz={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},Cr=ze(function(b){var g=b[0],n=g.sizes,J=g.totalCount,X=g.data,la=g.firstItemIndex,va=g.gap,La=b[1],Wa=b[2],bb=Wa.visibleRange;g=Wa.listBoundary;Wa=Wa.topListHeight;var pb=b[3],Db=pb.scrolledToInitialItem,Qb=pb.initialTopMostItemIndex;pb=b[4].topListHeight;var oc=b[5],ac=b[6].didMount,xc=b[7].recalcInProgress;b=Bf([]);var pc=ug();tg(La.topItemsIndexes,
b);n=Ng(qf(we(ac,xc,Vg(bb,rb),Vg(J),Vg(n),Vg(Qb),Db,Vg(b),Vg(la),Vg(va),X),Og(function(Tb){return Tb[0]&&!Tb[1]}),Vd(function(Tb){var tc=Tb[2],Qc=tc[0],Wc=tc[1];tc=Tb[3];var rd=Tb[5],$d=Tb[6],ke=Tb[7],Fe=Tb[8],Se=Tb[9],mf=Tb[10];Tb=Tb[4];var ff=Tb.sizeTree,Xe=Tb.offsetTree;if(0===tc||0===Qc&&0===Wc)return Je({},Yz,{totalCount:tc});if(ff===Ji)return Gd(function(Ff,lf,gh){return lf.groupOffsetTree!==Ji?(Ff=ua(Ff,lf),[{index:kl(lf.groupOffsetTree,Ff)[0],size:0,offset:0},{index:Ff,size:0,offset:0,data:gh&&
gh[0]}]):[{index:Ff,size:0,offset:0,data:gh&&gh[0]}]}("number"==typeof rd?rd:"LAST"===rd.index?tc-1:rd.index,Tb,mf),[],tc,Se,Tb,Fe);rd=[];if(0<ke.length){var Me,Uc=ke[0],Xc=ke[ke.length-1],Ad=0;for(ff=vk(pm(ff,Uc,Xc));!(Me=ff()).done;){var Ed=Me.value;Me=Ed.value;var Pd=Math.min(Ed.end,Xc);for(Ed=Math.max(Ed.start,Uc);Ed<=Pd;Ed++)rd.push({index:Ed,size:Me,offset:Ad,data:mf&&mf[Ed]}),Ad+=Me}}if(!$d)return Gd([],rd,tc,Se,Tb,Fe);var De=0<ke.length?ke[ke.length-1]+1:0,Ge=function(Ff,lf,gh,Wg){return void 0===
Wg&&(Wg=0),0<Wg&&(lf=Math.max(lf,Ff[fm(Ff,Wg,bg)].offset)),bj((Mk=gh,yo=fm(wi=Ff,lf,$k=Si),Hr=fm(wi,Mk,$k,yo),wi.slice(yo,Hr+1)),kn);var wi,Mk,$k,yo,Hr}(Xe,Qc,Wc,De);if(0===Ge.length)return null;var Pe=tc-1;return Gd(qh([],function(Ff){for(var lf,gh=vk(Ge);!(lf=gh()).done;){var Wg=lf.value,wi=Wg.value;lf=wi.offset;var Mk=Wg.start,$k=wi.size;wi.offset<Qc&&(wi=(Mk+=Math.floor((Qc-wi.offset+Se)/($k+Se)))-Wg.start,lf+=wi*$k+wi*Se);Mk<De&&(lf+=(De-Mk)*$k,Mk=De);for(Wg=Math.min(Wg.end,Pe);Mk<=Wg&&!(lf>=
Wc);Mk++)Ff.push({index:Mk,size:$k,offset:lf,data:mf&&mf[Mk]}),lf+=$k+Se}}),rd,tc,Se,Tb,Fe)}),Og(function(Tb){return null!==Tb}),Tg()),Yz);return tg(qf(X,Og(function(Tb){return void 0!==Tb}),Vd(function(Tb){return Tb.length})),J),tg(qf(n,Vd(function(Tb){return Tb.topListHeight})),pb),tg(pb,Wa),tg(qf(n,Vd(function(Tb){return[Tb.top,Tb.bottom]})),g),tg(qf(n,Vd(function(Tb){return Tb.items})),pc),Je({listState:n,topItemsIndexes:b,endReached:Xh(qf(n,Og(function(Tb){return 0<Tb.items.length}),wg(J,X),
Og(function(Tb){var tc=Tb[0].items;return tc[tc.length-1].originalIndex===Tb[1]-1}),Vd(function(Tb){return[Tb[1]-1,Tb[2]]}),Tg(rb),Vd(function(Tb){return Tb[0]}))),startReached:Xh(qf(n,Ei(200),Og(function(Tb){var tc=Tb.items;return 0<tc.length&&tc[0].originalIndex===Tb.topItems.length}),Vd(function(Tb){return Tb.items[0].index}),Tg())),rangeChanged:Xh(qf(n,Og(function(Tb){return 0<Tb.items.length}),Vd(function(Tb){Tb=Tb.items;for(var tc=0,Qc=Tb.length-1;"group"===Tb[tc].type&&tc<Qc;)tc++;for(;"group"===
Tb[Qc].type&&Qc>tc;)Qc--;return{startIndex:Tb[tc].index,endIndex:Tb[Qc].index}}),Tg(Yb))),itemsRendered:pc},oc)},Cg(kp,Xz,Vv,Uv,Fs,Gs,Oq,Tv),{singleton:!0}),$F=ze(function(b){var g=b[0],n=g.sizes,J=g.firstItemIndex,X=g.data;g=g.gap;var la=b[1].listState;b=b[2].didMount;var va=Bf(0);return tg(qf(b,wg(va),Og(function(La){return 0!==La[1]}),wg(n,J,g,X),Vd(function(La){var Wa=La[0][1],bb=La[1],pb=La[2],Db=La[3];La=La[4];var Qb=void 0===La?[]:La;La=0;if(0<bb.groupIndices.length)for(var oc,ac=vk(bb.groupIndices);!((oc=
ac()).done||oc.value-La>=Wa);)La++;Wa+=La;return Gd(Array.from({length:Wa}).map(function(xc,pc){return{index:pc,size:0,offset:0,data:Qb[pc]}}),[],Wa,Db,bb,pb)})),la),{initialItemCount:va}},Cg(kp,Cr,Oq),{singleton:!0}),Zz=ze(function(b){b=b[0].scrollVelocity;var g=Bf(!1),n=ug(),J=Bf(!1);return tg(qf(b,wg(J,g,n),Og(function(X){return!!X[1]}),Vd(function(X){var la=X[0],va=X[1],La=X[2];X=X[3];var Wa=va.enter;if(La){if((0,va.exit)(la,X))return!1}else if(Wa(la,X))return!0;return La}),Tg()),g),ch(qf(we(g,
b,n),wg(J)),function(X){var la=X[0];X=X[1];return la[0]&&X&&X.change&&X.change(la[1],la[2])}),{isSeeking:g,scrollSeekConfiguration:J,scrollVelocity:b,scrollSeekRangeChanged:n}},Cg(Gs),{singleton:!0}),aG=ze(function(b){b=b[0].topItemsIndexes;var g=Bf(0);return tg(qf(g,Og(function(n){return 0<n}),Vd(function(n){return Array.from({length:n}).map(function(J,X){return X})})),b),{topItemCount:g}},Cg(Cr)),Wv=ze(function(b){var g=b[0],n=g.footerHeight,J=g.headerHeight,X=g.fixedHeaderHeight;g=g.fixedFooterHeight;
var la=b[1].listState;b=ug();n=Ng(qf(we(n,g,J,X,la),Vd(function(va){var La=va[4];return va[0]+va[1]+va[2]+va[3]+La.offsetBottom+La.bottom})),0);return tg(Vg(n),b),{totalListHeight:n,totalListHeightChanged:b}},Cg(rn,Cr),{singleton:!0}),bG=Nd(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),cG=ze(function(b){function g(pc){0<pc?(J(0,{top:-pc,behavior:"auto"}),la(0,0)):(la(0,0),J(0,{top:-pc,behavior:"auto"}))}var n=b[0],J=n.scrollBy,X=n.scrollTop,la=n.deviation,
va=n.scrollingInProgress,La=b[1];n=La.isScrolling;var Wa=La.isAtBottom,bb=La.scrollDirection,pb=b[3],Db=pb.beforeUnshiftWith,Qb=pb.shiftWithOffset,oc=pb.sizes;pb=pb.gap;var ac=b[4].log,xc=b[5].recalcInProgress;b=Xh(qf(b[2].listState,wg(La.lastJumpDueToItemResize),Ie(function(pc,Tb){var tc=pc[1],Qc=Tb[0],Wc=Qc.items,rd=Qc.totalCount;Qc=Qc.bottom+Qc.offsetBottom;var $d=0;return pc[2]===rd&&0<tc.length&&0<Wc.length&&(0===Wc[0].originalIndex&&0===tc[0].originalIndex||0!=($d=Qc-pc[3])&&($d+=Tb[1])),[$d,
Wc,rd,Qc]},[0,[],0,0]),Og(function(pc){return 0!==pc[0]}),wg(X,bb,va,Wa,ac),Og(function(pc){return!pc[3]&&0!==pc[1]&&"up"===pc[2]}),Vd(function(pc){var Tb=pc[0][0];return(0,pc[5])("Upward scrolling compensation",{amount:Tb},lm.DEBUG),Tb})));return ch(qf(b,wg(la,n)),function(pc){var Tb=pc[0],tc=pc[1];pc[2]&&bG()?la(0,tc-Tb):g(-Tb)}),ch(qf(we(Ng(n,!1),la,xc),Og(function(pc){return!pc[0]&&!pc[2]&&0!==pc[1]}),Vd(function(pc){return pc[1]}),Ei(1)),g),tg(qf(Qb,Vd(function(pc){return{top:-pc}})),J),ch(qf(Db,
wg(oc,pb),Vd(function(pc){var Tb=pc[0];return Tb*pc[1].lastSize+Tb*pc[2]})),function(pc){la(0,pc);requestAnimationFrame(function(){am(J,{top:pc});requestAnimationFrame(function(){la(0,0);xc(0,!1)})})}),{deviation:la}},Cg(rn,Gs,Cr,kp,Qp,Tv)),dG=ze(function(b){var g=b[0].totalListHeight,n=b[1].didMount,J=b[2].scrollTo;b=Bf(0);return ch(qf(n,wg(b),Og(function(X){return 0!==X[1]}),Vd(function(X){return{top:X[1]}})),function(X){Dl(qf(g,Og(function(la){return 0!==la})),function(){setTimeout(function(){J(0,
X)})})}),{initialScrollTop:b}},Cg(Wv,Oq,rn),{singleton:!0}),eG=ze(function(b){var g=b[0].viewportHeight;b=b[1].totalListHeight;var n=Bf(!1);return{alignToBottom:n,paddingTopAddition:Ng(qf(we(n,g,b),Og(function(J){return J[0]}),Vd(function(J){return Math.max(0,J[1]-J[2])}),Tg()),0)}},Cg(rn,Wv),{singleton:!0}),$z=ze(function(b){var g=b[0];b=g.scrollTo;g=g.scrollContainerState;var n=ug(),J=ug(),X=ug(),la=Bf(!1),va=Bf(void 0);return tg(qf(we(n,J),Vd(function(La){var Wa=La[0];return{scrollTop:Math.max(0,
Wa.scrollTop-La[1].offsetTop),scrollHeight:Wa.scrollHeight,viewportHeight:Wa.viewportHeight}})),g),tg(qf(b,wg(J),Vd(function(La){var Wa=La[0];return Je({},Wa,{top:Wa.top+La[1].offsetTop})})),X),{useWindowScroll:la,customScrollParent:va,windowScrollContainerState:n,windowViewportRect:J,windowScrollTo:X}},Cg(rn)),fG=["done","behavior","align"],gG=ze(function(b){var g=b[0],n=g.sizes,J=g.totalCount;g=g.gap;var X=b[1],la=X.scrollTop,va=X.viewportHeight,La=X.headerHeight,Wa=X.fixedHeaderHeight,bb=X.fixedFooterHeight,
pb=X.scrollingInProgress;b=b[2].scrollToIndex;X=ug();return tg(qf(X,wg(n,va,J,La,Wa,bb,la),wg(g),Vd(function(Db){var Qb=Db[0],oc=Qb[0],ac=Qb[1],xc=Qb[2],pc=Qb[3],Tb=Qb[4],tc=Qb[5],Qc=Qb[6];Qb=Qb[7];var Wc=Db[1];Db=oc.done;var rd=oc.behavior,$d=oc.align,ke=Pg(oc,fG),Fe=null;oc=ya(oc,ac,pc-1);Tb=U(oc,ac.offsetTree,Wc)+Tb+tc;return Tb<Qb+tc?Fe=Je({},ke,{behavior:rd,align:null!=$d?$d:"start"}):Tb+kl(ac.sizeTree,oc)[1]>Qb+xc-Qc&&(Fe=Je({},ke,{behavior:rd,align:null!=$d?$d:"end"})),Fe?Db&&Dl(qf(pb,bf(1),
Og(function(Se){return!1===Se})),Db):Db&&Db(),Fe}),Og(function(Db){return null!==Db})),b),{scrollIntoView:X}},Cg(kp,rn,Fs,Cr,Qp),{singleton:!0}),hG=["listState","topItemsIndexes"],iG=ze(function(b){return Je({},b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},Cg(Vv,$F,Oq,Zz,Wv,dG,eG,$z,gG)),aA=ze(function(b){var g=b[0],n=g.totalCount,J=g.sizeRanges,X=g.fixedItemSize,la=g.defaultItemSize,va=g.trackItemSizes,La=g.itemSize,Wa=g.data,bb=g.firstItemIndex,pb=g.groupIndices,Db=g.statefulTotalCount;g=g.gap;
var Qb=b[1],oc=Qb.initialTopMostItemIndex;Qb=Qb.scrolledToInitialItem;var ac=b[2],xc=b[3],pc=b[4],Tb=pc.listState,tc=pc.topItemsIndexes;pc=Pg(pc,hG);var Qc=b[5].scrollToIndex,Wc=b[7].topItemCount,rd=b[8].groupCounts,$d=b[9];b=b[10];return tg(pc.rangeChanged,$d.scrollSeekRangeChanged),tg(qf($d.windowViewportRect,Vd(function(ke){return ke.visibleHeight})),ac.viewportHeight),Je({totalCount:n,data:Wa,firstItemIndex:bb,sizeRanges:J,initialTopMostItemIndex:oc,scrolledToInitialItem:Qb,topItemsIndexes:tc,
topItemCount:Wc,groupCounts:rd,fixedItemHeight:X,defaultItemHeight:la,gap:g},xc,{statefulTotalCount:Db,listState:Tb,scrollToIndex:Qc,trackItemSizes:va,itemSize:La,groupIndices:pb},pc,$d,ac,b)},Cg(kp,Uv,rn,ZF,Cr,Fs,cG,aG,Xz,iG,Qp)),bA=Nd(function(){if("undefined"==typeof document)return"sticky";var b=document.createElement("div");return b.style.position="-webkit-sticky","-webkit-sticky"===b.style.position?"-webkit-sticky":"sticky"}),Yt=fh.createContext(void 0),cA=fh.createContext(void 0),jG=["placeholder"],
kG=["style","children"],lG=["style","children"],mG=ze(function(){var b=Bf(function(Wa){return"Item "+Wa}),g=Bf(null),n=Bf(function(Wa){return"Group "+Wa}),J=Bf({}),X=Bf(Ce),la=Bf("div"),va=Bf(Vj),La=function(Wa,bb){return void 0===bb&&(bb=null),Ng(qf(J,Vd(function(pb){return pb[Wa]}),Tg()),bb)};return{context:g,itemContent:b,groupContent:n,components:J,computeItemKey:X,headerFooterTag:la,scrollerRef:va,FooterComponent:La("Footer"),HeaderComponent:La("Header"),TopItemListComponent:La("TopItemList"),
ListComponent:La("List","div"),ItemComponent:La("Item","div"),GroupComponent:La("Group","div"),ScrollerComponent:La("Scroller","div"),EmptyPlaceholder:La("EmptyPlaceholder"),ScrollSeekPlaceholder:La("ScrollSeekPlaceholder")}}),nG=ze(function(b){function g(X,la,va){tg(qf(X,wg(J.components),Vd(function(La){var Wa,bb=La[0];La=La[1];return console.warn("react-virtuoso: "+va+" property is deprecated. Pass components."+la+" instead."),Je({},La,((Wa={})[la]=bb,Wa))})),J.components)}var n=b[0],J=b[1];b={item:tf(J.itemContent,
"Rename the %citem%c prop to %citemContent."),group:tf(J.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:tf(n.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:tf(n.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:tf(n.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:ug(),maxHeightCacheSize:ug(),footer:ug(),header:ug(),HeaderContainer:ug(),FooterContainer:ug(),
ItemContainer:ug(),ScrollContainer:ug(),GroupContainer:ug(),ListContainer:ug(),emptyComponent:ug(),scrollSeek:ug()};return ch(b.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),ch(b.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
ch(b.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),ch(b.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),ch(b.scrollSeek,function(X){var la=X.placeholder;
X=Pg(X,jG);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=Je({},(0,J.components)(4),{ScrollSeekPlaceholder:la});(0,J.components)(0,la);(0,n.scrollSeekConfiguration)(0,X)}),g(b.footer,"Footer","footer"),g(b.header,"Header","header"),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),g(b.emptyComponent,
"EmptyPlaceholder","emptyComponent"),g(b.GroupContainer,"Group","GroupContainer"),Je({},n,J,b)},Cg(aA,mG)),oG=function(b){return fh.createElement("div",{style:{height:b.height}})},pG={position:bA(),zIndex:1,overflowAnchor:"none"},qG={overflowAnchor:"none"},dA=fh.memo(function(b){b=b.showTopList;b=void 0!==b&&b;var g=Zi("listState"),n=Zn("sizeRanges"),J=Zi("useWindowScroll"),X=Zi("customScrollParent"),la=Zn("windowScrollContainerState"),va=Zn("scrollContainerState");J=X||J?la:va;var La=Zi("itemContent"),
Wa=Zi("context"),bb=Zi("groupContent");la=Zi("trackItemSizes");va=Zi("itemSize");var pb=Zi("log"),Db=Zn("gap");n=jl(n,va,la,b?Vj:J,pb,Db,X).callbackRef;X=fh.useState(0);var Qb=X[0],oc=X[1];Xv("deviation",function(Wc){Qb!==Wc&&oc(Wc)});X=Zi("EmptyPlaceholder");var ac=Zi("ScrollSeekPlaceholder")||oG;J=Zi("ListComponent");var xc=Zi("ItemComponent"),pc=Zi("GroupComponent"),Tb=Zi("computeItemKey"),tc=Zi("isSeeking"),Qc=0<Zi("groupIndices").length;la=Zi("paddingTopAddition");la=b?{}:{boxSizing:"border-box",
paddingTop:g.offsetTop+la,paddingBottom:g.offsetBottom,marginTop:Qb};return!b&&0===g.totalCount&&X?(0,bi.createElement)(X,Vf(X,Wa)):(0,bi.createElement)(J,Je({},Vf(J,Wa),{ref:n,style:la,"data-test-id":b?"virtuoso-top-item-list":"virtuoso-item-list"}),(b?g.topItems:g.items).map(function(Wc){var rd=Wc.originalIndex,$d=Tb(rd+g.firstItemIndex,Wc.data,Wa);return tc?(0,bi.createElement)(ac,Je({},Vf(ac,Wa),{key:$d,index:Wc.index,height:Wc.size,type:Wc.type||"item"},"group"===Wc.type?{}:{groupIndex:Wc.groupIndex})):
"group"===Wc.type?(0,bi.createElement)(pc,Je({},Vf(pc,Wa),{key:$d,"data-index":rd,"data-known-size":Wc.size,"data-item-index":Wc.index,style:pG}),bb(Wc.index)):(0,bi.createElement)(xc,Je({},Vf(xc,Wa),{key:$d,"data-index":rd,"data-known-size":Wc.size,"data-item-index":Wc.index,"data-item-group-index":Wc.groupIndex,style:qG}),Qc?La(Wc.index,Wc.groupIndex,Wc.data,Wa):La(Wc.index,Wc.data,Wa))}))}),rG={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Dr=
{width:"100%",height:"100%",position:"absolute",top:0},sG={width:"100%",position:bA(),top:0},tG=fh.memo(function(){var b=Zi("HeaderComponent"),g=Zn("headerHeight"),n=Zi("headerFooterTag"),J=Nk(function(la){return g(vf(la,"height"))}),X=Zi("context");return b?(0,bi.createElement)(n,{ref:J},(0,bi.createElement)(b,Vf(b,X))):null}),uG=fh.memo(function(){var b=Zi("FooterComponent"),g=Zn("footerHeight"),n=Zi("headerFooterTag"),J=Nk(function(la){return g(vf(la,"height"))}),X=Zi("context");return b?(0,bi.createElement)(n,
{ref:J},(0,bi.createElement)(b,Vf(b,X))):null}),vG=function(b){b=b.children;var g=(0,bi.useContext)(Yt),n=Zn("viewportHeight"),J=Zn("fixedItemHeight"),X=Nk($f(n,function(la){return vf(la,"height")}));return fh.useEffect(function(){g&&(n(g.viewportHeight),J(g.itemHeight))},[g,n,J]),fh.createElement("div",{style:Dr,ref:X,"data-viewport-type":"element"},b)},wG=function(b){b=b.children;var g=(0,bi.useContext)(Yt),n=Zn("windowViewportRect"),J=Zn("fixedItemHeight"),X=Zi("customScrollParent");X=pd(n,X);
return fh.useEffect(function(){g&&(J(g.itemHeight),n({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,n,J]),fh.createElement("div",{ref:X,style:Dr,"data-viewport-type":"window"},b)},xG=function(b){b=b.children;var g=Zi("TopItemListComponent"),n=Zi("headerHeight");n=Je({},sG,{marginTop:n+"px"});var J=Zi("context");return(0,bi.createElement)(g||"div",{style:n,context:J},b)},Zt=th(nG,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},fh.memo(function(b){var g=Zi("useWindowScroll"),n=0<Zi("topItemsIndexes").length,J=Zi("customScrollParent"),X=J||g?wG:vG;return fh.createElement(J||g?AG:zG,Je({},b),fh.createElement(X,null,fh.createElement(tG,null),fh.createElement(dA,null),fh.createElement(uG,
null)),n&&fh.createElement(xG,null,fh.createElement(dA,{showTopList:!0})))})),yG=Zt.Component,Zn=Zt.usePublisher,Zi=Zt.useEmitterValue,Xv=Zt.useEmitter,zG=jj({usePublisher:Zn,useEmitterValue:Zi,useEmitter:Xv}),AG=hg({usePublisher:Zn,useEmitterValue:Zi,useEmitter:Xv}),eA={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},BG={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},fA=Math.round,gA=Math.ceil,$t=Math.floor,Yv=Math.min,Er=Math.max,
CG=ze(function(b){var g=b[0],n=g.overscan,J=g.visibleRange,X=g.listBoundary,la=b[1];g=la.scrollTop;var va=la.viewportHeight,La=la.scrollBy,Wa=la.scrollTo,bb=la.smoothScrollTargetReached,pb=la.scrollContainerState,Db=la.footerHeight;la=la.headerHeight;var Qb=b[2],oc=b[3],ac=b[4],xc=ac.propsReady,pc=ac.didMount,Tb=b[5];ac=Tb.windowViewportRect;var tc=Tb.windowScrollTo,Qc=Tb.useWindowScroll,Wc=Tb.customScrollParent;Tb=Tb.windowScrollContainerState;b=b[6];var rd=Bf(0),$d=Bf(0),ke=Bf(eA),Fe=Bf({height:0,
width:0}),Se=Bf({height:0,width:0}),mf=ug(),ff=ug(),Xe=Bf(0),Me=Bf(void 0),Uc=Bf({row:0,column:0});tg(qf(we(pc,$d,Me),Og(function(Xc){return 0!==Xc[1]}),Vd(function(Xc){return{items:hh(0,Xc[1]-1,Xc[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),ke);tg(qf(we(Vg(rd),J,Vg(Uc,di),Vg(Se,function(Xc,Ad){return Xc&&Xc.width===Ad.width&&Xc.height===Ad.height}),Me),wg(Fe),Vd(function(Xc){var Ad=Xc[0],Ed=Ad[0],Pd=Ad[1],De=Pd[0],Ge=Pd[1],Pe=Ad[2],Ff=Ad[3],lf=Ad[4],gh=Xc[1];Xc=Pe.row;
var Wg=Pe.column;Ad=Ff.height;Pd=Ff.width;var wi=gh.width;if(0===Ed||0===wi)return eA;if(0===Pd)return Je({},BG,{items:hh(0,0,lf)});Wg=Er(1,$t((wi+Wg)/(Pd+Wg)));De=Wg*$t((De+Xc)/(Ad+Xc));Ge=Wg*gA((Ge+Xc)/(Ad+Xc))-1;Ge=Yv(Ed-1,Er(Ge,Wg-1));De=hh(Yv(Ge,Er(0,De)),Ge,lf);Ff=pi(gh,Pe,Ff,De);Pe=Ff.top;Ff=Ff.bottom;Ed=gA(Ed/Wg);return{items:De,offsetTop:Pe,offsetBottom:Ed*Ad+(Ed-1)*Xc-Ff,top:Pe,bottom:Ff,itemHeight:Ad,itemWidth:Pd}})),ke);tg(qf(Me,Og(function(Xc){return void 0!==Xc}),Vd(function(Xc){return Xc.length})),
rd);tg(qf(Fe,Vd(function(Xc){return Xc.height})),va);tg(qf(we(Fe,Se,ke,Uc),Vd(function(Xc){Xc=pi(Xc[0],Xc[3],Xc[1],Xc[2].items);return[Xc.top,Xc.bottom]}),Tg(rb)),X);J=Xh(qf(Vg(ke),Og(function(Xc){return 0<Xc.items.length}),wg(rd),Og(function(Xc){var Ad=Xc[0].items;return Ad[Ad.length-1].index===Xc[1]-1}),Vd(function(Xc){return Xc[1]-1}),Tg()));X=Xh(qf(Vg(ke),Og(function(Xc){Xc=Xc.items;return 0<Xc.length&&0===Xc[0].index}),sf(0),Tg()));va=Xh(qf(Vg(ke),Og(function(Xc){return 0<Xc.items.length}),Vd(function(Xc){Xc=
Xc.items;return{startIndex:Xc[0].index,endIndex:Xc[Xc.length-1].index}}),Tg(Yb)));tg(va,oc.scrollSeekRangeChanged);tg(qf(mf,wg(Fe,Se,rd,Uc),Vd(function(Xc){var Ad=Xc[1],Ed=Xc[2],Pd=Xc[3],De=Xc[4],Ge=Ga(Xc[0]);Xc=Ge.align;var Pe=Ge.behavior,Ff=Ge.offset;Ge=Ge.index;"LAST"===Ge&&(Ge=Pd-1);Pd=Mh(Ad,De,Ed,Er(0,Ge,Yv(Pd-1,Ge)));return"end"===Xc?Pd=fA(Pd-Ad.height+Ed.height):"center"===Xc&&(Pd=fA(Pd-Ad.height/2+Ed.height/2)),Ff&&(Pd+=Ff),{top:Pd,behavior:Pe}})),Wa);pc=Ng(qf(ke,Vd(function(Xc){return Xc.offsetBottom+
Xc.bottom})),0);return tg(qf(ac,Vd(function(Xc){return{width:Xc.visibleWidth,height:Xc.visibleHeight}})),Fe),Je({data:Me,totalCount:rd,viewportDimensions:Fe,itemDimensions:Se,scrollTop:g,scrollHeight:ff,overscan:n,scrollBy:La,scrollTo:Wa,scrollToIndex:mf,smoothScrollTargetReached:bb,windowViewportRect:ac,windowScrollTo:tc,useWindowScroll:Qc,customScrollParent:Wc,windowScrollContainerState:Tb,deviation:Xe,scrollContainerState:pb,footerHeight:Db,headerHeight:la,initialItemCount:$d,gap:Uc},oc,{gridState:ke,
totalListHeight:pc},Qb,{startReached:X,endReached:J,rangeChanged:va,propsReady:xc},b)},Cg(Vv,rn,Gs,Zz,Oq,$z,Qp)),DG=["placeholder"],EG=ze(function(){var b=Bf(function(bb){return"Item "+bb}),g=Bf({}),n=Bf(null),J=Bf("virtuoso-grid-item"),X=Bf("virtuoso-grid-list"),la=Bf(Ce),va=Bf("div"),La=Bf(Vj),Wa=function(bb,pb){return void 0===pb&&(pb=null),Ng(qf(g,Vd(function(Db){return Db[bb]}),Tg()),pb)};return{context:n,itemContent:b,components:g,computeItemKey:la,itemClassName:J,listClassName:X,headerFooterTag:va,
scrollerRef:La,FooterComponent:Wa("Footer"),HeaderComponent:Wa("Header"),ListComponent:Wa("List","div"),ItemComponent:Wa("Item","div"),ScrollerComponent:Wa("Scroller","div"),ScrollSeekPlaceholder:Wa("ScrollSeekPlaceholder","div")}}),FG=ze(function(b){function g(X,la,va){tg(qf(X,wg(J.components),Vd(function(La){var Wa,bb=La[0];La=La[1];return console.warn("react-virtuoso: "+va+" property is deprecated. Pass components."+la+" instead."),Je({},La,((Wa={})[la]=bb,Wa))})),J.components)}var n=b[0],J=b[1];
b={item:tf(J.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:ug(),ScrollContainer:ug(),ListContainer:ug(),emptyComponent:ug(),scrollSeek:ug()};return ch(b.scrollSeek,function(X){var la=X.placeholder;X=Pg(X,DG);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=Je({},(0,J.components)(4),{ScrollSeekPlaceholder:la});(0,J.components)(0,la);(0,n.scrollSeekConfiguration)(0,
X)}),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),Je({},n,J,b)},Cg(CG,EG)),GG=fh.memo(function(){var b=Al("gridState"),g=Al("listClassName"),n=Al("itemClassName"),J=Al("itemContent"),X=Al("computeItemKey"),la=Al("isSeeking"),va=uo("scrollHeight"),La=Al("ItemComponent"),Wa=Al("ListComponent"),bb=Al("ScrollSeekPlaceholder"),pb=Al("context"),Db=uo("itemDimensions"),Qb=uo("gap"),oc=Al("log"),ac=Nk(function(xc){va(xc.parentElement.parentElement.scrollHeight);
var pc=xc.firstChild;pc&&Db(pc.getBoundingClientRect());Qb({row:ag("row-gap",getComputedStyle(xc).rowGap,oc),column:ag("column-gap",getComputedStyle(xc).columnGap,oc)})});return(0,bi.createElement)(Wa,Je({ref:ac,className:g},Vf(Wa,pb),{style:{paddingTop:b.offsetTop,paddingBottom:b.offsetBottom}}),b.items.map(function(xc){var pc=X(xc.index,xc.data,pb);return la?(0,bi.createElement)(bb,Je({key:pc},Vf(bb,pb),{index:xc.index,height:b.itemHeight,width:b.itemWidth})):(0,bi.createElement)(La,Je({},Vf(La,
pb),{className:n,"data-index":xc.index,key:pc}),J(xc.index,xc.data,pb))}))}),HG=fh.memo(function(){var b=Al("HeaderComponent"),g=uo("headerHeight"),n=Al("headerFooterTag"),J=Nk(function(la){return g(vf(la,"height"))}),X=Al("context");return b?(0,bi.createElement)(n,{ref:J},(0,bi.createElement)(b,Vf(b,X))):null}),IG=fh.memo(function(){var b=Al("FooterComponent"),g=uo("footerHeight"),n=Al("headerFooterTag"),J=Nk(function(la){return g(vf(la,"height"))}),X=Al("context");return b?(0,bi.createElement)(n,
{ref:J},(0,bi.createElement)(b,Vf(b,X))):null}),JG=function(b){b=b.children;var g=(0,bi.useContext)(cA),n=uo("itemDimensions"),J=uo("viewportDimensions"),X=Nk(function(la){J(la.getBoundingClientRect())});return fh.useEffect(function(){g&&(J({height:g.viewportHeight,width:g.viewportWidth}),n({height:g.itemHeight,width:g.itemWidth}))},[g,J,n]),fh.createElement("div",{style:Dr,ref:X},b)},KG=function(b){b=b.children;var g=(0,bi.useContext)(cA),n=uo("windowViewportRect"),J=uo("itemDimensions"),X=Al("customScrollParent");
X=pd(n,X);return fh.useEffect(function(){g&&(J({height:g.itemHeight,width:g.itemWidth}),n({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:g.viewportWidth}))},[g,n,J]),fh.createElement("div",{ref:X,style:Dr},b)},Zv=th(FG,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},fh.memo(function(b){b=Je({},b);var g=Al("useWindowScroll"),n=Al("customScrollParent"),J=n||g?KG:JG;return fh.createElement(n||g?MG:LG,Je({},b),fh.createElement(J,null,fh.createElement(HG,null),fh.createElement(GG,null),fh.createElement(IG,null)))})),uo=Zv.usePublisher,Al=Zv.useEmitterValue,hA=Zv.useEmitter,LG=jj({usePublisher:uo,useEmitterValue:Al,useEmitter:hA}),MG=hg({usePublisher:uo,useEmitterValue:Al,useEmitter:hA}),NG=ze(function(){var b=Bf(function(Wa){return fh.createElement("td",
null,"Item $",Wa)}),g=Bf(null),n=Bf(null),J=Bf(null),X=Bf({}),la=Bf(Ce),va=Bf(Vj),La=function(Wa,bb){return void 0===bb&&(bb=null),Ng(qf(X,Vd(function(pb){return pb[Wa]}),Tg()),bb)};return{context:g,itemContent:b,fixedHeaderContent:n,fixedFooterContent:J,components:X,computeItemKey:la,scrollerRef:va,TableComponent:La("Table","table"),TableHeadComponent:La("TableHead","thead"),TableFooterComponent:La("TableFoot","tfoot"),TableBodyComponent:La("TableBody","tbody"),TableRowComponent:La("TableRow","tr"),
ScrollerComponent:La("Scroller","div"),EmptyPlaceholder:La("EmptyPlaceholder"),ScrollSeekPlaceholder:La("ScrollSeekPlaceholder"),FillerRow:La("FillerRow")}}),OG=ze(function(b){return Je({},b[0],b[1])},Cg(aA,NG)),PG=function(b){return fh.createElement("tr",null,fh.createElement("td",{style:{height:b.height}}))},QG=function(b){return fh.createElement("tr",null,fh.createElement("td",{style:{height:b.height,padding:0,border:0}}))},RG=fh.memo(function(){var b=Dj("listState"),g=vo("sizeRanges"),n=Dj("useWindowScroll"),
J=Dj("customScrollParent"),X=vo("windowScrollContainerState"),la=vo("scrollContainerState");n=J||n?X:la;var va=Dj("itemContent");X=Dj("trackItemSizes");J=jl(g,Dj("itemSize"),X,n,Dj("log"),void 0,J);g=J.callbackRef;var La=J.ref;J=fh.useState(0);var Wa=J[0],bb=J[1];aw("deviation",function(Tb){Wa!==Tb&&(La.current.style.marginTop=Tb+"px",bb(Tb))});X=Dj("EmptyPlaceholder");var pb=Dj("ScrollSeekPlaceholder")||PG;n=Dj("FillerRow")||QG;J=Dj("TableBodyComponent");var Db=Dj("TableRowComponent"),Qb=Dj("computeItemKey"),
oc=Dj("isSeeking");la=Dj("paddingTopAddition");var ac=Dj("firstItemIndex"),xc=Dj("statefulTotalCount"),pc=Dj("context");if(0===xc&&X)return(0,bi.createElement)(X,Vf(X,pc));X=b.offsetTop+la+Wa;la=b.offsetBottom;X=0<X?fh.createElement(n,{height:X,key:"padding-top"}):null;n=0<la?fh.createElement(n,{height:la,key:"padding-bottom"}):null;b=b.items.map(function(Tb){var tc=Tb.originalIndex,Qc=Qb(tc+ac,Tb.data,pc);return oc?(0,bi.createElement)(pb,Je({},Vf(pb,pc),{key:Qc,index:Tb.index,height:Tb.size,type:Tb.type||
"item"})):(0,bi.createElement)(Db,Je({},Vf(Db,pc),{key:Qc,"data-index":tc,"data-known-size":Tb.size,"data-item-index":Tb.index,style:{overflowAnchor:"none"}}),va(Tb.index,Tb.data,pc))});return(0,bi.createElement)(J,Je({ref:g,"data-test-id":"virtuoso-item-list"},Vf(J,pc)),[X].concat(b,[n]))}),SG=function(b){b=b.children;var g=(0,bi.useContext)(Yt),n=vo("viewportHeight"),J=vo("fixedItemHeight"),X=Nk($f(n,function(la){return vf(la,"height")}));return fh.useEffect(function(){g&&(n(g.viewportHeight),J(g.itemHeight))},
[g,n,J]),fh.createElement("div",{style:Dr,ref:X,"data-viewport-type":"element"},b)},TG=function(b){b=b.children;var g=(0,bi.useContext)(Yt),n=vo("windowViewportRect"),J=vo("fixedItemHeight"),X=Dj("customScrollParent");X=pd(n,X);return fh.useEffect(function(){g&&(J(g.itemHeight),n({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,n,J]),fh.createElement("div",{ref:X,style:Dr,"data-viewport-type":"window"},b)},$v=th(OG,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},fh.memo(function(b){var g=Dj("useWindowScroll"),n=Dj("customScrollParent"),J=vo("fixedHeaderHeight"),X=vo("fixedFooterHeight"),la=Dj("fixedHeaderContent"),va=Dj("fixedFooterContent"),La=Dj("context");J=Nk($f(J,function(Db){return vf(Db,
"height")}));var Wa=Nk($f(X,function(Db){return vf(Db,"height")}));X=n||g?VG:UG;g=n||g?TG:SG;n=Dj("TableComponent");var bb=Dj("TableHeadComponent"),pb=Dj("TableFooterComponent");la=la?fh.createElement(bb,Je({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:J},Vf(bb,La)),la()):null;va=va?fh.createElement(pb,Je({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Wa},Vf(pb,La)),va()):null;return fh.createElement(X,Je({},b),fh.createElement(g,null,fh.createElement(n,Je({style:{borderSpacing:0}},
Vf(n,La)),[la,fh.createElement(RG,{key:"TableBody"}),va])))})),vo=$v.usePublisher,Dj=$v.useEmitterValue,aw=$v.useEmitter,UG=jj({usePublisher:vo,useEmitterValue:Dj,useEmitter:aw}),VG=hg({usePublisher:vo,useEmitterValue:Dj,useEmitter:aw});xb=V(586);xb=V(586);var au=class extends Bn{constructor(){super(...arguments);ia(this,"ReactComponent",pf(({events:b,isErasing:g,isBinding:n,isSelected:J})=>{const {props:{size:[X,la],stroke:va,fill:La,noFill:Wa,strokeWidth:bb,strokeType:pb,borderRadius:Db,opacity:Qb}}=
this;return(0,xb.jsxs)(ro,of(xe({},b),{opacity:g?.2:Qb,children:[n&&(0,xb.jsx)(yh,{mode:"svg",strokeWidth:bb,size:[X,la]}),(0,xb.jsx)("rect",{className:J||!Wa?"tl-hitarea-fill":"tl-hitarea-stroke",x:bb/2,y:bb/2,rx:Db,ry:Db,width:Math.max(.01,X-bb),height:Math.max(.01,la-bb),pointerEvents:"all"}),(0,xb.jsx)("rect",{x:bb/2,y:bb/2,rx:Db,ry:Db,width:Math.max(.01,X-bb),height:Math.max(.01,la-bb),strokeWidth:bb,stroke:Cf(va,"stroke"),strokeDasharray:"dashed"===pb?"8 2":void 0,fill:Wa?"none":Cf(La,"background")})]}))}));
ia(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g],borderRadius:n}}=this;return(0,xb.jsx)("rect",{width:b,height:g,rx:n,ry:n,fill:"transparent"})}));ia(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));void 0!==b.borderRadius&&(b.borderRadius=Math.max(0,b.borderRadius));return yf(this,b)})}};ia(au,"id","box");ia(au,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,
strokeType:"line",strokeWidth:2,opacity:1});xb=V(586);xb=V(586);var bu=class extends cv{constructor(){super(...arguments);ia(this,"ReactComponent",pf(({isSelected:b,isErasing:g,events:n})=>{const {size:[J,X],stroke:la,fill:va,noFill:La,strokeWidth:Wa,strokeType:bb,opacity:pb}=this.props;return(0,xb.jsxs)(ro,of(xe({},n),{opacity:g?.2:pb,children:[(0,xb.jsx)("ellipse",{className:b||!La?"tl-hitarea-fill":"tl-hitarea-stroke",cx:J/2,cy:X/2,rx:Math.max(.01,(J-Wa)/2),ry:Math.max(.01,(X-Wa)/2)}),(0,xb.jsx)("ellipse",
{cx:J/2,cy:X/2,rx:Math.max(.01,(J-Wa)/2),ry:Math.max(.01,(X-Wa)/2),strokeWidth:Wa,stroke:Cf(la,"stroke"),strokeDasharray:"dashed"===bb?"8 2":void 0,fill:La?"none":Cf(va,"background")})]}))}));ia(this,"ReactIndicator",pf(()=>{const {size:[b,g]}=this.props;return(0,xb.jsx)("ellipse",{cx:b/2,cy:g/2,rx:b/2,ry:g/2,strokeWidth:2,fill:"transparent"})}));ia(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return yf(this,b)})}getShapeSVGJsx(b){const {size:[g,
n],stroke:J,fill:X,noFill:la,strokeWidth:va,strokeType:La,opacity:Wa}=this.props;return(0,xb.jsxs)("g",{opacity:Wa,children:[(0,xb.jsx)("ellipse",{className:la?"tl-hitarea-stroke":"tl-hitarea-fill",cx:g/2,cy:n/2,rx:Math.max(.01,(g-va)/2),ry:Math.max(.01,(n-va)/2)}),(0,xb.jsx)("ellipse",{cx:g/2,cy:n/2,rx:Math.max(.01,(g-va)/2),ry:Math.max(.01,(n-va)/2),strokeWidth:va,stroke:Cf(J,"stroke"),strokeDasharray:"dashed"===La?"8 2":void 0,fill:la?"none":Cf(X,"background")})]})}};ia(bu,"id","ellipse");ia(bu,
"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});xb=V(586);var Hs=class extends gr{constructor(b={}){super(b);ia(this,"ReactComponent",pf(({events:g,isErasing:n})=>{const {pointsPath:J,props:{stroke:X,strokeWidth:la,opacity:va}}=this;return(0,xb.jsx)(ro,of(xe({},g),{opacity:n?.2:1,children:(0,xb.jsx)("path",{d:J,strokeWidth:16*la,stroke:Cf(X,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",
strokeLinecap:"round",opacity:va})}))}));ia(this,"ReactIndicator",pf(()=>{const {pointsPath:g}=this;return(0,xb.jsx)("path",{d:g,fill:"none"})}));ia(this,"validateProps",g=>{g=yf(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});og(this)}get pointsPath(){const {points:b}=this.props;return cm.getCurvedPathForPoints(b)}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:n,opacity:J}}=this;return(0,xb.jsx)("path",{d:b,strokeWidth:16*n,stroke:Cf(g,"stroke"),
fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:J})}};ia(Hs,"id","highlighter");ia(Hs,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});Qa([mh],Hs.prototype,"pointsPath",1);var bw=Ja(V(22));xb=V(586);var cw={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Rp=class extends Bn{constructor(){super(...arguments);ia(this,"canChangeAspectRatio",!0);ia(this,
"canFlip",!1);ia(this,"canEdit",!0);ia(this,"htmlAnchorRef",bw.createRef());ia(this,"setScaleLevel",b=>eb(this,null,function*(){var g;const n=sd.mul(this.props.size,cw[null!=b?b:"md"]/cw[null!=(g=this.props.scaleLevel)?g:"md"]);this.update({scaleLevel:b});yield Jj();this.update({size:n})}));ia(this,"onResetBounds",b=>{var g;if(this.htmlAnchorRef.current){const n=this.htmlAnchorRef.current.getBoundingClientRect(),[J,X]=sd.div([n.width,n.height],null!=(g=null==b?void 0:b.zoom)?g:1);this.update({size:[Math.max(Math.min(J||
400,1400),10),Math.max(Math.min(X||400,1400),10)]})}return this});ia(this,"ReactComponent",pf(({events:b,isErasing:g,isEditing:n})=>{const {props:{html:J,scaleLevel:X}}=this,la=dh(),va=Fg(),La=va.selectedIds.has(this.id),Wa=la||La&&!n||"select"!==va.selectedTool.id,bb=bw.useCallback(Db=>{Wa||Db.stopPropagation()},[Wa]),pb=cw[null!=X?X:"md"];bw.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:va.viewport.camera.zoom}),va.persist(!0))},[]);return(0,xb.jsx)(so,of(xe({style:{overflow:"hidden",
pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,xb.jsx)("div",{onWheelCapture:bb,onPointerDown:bb,onPointerUp:bb,className:"tl-html-container",style:{pointerEvents:la||!n&&!La?"none":"all",overflow:n?"auto":"hidden",width:`calc(100% / ${pb})`,height:`calc(100% / ${pb})`,transform:`scale(${pb})`},children:(0,xb.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:J.trim()}})})}))}));ia(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g]}}=this;return(0,xb.jsx)("rect",
{width:b,height:g,fill:"transparent"})}));ia(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return yf(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};ia(Rp,"id","html");ia(Rp,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});Qa([mh],Rp.prototype,"scaleLevel",1);Qa([he],Rp.prototype,"setScaleLevel",2);var WG=Ja(V(22));xb=V(586);var cu=class extends dv{constructor(){super(...arguments);
ia(this,"ReactComponent",pf(({events:b,isErasing:g,isBinding:n,asset:J})=>{const {props:{opacity:X,objectFit:la,clipping:va,size:[La,Wa]}}=this,[bb,pb,Db,Qb]=Array.isArray(va)?va:[va,va,va,va],{handlers:oc}=WG.useContext(to);return(0,xb.jsxs)(so,of(xe({},b),{opacity:g?.2:X,children:[n&&(0,xb.jsx)(yh,{mode:"html",strokeWidth:4,size:[La,Wa]}),(0,xb.jsx)("div",{"data-asset-loaded":!!J,className:"tl-image-shape-container",children:J?(0,xb.jsx)("img",{src:oc?oc.makeAssetUrl(J.src):J.src,draggable:!1,style:{position:"relative",
top:-bb,left:-Qb,width:La+(Qb-pb),height:Wa+(bb-Db),objectFit:la}}):"Asset is missing"})]}))}));ia(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g]}}=this;return(0,xb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}getShapeSVGJsx({assets:b}){var g,n;const J=this.getBounds(),{assetId:X,clipping:la}=this.props;if(b=b.find(va=>va.id===X)){Array.isArray(la);const va=null==(n=null==(g=window.logseq)?void 0:g.api)?void 0:n.make_asset_url;return(0,xb.jsx)("image",{width:J.width,height:J.height,
href:va?va(b.src):b.src})}return super.getShapeSVGJsx({})}};ia(cu,"id","image");ia(cu,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var iA=Ja(V(22));xb=V(586);var du=class extends Bn{constructor(){super(...arguments);ia(this,"canFlip",!1);ia(this,"canEdit",!0);ia(this,"canChangeAspectRatio",!1);ia(this,"ReactComponent",pf(({events:b,isErasing:g,asset:n,isEditing:J})=>{const {props:{opacity:X}}=
this,la=dh();var va=Fg();const La=va.selectedIds.has(this.id),Wa=la||La&&!J||"select"!==va.selectedTool.id;va=iA.useCallback(pb=>{Wa||pb.stopPropagation()},[Wa]);const {handlers:bb}=iA.useContext(to);return(0,xb.jsx)(so,of(xe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:X}},b),{children:(0,xb.jsx)("div",{onWheelCapture:va,onPointerDown:va,onPointerUp:va,className:"tl-video-container",style:{pointerEvents:la||!J&&!La?"none":"all",overflow:J?"auto":"hidden"},children:n&&(0,xb.jsx)("video",
{controls:!0,src:bb?bb.makeAssetUrl(n.src):n.src})})}))}));ia(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g]}}=this;return(0,xb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}};ia(du,"id","video");ia(du,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});var jA=Ja(V(22));xb=V(586);var Pq=class extends Bn{constructor(){super(...arguments);ia(this,"frameRef",jA.createRef());ia(this,"canEdit",!0);
ia(this,"onIFrameSourceChange",b=>{this.update({url:b})});ia(this,"reload",()=>{var b,g;this.frameRef.current&&(this.frameRef.current.src=null==(g=null==(b=this.frameRef)?void 0:b.current)?void 0:g.src)});ia(this,"ReactComponent",pf(({events:b,isErasing:g,isEditing:n})=>{jA.useRef(null);return(0,xb.jsx)(so,of(xe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,xb.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:n?"all":"none",userSelect:"none"},children:this.props.url&&
(0,xb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,xb.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts"})})})}))}));ia(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g]}}=this;return(0,xb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}))}};ia(Pq,"id","iframe");ia(Pq,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",
point:[0,0],size:[853,480],url:""});Qa([he],Pq.prototype,"onIFrameSourceChange",2);Qa([he],Pq.prototype,"reload",2);var dw=Ja(V(22)),XG=Ja(V(22));xb=V(586);xb=V(586);var YG=XG.memo(function({style:b,start:g,end:n,decorationStart:J,decorationEnd:X}){var la=sd.dist(g,n);if(2>la)return null;const {strokeWidth:va}=b,La=1+1.618*va,Wa="M"+sd.toFixed(g)+"L"+sd.toFixed(n);la=Math.min(la/3,16*va);J=J?qi(g,n,la):null;X=X?qi(n,g,la):null;return(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsx)("path",{className:"tl-stroke-hitarea",
d:Wa}),(0,xb.jsx)("path",{d:Wa,strokeWidth:La,stroke:b.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===b.strokeType?"8 4":void 0,pointerEvents:"stroke"}),J&&(0,xb.jsx)(kj,{left:J.left,middle:g,right:J.right,stroke:b.stroke,strokeWidth:La}),X&&(0,xb.jsx)(kj,{left:X.left,middle:n,right:X.right,stroke:b.stroke,strokeWidth:La})]})});xb=V(586);var wo=Ja(V(22)),Hn=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",
{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const n=b.ownerDocument,J=n.activeElement;J!==b&&b.focus();n.execCommand("insertText",!1,g)||Hn.insertTextFirefox(b,g);J===n.body?b.blur():J instanceof HTMLElement&&J!==b&&J.focus()}static set(b,g){b.select();Hn.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:n}=b;return b.value.slice(g?g:void 0,n?n:void 0)}static wrapSelection(b,g,n){const {selectionStart:J,selectionEnd:X}=b,la=Hn.getSelection(b);Hn.insert(b,
g+la+(null!=n?n:g));b.selectionStart=(J||0)+g.length;b.selectionEnd=(X||0)+g.length}static replace(b,g,n){let J=0;b.value.replace(g,(...X)=>{const la=J+X[X.length-2],va=X[0].length;b.selectionStart=la;b.selectionEnd=la+va;X="string"===typeof n?n:n(...X);Hn.insert(b,X);b.selectionStart=la;J+=X.length-va;return X})}static findLineEnd(b,g){const n=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(n)?g:n+1}static indent(b){var g;const {selectionStart:n,selectionEnd:J,value:X}=b;var la=X.slice(n,J);if((la=
null==(g=/\n/g.exec(la))?void 0:g.length)&&0<la){g=X.lastIndexOf("\n",n-1)+1;var va=b.value.slice(g,J-1);la=va.replace(/^|\n/g,"$\x26  ");va=la.length-va.length;b.setSelectionRange(g,J-1);Hn.insert(b,la);b.setSelectionRange(n+1,J+va)}else Hn.insert(b,"  ")}static unindent(b){const {selectionStart:g,selectionEnd:n,value:J}=b;var X=J.lastIndexOf("\n",g-1)+1;const la=Hn.findLineEnd(J,n);var va=b.value.slice(X,la);const La=va.replace(/(^|\n)(\t| {1,2})/g,"$1");va=va.length-La.length;b.setSelectionRange(X,
la);Hn.insert(b,La);X=(X=/\t| {1,2}/.exec(J.slice(X,g)))?X[0].length:0;b.setSelectionRange(g-X,Math.max(g-X,n-va))}};xb=V(586);var eu=b=>b.stopPropagation(),ZG=wo.memo(function({font:b,text:g,color:n,offsetX:J=0,offsetY:X=0,scale:la=1,isEditing:va=!1,onBlur:La,onChange:Wa}){const bb=wo.useRef(null),pb=wo.useRef(!1),Db=wo.useCallback(Tb=>{Wa(vr.normalizeText(Tb.currentTarget.value))},[Wa]),Qb=wo.useCallback(Tb=>{if("Escape"!==Tb.key)if("Tab"===Tb.key&&0===g.length)Tb.preventDefault();else{if("Meta"!==
Tb.key&&!Tb.metaKey)Tb.stopPropagation();else if("z"===Tb.key&&Tb.metaKey){Tb.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Tb.stopPropagation();Tb.preventDefault();return}"Tab"===Tb.key&&(Tb.preventDefault(),Tb.shiftKey?Hn.unindent(Tb.currentTarget):Hn.indent(Tb.currentTarget),null==Wa?void 0:Wa(vr.normalizeText(Tb.currentTarget.value)))}},[Wa]),oc=wo.useCallback(Tb=>{va&&(Tb.currentTarget.setSelectionRange(0,0),null==La?void 0:La())},[La]),ac=wo.useCallback(Tb=>{va&&pb.current&&
document.activeElement===Tb.currentTarget&&Tb.currentTarget.select()},[va]),xc=wo.useCallback(Tb=>{va&&Tb.stopPropagation()},[va]);wo.useEffect(()=>{va&&requestAnimationFrame(()=>{pb.current=!0;const Tb=bb.current;Tb&&(Tb.focus(),Tb.select())})},[va,La]);const pc=wo.useRef(null);wo.useLayoutEffect(()=>{const Tb=pc.current;if(Tb){var tc=Ij(g,b,4);Tb.style.transform=`scale(${la}, ${la}) translate(${J}px, ${X}px)`;Tb.style.width=tc[0]+1+"px";Tb.style.height=tc[1]+1+"px"}},[g,b,X,J,la]);return(0,xb.jsx)("div",
{className:"tl-text-label-wrapper",children:(0,xb.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:pc,style:{font:b,color:n,pointerEvents:g?"all":"none",userSelect:va?"text":"none"},children:[va?(0,xb.jsx)("textarea",{ref:bb,style:{font:b,color:n},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:g,color:n,
onFocus:ac,onChange:Db,onKeyDown:Qb,onBlur:oc,onPointerDown:xc,onContextMenu:eu,onCopy:eu,onPaste:eu,onCut:eu}):g,"​"]})})});xb=V(586);var fu=class extends is{constructor(){super(...arguments);ia(this,"hideSelection",!1);ia(this,"canEdit",!0);ia(this,"ReactComponent",pf(({events:b,isErasing:g,isEditing:n,onEditingEnd:J})=>{const {stroke:X,handles:{start:la,end:va},opacity:La,label:Wa,id:bb}=this.props,pb=Wa||n?Ij(Wa,"18px / 1 var(--ls-font-family)",4):[0,0],Db=sd.med(la.point,va.point);var Qb=sd.dist(la.point,
va.point);Qb=Math.max(.5,Math.min(1,Math.max(Qb/(pb[1]+128),Qb/(pb[0]+128))));const oc=this.getBounds(),ac=dw.useMemo(()=>sd.sub(Db,sd.toFixed([oc.width/2,oc.height/2])),[oc,Qb,Db]),xc=dw.useCallback(pc=>{var Tb;null==(Tb=this.update)?void 0:Tb.call(this,{label:pc})},[Wa]);return(0,xb.jsxs)("div",of(xe({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,xb.jsx)(ZG,{font:"18px / 1 var(--ls-font-family)",text:Wa,color:Cf(X,"text"),offsetX:ac[0],offsetY:ac[1],scale:Qb,isEditing:n,
onChange:xc,onBlur:J}),(0,xb.jsxs)(ro,{opacity:g?.2:La,id:bb+"_svg",children:[(0,xb.jsx)(Hk,{id:bb,bounds:oc,labelSize:pb,offset:ac,scale:Qb}),(0,xb.jsx)("g",{pointerEvents:"none",mask:Wa||n?`url(#${bb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));ia(this,"ReactIndicator",pf(()=>{const {id:b,decorations:g,label:n,strokeWidth:J,handles:{start:X,end:la}}=this.props,va=this.getBounds(),La=n?Ij(n,"18px / 1 var(--ls-font-family)",4):[0,0],Wa=sd.med(X.point,la.point);var bb=sd.dist(X.point,
la.point);bb=Math.max(.5,Math.min(1,Math.max(bb/(La[1]+128),bb/(La[0]+128))));const pb=dw.useMemo(()=>sd.sub(Wa,sd.toFixed([va.width/2,va.height/2])),[va,bb,Wa]);return(0,xb.jsxs)("g",{children:[(0,xb.jsx)(Hk,{id:b,bounds:va,labelSize:La,offset:pb,scale:bb}),(0,xb.jsx)("path",{mask:n?`url(#${b}_clip)`:"",d:Rl({strokeWidth:J},X.point,la.point,null==g?void 0:g.start,null==g?void 0:g.end)}),n&&(0,xb.jsx)("rect",{x:va.width/2-La[0]/2*bb+pb[0],y:va.height/2-La[1]/2*bb+pb[1],width:La[0]*bb,height:La[1]*
bb,rx:4*bb,ry:4*bb,fill:"transparent"})]})}));ia(this,"validateProps",b=>yf(this,b))}getShapeSVGJsx({preview:b}){const {stroke:g,fill:n,strokeWidth:J,strokeType:X,decorations:la,label:va,handles:{start:La,end:Wa}}=this.props,bb=sd.med(La.point,Wa.point);return(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsx)(YG,{style:{stroke:Cf(g,"text"),fill:n,strokeWidth:J,strokeType:X},start:La.point,end:Wa.point,decorationStart:null==la?void 0:la.start,decorationEnd:null==la?void 0:la.end}),b&&(0,xb.jsx)(xb.Fragment,
{children:(0,xb.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${bb[0]}, ${bb[1]})`,textAnchor:"middle",fill:Cf(g,"text"),stroke:Cf(g,"text"),children:va})})]})}};ia(fu,"id","line");ia(fu,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});
var xo=Ja(V(22));xb=V(586);var Is={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},$G=pf(({type:b,fill:g,opacity:n,children:J})=>{g="var(--ls-secondary-background-color)"!==g?Cf(g,"background"):"var(--ls-tertiary-background-color)";return(0,xb.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===b?"page":"block"}`,children:[(0,xb.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:n,background:"P"===b?g:`linear-gradient(0deg, transparent, ${g}`}}),(0,xb.jsx)("div",
{className:"relative",children:J})]})}),Bl=class extends Bn{constructor(b={}){var g;super(b);ia(this,"hideRotateHandle",!0);ia(this,"canChangeAspectRatio",!0);ia(this,"canFlip",!0);ia(this,"canEdit",!0);ia(this,"persist",null);ia(this,"initialHeightCalculated",!0);ia(this,"getInnerHeight",null);ia(this,"setCollapsed",n=>eb(this,null,function*(){var J;"B"===this.props.blockType?(this.update({compact:n}),this.canResize[1]=!n,n||(yield Jj(),this.onResetBounds()),null==(J=this.persist)?void 0:J.call(this)):
(J=this.props.size[1],this.canResize[1]=!n,console.log(n,n?this.getHeaderHeight():this.props.collapsedHeight,this.getHeaderHeight(),this.props.collapsedHeight),this.update({isAutoResizing:!n,collapsed:n,size:[this.props.size[0],n?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:n?J:this.props.collapsedHeight}))}));ia(this,"setScaleLevel",n=>eb(this,null,function*(){var J;const X=sd.mul(this.props.size,Is[null!=n?n:"md"]/Is[null!=(J=this.props.scaleLevel)?J:"md"]);this.update({scaleLevel:n});
yield Jj();this.update({size:X})}));ia(this,"onResetBounds",n=>{n=this.getAutoResizeHeight();null!==n&&1<Math.abs(n-this.props.size[1])&&(this.update({size:[this.props.size[0],n]}),this.initialHeightCalculated=!0);return this});ia(this,"onResize",(n,J)=>{var X;const {bounds:la,rotation:va,scale:[La,Wa]}=J;n=[...this.scale];0>La&&(n[0]*=-1);0>Wa&&(n[1]*=-1);J=la.height;this.props.isAutoResizing&&(J=null!=(X=this.getAutoResizeHeight())?X:J);return this.update({point:[la.minX,la.minY],size:[Math.max(1,
la.width),Math.max(1,J)],scale:n,rotation:va})});ia(this,"PortalComponent",pf(({})=>{const {props:{pageId:n,fill:J,opacity:X}}=this,{renderers:la}=xo.useContext(to),va=Fg(),La=xo.useRef(null),[,Wa]=this.useComponentSize(La,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==la||!la.Page)return null;const {Page:bb,Block:pb}=la;xo.useEffect(()=>{var Db,Qb;if(this.props.isAutoResizing){const oc=(null!=(Qb=null==(Db=this.getInnerHeight)?void 0:
Db.call(this))?Qb:Wa)+this.getHeaderHeight();Wa&&1<Math.abs(oc-this.props.size[1])&&(this.update({size:[this.props.size[0],oc]}),va.persist(!0))}},[Wa,this.props.isAutoResizing]);xo.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();va.persist(!0)})},[this.initialHeightCalculated]);return(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{background:J&&"var(--ls-secondary-background-color)"!==J?`var(--ls-highlight-color-${J})`:
"var(--ls-secondary-background-color)",opacity:X}}),(0,xb.jsx)("div",{ref:La,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:"B"===this.props.blockType&&this.props.compact?(0,xb.jsx)(pb,{blockId:n}):(0,xb.jsx)(bb,{pageName:n})})]})}));ia(this,"ReactComponent",pf(n=>{var J;const {events:X,isErasing:la,isEditing:va,isBinding:La}=n,{props:{opacity:Wa,pageId:bb,fill:pb,scaleLevel:Db,strokeWidth:Qb,size:oc}}=this,ac=Fg(),{renderers:xc,handlers:pc}=
xo.useContext(to);this.persist=()=>ac.persist();const Tb=dh(),tc=ac.selectedIds.has(this.id)&&1===ac.selectedIds.size,Qc=ac.isIn("logseq-portal.creating")&&!bb,Wc=(Tb||tc&&!va||"select"!==ac.selectedTool.id)&&!Qc,rd=xo.useCallback(Uc=>{Wc||Uc.stopPropagation()},[Wc]),$d=1===ac.selectedShapesArray.length&&ac.selectedShapesArray.some(Uc=>"logseq-portal"===Uc.type&&Uc.props.id!==this.props.id&&bb&&Uc.props.pageId===bb),ke=Is[null!=Db?Db:"md"];xo.useEffect(()=>this.props.collapsed&&va?(this.update({size:[this.props.size[0],
this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[va,this.props.collapsed]);const Fe=xo.useCallback(Uc=>{this.initialHeightCalculated=!1;const Xc=Uh(Uc)?"B":"P";this.update({pageId:Uc,size:[400,320],blockType:Xc,compact:"B"===Xc});ac.selectTool("select");ac.history.resume();ac.history.persist()},[]),Se=this.PortalComponent;var mf=xo.useMemo(()=>{var Uc;if(bb&&"B"===this.props.blockType)return null==(Uc=null==pc?void 0:pc.queryBlockByUUID(bb))?
void 0:Uc.content},[null==pc?void 0:pc.queryBlockByUUID,bb]);mf="B"===this.props.blockType&&"string"!==typeof mf;const ff=(!this.props.collapsed||va)&&!mf;if(null==xc||!xc.Page)return null;const {Breadcrumb:Xe,PageName:Me}=xc;return(0,xb.jsxs)(so,of(xe({style:{pointerEvents:"all"}},X),{children:[La&&(0,xb.jsx)(yh,{mode:"html",strokeWidth:Qb,size:oc}),(0,xb.jsx)("div",{"data-inner-events":!Wc,onWheelCapture:rd,onPointerDown:rd,onPointerUp:rd,style:{width:"100%",height:"100%",pointerEvents:Tb||!va&&
!tc?"none":"all"},children:Qc?(0,xb.jsx)(uA,{onChange:Fe,onAddBlock:Uc=>{setTimeout(()=>{var Xc,Ad,Ed;ac.api.editShape(this);null==(Ed=null==(Ad=null==(Xc=window.logseq)?void 0:Xc.api)?void 0:Ad.edit_block)?void 0:Ed.call(Ad,Uc)})},placeholder:"Create or search your graph..."}):(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":bb,"data-portal-selected":$d,"data-editing":va,style:{width:`calc(100% / ${ke})`,height:`calc(100% / ${ke})`,
transform:`scale(${ke})`,opacity:la?.2:1},children:[!this.props.compact&&!mf&&(0,xb.jsx)($G,{type:null!=(J=this.props.blockType)?J:"P",fill:pb,opacity:Wa,children:"P"===this.props.blockType?(0,xb.jsx)(Me,{pageName:bb}):(0,xb.jsx)(Xe,{blockId:bb})}),mf&&(0,xb.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),ff&&(0,xb.jsx)(Se,xe({},n))]}),(0,xb.jsx)(Ny,{active:!!this.collapsed,style:{opacity:tc?1:0},icon:"B"===this.props.blockType?"block":"page",onClick:()=>this.setCollapsed(!this.collapsed),
otherIcon:"whiteboard-element"})]})})]}))}));ia(this,"ReactIndicator",pf(()=>{const n=this.getBounds();return(0,xb.jsx)("rect",{width:n.width,height:n.height,fill:"transparent",rx:8,ry:8})}));ia(this,"validateProps",n=>{var J;if(void 0!==n.size){const X=Is[null!=(J=this.props.scaleLevel)?J:"md"];n.size[0]=Math.max(n.size[0],60*X);n.size[1]=Math.max(n.size[1],40*X)}return yf(this,n)});og(this);b.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(g=b.size)?void 0:g[1])&&(this.initialHeightCalculated=
!1)}static isPageOrBlock(b){return b?/^\(\(.*\)\)$/.test(b)&&40===b.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}useComponentSize(b,g=""){const [n,J]=xo.useState([0,0]),X=Fg();xo.useEffect(()=>{if(null==b?0:b.current){const la=g?b.current.querySelector(g):b.current;if(la){const va=()=>{const {width:Wa,height:bb}=la.getBoundingClientRect(),pb=sd.div([Wa,bb],X.viewport.camera.zoom);
J(pb);return pb};va();this.getInnerHeight=()=>va()[1];const La=new ResizeObserver(()=>{va()});La.observe(la);return()=>{La.disconnect()}}}return()=>{}},[b,g]);return n}getHeaderHeight(){var b;const g=Is[null!=(b=this.props.scaleLevel)?b:"md"];return this.props.compact?0:40*g}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var b,g,n;const J=this.getBounds();return(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsx)("rect",{fill:this.props.fill&&
"var(--ls-secondary-background-color)"!==this.props.fill?`var(--ls-highlight-color-${this.props.fill})`:"var(--ls-secondary-background-color)",stroke:Cf(this.props.fill,"background"),strokeWidth:null!=(b=this.props.strokeWidth)?b:2,fillOpacity:null!=(g=this.props.opacity)?g:.2,width:J.width,rx:8,ry:8,height:J.height}),!this.props.compact&&(0,xb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Cf(this.props.fill,"background"):"var(--ls-tertiary-background-color)",
fillOpacity:null!=(n=this.props.opacity)?n:.2,x:1,y:1,width:J.width-2,height:38,rx:8,ry:8}),(0,xb.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${J.width/2}, ${10+J.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};ia(Bl,"id","logseq-portal");ia(Bl,"defaultSearchQuery","");ia(Bl,"defaultSearchFilter",null);
ia(Bl,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});Qa([mh],Bl.prototype,"collapsed",1);Qa([he],Bl.prototype,"setCollapsed",2);Qa([mh],Bl.prototype,"scaleLevel",1);Qa([he],Bl.prototype,"setScaleLevel",2);var {min:Fr,PI:aH}=Math,Js=aH+1E-4;xb=V(586);var bH={easing:b=>Math.sin(b*
Math.PI/2),simulatePressure:!0},cH={easing:b=>b*b,simulatePressure:!1},Ks=class extends gr{constructor(b={}){super(b);ia(this,"ReactComponent",pf(({events:g,isErasing:n})=>{const {props:{opacity:J}}=this;return(0,xb.jsx)(ro,of(xe({},g),{opacity:n?.2:J,children:this.getShapeSVGJsx()}))}));ia(this,"ReactIndicator",pf(()=>{const {pointsPath:g}=this;return(0,xb.jsx)("path",{d:g})}));ia(this,"validateProps",g=>{g=yf(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});og(this)}get pointsPath(){var b=
this.props;if(2>b.points.length)var g="";else g=of(xe({size:1+1.5*b.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===b.points[1][2]?bH:cH),{last:b.isComplete}),b=Vm(b.points,g),g=cm.getSvgPathFromStroke(ol(b,g));return g}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:n,strokeType:J}}=this;return(0,xb.jsx)("path",{pointerEvents:"all",d:b,strokeWidth:n/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:Cf(g,"text"),fill:Cf(g,"text"),strokeDasharray:"dashed"===J?"12 4":
void 0})}};ia(Ks,"id","pencil");ia(Ks,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Qa([mh],Ks.prototype,"pointsPath",1);xb=V(586);var gu=class extends zp{constructor(){super(...arguments);ia(this,"ReactComponent",pf(({events:b,isErasing:g,isSelected:n})=>{const {offset:[J,X],props:{stroke:la,fill:va,noFill:La,strokeWidth:Wa,opacity:bb,strokeType:pb}}=this,Db=this.getVertices(Wa/
2).join();return(0,xb.jsx)(ro,of(xe({},b),{opacity:g?.2:bb,children:(0,xb.jsxs)("g",{transform:`translate(${J}, ${X})`,children:[(0,xb.jsx)("polygon",{className:n||!La?"tl-hitarea-fill":"tl-hitarea-stroke",points:Db}),(0,xb.jsx)("polygon",{points:Db,stroke:Cf(la,"stroke"),fill:La?"none":Cf(va,"background"),strokeWidth:Wa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===pb?"8 2":void 0})]})}))}));ia(this,"ReactIndicator",pf(()=>{const {offset:[b,g],props:{strokeWidth:n}}=this;return(0,xb.jsx)("polygon",
{transform:`translate(${b}, ${g})`,points:this.getVertices(n/2).join()})}));ia(this,"validateProps",b=>{void 0!==b.sides&&(b.sides=Math.max(b.sides,3));return yf(this,b)})}getShapeSVGJsx(b){const {offset:[g,n],props:{stroke:J,fill:X,noFill:la,strokeWidth:va,opacity:La,strokeType:Wa}}=this;b=this.getVertices(va/2).join();return(0,xb.jsxs)("g",{transform:`translate(${g}, ${n})`,opacity:La,children:[(0,xb.jsx)("polygon",{className:la?"tl-hitarea-stroke":"tl-hitarea-fill",points:b}),(0,xb.jsx)("polygon",
{points:b,stroke:Cf(J,"stroke"),fill:la?"none":Cf(X,"background"),strokeWidth:va,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Wa?"8 2":void 0})]})}};ia(gu,"id","polygon");ia(gu,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});var Wo=Ja(V(22));xb=V(586);var dH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Gr=class extends bv{constructor(){super(...arguments);
ia(this,"ReactComponent",pf(({events:b,isErasing:g,isEditing:n,onEditingEnd:J})=>{const {props:{opacity:X,fontFamily:la,fontSize:va,fontWeight:La,italic:Wa,lineHeight:bb,text:pb,stroke:Db,padding:Qb}}=this,oc=Wo.useRef(null),ac=Wo.useRef(!1),xc=Wo.useRef(null),pc=Wo.useCallback(rd=>{const {isSizeLocked:$d}=this.props;rd=vr.normalizeText(rd.currentTarget.value);$d?this.update({text:rd,size:this.getAutoSizedBoundingBox({text:rd})}):this.update({text:rd})},[]),Tb=Wo.useCallback(rd=>{if("Escape"!==rd.key)if("Tab"===
rd.key&&0===pb.length)rd.preventDefault();else{if("Meta"!==rd.key&&!rd.metaKey)rd.stopPropagation();else if("z"===rd.key&&rd.metaKey){rd.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);rd.stopPropagation();rd.preventDefault();return}"Tab"===rd.key&&(rd.preventDefault(),rd.shiftKey?Hn.unindent(rd.currentTarget):Hn.indent(rd.currentTarget),this.update({text:vr.normalizeText(rd.currentTarget.value)}))}},[]),tc=Wo.useCallback(rd=>{rd.currentTarget.setSelectionRange(0,0);null==
J?void 0:J()},[J]),Qc=Wo.useCallback(rd=>{n&&ac.current&&document.activeElement===rd.currentTarget&&rd.currentTarget.select()},[n]),Wc=Wo.useCallback(rd=>{n&&rd.stopPropagation()},[n]);Wo.useEffect(()=>{n?requestAnimationFrame(()=>{ac.current=!0;const rd=oc.current;rd&&(rd.focus(),rd.select())}):null==J?void 0:J()},[n,J]);Wo.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,xb.jsx)(so,of(xe({},b),{opacity:g?.2:X,children:(0,xb.jsx)("div",{ref:xc,
className:"tl-text-shape-wrapper","data-hastext":!!pb,"data-isediting":n,style:{fontFamily:la,fontStyle:Wa?"italic":"normal",fontSize:va,fontWeight:La,padding:Qb,lineHeight:bb,color:Cf(Db,"text")},children:n?(0,xb.jsx)("textarea",{ref:oc,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:pb,onFocus:Qc,onChange:pc,onKeyDown:Tb,
onBlur:tc,onPointerDown:Wc}):(0,xb.jsxs)(xb.Fragment,{children:[pb,"​"]})})}))}));ia(this,"setScaleLevel",b=>eb(this,null,function*(){this.update({scaleLevel:b,fontSize:dH[null!=b?b:"md"]});this.onResetBounds()}));ia(this,"ReactIndicator",pf(()=>{const {props:{borderRadius:b},bounds:g}=this;return(0,xb.jsx)("rect",{width:g.width,height:g.height,rx:b,ry:b,fill:"transparent"})}));ia(this,"validateProps",b=>yf(this,b));ia(this,"getBounds",()=>{const [b,g]=this.props.point,[n,J]=this.props.size;return{minX:b,
minY:g,maxX:b+n,maxY:g+J,width:n,height:J}});ia(this,"onResizeStart",({isSingle:b})=>{var g;if(!b)return this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];return this.update({isSizeLocked:!1})});ia(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getAutoSizedBoundingBox(b={}){const {text:g=this.props.text,fontFamily:n=this.props.fontFamily,fontSize:J=this.props.fontSize,
fontWeight:X=this.props.fontWeight,lineHeight:la=this.props.lineHeight,padding:va=this.props.padding}=b,[La,Wa]=Ij(g,{fontFamily:n,fontSize:J,lineHeight:la,fontWeight:X},va);return[La,Wa]}getShapeSVGJsx(){var b=window.navigator.userAgent.toLowerCase();if(b.includes("webkit")&&!b.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:g,stroke:n,fontSize:J,fontFamily:X}}=this;b=this.getBounds();return(0,xb.jsx)("foreignObject",{width:b.width,height:b.height,children:(0,xb.jsx)("div",
{style:{color:Cf(n,"text"),fontSize:J,fontFamily:X,display:"contents"},children:g})})}};ia(Gr,"id","text");ia(Gr,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Qa([mh],Gr.prototype,"scaleLevel",1);Qa([he],Gr.prototype,"setScaleLevel",2);xb=V(586);var kA=class extends Bn{constructor(){super(...arguments);
ia(this,"aspectRatio",480/853);ia(this,"canChangeAspectRatio",!1);ia(this,"canFlip",!1);ia(this,"canEdit",!0);ia(this,"onYoutubeLinkChange",b=>{this.update({url:b,size:kA.defaultProps.size})});ia(this,"ReactComponent",pf(({events:b,isErasing:g,isEditing:n})=>(0,xb.jsx)(so,of(xe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,xb.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl",style:{pointerEvents:n?"all":"none",userSelect:"none"},children:this.embedId?
(0,xb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,xb.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,xb.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},
children:(0,xb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,xb.jsxs)("g",{children:[(0,xb.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,xb.jsx)("g",{children:(0,xb.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,xb.jsxs)("g",{fill:"#fff",children:[(0,xb.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,xb.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))));ia(this,"ReactIndicator",pf(()=>{const {props:{size:[b,g]}}=this;return(0,xb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));ia(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[0]*this.aspectRatio,1));return yf(this,b)})}get embedId(){var b,g;const n=this.props.url,J=n.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/);
return null!=(g=null!=(b=null==J?void 0:J[1])?b:n)?g:""}getShapeSVGJsx(){const b=this.getBounds(),g=this.embedId;return g?(0,xb.jsxs)("g",{children:[(0,xb.jsx)("image",{width:b.width,height:b.height,href:`https://img.youtube.com/vi/${g}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,xb.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,xb.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Qq=kA;ia(Qq,"id","youtube");ia(Qq,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});Qa([mh],Qq.prototype,"embedId",1);Qa([he],Qq.prototype,"onYoutubeLinkChange",2);var lA=[au,bu,Hs,cu,du,fu,Ks,gu,Gr,Qq,Pq,Rp,Bl],ew=class extends bp{constructor(){super(...arguments);ia(this,"Shape",au)}};ia(ew,"id","box");ia(ew,"shortcut",["7"]);var mA=class extends bp{constructor(){super(...arguments);
ia(this,"Shape",bu)}};ia(mA,"id","ellipse");var fw=class extends pt{};ia(fw,"id","erase");ia(fw,"shortcut",["4"]);var gw=class extends hs{constructor(){super(...arguments);ia(this,"Shape",Hs);ia(this,"simplify",!0);ia(this,"simplifyTolerance",.618)}};ia(gw,"id","highlighter");ia(gw,"shortcut",["3"]);var hw=class extends qt{constructor(){super(...arguments);ia(this,"Shape",fu)}};ia(hw,"id","line");ia(hw,"shortcut",["5"]);var iw=class extends hs{constructor(){super(...arguments);ia(this,"Shape",Ks);
ia(this,"simplify",!1)}};ia(iw,"id","pencil");ia(iw,"shortcut",["2"]);var nA=class extends bp{constructor(){super(...arguments);ia(this,"Shape",gu)}};ia(nA,"id","polygon");var jw=class extends rt{constructor(){super(...arguments);ia(this,"Shape",Gr)}};ia(jw,"id","text");ia(jw,"shortcut",["6"]);var oA=class extends bp{constructor(){super(...arguments);ia(this,"Shape",Qq)}};ia(oA,"id","youtube");var pA=class extends vi{constructor(){super(...arguments);ia(this,"creatingShape");ia(this,"offset",[0,0]);
ia(this,"onEnter",()=>{this.app.history.pause();Id(()=>{const b=new Bl({id:Kd(),parentId:this.app.currentPage.id,point:sd.sub(this.app.inputs.originPoint,this.offset),size:Bl.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=b;this.app.currentPage.addShapes(b);this.app.setEditingShape(b);this.app.setSelectedShapes([b]);(.8>this.app.viewport.camera.zoom||1.2<this.app.viewport.camera.zoom)&&this.app.api.resetZoomToCursor()})});ia(this,"onPointerDown",
b=>{switch(b.type){case "shape":if(b.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":b.order||this.app.selectTool("select")}});ia(this,"onExit",()=>{var b;this.creatingShape&&(this.app.history.resume(),(null==(b=this.creatingShape)?0:b.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};ia(pA,"id","creating");var qA=class extends vi{constructor(){super(...arguments);
ia(this,"cursor","crosshair");ia(this,"onPointerDown",b=>{this.tool.transition("creating")})}};ia(qA,"id","idle");var Ls=class extends yp{constructor(){super(...arguments);ia(this,"Shape",Bl);ia(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])})}};ia(Ls,"id","logseq-portal");ia(Ls,"shortcut",["1"]);ia(Ls,"states",[qA,pA]);ia(Ls,"initial","idle");var rA=class extends bp{constructor(){super(...arguments);ia(this,"Shape",Rp)}};ia(rA,"id","youtube");var sA=class extends bp{constructor(){super(...arguments);
ia(this,"Shape",Pq)}};ia(sA,"id","iframe");var eH=Ja(V(589));xb=V(586);var fH=new Map(lA.map(b=>[b.id,b])),kw=class{constructor(b){ia(this,"shapes");ia(this,"pageId");ia(this,"assets");b&&this.load(b)}load(b){const g=b.pages[0];this.pageId=null==g?void 0:g.id;this.assets=b.assets;this.shapes=null==g?void 0:g.shapes.map(n=>{var J=n.type;if(!J)throw Error("No shape type provided.");const X=fH.get(J);if(!X)throw Error(`Could not find shape class for ${J}`);return new X(n)})}generatePreviewJsx(b,g){var n,
J;const X=[...(null!=(n=this.shapes)?n:[]).map(bb=>bb.getRotatedBounds())];(n=null==b?void 0:b.currentView)&&X.push(n);let la=se.getCommonBounds(X);if(!la)return null;la=se.expandBounds(la,16);la=g?se.ensureRatio(la,g):la;const va=bb=>[(bb[0]-la.minX).toFixed(2),(bb[1]-la.minY).toFixed(2)],[La,Wa]=n?va([n.minX,n.minY]):[0,0];return la&&(0,xb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":la.minX.toFixed(2),"data-common-bound-y":la.minY.toFixed(2),"data-common-bound-width":la.width.toFixed(2),
"data-common-bound-height":la.height.toFixed(2),viewBox:[0,0,la.width,la.height].join(" "),children:[(0,xb.jsx)("defs",{children:n&&(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${La}, ${Wa})`,width:n.width,height:n.height}),(0,xb.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,xb.jsx)("rect",{width:la.width,height:la.height,fill:"white"}),(0,xb.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,xb.jsx)("g",
{id:this.pageId+"-preview-shapes",children:null==(J=this.shapes)?void 0:J.map(bb=>{var pb,Db;const {bounds:Qb,props:{rotation:oc}}=bb,[ac,xc]=va([Qb.minX,Qb.minY]),pc=+(180*((null!=oc?oc:0)+(null!=(pb=Qb.rotation)?pb:0))/Math.PI).toFixed(2),[Tb,tc]=[(Qb.width/2).toFixed(2),(Qb.height/2).toFixed(2)];return(0,xb.jsx)("g",{transform:[`translate(${ac}, ${xc})`,`rotate(${pc}, ${Tb}, ${tc})`].join(" "),children:bb.getShapeSVGJsx({assets:null!=(Db=this.assets)?Db:[]})},bb.id)})}),(0,xb.jsx)("rect",{mask:n?
`url(#${this.pageId}-camera-mask)`:"",width:la.width,height:la.height,fill:"transparent"}),n&&(0,xb.jsx)("use",{id:"minimap-camera-rect","data-x":La,"data-y":Wa,"data-width":n.width,"data-height":n.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/b.camera.zoom})]})}exportAsSVG(b){return(b=this.generatePreviewJsx(void 0,b))?eH.default.renderToString(b):""}},gH=Ja(V(22));xb=V(586);var lw=gH.forwardRef((b,g)=>{var {value:n,className:J}=b;b=Qf(b,["autoResize","value",
"className"]);return(0,xb.jsx)("div",{className:"tl-input"+(J?" "+J:""),children:(0,xb.jsxs)("div",{className:"tl-input-sizer",children:[(0,xb.jsx)("div",{className:"tl-input-hidden",children:n}),(0,xb.jsx)("input",xe({ref:g,value:n,className:"tl-text-input",type:"text"},b))]})})});xb=V(586);var Sp=({type:b,active:g})=>(0,xb.jsx)("span",{className:"tl-type-tag","data-active":g,children:(0,xb.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",
BS:"block-search",PS:"page-search"})[b]}`})}),tA=(b,g)=>(0,xb.jsx)("span",{children:b.split(new RegExp(`(${g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((n,J)=>1===J%2?(0,xb.jsx)("mark",{className:"tl-highlighted",children:n}):n).map((n,J)=>(0,xb.jsx)(wm.default.Fragment,{children:n},J))}),hH=(b,g)=>{const {handlers:n}=wm.default.useContext(to),[J,X]=wm.default.useState(null),la=Ul(b,200);wm.default.useEffect(()=>{let va=!1;if(0<la.length){const La={"pages?":!0,"blocks?":!0,"files?":!1};
"B"===g?La["pages?"]=!1:"P"===g&&(La["blocks?"]=!1);n.search(la,La).then(Wa=>{va||X(Wa)})}else X(null);return()=>{va=!0}},[la,null==n?void 0:n.search]);return J},uA=pf(({className:b,style:g,placeholder:n,onChange:J,onBlur:X,onAddBlock:la})=>{const [va,La]=wm.default.useState(Bl.defaultSearchQuery),[Wa,bb]=wm.default.useState(Bl.defaultSearchFilter),pb=wm.default.useRef(null),{handlers:Db,renderers:Qb}=wm.default.useContext(to),oc=wm.default.useCallback(Fe=>{var Se;J(Fe);null==(Se=pb.current)?void 0:
Se.blur();Fe&&(Bl.defaultSearchQuery="",Bl.defaultSearchFilter=null)},[]),ac=wm.default.useCallback(Fe=>{if(Fe=null==Db?void 0:Db.addNewBlock(Fe))oc(Fe),null==la?void 0:la(Fe);return Fe},[la]),xc=wm.default.useRef(null),[pc,Tb]=wm.default.useState(0),tc=hH(va,Wa),[Qc,Wc]=wm.default.useState("circle-plus"),[rd,$d]=wm.default.useState(!1);wm.default.useEffect(()=>{setTimeout(()=>{var Fe;null==(Fe=pb.current)?void 0:Fe.focus()})},[Wa]);wm.default.useEffect(()=>{Bl.defaultSearchQuery=va;Bl.defaultSearchFilter=
Wa},[va,Wa]);const ke=wm.default.useMemo(()=>{var Fe;const Se=[],mf=null==Qb?void 0:Qb.Breadcrumb;if(!mf||!Db)return[];la&&Se.push({actionIcon:"circle-plus",onChosen:()=>!!ac(va),element:(0,xb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,xb.jsx)(Sp,{active:!0,type:"BA"}),0<va.length?(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsx)("strong",{children:"New block:"}),va]}):(0,xb.jsx)("strong",{children:"New block"})]})});(null==(Fe=null==tc?void 0:tc.pages)?0:Fe.some(ff=>ff.toLowerCase()===
va.toLowerCase()))||!va||Se.push({actionIcon:"circle-plus",onChosen:()=>{oc(va);return!0},element:(0,xb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,xb.jsx)(Sp,{active:!0,type:"PA"}),(0,xb.jsx)("strong",{children:"New page:"}),va]})},{actionIcon:"circle-plus",onChosen:()=>{null==Db?void 0:Db.addNewWhiteboard(va);oc(va);return!0},element:(0,xb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,xb.jsx)(Sp,{active:!0,type:"WA"}),(0,xb.jsx)("strong",{children:"New whiteboard:"}),
va]})});0===va.length&&null===Wa&&Se.push({actionIcon:"search",onChosen:()=>{bb("B");return!0},element:(0,xb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,xb.jsx)(Sp,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{bb("P");return!0},element:(0,xb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,xb.jsx)(Sp,{type:"PS"}),"Search only pages"]})});Wa&&"P"!==Wa||!tc||!tc.pages||Se.push(...tc.pages.map(ff=>({actionIcon:"search",onChosen:()=>{oc(ff);
return!0},element:(0,xb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,xb.jsx)(Sp,{type:Db.isWhiteboardPage(ff)?"WP":"P"}),tA(ff,va)]})})));Wa&&"B"!==Wa||!tc||!tc.blocks||Se.push(...tc.blocks.filter(ff=>ff.content&&ff.uuid).map(({content:ff,uuid:Xe})=>{const Me=Db.queryBlockByUUID(Xe);return{actionIcon:"search",onChosen:()=>{var Uc,Xc,Ad;return Me?(oc(Xe),null==(Ad=null==(Xc=null==(Uc=window.logseq)?void 0:Uc.api)?void 0:Xc.set_blocks_id)?void 0:Ad.call(Xc,[Xe]),!0):!1},element:Me?
(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,xb.jsx)(Sp,{type:"B"}),(0,xb.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,xb.jsx)(mf,{blockId:Xe})})]}),(0,xb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,xb.jsx)("div",{className:"tl-quick-search-option-placeholder"}),tA(ff,va)]})]}):(0,xb.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));
return Se},[va,Wa,tc,null==Qb?void 0:Qb.Breadcrumb,Db]);wm.default.useEffect(()=>{const Fe=Se=>{var mf,ff;let Xe=pc;"ArrowDown"===Se.key?Xe=Math.min(ke.length-1,pc+1):"ArrowUp"===Se.key?Xe=Math.max(0,pc-1):"Enter"===Se.key?(null==(mf=ke[pc])?void 0:mf.onChosen(),Se.stopPropagation(),Se.preventDefault()):"Backspace"===Se.key&&0===va.length?bb(null):"Escape"===Se.key&&oc("");Xe!==pc&&(mf=ke[Xe],Tb(Xe),Wc(mf.actionIcon),Se.stopPropagation(),Se.preventDefault(),(Se=null==(ff=xc.current)?void 0:ff.querySelector(".tl-quick-search-option:nth-child("+
(Xe+1)+")"))&&(null==Se?void 0:Se.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",Fe,!0);return()=>{document.removeEventListener("keydown",Fe,!0)}},[ke,pc,va]);return(0,xb.jsxs)("div",{className:"tl-quick-search "+(null!=b?b:""),style:g,children:[(0,xb.jsx)(Ny,{icon:Qc,onClick:()=>{var Fe;null==(Fe=ke[pc])?void 0:Fe.onChosen()}}),(0,xb.jsxs)("div",{className:"tl-quick-search-input-container",children:[Wa&&(0,xb.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,xb.jsx)(Sp,
{type:Wa}),"B"===Wa?"Search blocks":"Search pages",(0,xb.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>bb(null),children:(0,xb.jsx)(Vh,{name:"x"})})]}),(0,xb.jsx)(lw,{ref:pb,type:"text",value:va,className:"tl-quick-search-input",placeholder:null!=n?n:"Create or search your graph...",onChange:Fe=>La(Fe.target.value),onKeyDown:Fe=>{"Enter"===Fe.key&&oc(va);Fe.stopPropagation()},onFocus:()=>{$d(!0)},onBlur:()=>{$d(!1);null==X?void 0:X()}})]}),0<ke.length&&(0,xb.jsx)("div",{onWheelCapture:Fe=>
Fe.stopPropagation(),className:"tl-quick-search-options",ref:xc,style:{visibility:rd?"visible":"hidden",pointerEvents:rd?"all":"none"},children:(0,xb.jsx)(yG,{style:{height:40*Math.min(Math.max(1,ke.length),12)},totalCount:ke.length,itemContent:Fe=>{const {actionIcon:Se,onChosen:mf,element:ff}=ke[Fe];return(0,xb.jsx)("div",{"data-focused":Fe===pc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Wc(Se);Tb(Fe)},onMouseDownCapture:Xe=>{mf()&&(Xe.stopPropagation(),Xe.preventDefault())},
children:ff},Fe)}})})]})});xb=V(586);var iH=pf(function(b){var {pageId:g,portalType:n,refs:J,side:X,onRefsChange:la}=b;b=Qf(b,"pageId portalType shapeType refs side onRefsChange".split(" "));const va=J.length+(g?1:0),La=0===J.length,Wa=pb=>{pb&&!J.includes(pb)&&La&&la([...J,pb])},bb=!(!g||!n);return(0,xb.jsx)(Qz,of(xe({},b),{side:X,align:"start",alignOffset:-6,label:(0,xb.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,xb.jsx)(Vh,{name:0<va?"link":"add-link"}),
0<va&&(0,xb.jsx)("div",{className:"tl-shape-links-count",children:va})]}),children:(0,xb.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":bb,children:[bb&&(0,xb.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,xb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,xb.jsx)(Vh,{className:"opacity-50",name:"internal-link"}),"References"]}),(0,xb.jsx)(Go,{type:n,id:g})]}),(0,xb.jsxs)("div",{className:"tl-shape-links-panel color-level",
children:[(0,xb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,xb.jsx)(Vh,{className:"opacity-50",name:"add-link"}),"Link to any page or block"]}),La&&(0,xb.jsx)(uA,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:"Start typing to search...",onChange:Wa}),0<J.length&&(0,xb.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:J.map((pb,Db)=>(0,xb.jsx)(Go,{id:pb,type:Uh(pb)?"B":"P",onRemove:()=>{la(J.filter((Qb,oc)=>Db!==oc))},showContent:!0},
pb))})]})]})}))}),Zk=Ja(V(22)),vA=V(22),wA=(0,vA.forwardRef)((b,g)=>{const {pressed:n,defaultPressed:J=!1,onPressedChange:X}=b,la=Qf(b,["pressed","defaultPressed","onPressedChange"]),[va=!1,La]=hi({prop:n,onChange:X,defaultProp:J});return(0,vA.createElement)(xj.button,wf({type:"button","aria-pressed":va,"data-state":va?"on":"off","data-disabled":b.disabled?"":void 0},la,{ref:g,onClick:Mf(b.onClick,()=>{b.disabled||La(!va)})}))}),jH=wA,[xA]=Rj("ToggleGroup",[It]),yA=It(),kH=Zk.default.forwardRef((b,
g)=>{const {type:n}=b;b=Qf(b,["type"]);if("single"===n)return Zk.default.createElement(lH,wf({},b,{ref:g}));if("multiple"===n)return Zk.default.createElement(mH,wf({},b,{ref:g}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[zA,AA]=xA("ToggleGroup"),lH=Zk.default.forwardRef((b,g)=>{const {value:n,defaultValue:J,onValueChange:X=()=>{}}=b,la=Qf(b,["value","defaultValue","onValueChange"]),[va,La]=hi({prop:n,defaultProp:J,onChange:X});return Zk.default.createElement(zA,{scope:b.__scopeToggleGroup,
type:"single",value:va?[va]:[],onItemActivate:La,onItemDeactivate:Zk.default.useCallback(()=>La(""),[La])},Zk.default.createElement(BA,wf({},la,{ref:g})))}),mH=Zk.default.forwardRef((b,g)=>{const {value:n,defaultValue:J,onValueChange:X=()=>{}}=b,la=Qf(b,["value","defaultValue","onValueChange"]),[va=[],La]=hi({prop:n,defaultProp:J,onChange:X}),Wa=Zk.default.useCallback(pb=>La((Db=[])=>[...Db,pb]),[La]),bb=Zk.default.useCallback(pb=>La((Db=[])=>Db.filter(Qb=>Qb!==pb)),[La]);return Zk.default.createElement(zA,
{scope:b.__scopeToggleGroup,type:"multiple",value:va,onItemActivate:Wa,onItemDeactivate:bb},Zk.default.createElement(BA,wf({},la,{ref:g})))}),[nH,oH]=xA("ToggleGroup"),BA=Zk.default.forwardRef((b,g)=>{const {__scopeToggleGroup:n,disabled:J=!1,rovingFocus:X=!0,orientation:la,dir:va,loop:La=!0}=b;var Wa=Qf(b,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));b=yA(n);const bb=Pj(va);Wa=xe({role:"group",dir:bb},Wa);return Zk.default.createElement(nH,{scope:n,rovingFocus:X,disabled:J},
X?Zk.default.createElement(dz,wf({asChild:!0},b,{orientation:la,dir:bb,loop:La}),Zk.default.createElement(xj.div,wf({},Wa,{ref:g}))):Zk.default.createElement(xj.div,wf({},Wa,{ref:g})))}),pH=Zk.default.forwardRef((b,g)=>{var n=AA("ToggleGroupItem",b.__scopeToggleGroup);const J=oH("ToggleGroupItem",b.__scopeToggleGroup),X=yA(b.__scopeToggleGroup);n=n.value.includes(b.value);const la=J.disabled||b.disabled;b=of(xe({},b),{pressed:n,disabled:la});const va=Zk.default.useRef(null);return J.rovingFocus?Zk.default.createElement(ez,
wf({asChild:!0},X,{focusable:!la,active:n,ref:va}),Zk.default.createElement(CA,wf({},b,{ref:g}))):Zk.default.createElement(CA,wf({},b,{ref:g}))}),CA=Zk.default.forwardRef((b,g)=>{const {__scopeToggleGroup:n,value:J}=b,X=Qf(b,["__scopeToggleGroup","value"]),la=AA("ToggleGroupItem",n);b={role:"radio","aria-checked":b.pressed,"aria-pressed":void 0};return Zk.default.createElement(wA,wf({},"single"===la.type?b:void 0,X,{ref:g,onPressedChange:va=>{if(va)la.onItemActivate(J);else la.onItemDeactivate(J)}}))}),
DA=kH,EA=pH;xb=V(586);xb=V(586);xb=V(586);var FA="Edit AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink IFrameSource LogseqPortalViewMode ArrowMode Links".split(" "),qH=["Edit","YoutubeLink","IFrameSource","Links"],In=new Map,mw={"logseq-portal":"Swatch Edit LogseqPortalViewMode ScaleLevel AutoResizing Links".split(" "),youtube:["YoutubeLink","Links"],iframe:["IFrameSource","Links"],box:["Swatch","NoFill","StrokeType","Links"],ellipse:["Swatch","NoFill","StrokeType","Links"],
polygon:["Swatch","NoFill","StrokeType","Links"],line:["Edit","Swatch","ArrowMode","Links"],pencil:["Swatch","Links"],highlighter:["Swatch","Links"],text:"Edit Swatch ScaleLevel AutoResizing TextStyle Links".split(" "),html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"]};Object.entries(mw).filter(([,b])=>b.includes("NoFill")&&b.includes("Swatch")).map(([b])=>b);var rH=pf(()=>{const b=Fg(),g=gm(b.selectedShapesArray,"Edit")[0];return(0,xb.jsx)(Gf,{type:"button",title:"Edit",
onClick:()=>{var n,J,X,la,va,La;b.api.editShape(g);if("logseq-portal"===g.props.type){let Wa=g.props.pageId;"P"===g.props.blockType&&(Wa=(null==(X=null==(J=null==(n=window.logseq)?void 0:n.api)?void 0:J.get_page_blocks_tree)?void 0:X.call(J,g.props.pageId).find(bb=>!("propertiesOrder"in bb))).uuid);null==(La=null==(va=null==(la=window.logseq)?void 0:la.api)?void 0:va.edit_block)?void 0:La.call(va,Wa)}},children:(0,xb.jsx)(Vh,{name:"text"})})}),sH=pf(()=>{const b=Fg(),g=gm(b.selectedShapesArray,"AutoResizing"),
n=g.every(J=>J.props.isAutoResizing);return(0,xb.jsx)(Rk,{title:"Auto Resize",toggle:g.every(J=>"logseq-portal"===J.props.type),className:"tl-button",pressed:n,onPressedChange:J=>{g.forEach(X=>{if("logseq-portal"===X.props.type)X.update({isAutoResizing:J});else X.onResetBounds({zoom:b.viewport.camera.zoom})});b.persist()},children:(0,xb.jsx)(Vh,{name:"dimensions"})})}),tH=pf(()=>{const b=Fg(),g=gm(b.selectedShapesArray,"LogseqPortalViewMode"),n=g.every(J=>J.collapsed);return(0,xb.jsx)(Pn,{title:"View Mode",
options:[{value:"1",icon:"object-compact"},{value:"0",icon:"object-expanded"}],value:n?"1":"0",onValueChange:J=>{g.forEach(X=>{X.setCollapsed("1"===J?!0:!1)});b.persist()}})}),uH=pf(()=>{const b=Fg(),g=gm(b.selectedShapesArray,"ScaleLevel"),n=1<(new Set(g.map(J=>J.scaleLevel))).size?"":g[0].scaleLevel;return(0,xb.jsx)(qg,{title:"Scale Level",options:[{label:"Extra Small",value:"xs"},{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"},{label:"Extra Large",value:"xl"},
{label:"Huge",value:"xxl"}],value:n,onValueChange:J=>{g.forEach(X=>{X.setScaleLevel(J)});b.persist()}})}),vH=pf(()=>{const b=Fg(),g=gm(b.selectedShapesArray,"IFrameSource")[0],n=zr.default.useCallback(X=>{g.onIFrameSourceChange(X.target.value.trim().toLowerCase());b.persist()},[]),J=zr.default.useCallback(()=>{g.reload()},[]);return(0,xb.jsxs)("span",{className:"flex gap-3",children:[(0,xb.jsx)(Gf,{title:"Reload",type:"button",onClick:J,children:(0,xb.jsx)(Vh,{name:"refresh"})}),(0,xb.jsx)(lw,{title:"Website Url",
className:"tl-iframe-src",value:`${g.props.url}`,onChange:n}),(0,xb.jsx)(Gf,{title:"Open website url",type:"button",onClick:()=>window.open(g.props.url),children:(0,xb.jsx)(Vh,{name:"external-link"})})]})}),wH=pf(()=>{const b=Fg(),g=gm(b.selectedShapesArray,"YoutubeLink")[0],n=zr.default.useCallback(J=>{g.onYoutubeLinkChange(J.target.value);b.persist()},[]);return(0,xb.jsxs)("span",{className:"flex gap-3",children:[(0,xb.jsx)(lw,{title:"YouTube Link",className:"tl-youtube-link",value:`${g.props.url}`,
onChange:n}),(0,xb.jsx)(Gf,{title:"Open YouTube Link",type:"button",onClick:()=>{var J,X,la;return null==(la=null==(X=null==(J=window.logseq)?void 0:J.api)?void 0:X.open_external_link)?void 0:la.call(X,g.props.url)},children:(0,xb.jsx)(Vh,{name:"external-link"})})]})}),xH=pf(()=>{const b=Fg(),g=gm(b.selectedShapesArray,"NoFill"),n=zr.default.useCallback(X=>{g.forEach(la=>la.update({noFill:X}));b.persist()},[]),J=g.every(X=>X.props.noFill);return(0,xb.jsx)(Rk,{title:"Fill Toggle",className:"tl-button",
pressed:J,onPressedChange:n,children:(0,xb.jsx)(Vh,{name:J?"droplet-off":"droplet"})})}),yH=pf(()=>{const b=Fg(),g=gm(b.selectedShapesArray,"Swatch"),n=zr.default.useCallback(X=>{g.forEach(la=>{la.update({fill:X,stroke:X})});b.persist()},[]),J=zr.default.useCallback(X=>{g.forEach(la=>{la.update({opacity:X})});b.persist()},[]);return(0,xb.jsx)(jh,{title:"Color Picker",popoverSide:"top",color:g[0].props.noFill?g[0].props.stroke:g[0].props.fill,opacity:g[0].props.opacity,setOpacity:J,setColor:n})}),
zH=pf(()=>{const b=Fg(),g=gm(b.selectedShapesArray,"StrokeType"),n=g.every(J=>"dashed"===J.props.strokeType)?"dashed":g.every(J=>"line"===J.props.strokeType)?"line":"mixed";return(0,xb.jsx)(Pn,{title:"Stroke Type",options:[{value:"line",icon:"circle"},{value:"dashed",icon:"circle-dashed"}],value:n,onValueChange:J=>{g.forEach(X=>{X.update({strokeType:J})});b.persist()}})}),AH=pf(()=>{const b=Fg(),g=gm(b.selectedShapesArray,"ArrowMode");var n=g.every(X=>{var la;return"arrow"===(null==(la=X.props.decorations)?
void 0:la.start)});const J=g.every(X=>{var la;return"arrow"===(null==(la=X.props.decorations)?void 0:la.end)});n=[n?"start":null,J?"end":null].filter(ih);return(0,xb.jsx)(Ho,{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:n,onValueChange:X=>{g.forEach(la=>{var va=la.update;var La={start:X.includes("start")?"arrow":null,end:X.includes("end")?"arrow":null};va.call(la,{decorations:La})});b.persist()}})}),BH=pf(()=>{const b=Fg(),g=gm(b.selectedShapesArray,
"TextStyle"),n=g.every(X=>500<X.props.fontWeight),J=g.every(X=>X.props.italic);return(0,xb.jsxs)("span",{className:"flex gap-1",children:[(0,xb.jsx)(Rk,{title:"Bold",className:"tl-button",pressed:n,onPressedChange:X=>{g.forEach(la=>{la.update({fontWeight:X?700:400});la.onResetBounds()});b.persist()},children:(0,xb.jsx)(Vh,{name:"bold"})}),(0,xb.jsx)(Rk,{title:"Italic",className:"tl-button",pressed:J,onPressedChange:X=>{g.forEach(la=>{la.update({italic:X});la.onResetBounds()});b.persist()},children:(0,xb.jsx)(Vh,
{name:"italic"})})]})}),CH=pf(()=>{var b;const g=Fg(),n=g.selectedShapesArray[0];return(0,xb.jsx)(iH,{onRefsChange:J=>{n.update({refs:J});g.persist()},refs:null!=(b=n.props.refs)?b:[],shapeType:n.props.type,side:"right",pageId:"logseq-portal"===n.props.type?n.props.pageId:void 0,portalType:"logseq-portal"===n.props.type?n.props.blockType:void 0})});In.set("Edit",rH);In.set("AutoResizing",sH);In.set("LogseqPortalViewMode",tH);In.set("ScaleLevel",uH);In.set("YoutubeLink",wH);In.set("IFrameSource",vH);
In.set("NoFill",xH);In.set("Swatch",yH);In.set("StrokeType",zH);In.set("ArrowMode",AH);In.set("TextStyle",BH);In.set("Links",CH);var GA=b=>{var g;return(null!=(g=mw[b])?g:[]).filter(ih)},DH=b=>{const g=b.map(J=>J.props.type),n=new Set(0<b.length?GA(g[0]):[]);for(let J=1;J<g.length&&0<n.size;J++){const X=GA(g[J]);n.forEach(la=>{X.includes(la)||n.delete(la)})}1<b.length&&qH.forEach(J=>{n.has(J)&&n.delete(J)});return Array.from(n).sort((J,X)=>FA.indexOf(J)-FA.indexOf(X)).map(J=>In.get(J))};xb=V(586);
var EH=pf(({shapes:b,offsets:g,hidden:n})=>{const J=Fg(),X=Cs.useRef(null),la=Cs.useRef(null);Cs.useLayoutEffect(()=>{setTimeout(()=>{const La=la.current;if(La){var {offsetWidth:Wa,offsetHeight:bb}=La;X.current=[Wa,bb]}})});Cs.useLayoutEffect(()=>{var La;const Wa=la.current;if(Wa){var bb=null!=(La=X.current)?La:[0,0];La=0;if(116>g.top){var pb=g.height/2+40;140>g.bottom&&(pb+=g.bottom-140)}else pb=-(g.height/2+40);16>g.left+g.width/2-bb[0]/2?La+=-(g.left+g.width/2-bb[0]/2-16):16>g.right+g.width/2-
bb[0]/2&&(La+=g.right+g.width/2-bb[0]/2-16);var [Db,Qb]=[La,pb];Wa.style.setProperty("transform",`translateX(${Db}px) translateY(${Qb}px)`)}},[g]);if(!J)return null;const va=DH(b);return(0,xb.jsx)(so,{centered:!0,children:0<va.length&&(0,xb.jsx)("div",{ref:la,className:"tl-toolbar tl-context-bar",style:{visibility:n?"hidden":"visible",pointerEvents:n?"none":"all"},children:va.map((La,Wa)=>(0,xb.jsxs)(Cs.Fragment,{children:[(0,xb.jsx)(La,{}),Wa<va.length-1&&(0,xb.jsx)(Pp,{className:"tl-toolbar-separator",
orientation:"vertical"})]},Wa))})})}),HA=Ja(V(22)),Pl=V(22),[FH]=Rj("ContextMenu",[Pt]),Ms=Pt(),[GH,IA]=FH("ContextMenu"),HH=(0,Pl.forwardRef)((b,g)=>{var {__scopeContextMenu:n}=b;const J=Qf(b,["__scopeContextMenu"]),X=IA("ContextMenuTrigger",n);n=Ms(n);const la=(0,Pl.useRef)({x:0,y:0}),va=(0,Pl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(xe({width:0,height:0},la.current))}),La=(0,Pl.useRef)(0),Wa=(0,Pl.useCallback)(()=>window.clearTimeout(La.current),[]);(0,Pl.useEffect)(()=>Wa,[Wa]);return(0,Pl.createElement)(Pl.Fragment,
null,(0,Pl.createElement)(sz,wf({},n,{virtualRef:va})),(0,Pl.createElement)(xj.span,wf({"data-state":X.open?"open":"closed"},J,{ref:g,style:xe({WebkitTouchCallout:"none"},b.style),onContextMenu:Mf(b.onContextMenu,bb=>{Wa();la.current={x:bb.clientX,y:bb.clientY};X.onOpenChange(!0);bb.preventDefault()}),onPointerDown:Mf(b.onPointerDown,An(bb=>{Wa();La.current=window.setTimeout(()=>{la.current={x:bb.clientX,y:bb.clientY};X.onOpenChange(!0)},700)})),onPointerMove:Mf(b.onPointerMove,An(Wa)),onPointerCancel:Mf(b.onPointerCancel,
An(Wa)),onPointerUp:Mf(b.onPointerUp,An(Wa))})))}),IH=(0,Pl.forwardRef)((b,g)=>{var {__scopeContextMenu:n}=b;const J=Qf(b,["__scopeContextMenu"]),X=IA("ContextMenuContent",n);n=Ms(n);const la=(0,Pl.useRef)(!1);return(0,Pl.createElement)(uz,wf({},n,J,{ref:g,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:va=>{var La;null===(La=b.onCloseAutoFocus)||void 0===La||La.call(b,va);!va.defaultPrevented&&la.current&&va.preventDefault();la.current=!1},onInteractOutside:va=>{var La;null===(La=b.onInteractOutside)||
void 0===La||La.call(b,va);va.defaultPrevented||X.modal||(la.current=!0)},style:of(xe({},b.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),sn=(0,Pl.forwardRef)((b,g)=>{var {__scopeContextMenu:n}=b;b=Qf(b,["__scopeContextMenu"]);n=Ms(n);return(0,Pl.createElement)(wz,wf({},n,b,{ref:g}))}),Ns=(0,Pl.forwardRef)((b,g)=>{var {__scopeContextMenu:n}=b;b=Qf(b,["__scopeContextMenu"]);n=Ms(n);return(0,Pl.createElement)(GE,wf({},n,b,{ref:g}))}),JH=b=>{const {__scopeContextMenu:g,
children:n,onOpenChange:J,dir:X,modal:la=!0}=b,[va,La]=(0,Pl.useState)(!1);b=Ms(g);const Wa=Tf(J),bb=(0,Pl.useCallback)(pb=>{La(pb);Wa(pb)},[Wa]);return(0,Pl.createElement)(GH,{scope:g,open:va,onOpenChange:bb,modal:la},(0,Pl.createElement)(xz,wf({},b,{dir:X,open:va,onOpenChange:bb,modal:la}),n))};xb=V(586);var KH=pf(function({children:b,collisionRef:g}){var n,J,X,la,va,La;const Wa=Fg(),bb=HA.useRef(null),pb=Qb=>{Qb();Wa.transition("select")},Db=HA.useMemo(()=>{var Qb,oc,ac;return(null==(ac=null==
(oc=null==(Qb=null==window?void 0:window.logseq)?void 0:Qb.api)?void 0:oc.get_state_from_store)?void 0:ac.call(oc,"ui/developer-mode?"))||!1},[]);return(0,xb.jsxs)(JH,{onOpenChange:Qb=>{Qb&&!Wa.isIn("select.contextMenu")?Wa.transition("select").selectedTool.transition("contextMenu"):!Qb&&Wa.isIn("select.contextMenu")&&Wa.selectedTool.transition("idle")},children:[(0,xb.jsx)(HH,{children:b}),(0,xb.jsx)(IH,{className:"tl-menu tl-context-menu",ref:bb,onEscapeKeyDown:()=>Wa.transition("select"),collisionBoundary:g.current,
asChild:!0,tabIndex:-1,children:(0,xb.jsxs)("div",{children:[1<(null==(n=Wa.selectedShapes)?void 0:n.size)&&(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsxs)(sn,{children:[(0,xb.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,xb.jsx)(Gf,{title:"Align left",onClick:()=>pb(()=>Wa.align("left")),children:(0,xb.jsx)(Vh,{name:"layout-align-left"})}),(0,xb.jsx)(Gf,{title:"Align center horizontally",onClick:()=>pb(()=>Wa.align("centerHorizontal")),children:(0,xb.jsx)(Vh,{name:"layout-align-center"})}),
(0,xb.jsx)(Gf,{title:"Align right",onClick:()=>pb(()=>Wa.align("right")),children:(0,xb.jsx)(Vh,{name:"layout-align-right"})}),(0,xb.jsx)(Pp,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,xb.jsx)(Gf,{title:"Distribute horizontally",onClick:()=>pb(()=>Wa.distribute("horizontal")),children:(0,xb.jsx)(Vh,{name:"layout-distribute-vertical"})})]}),(0,xb.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,xb.jsx)(Gf,{title:"Align top",onClick:()=>pb(()=>Wa.align("top")),children:(0,xb.jsx)(Vh,
{name:"layout-align-top"})}),(0,xb.jsx)(Gf,{title:"Align center vertically",onClick:()=>pb(()=>Wa.align("centerVertical")),children:(0,xb.jsx)(Vh,{name:"layout-align-middle"})}),(0,xb.jsx)(Gf,{title:"Align bottom",onClick:()=>pb(()=>Wa.align("bottom")),children:(0,xb.jsx)(Vh,{name:"layout-align-bottom"})}),(0,xb.jsx)(Pp,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,xb.jsx)(Gf,{title:"Distribute vertically",onClick:()=>pb(()=>Wa.distribute("vertical")),children:(0,xb.jsx)(Vh,{name:"layout-distribute-horizontal"})})]})]}),
(0,xb.jsx)(Ns,{className:"menu-separator"}),(0,xb.jsxs)(sn,{className:"tl-menu-item",onClick:()=>pb(Wa.packIntoRectangle),children:[(0,xb.jsx)(Vh,{className:"tl-menu-icon",name:"layout-grid"}),"Pack into rectangle"]}),(0,xb.jsx)(Ns,{className:"menu-separator"})]}),0<(null==(J=Wa.selectedShapes)?void 0:J.size)&&(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsxs)(sn,{className:"tl-menu-item",onClick:()=>pb(Wa.cut),children:[(0,xb.jsx)(Vh,{className:"tl-menu-icon",name:"cut"}),"Cut",(0,xb.jsx)("div",{className:"tl-menu-right-slot",
children:(0,xb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,xb.jsx)("code",{children:Kp})," ",(0,xb.jsx)("code",{children:"X"})]})})]}),(0,xb.jsxs)(sn,{className:"tl-menu-item",onClick:()=>pb(Wa.copy),children:[(0,xb.jsx)(Vh,{className:"tl-menu-icon",name:"copy"}),"Copy",(0,xb.jsx)("div",{className:"tl-menu-right-slot",children:(0,xb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,xb.jsx)("code",{children:Kp})," ",(0,xb.jsx)("code",{children:"C"})]})})]})]}),(0,xb.jsxs)(sn,{className:"tl-menu-item",
onClick:()=>pb(Wa.paste),children:[(0,xb.jsx)(Vh,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,xb.jsx)("div",{className:"tl-menu-right-slot",children:(0,xb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,xb.jsx)("code",{children:Kp})," ",(0,xb.jsx)("code",{children:"V"})]})})]}),1===(null==(X=Wa.selectedShapes)?void 0:X.size)&&(0,xb.jsxs)(sn,{className:"tl-menu-item",onClick:()=>pb(()=>Wa.paste(void 0,!0)),children:["Paste as link",(0,xb.jsx)("div",{className:"tl-menu-right-slot",
children:(0,xb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,xb.jsx)("code",{children:Kp})," ",(0,xb.jsx)("code",{children:"⇧"})," ",(0,xb.jsx)("code",{children:"V"})]})})]}),(0,xb.jsx)(Ns,{className:"menu-separator"}),(0,xb.jsxs)(sn,{className:"tl-menu-item",onClick:()=>pb(Wa.api.selectAll),children:["Select all",(0,xb.jsx)("div",{className:"tl-menu-right-slot",children:(0,xb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,xb.jsx)("code",{children:Kp})," ",(0,xb.jsx)("code",{children:"A"})]})})]}),
1<(null==(la=Wa.selectedShapes)?void 0:la.size)&&(0,xb.jsx)(sn,{className:"tl-menu-item",onClick:()=>pb(Wa.api.deselectAll),children:"Deselect all"}),0<(null==(va=Wa.selectedShapes)?void 0:va.size)&&(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsxs)(sn,{className:"tl-menu-item",onClick:()=>pb(Wa.api.deleteShapes),children:[(0,xb.jsx)(Vh,{className:"tl-menu-icon",name:"backspace"}),"Delete",(0,xb.jsx)("div",{className:"tl-menu-right-slot",children:(0,xb.jsx)("span",{className:"keyboard-shortcut",children:(0,xb.jsx)("code",
{children:"Del"})})})]}),1<(null==(La=Wa.selectedShapes)?void 0:La.size)&&(0,xb.jsxs)(xb.Fragment,{children:[(0,xb.jsx)(Ns,{className:"menu-separator"}),(0,xb.jsxs)(sn,{className:"tl-menu-item",onClick:()=>pb(Wa.flipHorizontal),children:[(0,xb.jsx)(Vh,{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,xb.jsxs)(sn,{className:"tl-menu-item",onClick:()=>pb(Wa.flipVertical),children:[(0,xb.jsx)(Vh,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),(0,xb.jsx)(Ns,
{className:"menu-separator"}),(0,xb.jsxs)(sn,{className:"tl-menu-item",onClick:()=>pb(Wa.bringToFront),children:["Move to front",(0,xb.jsx)("div",{className:"tl-menu-right-slot",children:(0,xb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,xb.jsx)("code",{children:"⇧"})," ",(0,xb.jsx)("code",{children:"]"})]})})]}),(0,xb.jsxs)(sn,{className:"tl-menu-item",onClick:()=>pb(Wa.sendToBack),children:["Move to back",(0,xb.jsx)("div",{className:"tl-menu-right-slot",children:(0,xb.jsxs)("span",{className:"keyboard-shortcut",
children:[(0,xb.jsx)("code",{children:"⇧"})," ",(0,xb.jsx)("code",{children:"["})]})})]}),Db&&(0,xb.jsx)(sn,{className:"tl-menu-item",onClick:()=>{1===Wa.selectedShapesArray.length?console.log(Cc(Wa.selectedShapesArray[0].serialized)):console.log(Wa.selectedShapesArray.map(Qb=>Cc(Qb.serialized)))},children:"(Dev) Print shape props"})]})]})})]})}),LH=Ja(V(22));xb=V(586);var MH=pf(({shape:b})=>{const g=LH.default.useMemo(()=>{var n;const J=[...(null!=(n=b.props.refs)?n:[])].map(X=>[X,!0]);"logseq-portal"===
b.props.type&&b.props.pageId&&J.unshift([b.props.pageId,!1]);return J},[b.props.type,b.props.parentId,b.props.refs]);return 0===g.length?null:(0,xb.jsx)("div",{className:"tl-quick-links",title:"Shape Quick Links",children:g.map(([n,J])=>(0,xb.jsx)("div",{className:"tl-quick-links-row",children:(0,xb.jsx)(Wz,{id:n,showReferenceContent:J})},n))})}),NH=Ja(V(22)),JA=Ja(V(22)),OH=[".png",".svg",".jpg",".jpeg",".gif"],PH=[".mp4",".webm",".ogg"],QH=(b,g,n)=>eb(void 0,[b,g,n],function*(J,{point:X,shiftKey:la,
dataTransfer:va,fromDrop:La},Wa){function bb(Uc,Xc){return eb(this,null,function*(){const Ad=Object.values(J.assets).find(Ed=>Ed.src===Uc);return Ad?Ad:{id:Kd(),type:Xc?"video":"image",src:Uc,size:yield sj(Wa.makeAssetUrl(Uc),Xc)}})}function pb(Uc){return eb(this,null,function*(){const Xc=Uc.filter(Ad=>"unknown"!==Gm(Ad.name)).map(Ad=>eb(this,null,function*(){try{const Ed=yield Wa.saveAsset(Ad);return yield bb(Ed,"video"===Gm(Ad.name))}catch(Ed){console.error(Ed)}return null}));return(yield Promise.all(Xc)).filter(ih)})}
function Db(Uc){return[of(xe({},Rp.defaultProps),{html:Uc,point:[X[0],X[1]]})]}function Qb(Uc){return eb(this,null,function*(){return Wm(ac,xc,Tb,pc)(Uc)})}function oc(){return eb(this,null,function*(){const Uc=yield navigator.clipboard.read(),Xc=Wm(xc,Tb);return(yield Promise.all(Uc.map(Ad=>Xc(Ad)))).flat().filter(ih)})}function ac(Uc){return eb(this,null,function*(){var Xc=Array.from(Uc.files);return 0<Xc.length?(Fe=Xc=yield pb(Xc),Xc.map((Ad,Ed)=>{const Pd=of(xe({},"video"===Ad.type?du.defaultProps:
cu.defaultProps),{id:Kd(),assetId:Ad.id,opacity:1});Ad.size&&Object.assign(Pd,{point:[X[0]-Ad.size[0]/4+16*Ed,X[1]-Ad.size[1]/4+16*Ed],size:sd.div(Ad.size,2)});return Pd})):null})}function xc(Uc){return eb(this,null,function*(){if(Uc.types.includes("text/plain")&&(la||La))return null;const Xc=yield Xm(Uc,"text/html");return Xc?Wm(tc,Db)(Xc):null})}function pc(Uc){return eb(this,null,function*(){var Xc,Ad,Ed,Pd,De,Ge,Pe=Uc.getData("block-uuid");if(Pe){Pe=Pe.trim();const Ff=null==(Ed=null==(Ad=null==
(Xc=window.logseq)?void 0:Xc.api)?void 0:Ad.get_selected_blocks)?void 0:Ed.call(Ad);Xc=Ff&&1<(null==Ff?void 0:Ff.length)?Ff.map(lf=>lf.uuid):[Pe];null==(Ge=null==(De=null==(Pd=window.logseq)?void 0:Pd.api)?void 0:De.set_blocks_id)?void 0:Ge.call(De,Xc);Pd=Xc.map(lf=>rd(`((${lf}))`));return(yield Promise.all(Pd)).flat().filter(ih).map((lf,gh)=>of(xe({},lf),{point:[X[0]+(Bl.defaultProps.size[0]+16)*gh,X[1]]}))}return null})}function Tb(Uc){return eb(this,null,function*(){var Xc=yield Xm(Uc,"text/plain");
return Xc?(Xc=Xc.trim(),Wm(Qc,Wc,rd)(Xc)):null})}function tc(Uc){if(Uc=J.api.getClonedShapesFromTldrString(decodeURIComponent(Uc),X)){const {shapes:Xc,assets:Ad,bindings:Ed}=Uc;Se.push(...Ad);mf.push(...Ed);return Xc}return null}function Qc(Uc){return eb(this,null,function*(){try{new URL(Uc);var Xc=!0}catch(Ad){Xc=!1}return!Xc||la||La?null:/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/.test(Uc)?[of(xe({},Qq.defaultProps),{url:Uc,
point:[X[0],X[1]]})]:[of(xe({},Pq.defaultProps),{url:Uc,point:[X[0],X[1]]})]})}function Wc(Uc){return Uc.startsWith("\x3ciframe")?[of(xe({},Rp.defaultProps),{html:Uc,point:[X[0],X[1]]})]:null}function rd(Uc){return eb(this,null,function*(){if(/^\(\(.*\)\)$/.test(Uc)&&40===Uc.length){var Xc=Uc.slice(2,-2);if(Uh(Xc))return[of(xe({},Bl.defaultProps),{point:[X[0],X[1]],size:[400,0],pageId:Xc,fill:J.settings.color,stroke:J.settings.color,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(Uc))return Xc=Uc.slice(2,
-2),[of(xe({},Bl.defaultProps),{point:[X[0],X[1]],size:[400,0],pageId:Xc,fill:J.settings.color,stroke:J.settings.color,blockType:"P"})];return(Xc=null==Wa?void 0:Wa.addNewBlock(Uc))?[of(xe({},Bl.defaultProps),{size:[400,0],point:[X[0],X[1]],pageId:Xc,fill:J.settings.color,stroke:J.settings.color,blockType:"B",compact:!0})]:null})}var $d,ke;let Fe=[],Se=[];const mf=[];J.cursors.setCursor("progress");let ff=[];try{va?ff.push(...(null!=($d=yield Qb(va))?$d:[])):ff.push(...(null!=(ke=yield oc())?ke:[]))}catch(Uc){console.error(Uc)}const Xe=
ff.map(Uc=>of(xe({},Uc),{parentId:J.currentPageId,id:Uh(Uc.id)?Uc.id:Kd()})),Me=null==va?void 0:va.types.every(Uc=>"Files"===Uc);J.wrapUpdate(()=>{var Uc=[...Fe,...Se];0<Uc.length&&J.createAssets(Uc);0<Xe.length&&J.createShapes(Xe);J.currentPage.updateBindings(Object.fromEntries(mf.map(Xc=>[Xc.id,Xc])));if(1===J.selectedShapesArray.length&&1===Xe.length&&!La){Uc=J.selectedShapesArray[0];const Xc=J.getShapeById(Xe[0].id);J.createNewLineBinding(Uc,Xc)}J.setSelectedShapes(Xe.map(Xc=>Xc.id));J.selectedTool.transition("idle");
J.cursors.setCursor("default");(La||Me)&&J.packIntoRectangle()})}),RH=Ja(V(22));xb=V(586);var SH=[ew,mA,nA,fw,gw,hw,iw,jw,oA,sA,rA,Ls],TH=b=>{const {renderers:g}=ur.useContext(to);return(0,xb.jsx)(g.BacklinksCount,of(xe({},b),{options:{"portal?":!1}}))},UH=()=>{const b=ur.useRef(null),g=Fg(),n=ur.useMemo(()=>({ContextBar:EH,BacklinksCount:TH,QuickLinks:MH}),[]);return(0,xb.jsx)(KH,{collisionRef:b,children:(0,xb.jsx)("div",{ref:b,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":g.uuid,
children:(0,xb.jsx)($C,{components:n,children:(0,xb.jsx)(kF,{})})})})},VH=b=>{var {onPersist:g,model:n}=b;b=Qf(b,["onPersist","model"]);const J=Eo(),X=fo(),la=Fo(),va=ur.useCallback((La,Wa)=>{(0,Yx.default)(La.serialized,n)||(null==g?void 0:g(La,Wa))},[n]);return(0,xb.jsx)(bD,of(xe({Shapes:lA,Tools:SH,onDrop:J,onPaste:X,onCanvasDBClick:la,onPersist:va,model:n},b),{children:(0,xb.jsx)(UH,{})}))},WH=function(b){var {renderers:g,handlers:n}=b;b=Qf(b,["renderers","handlers"]);const J={renderers:ur.useMemo(()=>
Object.fromEntries(Object.entries(g).map(([X,la])=>[X,ur.memo(la)])),[]),handlers:n};return(0,xb.jsx)(to.Provider,{value:J,children:(0,xb.jsx)(VH,xe({},b))})}};
'use strict';var p5c=function(a){return a},q5c=function(a){a=$APP.UD(a);return $APP.In.j($APP.kK,a)},r5c=function(a){var b=$APP.Kv.C($APP.cE(a));a=q5c(a);a=$APP.lg.j(function(d){return $APP.B.j(b,$APP.Kv.C($APP.vC.C(d)))},a);var c=$APP.vh($APP.In.j($APP.Vb,$APP.Sh.j(function(d){return $APP.Cv.F(d,new $APP.Q(null,2,5,$APP.S,[$APP.wC,$APP.Kv],null),null)},a)));a=$APP.In.j(function(d){d=$APP.Kv.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},s5c=function(){return $APP.an(null,
function(){return $APP.an(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.an(a.text(),function(b){return $APP.an($APP.Lwa(b),function(c){return $APP.Tm(c)})})})})},t5c=function(a){var b=$APP.zTa();return($APP.Od(b)||$APP.B.j(1,$APP.qd(b))&&$APP.B.j(a,$APP.vs.C($APP.A(b))))&&$APP.Yb($APP.Cv.j($APP.v($APP.ez),new $APP.Q(null,1,5,$APP.S,[$APP.H3b],null)))},u5c=function(a){return null!=a?$APP.dn($APP.an(null,function(){return $APP.an(s5c(),function(b){var c=$APP.Df(b);b=$APP.H.j(c,$APP.zE);
c=$APP.H.j(c,$APP.rC);var d=$APP.A(b);b=$APP.il.j($APP.Pu,$APP.Sh.j($APP.L$a,$APP.lg.j($APP.kK,c)));d=$APP.M$a(d);c=$APP.KN.C(d);d=$APP.dF.C(d);a.cloneShapesIntoCurrentPage($APP.nj(new $APP.m(null,3,[$APP.otb,b,$APP.KN,c,$APP.dF,d],null)));$APP.gz($APP.H3b,!0);b=$APP.Ky($APP.T7b,!0);return $APP.Tm(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},x5c=function(a,b){b=$APP.Hr.G(b,$APP.E([new $APP.m(null,1,[$APP.Ir,!0],null)]));b=$APP.Df(b);var c=$APP.H.j(b,
v5c),d=$APP.H.j(b,$APP.aH),e=$APP.H.j(b,w5c),f=$APP.dz();return $APP.an(null,function(){return $APP.an($APP.n(d)?$APP.T5a(f,a,new $APP.m(null,1,[$APP.ou,100],null)):null,function(g){return $APP.an($APP.n(c)?$APP.Y5a(a,10):null,function(h){return $APP.an($APP.n(e)?$APP.Z5a(a,100):null,function(l){return $APP.Tm($APP.nj(new $APP.m(null,3,[$APP.zE,h,$APP.rC,g,$APP.F2a,l],null)))})})})})},y5c=function(a){return $APP.Ym($APP.Kob($APP.dz(),new $APP.Q(null,1,5,$APP.S,[$APP.Hr.C(a)],null)),function(b){var c=
(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.D.F(c,0,null),$APP.D.F(c,1,null),c=$APP.D.F(c,2,null),$APP.Mob($APP.n(c)?c:b)):null})},H5c=function(a){return $APP.fh([z5c,A5c,$APP.GA,B5c,C5c,D5c,E5c,F5c,G5c],[function(b){return $APP.wtb(b)},$APP.BE,x5c,y5c,p5c,function(b){var c=$APP.u,d=c.C,e=$APP.iy(),f=$APP.cE(a),g=r5c(a);b=new $APP.m(null,6,[$APP.wC,$APP.ph($APP.n(g)?g:f,new $APP.Q(null,1,5,$APP.S,[$APP.Kv],null)),$APP.iA,e,$APP.DD,$APP.n(b)?b:"",$APP.UC,$APP.ws,$APP.$B,new $APP.m(null,1,[$APP.vs,
$APP.us.C?$APP.us.C(a):$APP.us.call(null,a)],null),$APP.vC,new $APP.m(null,1,[$APP.vs,a],null)],null);$APP.kC(new $APP.Q(null,1,5,$APP.S,[b],null));return d.call(c,e)},function(b,c){return $APP.fA($APP.dz(),$APP.Kv.C($APP.cE(b)),$APP.Th.C(c))},function(b){var c=$APP.n($APP.qt(b))?$APP.vs.C($APP.NRa($APP.dz(),$APP.bj(b))):null;c=$APP.n(c)?c:b;var d=$APP.WD(c),e=$APP.BE(c);return $APP.n(d)?$APP.n(e)?$APP.NJ(c,new $APP.m(null,1,[$APP.MJ,b],null)):$APP.LJ(b):null},function(b){return $APP.nj($APP.vD($APP.bj(b)))}])},
G5c=new $APP.M(null,"queryBlockByUUID","queryBlockByUUID",2091812895),D5c=new $APP.M(null,"addNewBlock","addNewBlock",1426762680),w5c=new $APP.M(null,"files?","files?",-1267491104),I5c=new $APP.M(null,"renderers","renderers",-1460292282),J5c=new $APP.M(null,"model","model",331153215),K5c=new $APP.M(null,"onMount","onMount",-876858467),C5c=new $APP.M(null,"makeAssetUrl","makeAssetUrl",217779988),L5c=new $APP.M(null,"onPersist","onPersist",-1848738852),M5c=new $APP.M(null,"Breadcrumb","Breadcrumb",
-1351298906),F5c=new $APP.M(null,"redirectToPage","redirectToPage",87147838),z5c=new $APP.M(null,"addNewWhiteboard","addNewWhiteboard",554297706),B5c=new $APP.M(null,"saveAsset","saveAsset",-668047853),N5c=new $APP.M(null,"BacklinksCount","BacklinksCount",364670631),O5c=new $APP.M(null,"Block","Block",-1959785792),E5c=new $APP.M(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),P5c=new $APP.M(null,"Page","Page",-1267059506),v5c=new $APP.M(null,"pages?","pages?",-2065014049),Q5c=new $APP.M(null,
"PageName","PageName",-164991013),A5c=new $APP.M(null,"isWhiteboardPage","isWhiteboardPage",-134150579),R5c=new $APP.M(null,"BlockReference","BlockReference",-120254741);$APP.mda("tldraw");var S5c=$APP.ln(590);var T5c,U5c;$APP.NXc={};T5c=$APP.WR($APP.za(S5c,"App"));$APP.QXc=$APP.za(S5c,"generateJSXFromModel");
U5c=new $APP.m(null,6,[P5c,$APP.Xs($APP.at,function(a){return(0,$APP.cXc)(new $APP.m(null,2,[$APP.mK,$APP.za(a,"pageName"),$APP.Gsb,!0],null))},null,"frontend.extensions.tldraw/page-cp"),O5c,$APP.Xs($APP.at,function(a){a=$APP.xi($APP.za(a,"blockId"));var b=$APP.pLa($APP.PYb);a=b.C?b.C(a):b.call(null,a);return $APP.Ks(a)},null,"frontend.extensions.tldraw/block-cp"),M5c,$APP.Xs($APP.at,function(a){return $APP.Ks($APP.aV(new $APP.m(null,1,[$APP.PY,!0],null),$APP.dz(),$APP.xi($APP.za(a,"blockId")),new $APP.m(null,
2,[$APP.WOb,$APP.za(a,"endSeparator"),$APP.XOb,$APP.za(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),Q5c,$APP.Xs($APP.at,function(a){return(0,$APP.IU)(new $APP.m(null,1,[$APP.PY,!0],null),new $APP.m(null,1,[$APP.vs,$APP.za(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),N5c,function(a){return $APP.Rf.j($APP.TXc,$APP.Sh.j(function(b){return $APP.Hr.G($APP.za(a,b),$APP.E([new $APP.m(null,1,[$APP.Ir,!0],null)]))},new $APP.Q(null,3,5,$APP.S,["id","className",
"options"],null)))},R5c,$APP.Xs($APP.at,function(a){return(0,$APP.jNb)($APP.Cf,$APP.za(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference")],null);
$APP.OXc=$APP.Xs($APP.at,function(a,b){function c(l){var p=$APP.za(l,"api");return $APP.n(p)?$APP.Ym(d?u5c(p):null,function(){$APP.iMa(l,b);return h.C?h.C(l):h.call(null,l)}):null}var d=t5c(a),e=$APP.Ctb(a),f=$APP.kt(null),g=$APP.D.F(f,0,null),h=$APP.D.F(f,1,null);$APP.lt(function(){$APP.n($APP.n(g)?b:g)&&$APP.iMa(g,b);return function(){return $APP.Xc}},new $APP.Q(null,2,5,$APP.S,[b,g],null));return $APP.n(e)?$APP.X("div",{style:{overscrollBehavior:"none"},onBlur:function(l){l=$APP.za(l,"target").tagName;
var p=new $APP.qh(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.hA():null},onWheel:$APP.Ft,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.Yb(g)?$APP.X("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.Ks($APP.iS("Loading onboarding whiteboard ..."))]):null,$APP.Ks(function(){var l=new $APP.m(null,5,[I5c,U5c,$APP.Cy,H5c(a),K5c,c,L5c,function(p){return $APP.qtb(a,$APP.za(p,
"serialized"))},J5c,e],null);return T5c.C?T5c.C(l):T5c.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.hb.Fi();
}).call(this);